(function(){var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t=="object"&&t&&!isArray(t)&&!isFunction(t)&&!(t instanceof RegExp)?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function m(e){var t,n;for(t=0;t<e.length;t++){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===0||t==1&&e[2]===".."||e[t-1]==="..")continue;t>0&&(e.splice(t-1,2),t-=2)}}}function g(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,v,g=t&&t.split("/"),y=o.map,b=y&&y["*"];e&&(e=e.split("/"),l=e.length-1,o.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),e[0].charAt(0)==="."&&g&&(v=g.slice(0,g.length-1),e=v.concat(e)),m(e),e=e.join("/"));if(n&&y&&(g||b)){s=e.split("/");e:for(u=s.length;u>0;u-=1){f=s.slice(0,u).join("/");if(g)for(a=g.length;a>0;a-=1){i=getOwn(y,g.slice(0,a).join("/"));if(i){i=getOwn(i,f);if(i){c=i,h=u;break e}}}!p&&b&&getOwn(b,f)&&(p=getOwn(b,f),d=u)}!c&&p&&(c=p,h=d),c&&(s.splice(0,h,c),e=s.join("/"))}return r=getOwn(o.pkgs,e),r?r:e}function y(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),r.require.undef(e),r.makeRequire(null,{skipMap:!0})([e]),!0}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,p=!0,m="";return e||(p=!1,e="_@r"+(d+=1)),a=w(e),f=a[0],e=a[1],f&&(f=g(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?m=o.normalize(e,function(e){return g(e,l,i)}):m=e.indexOf("!")===-1?g(e,l,i):e:(m=g(e,l,i),a=w(m),f=a[0],m=a[1],n=!0,s=r.nameToUrl(m))),u=f&&!o&&!n?"_unnormalized"+(v+=1):"",{prefix:f,name:m,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:p,id:(f?f+"!"+m:m)+u}}function S(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function x(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=S(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function T(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function N(){globalDefQueue.length&&(apsp.apply(l,[l.length,0].concat(globalDefQueue)),globalDefQueue=[])}function C(e){delete u[e],delete a[e]}function k(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):k(o,t,n))}),n[r]=!0)}function L(){var e,n,i=o.waitSeconds*1e3,u=i&&r.startTime+i<(new Date).getTime(),f=[],l=[],c=!1,h=!0;if(t)return;t=!0,eachProp(a,function(e){var t=e.map,r=t.id;if(!e.enabled)return;t.isDefine||l.push(e);if(!e.error)if(!e.inited&&u)b(r)?(n=!0,c=!0):(f.push(r),y(r));else if(!e.inited&&e.fetched&&t.isDefine){c=!0;if(!t.prefix)return h=!1}});if(u&&f.length)return e=makeError("timeout","Load timeout for modules: "+f,null,f),e.contextName=r.contextName,T(e);h&&each(l,function(e){k(e,{},{})}),(!u||n)&&c&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,L()},50)),t=!1}function A(e){hasProp(c,e[0])||S(E(e[0],null,!0)).init(e[1],e[2])}function O(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function M(e){var t=e.currentTarget||e.srcElement;return O(t,r.onScriptLoad,"load","onreadystatechange"),O(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;N();while(l.length){e=l.shift();if(e[0]===null)return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));A(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p={},d=1,v=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?c[e.map.id]=e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(o.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&s===undefined&&(t=this.module,t?s=t.exports:this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",T(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),C(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=E(e.prefix);this.depMaps.push(n),x(n,"defined",bind(this,function(n){var i,s,a,f=getOwn(p,this.map.id),l=this.map.name,c=this.map.parentMap?this.map.parentMap.name:null,h=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(l=n.normalize(l,function(e){return g(e,c,!0)})||""),s=E(e.prefix+"!"+l,this.map.parentMap),x(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}if(f){this.map.url=r.nameToUrl(f),this.load();return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&C(e.map.id)}),T(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=E(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),S(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return T(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),h([u],i)}),n.load(e.name,h,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=E(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,x(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&x(e,"error",bind(this,this.errback))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:E,nextTick:req.nextTick,onError:T,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(o[t]||(o[t]={}),mixin(o[t],e,!0,!0)):o[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),t[n]=e}),o.shim=t),e.packages&&each(e.packages,function(e){var t,n;e=typeof e=="string"?{name:e}:e,n=e.name,t=e.location,t&&(o.paths[n]=e.location),o.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=E(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?T(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=E(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:T(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),r.nextTick(function(){_(),p=S(E(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),L()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,E(e,t,!1,!0).id)},specified:function(e){return e=E(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){N();var n=E(e,t,!0),r=getOwn(u,e);y(e),delete c[e],delete h[n.url],delete f[e],eachReverse(l,function(t,n){t[0]===e&&l.splice(n,1)}),r&&(r.events.defined&&(f[e]=r.events),C(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&S(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;N();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);A(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(b(e))return;return T(makeError("nodefine","No define call for "+e,null,[e]))}A([e,i.deps||[],i.exportsFn])}L()},nameToUrl:function(e,t,n){var i,s,u,a,f,l,c,h=getOwn(o.pkgs,e);h&&(e=h),c=getOwn(p,e);if(c)return r.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))f=e+(t||"");else{i=o.paths,s=e.split("/");for(u=s.length;u>0;u-=1){a=s.slice(0,u).join("/"),l=getOwn(i,a);if(l){isArray(l)&&(l=l[0]),s.splice(0,u,l);break}}f=s.join("/"),f+=t||(/^data\:|\?/.test(f)||n?"":".js"),f=(f.charAt(0)==="/"||f.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+f}return o.urlArgs?f+((f.indexOf("?")===-1?"?":"&")+o.urlArgs):f},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=M(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=M(e);if(!b(t.id))return T(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.15",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&typeof navigator!="undefined"&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("require.js",function(){}),function(e){define("underscore",[],function(){return function(){return function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.5.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t==null?x.identity:t);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){return x.unzip.apply(x,u.call(arguments))},x.unzip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i=null;return function(){var s=this,o=arguments,u=function(){i=null,n||(r=e.apply(s,o))},a=n&&!i;return clearTimeout(i),i=setTimeout(u,t),a&&(r=e.apply(s,o)),r}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),e._=_}.apply(e,arguments)})}(this),function(e,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}(typeof window!="undefined"?window:this,function(e,t){function y(e){var t=e.length,n=p.type(e);return n==="function"||p.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function x(e,t,n){if(p.isFunction(t))return p.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return p.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(S.test(t))return p.filter(t,e,n);t=p.filter(t,e)}return p.grep(e,function(e){return p.inArray(e,t)>=0!==n})}function O(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function D(e){var t=_[e]={};return p.each(e.match(M)||[],function(e,n){t[n]=!0}),t}function H(){N.addEventListener?(N.removeEventListener("DOMContentLoaded",B,!1),e.removeEventListener("load",B,!1)):(N.detachEvent("onreadystatechange",B),e.detachEvent("onload",B))}function B(){if(N.addEventListener||event.type==="load"||N.readyState==="complete")H(),p.ready()}function R(e,t,n){if(n===undefined&&e.nodeType===1){var r="data-"+t.replace(q,"-$1").toLowerCase();n=e.getAttribute(r);if(typeof n=="string"){try{n=n==="true"?!0:n==="false"?!1:n==="null"?null:+n+""===n?+n:I.test(n)?p.parseJSON(n):n}catch(i){}p.data(e,t,n)}else n=undefined}return n}function U(e){var t;for(t in e){if(t==="data"&&p.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function z(e,t,r,i){if(!p.acceptData(e))return;var s,o,u=p.expando,a=e.nodeType,f=a?p.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===undefined&&typeof t=="string")return;l||(a?l=e[u]=n.pop()||p.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:p.noop});if(typeof t=="object"||typeof t=="function")i?f[l]=p.extend(f[l],t):f[l].data=p.extend(f[l].data,t);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==undefined&&(o[p.camelCase(t)]=r),typeof t=="string"?(s=o[t],s==null&&(s=o[p.camelCase(t)])):s=o,s}function W(e,t,n){if(!p.acceptData(e))return;var r,i,s=e.nodeType,o=s?p.cache:e,u=s?e[p.expando]:p.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){p.isArray(t)?t=t.concat(p.map(t,p.camelCase)):t in r?t=[t]:(t=p.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!U(r):!p.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!U(o[u]))return}s?p.cleanData([e],!0):c.deleteExpando||o!=o.window?delete o[u]:o[u]=null}function tt(){return!0}function nt(){return!1}function rt(){try{return N.activeElement}catch(e){}}function it(e){var t=st.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Et(e,t){var n,r,i=0,s=typeof e.getElementsByTagName!==j?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==j?e.querySelectorAll(t||"*"):undefined;if(!s)for(s=[],n=e.childNodes||e;(r=n[i])!=null;i++)!t||p.nodeName(r,t)?s.push(r):p.merge(s,Et(r,t));return t===undefined||t&&p.nodeName(e,t)?p.merge([e],s):s}function St(e){K.test(e.type)&&(e.defaultChecked=e.checked)}function xt(e,t){return p.nodeName(e,"table")&&p.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Tt(e){return e.type=(p.find.attr(e,"type")!==null)+"/"+e.type,e}function Nt(e){var t=mt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Ct(e,t){var n,r=0;for(;(n=e[r])!=null;r++)p._data(n,"globalEval",!t||p._data(t[r],"globalEval"))}function kt(e,t){if(t.nodeType!==1||!p.hasData(e))return;var n,r,i,s=p._data(e),o=p._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)p.event.add(t,n,u[n][r])}o.data&&(o.data=p.extend({},o.data))}function Lt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!c.noCloneEvent&&t[p.expando]){i=p._data(t);for(r in i.events)p.removeEvent(t,r,i.handle);t.removeAttribute(p.expando)}if(n==="script"&&t.text!==e.text)Tt(t).text=e.text,Nt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),c.html5Clone&&e.innerHTML&&!p.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&K.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function Mt(t,n){var r=p(n.createElement(t)).appendTo(n.body),i=e.getDefaultComputedStyle?e.getDefaultComputedStyle(r[0]).display:p.css(r[0],"display");return r.detach(),i}function _t(e){var t=N,n=Ot[e];if(!n){n=Mt(e,t);if(n==="none"||!n)At=(At||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(At[0].contentWindow||At[0].contentDocument).document,t.write(),t.close(),n=Mt(e,t),At.detach();Ot[e]=n}return n}function Ft(e,t){return{get:function(){var n=e();if(n==null)return;if(n){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function $t(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Vt.length;while(i--){t=Vt[i]+n;if(t in e)return t}return r}function Jt(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=p._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&$(r)&&(s[o]=p._data(r,"olddisplay",_t(r.nodeName)))):s[o]||(i=$(r),(n&&n!=="none"||!i)&&p._data(r,"olddisplay",i?n:p.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function Kt(e,t,n){var r=Ut.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Qt(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=p.css(e,n+V[s],!0,i)),r?(n==="content"&&(o-=p.css(e,"padding"+V[s],!0,i)),n!=="margin"&&(o-=p.css(e,"border"+V[s]+"Width",!0,i))):(o+=p.css(e,"padding"+V[s],!0,i),n!=="padding"&&(o+=p.css(e,"border"+V[s]+"Width",!0,i)));return o}function Gt(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=Ht(e),o=c.boxSizing()&&p.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Bt(e,t,s);if(i<0||i==null)i=e.style[t];if(Pt.test(i))return i;r=o&&(c.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Qt(e,t,n||(o?"border":"content"),r,s)+"px"}function Yt(e,t,n,r,i){return new Yt.prototype.init(e,t,n,r,i)}function un(){return setTimeout(function(){Zt=undefined}),Zt=p.now()}function an(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=V[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function fn(e,t,n){var r,i=(on[t]||[]).concat(on["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function ln(e,t,n){var r,i,s,o,u,a,f,l,h=this,d={},v=e.style,m=e.nodeType&&$(e),g=p._data(e,"fxshow");n.queue||(u=p._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,h.always(function(){h.always(function(){u.unqueued--,p.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[v.overflow,v.overflowX,v.overflowY],f=p.css(e,"display"),l=_t(e.nodeName),f==="none"&&(f=l),f==="inline"&&p.css(e,"float")==="none"&&(!c.inlineBlockNeedsLayout||l==="inline"?v.display="inline-block":v.zoom=1)),n.overflow&&(v.overflow="hidden",c.shrinkWrapBlocks()||h.always(function(){v.overflow=n.overflow[0],v.overflowX=n.overflow[1],v.overflowY=n.overflow[2]}));for(r in t){i=t[r];if(tn.exec(i)){delete t[r],s=s||i==="toggle";if(i===(m?"hide":"show")){if(i!=="show"||!g||g[r]===undefined)continue;m=!0}d[r]=g&&g[r]||p.style(e,r)}}if(!p.isEmptyObject(d)){g?"hidden"in g&&(m=g.hidden):g=p._data(e,"fxshow",{}),s&&(g.hidden=!m),m?p(e).show():h.done(function(){p(e).hide()}),h.done(function(){var t;p._removeData(e,"fxshow");for(t in d)p.style(e,t,d[t])});for(r in d)o=fn(m?g[r]:0,r,h),r in g||(g[r]=o.start,m&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}}function cn(e,t){var n,r,i,s,o;for(n in e){r=p.camelCase(n),i=t[r],s=e[n],p.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=p.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function hn(e,t,n){var r,i,s=0,o=sn.length,u=p.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Zt||un(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:p.extend({},t),opts:p.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zt||un(),duration:n.duration,tweens:[],createTween:function(t,n){var r=p.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;cn(l,f.opts.specialEasing);for(;s<o;s++){r=sn[s].call(f,e,l,f.opts);if(r)return r}return p.map(l,fn,f),p.isFunction(f.opts.start)&&f.opts.start.call(e,f),p.fx.timer(p.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function In(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(M)||[];if(p.isFunction(n))while(r=s[i++])r.charAt(0)==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,t,n,r){function o(u){var a;return i[u]=!0,p.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===Bn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Rn(e,t){var n,r,i=p.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&p.extend(!0,e,n),e}function Un(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*")a.shift(),i===undefined&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){a.unshift(o);break}if(a[0]in n)s=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){s=o;break}r||(r=o)}s=s||r}if(s)return s!==a[0]&&a.unshift(s),n[s]}function zn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function Kn(e,t,n,r){var i;if(p.isArray(t))p.each(t,function(t,i){n||Xn.test(e)?r(e,i):Kn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&p.type(t)==="object")for(i in t)Kn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Zn(){try{return new e.XMLHttpRequest}catch(t){}}function er(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function sr(e){return p.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=[],r=n.slice,i=n.concat,s=n.push,o=n.indexOf,u={},a=u.toString,f=u.hasOwnProperty,l="".trim,c={},h="1.11.0",p=function(e,t){return new p.fn.init(e,t)},d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,m=/-([\da-z])/gi,g=function(e,t){return t.toUpperCase()};p.fn=p.prototype={jquery:h,constructor:p,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return p.each(this,e,t)},map:function(e){return this.pushStack(p.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[u]||{},u++),typeof o!="object"&&!p.isFunction(o)&&(o={}),u===a&&(o=this,u--);for(;u<a;u++)if((i=arguments[u])!=null)for(r in i){e=o[r],n=i[r];if(o===n)continue;f&&n&&(p.isPlainObject(n)||(t=p.isArray(n)))?(t?(t=!1,s=e&&p.isArray(e)?e:[]):s=e&&p.isPlainObject(e)?e:{},o[r]=p.extend(f,s,n)):n!==undefined&&(o[r]=n)}return o},p.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return p.type(e)==="function"},isArray:Array.isArray||function(e){return p.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||p.type(e)!=="object"||e.nodeType||p.isWindow(e))return!1;try{if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(c.ownLast)for(t in e)return f.call(e,t);for(t in e);return t===undefined||f.call(e,t)},type:function(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?u[a.call(e)]||"object":typeof e},globalEval:function(t){t&&p.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(v,"ms-").replace(m,g)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=y(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:l&&!l.call("﻿ ")?function(e){return e==null?"":l.call(e)}:function(e){return e==null?"":(e+"").replace(d,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(y(Object(e))?p.merge(n,typeof e=="string"?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(o)return o.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=+t.length,r=0,i=e.length;while(r<n)e[i++]=t[r++];if(n!==n)while(t[r]!==undefined)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length,u=!n;for(;s<o;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,s=0,o=e.length,u=y(e),a=[];if(u)for(;s<o;s++)r=t(e[s],s,n),r!=null&&a.push(r);else for(s in e)r=t(e[s],s,n),r!=null&&a.push(r);return i.apply([],a)},guid:1,proxy:function(e,t){var n,i,s;return typeof t=="string"&&(s=e[t],t=e,e=s),p.isFunction(e)?(n=r.call(arguments,2),i=function(){return e.apply(t||this,n.concat(r.call(arguments)))},i.guid=e.guid=e.guid||p.guid++,i):undefined},now:function(){return+(new Date)},support:c}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var b=function(e){function rt(e,t,r,i){var s,o,u,a,f,h,v,m,w,E;(t?t.ownerDocument||t:b)!==c&&l(t),t=t||c,r=r||[];if(!e||typeof e!="string")return r;if((a=t.nodeType)!==1&&a!==9)return[];if(p&&!i){if(s=G.exec(e))if(u=s[1]){if(a===9){o=t.getElementById(u);if(!o||!o.parentNode)return r;if(o.id===u)return r.push(o),r}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&g(t,o)&&o.id===u)return r.push(o),r}else{if(s[2])return _.apply(r,t.getElementsByTagName(e)),r;if((u=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return _.apply(r,t.getElementsByClassName(u)),r}if(n.qsa&&(!d||!d.test(e))){m=v=y,w=t,E=a===9&&e;if(a===1&&t.nodeName.toLowerCase()!=="object"){h=dt(e),(v=t.getAttribute("id"))?m=v.replace(Z,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=h.length;while(f--)h[f]=m+vt(h[f]);w=Y.test(e)&&ht(t.parentNode)||t,E=h.join(",")}if(E)try{return _.apply(r,w.querySelectorAll(E)),r}catch(S){}finally{v||t.removeAttribute("id")}}}return xt(e.replace(R,"$1"),t,r,i)}function it(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function st(e){return e[y]=!0,e}function ot(e){var t=c.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ut(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function at(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||k)-(~e.sourceIndex||k);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e){return e&&typeof e.getElementsByTagName!==C&&e}function pt(){}function dt(e,t){var n,i,s,o,u,a,f,l=x[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=U.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=z.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(R," ")}),u=u.slice(n.length);for(o in r.filter)(i=$[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?rt.error(e):x(e,a).slice(0)}function vt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function mt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=E++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[w,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){a=t[y]||(t[y]={});if((u=a[r])&&u[0]===w&&u[1]===s)return f[2]=u[2];a[r]=f;if(f[2]=e(t,n,o))return!0}}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function yt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function bt(e,t,n,r,i,s){return r&&!r[y]&&(r=bt(r)),i&&!i[y]&&(i=bt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||St(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?yt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=yt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=yt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function wt(e){var t,n,i,s=e.length,o=r.relative[e[0].type],a=o||r.relative[" "],f=o?1:0,l=mt(function(e){return e===t},a,!0),c=mt(function(e){return P.call(t,e)>-1},a,!0),h=[function(e,n,r){return!o&&(r||n!==u)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;f<s;f++)if(n=r.relative[e[f].type])h=[mt(gt(h),n)];else{n=r.filter[e[f].type].apply(null,e[f].matches);if(n[y]){i=++f;for(;i<s;i++)if(r.relative[e[i].type])break;return bt(f>1&&gt(h),f>1&&vt(e.slice(0,f-1).concat({value:e[f-2].type===" "?"*":""})).replace(R,"$1"),n,f<i&&wt(e.slice(f,i)),i<s&&wt(e=e.slice(i)),i<s&&vt(e))}h.push(n)}return gt(h)}function Et(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,a,f,l){var h,p,d,v=0,m="0",g=s&&[],y=[],b=u,E=s||i&&r.find.TAG("*",l),S=w+=b==null?1:Math.random()||.1,x=E.length;l&&(u=o!==c&&o);for(;m!==x&&(h=E[m])!=null;m++){if(i&&h){p=0;while(d=e[p++])if(d(h,o,a)){f.push(h);break}l&&(w=S)}n&&((h=!d&&h)&&v--,s&&g.push(h))}v+=m;if(n&&m!==v){p=0;while(d=t[p++])d(g,y,o,a);if(s){if(v>0)while(m--)!g[m]&&!y[m]&&(y[m]=O.call(f));y=yt(y)}_.apply(f,y),l&&!s&&y.length>0&&v+t.length>1&&rt.uniqueSort(f)}return l&&(w=S,u=b),g};return n?st(s):s}function St(e,t,n){var r=0,i=t.length;for(;r<i;r++)rt(e,t[r],n);return n}function xt(e,t,i,s){var u,a,f,l,c,h=dt(e);if(!s&&h.length===1){a=h[0]=h[0].slice(0);if(a.length>2&&(f=a[0]).type==="ID"&&n.getById&&t.nodeType===9&&p&&r.relative[a[1].type]){t=(r.find.ID(f.matches[0].replace(et,tt),t)||[])[0];if(!t)return i;e=e.slice(a.shift().value.length)}u=$.needsContext.test(e)?0:a.length;while(u--){f=a[u];if(r.relative[l=f.type])break;if(c=r.find[l])if(s=c(f.matches[0].replace(et,tt),Y.test(a[0].type)&&ht(t.parentNode)||t)){a.splice(u,1),e=s.length&&vt(a);if(!e)return _.apply(i,s),i;break}}}return o(e,h)(s,t,!p,i,Y.test(e)&&ht(t.parentNode)||t),i}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y="sizzle"+ -(new Date),b=e.document,w=0,E=0,S=it(),x=it(),T=it(),N=function(e,t){return e===t&&(f=!0),0},C=typeof undefined,k=1<<31,L={}.hasOwnProperty,A=[],O=A.pop,M=A.push,_=A.push,D=A.slice,P=A.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=j.replace("w","w#"),I="\\["+B+"*("+j+")"+B+"*(?:([*^$|!~]?=)"+B+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+F+")|)|)"+B+"*\\]",q=":("+j+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),U=new RegExp("^"+B+"*,"+B+"*"),z=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),W=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),X=new RegExp(q),V=new RegExp("^"+F+"$"),$={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+H+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,Z=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),tt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{_.apply(A=D.call(b.childNodes),b.childNodes),A[b.childNodes.length].nodeType}catch(nt){_={apply:A.length?function(e,t){M.apply(e,D.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=rt.support={},s=rt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=rt.setDocument=function(e){var t,i=e?e.ownerDocument||e:b,o=i.defaultView;if(i===c||i.nodeType!==9||!i.documentElement)return c;c=i,h=i.documentElement,p=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){l()},!1):o.attachEvent&&o.attachEvent("onunload",function(){l()})),n.attributes=ot(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ot(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(i.getElementsByClassName)&&ot(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),n.getById=ot(function(e){return h.appendChild(e).id=y,!i.getElementsByName||!i.getElementsByName(y).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==C&&p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==C&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==C)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==C&&p)return t.getElementsByClassName(e)},v=[],d=[];if(n.qsa=Q.test(i.querySelectorAll))ot(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&d.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||d.push("\\["+B+"*(?:value|"+H+")"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&d.push("name"+B+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(n.matchesSelector=Q.test(m=h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){n.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=d.length&&new RegExp(d.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),g=t||Q.test(h.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},N=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===b&&g(b,e)?-1:t===i||t.ownerDocument===b&&g(b,t)?1:a?P.call(a,e)-P.call(a,t):0:r&4?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],l=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:a?P.call(a,e)-P.call(a,t):0;if(s===o)return at(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)l.unshift(n);while(u[r]===l[r])r++;return r?at(u[r],l[r]):u[r]===b?-1:l[r]===b?1:0},i},rt.matches=function(e,t){return rt(e,null,null,t)},rt.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(W,"='$1']");if(n.matchesSelector&&p&&(!v||!v.test(t))&&(!d||!d.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return rt(t,c,null,[e]).length>0},rt.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},rt.attr=function(e,t){(e.ownerDocument||e)!==c&&l(e);var i=r.attrHandle[t.toLowerCase()],s=i&&L.call(r.attrHandle,t.toLowerCase())?i(e,t,!p):undefined;return s!==undefined?s:n.attributes||!p?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},rt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},rt.uniqueSort=function(e){var t,r=[],i=0,s=0;f=!n.detectDuplicates,a=!n.sortStable&&e.slice(0),e.sort(N);if(f){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return a=null,e},i=rt.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=rt.selectors={cacheLength:50,createPseudo:st,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||rt.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&rt.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return $.CHILD.test(e[0])?null:(e[3]&&e[4]!==undefined?e[2]=e[4]:n&&X.test(n)&&(t=dt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(et,tt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&S(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==C&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=rt.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),b=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&b){l=m[y]||(m[y]={}),f=l[e]||[],p=f[0]===w&&f[1],h=f[0]===w&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[w,p,h];break}}else if(b&&(f=(t[y]||(t[y]={}))[e])&&f[0]===w)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){b&&((c[y]||(c[y]={}))[e]=[w,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||rt.error("unsupported pseudo: "+e);return i[y]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=P.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:st(function(e){var t=[],n=[],r=o(e.replace(R,"$1"));return r[y]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return rt(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:st(function(e){return V.test(e||"")||rt.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ft(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=lt(t);return pt.prototype=r.filters=r.pseudos,r.setFilters=new pt,o=rt.compile=function(e,t){var n,r=[],i=[],s=T[e+" "];if(!s){t||(t=dt(e)),n=t.length;while(n--)s=wt(t[n]),s[y]?r.push(s):i.push(s);s=T(e,Et(i,r))}return s},n.sortStable=y.split("").sort(N).join("")===y,n.detectDuplicates=!!f,l(),n.sortDetached=ot(function(e){return e.compareDocumentPosition(c.createElement("div"))&1}),ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||ut("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!ot(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&ut("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ot(function(e){return e.getAttribute("disabled")==null})||ut(H,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),rt}(e);p.find=b,p.expr=b.selectors,p.expr[":"]=p.expr.pseudos,p.unique=b.uniqueSort,p.text=b.getText,p.isXMLDoc=b.isXML,p.contains=b.contains;var w=p.expr.match.needsContext,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^.[^:#\[\.,]*$/;p.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?p.find.matchesSelector(r,e)?[r]:[]:p.find.matches(e,p.grep(t,function(e){return e.nodeType===1}))},p.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(p(e).filter(function(){for(t=0;t<i;t++)if(p.contains(r[t],this))return!0}));for(t=0;t<i;t++)p.find(e,r[t],n);return n=this.pushStack(i>1?p.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,typeof e=="string"&&w.test(e)?p(e):e||[],!1).length}});var T,N=e.document,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,k=p.fn.init=function(e,t){var n,r;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?n=[null,e,null]:n=C.exec(e);if(n&&(n[1]||!t)){if(n[1]){t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:N,!0));if(E.test(n[1])&&p.isPlainObject(t))for(n in t)p.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}r=N.getElementById(n[2]);if(r&&r.parentNode){if(r.id!==n[2])return T.find(e);this.length=1,this[0]=r}return this.context=N,this.selector=e,this}return!t||t.jquery?(t||T).find(e):this.constructor(t).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?typeof T.ready!="undefined"?T.ready(e):e(p):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))};k.prototype=p.fn,T=p(N);var L=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};p.extend({dir:function(e,t,n){var r=[],i=e[t];while(i&&i.nodeType!==9&&(n===undefined||i.nodeType!==1||!p(i).is(n)))i.nodeType===1&&r.push(i),i=i[t];return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}}),p.fn.extend({has:function(e){var t,n=p(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(p.contains(this,n[t]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o=w.test(e)||typeof e!="string"?p(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&p.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?p.unique(s):s)},index:function(e){return e?typeof e=="string"?p.inArray(this[0],p(e)):p.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.unique(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return p.dir(e,"parentNode")},parentsUntil:function(e,t,n){return p.dir(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return p.dir(e,"nextSibling")},prevAll:function(e){return p.dir(e,"previousSibling")},nextUntil:function(e,t,n){return p.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return p.dir(e,"previousSibling",n)},siblings:function(e){return p.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return p.sibling(e.firstChild)},contents:function(e){return p.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:p.merge([],e.childNodes)}},function(e,t){p.fn[e]=function(n,r){var i=p.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=p.filter(r,i)),this.length>1&&(A[e]||(i=p.unique(i)),L.test(e)&&(i=i.reverse())),this.pushStack(i)}});var M=/\S+/g,_={};p.Callbacks=function(e){e=typeof e=="string"?_[e]||D(e):p.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){n=e.memory&&c,r=!0,s=o||0,o=0,i=u.length,t=!0;for(;u&&s<i;s++)if(u[s].apply(c[0],c[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(a?a.length&&f(a.shift()):n?u=[]:l.disable())},l={add:function(){if(u){var r=u.length;(function s(t){p.each(t,function(t,n){var r=p.type(n);r==="function"?(!e.unique||!l.has(n))&&u.push(n):n&&n.length&&r!=="string"&&s(n)})})(arguments),t?i=u.length:n&&(o=r,f(n))}return this},remove:function(){return u&&p.each(arguments,function(e,n){var r;while((r=p.inArray(n,u,r))>-1)u.splice(r,1),t&&(r<=i&&i--,r<=s&&s--)}),this},has:function(e){return e?p.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],i=0,this},disable:function(){return u=a=n=undefined,this},disabled:function(){return!u},lock:function(){return a=undefined,n||l.disable(),this},locked:function(){return!a},fireWith:function(e,n){return u&&(!r||a)&&(n=n||[],n=[e,n.slice?n.slice():n],t?a.push(n):f(n)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred(function(n){p.each(t,function(t,s){var o=p.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?p.extend(e,r):r}},i={};return r.pipe=r.then,p.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=r.call(arguments),i=n.length,s=i!==1||e&&p.isFunction(e.promise)?i:0,o=s===1?e:p.Deferred(),u=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?r.call(arguments):i,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1){a=new Array(i),f=new Array(i),l=new Array(i);for(;t<i;t++)n[t]&&p.isFunction(n[t].promise)?n[t].promise().done(u(t,l,n)).fail(o.reject).progress(u(t,f,a)):--s}return s||o.resolveWith(l,n),o.promise()}});var P;p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){if(e===!0?--p.readyWait:p.isReady)return;if(!N.body)return setTimeout(p.ready);p.isReady=!0;if(e!==!0&&--p.readyWait>0)return;P.resolveWith(N,[p]),p.fn.trigger&&p(N).trigger("ready").off("ready")}}),p.ready.promise=function(t){if(!P){P=p.Deferred();if(N.readyState==="complete")setTimeout(p.ready);else if(N.addEventListener)N.addEventListener("DOMContentLoaded",B,!1),e.addEventListener("load",B,!1);else{N.attachEvent("onreadystatechange",B),e.attachEvent("onload",B);var n=!1;try{n=e.frameElement==null&&N.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!p.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}H(),p.ready()}}()}}return P.promise(t)};var j=typeof undefined,F;for(F in p(c))break;c.ownLast=F!=="0",c.inlineBlockNeedsLayout=!1,p(function(){var e,t,n=N.getElementsByTagName("body")[0];if(!n)return;e=N.createElement("div"),e.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",t=N.createElement("div"),n.appendChild(e).appendChild(t);if(typeof t.style.zoom!==j){t.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1";if(c.inlineBlockNeedsLayout=t.offsetWidth===3)n.style.zoom=1}n.removeChild(e),e=t=null}),function(){var e=N.createElement("div");if(c.deleteExpando==null){c.deleteExpando=!0;try{delete e.test}catch(t){c.deleteExpando=!1}}e=null}(),p.acceptData=function(e){var t=p.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return n!==1&&n!==9?!1:!t||t!==!0&&e.getAttribute("classid")===t};var I=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,q=/([A-Z])/g;p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?p.cache[e[p.expando]]:e[p.expando],!!e&&!U(e)},data:function(e,t,n){return z(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return z(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)}}),p.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length){i=p.data(s);if(s.nodeType===1&&!p._data(s,"parsedAttrs")){n=o.length;while(n--)r=o[n].name,r.indexOf("data-")===0&&(r=p.camelCase(r.slice(5)),R(s,r,i[r]));p._data(s,"parsedAttrs",!0)}}return i}return typeof e=="object"?this.each(function(){p.data(this,e)}):arguments.length>1?this.each(function(){p.data(this,e,t)}):s?R(s,e,p.data(s,e)):undefined},removeData:function(e){return this.each(function(){p.removeData(this,e)})}}),p.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=p._data(e,t),n&&(!r||p.isArray(n)?r=p._data(e,t,p.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=p.queue(e,t),r=n.length,i=n.shift(),s=p._queueHooks(e,t),o=function(){p.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return p._data(e,n)||p._data(e,n,{empty:p.Callbacks("once memory").add(function(){p._removeData(e,t+"queue"),p._removeData(e,n)})})}}),p.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?p.queue(this[0],e):t===undefined?this:this.each(function(){var n=p.queue(this,e,t);p._queueHooks(this,e),e==="fx"&&n[0]!=="inprogress"&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=p.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};typeof e!="string"&&(t=e,e=undefined),e=e||"fx";while(o--)n=p._data(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var X=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=["Top","Right","Bottom","Left"],$=function(e,t){return e=t||e,p.css(e,"display")==="none"||!p.contains(e.ownerDocument,e)},J=p.access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=n==null;if(p.type(n)==="object"){i=!0;for(u in n)p.access(e,t,u,n[u],!0,s,o)}else if(r!==undefined){i=!0,p.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(p(e),n)}));if(t)for(;u<a;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)))}return i?e:f?t.call(e):a?t(e[0],n):s},K=/^(?:checkbox|radio)$/i;(function(){var e=N.createDocumentFragment(),t=N.createElement("div"),n=N.createElement("input");t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a>",c.leadingWhitespace=t.firstChild.nodeType===3,c.tbody=!t.getElementsByTagName("tbody").length,c.htmlSerialize=!!t.getElementsByTagName("link").length,c.html5Clone=N.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",n.type="checkbox",n.checked=!0,e.appendChild(n),c.appendChecked=n.checked,t.innerHTML="<textarea>x</textarea>",c.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",c.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,c.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){c.noCloneEvent=!1}),t.cloneNode(!0).click());if(c.deleteExpando==null){c.deleteExpando=!0;try{delete t.test}catch(r){c.deleteExpando=!1}}e=t=n=null})(),function(){var t,n,r=N.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(c[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),c[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var Q=/^(?:input|select|textarea)$/i,G=/^key/,Y=/^(?:mouse|contextmenu)|click/,Z=/^(?:focusinfocus|focusoutblur)$/,et=/^([^.]*)(?:\.(.+)|)$/;p.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,d,v,m,g=p._data(e);if(!g)return;n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=p.guid++),(o=g.events)||(o=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof p===j||!!e&&p.event.triggered===e.type?undefined:p.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(M)||[""],u=t.length;while(u--){s=et.exec(t[u])||[],d=m=s[1],v=(s[2]||"").split(".").sort();if(!d)continue;f=p.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=p.event.special[d]||{},c=p.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&p.expr.match.needsContext.test(i),namespace:v.join(".")},a);if(!(h=o[d])){h=o[d]=[],h.delegateCount=0;if(!f.setup||f.setup.call(e,r,v,l)===!1)e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l)}f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),p.event.global[d]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,d,v,m,g=p.hasData(e)&&p._data(e);if(!g||!(l=g.events))return;t=(t||"").match(M)||[""],f=t.length;while(f--){u=et.exec(t[f])||[],d=m=u[1],v=(u[2]||"").split(".").sort();if(!d){for(d in l)p.event.remove(e,d+t[f],n,r,!0);continue}c=p.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,h=l[d]||[],u=u[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||m===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,v,g.handle)===!1)&&p.removeEvent(e,d,g.handle),delete l[d])}p.isEmptyObject(l)&&(delete g.handle,p._removeData(e,"events"))},trigger:function(t,n,r,i){var s,o,u,a,l,c,h,d=[r||N],v=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];u=c=r=r||N;if(r.nodeType===3||r.nodeType===8)return;if(Z.test(v+p.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),o=v.indexOf(":")<0&&"on"+v,t=t[p.expando]?t:new p.Event(v,typeof t=="object"&&t),t.isTrigger=i?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=r),n=n==null?[t]:p.makeArray(n,[t]),l=p.event.special[v]||{};if(!i&&l.trigger&&l.trigger.apply(r,n)===!1)return;if(!i&&!l.noBubble&&!p.isWindow(r)){a=l.delegateType||v,Z.test(a+v)||(u=u.parentNode);for(;u;u=u.parentNode)d.push(u),c=u;c===(r.ownerDocument||N)&&d.push(c.defaultView||c.parentWindow||e)}h=0;while((u=d[h++])&&!t.isPropagationStopped())t.type=h>1?a:l.bindType||v,s=(p._data(u,"events")||{})[t.type]&&p._data(u,"handle"),s&&s.apply(u,n),s=o&&u[o],s&&s.apply&&p.acceptData(u)&&(t.result=s.apply(u,n),t.result===!1&&t.preventDefault());t.type=v;if(!i&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),n)===!1)&&p.acceptData(r)&&o&&r[v]&&!p.isWindow(r)){c=r[o],c&&(r[o]=null),p.event.triggered=v;try{r[v]()}catch(g){}p.event.triggered=undefined,c&&(r[o]=c)}return t.result},dispatch:function(e){e=p.event.fix(e);var t,n,i,s,o,u=[],a=r.call(arguments),f=(p._data(this,"events")||{})[e.type]||[],l=p.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=p.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,n=((p.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),n!==undefined&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||e.type!=="click"))for(;a!=this;a=a.parentNode||this)if(a.nodeType===1&&(a.disabled!==!0||e.type!=="click")){i=[];for(s=0;s<u;s++)r=t[s],n=r.selector+" ",i[n]===undefined&&(i[n]=r.needsContext?p(n,this).index(a)>=0:p.find(n,this,null,[a]).length),i[n]&&i.push(r);i.length&&o.push({elem:a,handlers:i})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},fix:function(e){if(e[p.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=Y.test(i)?this.mouseHooks:G.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new p.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||N),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button,o=t.fromElement;return e.pageX==null&&t.clientX!=null&&(r=e.target.ownerDocument||N,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),!e.which&&s!==undefined&&(e.which=s&1?1:s&2?3:s&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==rt()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===rt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(p.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=p.extend(new p.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?p.event.trigger(i,null,t):p.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},p.removeEvent=N.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===j&&(e[r]=null),e.detachEvent(r,n))},p.Event=function(e,t){if(!(this instanceof p.Event))return new p.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&(e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault())?tt:nt):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),this[p.expando]=!0},p.Event.prototype={isDefaultPrevented:nt,isPropagationStopped:nt,isImmediatePropagationStopped:nt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=tt;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=tt;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!p.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),c.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=p.nodeName(t,"input")||p.nodeName(t,"button")?t.form:undefined;n&&!p._data(n,"submitBubbles")&&(p.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),p._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&p.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),c.changeBubbles||(p.event.special.change={setup:function(){if(Q.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")p.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,e,!0)});return!1}p.event.add(this,"beforeactivate._change",function(e){var t=e.target;Q.test(t.nodeName)&&!p._data(t,"changeBubbles")&&(p.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&p.event.simulate("change",this.parentNode,e,!0)}),p._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),!Q.test(this.nodeName)}}),c.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){p.event.simulate(t,e.target,p.event.fix(e),!0)};p.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=p._data(r,t);i||r.addEventListener(e,n,!0),p._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=p._data(r,t)-1;i?p._data(r,t,i):(r.removeEventListener(e,n,!0),p._removeData(r,t))}}}),p.fn.extend({on:function(e,t,n,r,i){var s,o;if(typeof e=="object"){typeof t!="string"&&(n=n||t,t=undefined);for(s in e)this.on(s,t,n,e[s],i);return this}n==null&&r==null?(r=t,n=t=undefined):r==null&&(typeof t=="string"?(r=n,n=undefined):(r=n,n=t,t=undefined));if(r===!1)r=nt;else if(!r)return this;return i===1&&(o=r,r=function(e){return p().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=p.guid++)),this.each(function(){p.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,p(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}if(t===!1||typeof t=="function")n=t,t=undefined;return n===!1&&(n=nt),this.each(function(){p.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){p.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return p.event.trigger(e,t,n,!0)}});var st="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ot=/ jQuery\d+="(?:null|\d+)"/g,ut=new RegExp("<(?:"+st+")[\\s/>]","i"),at=/^\s+/,ft=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,lt=/<([\w:]+)/,ct=/<tbody/i,ht=/<|&#?\w+;/,pt=/<(?:script|style|link)/i,dt=/checked\s*(?:[^=]|=\s*.checked.)/i,vt=/^$|\/(?:java|ecma)script/i,mt=/^true\/(.*)/,gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,yt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:c.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},bt=it(N),wt=bt.appendChild(N.createElement("div"));yt.optgroup=yt.option,yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,p.extend({clone:function(e,t,n){var r,i,s,o,u,a=p.contains(e.ownerDocument,e);c.html5Clone||p.isXMLDoc(e)||!ut.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(wt.innerHTML=e.outerHTML,wt.removeChild(s=wt.firstChild));if((!c.noCloneEvent||!c.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!p.isXMLDoc(e)){r=Et(s),u=Et(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Lt(i,r[o])}if(t)if(n){u=u||Et(e),r=r||Et(s);for(o=0;(i=u[o])!=null;o++)kt(i,r[o])}else kt(e,s);return r=Et(s,"script"),r.length>0&&Ct(r,!a&&Et(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,h=e.length,d=it(t),v=[],m=0;for(;m<h;m++){s=e[m];if(s||s===0)if(p.type(s)==="object")p.merge(v,s.nodeType?[s]:s);else if(!ht.test(s))v.push(t.createTextNode(s));else{u=u||d.appendChild(t.createElement("div")),a=(lt.exec(s)||["",""])[1].toLowerCase(),l=yt[a]||yt._default,u.innerHTML=l[1]+s.replace(ft,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!c.leadingWhitespace&&at.test(s)&&v.push(t.createTextNode(at.exec(s)[0]));if(!c.tbody){s=a==="table"&&!ct.test(s)?u.firstChild:l[1]==="<table>"&&!ct.test(s)?u:0,i=s&&s.childNodes.length;while(i--)p.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}p.merge(v,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=d.lastChild}}u&&d.removeChild(u),c.appendChecked||p.grep(Et(v,"input"),St),m=0;while(s=v[m++]){if(r&&p.inArray(s,r)!==-1)continue;o=p.contains(s.ownerDocument,s),u=Et(d.appendChild(s),"script"),o&&Ct(u);if(n){i=0;while(s=u[i++])vt.test(s.type||"")&&n.push(s)}}return u=null,d},cleanData:function(e,t){var r,i,s,o,u=0,a=p.expando,f=p.cache,l=c.deleteExpando,h=p.event.special;for(;(r=e[u])!=null;u++)if(t||p.acceptData(r)){s=r[a],o=s&&f[s];if(o){if(o.events)for(i in o.events)h[i]?p.event.remove(r,i):p.removeEvent(r,i,o.handle);f[s]&&(delete f[s],l?delete r[a]:typeof r.removeAttribute!==j?r.removeAttribute(a):r[a]=null,n.push(s))}}}}),p.fn.extend({text:function(e){return J(this,function(e){return e===undefined?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=xt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=xt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?p.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&p.cleanData(Et(n)),n.parentNode&&(t&&p.contains(n.ownerDocument,n)&&Ct(Et(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&p.cleanData(Et(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&p.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return p.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined)return t.nodeType===1?t.innerHTML.replace(ot,""):undefined;if(typeof e=="string"&&!pt.test(e)&&(c.htmlSerialize||!ut.test(e))&&(c.leadingWhitespace||!at.test(e))&&!yt[(lt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ft,"<$1></$2>");try{for(;n<r;n++)t=this[n]||{},t.nodeType===1&&(p.cleanData(Et(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,p.cleanData(Et(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=i.apply([],e);var n,r,s,o,u,a,f=0,l=this.length,h=this,d=l-1,v=e[0],m=p.isFunction(v);if(m||l>1&&typeof v=="string"&&!c.checkClone&&dt.test(v))return this.each(function(n){var r=h.eq(n);m&&(e[0]=v.call(this,n,r.html())),r.domManip(e,t)});if(l){a=p.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,a.childNodes.length===1&&(a=n);if(n){o=p.map(Et(a,"script"),Tt),s=o.length;for(;f<l;f++)r=a,f!==d&&(r=p.clone(r,!0,!0),s&&p.merge(o,Et(r,"script"))),t.call(this[f],r,f);if(s){u=o[o.length-1].ownerDocument,p.map(o,Nt);for(f=0;f<s;f++)r=o[f],vt.test(r.type||"")&&!p._data(r,"globalEval")&&p.contains(u,r)&&(r.src?p._evalUrl&&p._evalUrl(r.src):p.globalEval((r.text||r.textContent||r.innerHTML||"").replace(gt,"")))}a=n=null}}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){p.fn[e]=function(e){var n,r=0,i=[],o=p(e),u=o.length-1;for(;r<=u;r++)n=r===u?this:this.clone(!0),p(o[r])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var At,Ot={};(function(){var e,t,n=N.createElement("div"),r="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],e.style.cssText="float:left;opacity:.5",c.opacity=/^0.5/.test(e.style.opacity),c.cssFloat=!!e.style.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle=n.style.backgroundClip==="content-box",e=n=null,c.shrinkWrapBlocks=function(){var e,n,i,s;if(t==null){e=N.getElementsByTagName("body")[0];if(!e)return;s="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",n=N.createElement("div"),i=N.createElement("div"),e.appendChild(n).appendChild(i),t=!1,typeof i.style.zoom!==j&&(i.style.cssText=r+";width:1px;padding:1px;zoom:1",i.innerHTML="<div></div>",i.firstChild.style.width="5px",t=i.offsetWidth!==3),e.removeChild(n),e=n=i=null}return t}})();var Dt=/^margin/,Pt=new RegExp("^("+X+")(?!px)[a-z%]+$","i"),Ht,Bt,jt=/^(top|right|bottom|left)$/;e.getComputedStyle?(Ht=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},Bt=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Ht(e),o=n?n.getPropertyValue(t)||n[t]:undefined,n&&(o===""&&!p.contains(e.ownerDocument,e)&&(o=p.style(e,t)),Pt.test(o)&&Dt.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),o===undefined?o:o+""}):N.documentElement.currentStyle&&(Ht=function(e){return e.currentStyle},Bt=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Ht(e),o=n?n[t]:undefined,o==null&&u&&u[t]&&(o=u[t]),Pt.test(o)&&!jt.test(t)&&(r=u.left,i=e.runtimeStyle,s=i&&i.left,s&&(i.left=e.currentStyle.left),u.left=t==="fontSize"?"1em":o,o=u.pixelLeft+"px",u.left=r,s&&(i.left=s)),o===undefined?o:o+""||"auto"}),function(){function l(){var t,n,u=N.getElementsByTagName("body")[0];if(!u)return;t=N.createElement("div"),n=N.createElement("div"),t.style.cssText=a,u.appendChild(t).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",p.swap(u,u.style.zoom!=null?{zoom:1}:{},function(){r=n.offsetWidth===4}),i=!0,s=!1,o=!0,e.getComputedStyle&&(s=(e.getComputedStyle(n,null)||{}).top!=="1%",i=(e.getComputedStyle(n,null)||{width:"4px"}).width==="4px"),u.removeChild(t),n=u=null}var t,n,r,i,s,o,u=N.createElement("div"),a="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",f="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=u.getElementsByTagName("a")[0],t.style.cssText="float:left;opacity:.5",c.opacity=/^0.5/.test(t.style.opacity),c.cssFloat=!!t.style.cssFloat,u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle=u.style.backgroundClip==="content-box",t=u=null,p.extend(c,{reliableHiddenOffsets:function(){if(n!=null)return n;var e,t,r,i=N.createElement("div"),s=N.getElementsByTagName("body")[0];if(!s)return;return i.setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=N.createElement("div"),e.style.cssText=a,s.appendChild(e).appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>",t=i.getElementsByTagName("td"),t[0].style.cssText="padding:0;margin:0;border:0;display:none",r=t[0].offsetHeight===0,t[0].style.display="",t[1].style.display="none",n=r&&t[0].offsetHeight===0,s.removeChild(e),i=s=null,n},boxSizing:function(){return r==null&&l(),r},boxSizingReliable:function(){return i==null&&l(),i},pixelPosition:function(){return s==null&&l(),s},reliableMarginRight:function(){var t,n,r,i;if(o==null&&e.getComputedStyle){t=N.getElementsByTagName("body")[0];if(!t)return;n=N.createElement("div"),r=N.createElement("div"),n.style.cssText=a,t.appendChild(n).appendChild(r),i=r.appendChild(N.createElement("div")),i.style.cssText=r.style.cssText=f,i.style.marginRight=i.style.width="0",r.style.width="1px",o=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight),t.removeChild(n)}return o}})}(),p.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var It=/alpha\([^)]*\)/i,qt=/opacity\s*=\s*([^)]*)/,Rt=/^(none|table(?!-c[ea]).+)/,Ut=new RegExp("^("+X+")(.*)$","i"),zt=new RegExp("^([+-])=("+X+")","i"),Wt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:0,fontWeight:400},Vt=["Webkit","O","Moz","ms"];p.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Bt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":c.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var i,s,o,u=p.camelCase(t),a=e.style;t=p.cssProps[u]||(p.cssProps[u]=$t(a,u)),o=p.cssHooks[t]||p.cssHooks[u];if(n===undefined)return o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t];s=typeof n,s==="string"&&(i=zt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(p.css(e,t)),s="number");if(n==null||n!==n)return;s==="number"&&!p.cssNumber[u]&&(n+="px"),!c.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(a[t]="inherit");if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined)try{a[t]="",a[t]=n}catch(f){}},css:function(e,t,n,r){var i,s,o,u=p.camelCase(t);return t=p.cssProps[u]||(p.cssProps[u]=$t(e.style,u)),o=p.cssHooks[t]||p.cssHooks[u],o&&"get"in o&&(s=o.get(e,!0,n)),s===undefined&&(s=Bt(e,t,r)),s==="normal"&&t in Xt&&(s=Xt[t]),n===""||n?(i=parseFloat(s),n===!0||p.isNumeric(i)?i||0:s):s}}),p.each(["height","width"],function(e,t){p.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Rt.test(p.css(e,"display"))?p.swap(e,Wt,function(){return Gt(e,t,r)}):Gt(e,t,r)},set:function(e,n,r){var i=r&&Ht(e);return Kt(e,n,r?Qt(e,t,r,c.boxSizing()&&p.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),c.opacity||(p.cssHooks.opacity={get:function(e,t){return qt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=p.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&p.trim(s.replace(It,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=It.test(s)?s.replace(It,i):s+" "+i}}),p.cssHooks.marginRight=Ft(c.reliableMarginRight,function(e,t){if(t)return p.swap(e,{display:"inline-block"},Bt,[e,"marginRight"])}),p.each({margin:"",padding:"",border:"Width"},function(e,t){p.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+V[r]+t]=s[r]||s[r-2]||s[0];return i}},Dt.test(e)||(p.cssHooks[e+t].set=Kt)}),p.fn.extend({css:function(e,t){return J(this,function(e,t,n){var r,i,s={},o=0;if(p.isArray(t)){r=Ht(e),i=t.length;for(;o<i;o++)s[t[o]]=p.css(e,t[o],!1,r);return s}return n!==undefined?p.style(e,t,n):p.css(e,t)},e,t,arguments.length>1)},show:function(){return Jt(this,!0)},hide:function(){return Jt(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){$(this)?p(this).show():p(this).hide()})}}),p.Tween=Yt,Yt.prototype={constructor:Yt,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(p.cssNumber[n]?"":"px")},cur:function(){var e=Yt.propHooks[this.prop];return e&&e.get?e.get(this):Yt.propHooks._default.get(this)},run:function(e){var t,n=Yt.propHooks[this.prop];return this.options.duration?this.pos=t=p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yt.propHooks._default.set(this),this}},Yt.prototype.init.prototype=Yt.prototype,Yt.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=p.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){p.fx.step[e.prop]?p.fx.step[e.prop](e):e.elem.style&&(e.elem.style[p.cssProps[e.prop]]!=null||p.cssHooks[e.prop])?p.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yt.propHooks.scrollTop=Yt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},p.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},p.fx=Yt.prototype.init,p.fx.step={};var Zt,en,tn=/^(?:toggle|show|hide)$/,nn=new RegExp("^(?:([+-])=|)("+X+")([a-z%]*)$","i"),rn=/queueHooks$/,sn=[ln],on={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=nn.exec(t),s=i&&i[3]||(p.cssNumber[e]?"":"px"),o=(p.cssNumber[e]||s!=="px"&&+r)&&nn.exec(p.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,p.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};p.Animation=p.extend(hn,{tweener:function(e,t){p.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],on[n]=on[n]||[],on[n].unshift(t)},prefilter:function(e,t){t?sn.unshift(e):sn.push(e)}}),p.speed=function(e,t,n){var r=e&&typeof e=="object"?p.extend({},e):{complete:n||!n&&t||p.isFunction(e)&&e,duration:e,easing:n&&t||t&&!p.isFunction(t)&&t};r.duration=p.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in p.fx.speeds?p.fx.speeds[r.duration]:p.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){p.isFunction(r.old)&&r.old.call(this),r.queue&&p.dequeue(this,r.queue)},r},p.fn.extend({fadeTo:function(e,t,n,r){return this.filter($).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=p.isEmptyObject(e),s=p.speed(t,n,r),o=function(){var t=hn(this,p.extend({},e),s);(i||p._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return typeof e!="string"&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=e!=null&&e+"queueHooks",s=p.timers,o=p._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&rn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem===this&&(e==null||s[i].queue===e)&&(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&p.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=p._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=p.timers,o=r?r.length:0;n.finish=!0,p.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),p.each(["toggle","show","hide"],function(e,t){var n=p.fn[t];p.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(an(t,!0),e,r,i)}}),p.each({slideDown:an("show"),slideUp:an("hide"),slideToggle:an("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){p.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),p.timers=[],p.fx.tick=function(){var e,t=p.timers,n=0;Zt=p.now();for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||p.fx.stop(),Zt=undefined},p.fx.timer=function(e){p.timers.push(e),e()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){en||(en=setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){clearInterval(en),en=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(e,t){return e=p.fx?p.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i=N.createElement("div");i.setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=i.getElementsByTagName("a")[0],n=N.createElement("select"),r=n.appendChild(N.createElement("option")),t=i.getElementsByTagName("input")[0],e.style.cssText="top:1px",c.getSetAttribute=i.className!=="t",c.style=/top/.test(e.getAttribute("style")),c.hrefNormalized=e.getAttribute("href")==="/a",c.checkOn=!!t.value,c.optSelected=r.selected,c.enctype=!!N.createElement("form").enctype,n.disabled=!0,c.optDisabled=!r.disabled,t=N.createElement("input"),t.setAttribute("value",""),c.input=t.getAttribute("value")==="",t.value="t",t.setAttribute("type","radio"),c.radioValue=t.value==="t",e=t=n=r=i=null}();var pn=/\r/g;p.fn.extend({val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i)return t=p.valHooks[i.type]||p.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,typeof n=="string"?n.replace(pn,""):n==null?"":n);return}return r=p.isFunction(e),this.each(function(n){var i;if(this.nodeType!==1)return;r?i=e.call(this,n,p(this).val()):i=e,i==null?i="":typeof i=="number"?i+="":p.isArray(i)&&(i=p.map(i,function(e){return e==null?"":e+""})),t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined)this.value=i})}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return t!=null?t:p.text(e)}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(c.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!p.nodeName(n.parentNode,"optgroup"))){t=p(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=p.makeArray(t),o=i.length;while(o--){r=i[o];if(p.inArray(p.valHooks.option.get(r),s)>=0)try{r.selected=n=!0}catch(u){r.scrollHeight}else r.selected=!1}return n||(e.selectedIndex=-1),i}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,t){if(p.isArray(t))return e.checked=p.inArray(p(e).val(),t)>=0}},c.checkOn||(p.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var dn,vn,mn=p.expr.attrHandle,gn=/^(?:checked|selected)$/i,yn=c.getSetAttribute,bn=c.input;p.fn.extend({attr:function(e,t){return J(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}}),p.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(!e||s===3||s===8||s===2)return;if(typeof e.getAttribute===j)return p.prop(e,t,n);if(s!==1||!p.isXMLDoc(e))t=t.toLowerCase(),r=p.attrHooks[t]||(p.expr.match.bool.test(t)?vn:dn);if(n===undefined)return r&&"get"in r&&(i=r.get(e,t))!==null?i:(i=p.find.attr(e,t),i==null?undefined:i);if(n!==null)return r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n);p.removeAttr(e,t)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(M);if(s&&e.nodeType===1)while(n=s[i++])r=p.propFix[n]||n,p.expr.match.bool.test(n)?bn&&yn||!gn.test(n)?e[r]=!1:e[p.camelCase("default-"+n)]=e[r]=!1:p.attr(e,n,""),e.removeAttribute(yn?n:r)},attrHooks:{type:{set:function(e,t){if(!c.radioValue&&t==="radio"&&p.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),vn={set:function(e,t,n){return t===!1?p.removeAttr(e,n):bn&&yn||!gn.test(n)?e.setAttribute(!yn&&p.propFix[n]||n,n):e[p.camelCase("default-"+n)]=e[n]=!0,n}},p.each(p.expr.match.bool.source.match(/\w+/g),function(e,t){var n=mn[t]||p.find.attr;mn[t]=bn&&yn||!gn.test(t)?function(e,t,r){var i,s;return r||(s=mn[t],mn[t]=i,i=n(e,t,r)!=null?t.toLowerCase():null,mn[t]=s),i}:function(e,t,n){if(!n)return e[p.camelCase("default-"+t)]?t.toLowerCase():null}});if(!bn||!yn)p.attrHooks.value={set:function(e,t,n){if(!p.nodeName(e,"input"))return dn&&dn.set(e,t,n);e.defaultValue=t}};yn||(dn={set:function(e,t,n){var r=e.getAttributeNode(n);r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="";if(n==="value"||t===e.getAttribute(n))return t}},mn.id=mn.name=mn.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.value!==""?r.value:null},p.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:dn.set},p.attrHooks.contenteditable={set:function(e,t,n){dn.set(e,t===""?!1:t,n)}},p.each(["width","height"],function(e,t){p.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),c.style||(p.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,t){return e.style.cssText=t+""}});var wn=/^(?:input|select|textarea|button|object)$/i,En=/^(?:a|area)$/i;p.fn.extend({prop:function(e,t){return J(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return e=p.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(t){}})}}),p.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(!e||o===3||o===8||o===2)return;return s=o!==1||!p.isXMLDoc(e),s&&(t=p.propFix[t]||t,i=p.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&(r=i.get(e,t))!==null?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=p.find.attr(e,"tabindex");return t?parseInt(t,10):wn.test(e.nodeName)||En.test(e.nodeName)&&e.href?0:-1}}}}),c.hrefNormalized||p.each(["href","src"],function(e,t){p.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),c.optSelected||(p.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this}),c.enctype||(p.propFix.enctype="encoding");var Sn=/[\t\r\n\f]/g;p.fn.extend({addClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f=typeof e=="string"&&e;if(p.isFunction(e))return this.each(function(t){p(this).addClass(e.call(this,t,this.className))});if(f){t=(e||"").match(M)||[];for(;u<a;u++){n=this[u],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(Sn," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=p.trim(r),n.className!==o&&(n.className=o)}}}return this},removeClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f=arguments.length===0||typeof e=="string"&&e;if(p.isFunction(e))return this.each(function(t){p(this).removeClass(e.call(this,t,this.className))});if(f){t=(e||"").match(M)||[];for(;u<a;u++){n=this[u],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(Sn," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");o=e?p.trim(r):"",n.className!==o&&(n.className=o)}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):p.isFunction(e)?this.each(function(n){p(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,i=p(this),s=e.match(M)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else if(n===j||n==="boolean")this.className&&p._data(this,"__className__",this.className),this.className=this.className||e===!1?"":p._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(Sn," ").indexOf(t)>=0)return!0;return!1}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){p.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var xn=p.now(),Tn=/\?/,Nn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;p.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=p.trim(t+"");return i&&!p.trim(i.replace(Nn,function(e,t,i,s){return n&&t&&(r=0),r===0?e:(n=i||t,r+=!s-!i,"")}))?Function("return "+i)():p.error("Invalid JSON: "+t)},p.parseXML=function(t){var n,r;if(!t||typeof t!="string")return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=undefined}return(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+t),n};var Cn,kn,Ln=/#.*$/,An=/([?&])_=[^&]*/,On=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Mn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_n=/^(?:GET|HEAD)$/,Dn=/^\/\//,Pn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hn={},Bn={},jn="*/".concat("*");try{kn=location.href}catch(Fn){kn=N.createElement("a"),kn.href="",kn=kn.href}Cn=Pn.exec(kn.toLowerCase())||[],p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kn,type:"GET",isLocal:Mn.test(Cn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Rn(Rn(e,p.ajaxSettings),t):Rn(p.ajaxSettings,e)},ajaxPrefilter:In(Hn),ajaxTransport:In(Bn),ajax:function(e,t){function x(e,t,n,r){var f,g,y,w,S,x=t;if(b===2)return;b=2,o&&clearTimeout(o),a=undefined,s=r||"",E.readyState=e>0?4:0,f=e>=200&&e<300||e===304,n&&(w=Un(l,E,n)),w=zn(l,w,E,f);if(f)l.ifModified&&(S=E.getResponseHeader("Last-Modified"),S&&(p.lastModified[i]=S),S=E.getResponseHeader("etag"),S&&(p.etag[i]=S)),e===204||l.type==="HEAD"?x="nocontent":e===304?x="notmodified":(x=w.state,g=w.data,y=w.error,f=!y);else{y=x;if(e||!x)x="error",e<0&&(e=0)}E.status=e,E.statusText=(t||x)+"",f?d.resolveWith(c,[g,x,E]):d.rejectWith(c,[E,x,y]),E.statusCode(m),m=undefined,u&&h.trigger(f?"ajaxSuccess":"ajaxError",[E,l,f?g:y]),v.fireWith(c,[E,x]),u&&(h.trigger("ajaxComplete",[E,l]),--p.active||p.event.trigger("ajaxStop"))}typeof e=="object"&&(t=e,e=undefined),t=t||{};var n,r,i,s,o,u,a,f,l=p.ajaxSetup({},t),c=l.context||l,h=l.context&&(c.nodeType||c.jquery)?p(c):p.event,d=p.Deferred(),v=p.Callbacks("once memory"),m=l.statusCode||{},g={},y={},b=0,w="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(b===2){if(!f){f={};while(t=On.exec(s))f[t[1].toLowerCase()]=t[2]}t=f[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return b===2?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||w;return a&&a.abort(t),x(0,t),this}};d.promise(E).complete=v.add,E.success=E.done,E.error=E.fail,l.url=((e||l.url||kn)+"").replace(Ln,"").replace(Dn,Cn[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=p.trim(l.dataType||"*").toLowerCase().match(M)||[""],l.crossDomain==null&&(n=Pn.exec(l.url.toLowerCase()),l.crossDomain=!(!n||n[1]===Cn[1]&&n[2]===Cn[2]&&(n[3]||(n[1]==="http:"?"80":"443"))===(Cn[3]||(Cn[1]==="http:"?"80":"443")))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=p.param(l.data,l.traditional)),qn(Hn,l,t,E);if(b===2)return E;u=l.global,u&&p.active++===0&&p.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!_n.test(l.type),i=l.url,l.hasContent||(l.data&&(i=l.url+=(Tn.test(i)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=An.test(i)?i.replace(An,"$1_="+xn++):i+(Tn.test(i)?"&":"?")+"_="+xn++)),l.ifModified&&(p.lastModified[i]&&E.setRequestHeader("If-Modified-Since",p.lastModified[i]),p.etag[i]&&E.setRequestHeader("If-None-Match",p.etag[i])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",l.contentType),E.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+jn+"; q=0.01":""):l.accepts["*"]);for(r in l.headers)E.setRequestHeader(r,l.headers[r]);if(!l.beforeSend||l.beforeSend.call(c,E,l)!==!1&&b!==2){w="abort";for(r in{success:1,error:1,complete:1})E[r](l[r]);a=qn(Bn,l,t,E);if(!a)x(-1,"No Transport");else{E.readyState=1,u&&h.trigger("ajaxSend",[E,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){E.abort("timeout")},l.timeout));try{b=1,a.send(g,x)}catch(S){if(!(b<2))throw S;x(-1,S)}}return E}return E.abort()},getJSON:function(e,t,n){return p.get(e,t,n,"json")},getScript:function(e,t){return p.get(e,undefined,t,"script")}}),p.each(["get","post"],function(e,t){p[t]=function(e,n,r,i){return p.isFunction(n)&&(i=i||r,r=n,n=undefined),p.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){p.fn[t]=function(e){return this.on(t,e)}}),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},p.fn.extend({wrapAll:function(e){if(p.isFunction(e))return this.each(function(t){p(this).wrapAll(e.call(this,t))});if(this[0]){var t=p(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return p.isFunction(e)?this.each(function(t){p(this).wrapInner(e.call(this,t))}):this.each(function(){var t=p(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p.isFunction(e);return this.each(function(n){p(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}}),p.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!c.reliableHiddenOffsets()&&(e.style&&e.style.display||p.css(e,"display"))==="none"},p.expr.filters.visible=function(e){return!p.expr.filters.hidden(e)};var Wn=/%20/g,Xn=/\[\]$/,Vn=/\r?\n/g,$n=/^(?:submit|button|image|reset|file)$/i,Jn=/^(?:input|select|textarea|keygen)/i;p.param=function(e,t){var n,r=[],i=function(e,t){t=p.isFunction(t)?t():t==null?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};t===undefined&&(t=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){i(this.name,this.value)});else for(n in e)Kn(n,e[n],t,i);return r.join("&").replace(Wn,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&Jn.test(this.nodeName)&&!$n.test(e)&&(this.checked||!K.test(e))}).map(function(e,t){var n=p(this).val();return n==null?null:p.isArray(n)?p.map(n,function(e){return{name:t.name,value:e.replace(Vn,"\r\n")}}):{name:t.name,value:n.replace(Vn,"\r\n")}}).get()}}),p.ajaxSettings.xhr=e.ActiveXObject!==undefined?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zn()||er()}:Zn;var Qn=0,Gn={},Yn=p.ajaxSettings.xhr();e.ActiveXObject&&p(e).on("unload",function(){for(var e in Gn)Gn[e](undefined,!0)}),c.cors=!!Yn&&"withCredentials"in Yn,Yn=c.ajax=!!Yn,Yn&&p.ajaxTransport(function(e){if(!e.crossDomain||c.cors){var t;return{send:function(n,r){var i,s=e.xhr(),o=++Qn;s.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),!e.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest");for(i in n)n[i]!==undefined&&s.setRequestHeader(i,n[i]+"");s.send(e.hasContent&&e.data||null),t=function(n,i){var u,a,f;if(t&&(i||s.readyState===4)){delete Gn[o],t=undefined,s.onreadystatechange=p.noop;if(i)s.readyState!==4&&s.abort();else{f={},u=s.status,typeof s.responseText=="string"&&(f.text=s.responseText);try{a=s.statusText}catch(l){a=""}!u&&e.isLocal&&!e.crossDomain?u=f.text?200:404:u===1223&&(u=204)}}f&&r(u,a,f,s.getAllResponseHeaders())},e.async?s.readyState===4?setTimeout(t):s.onreadystatechange=Gn[o]=t:t()},abort:function(){t&&t(undefined,!0)}}}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),p.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=N.head||p("head")[0]||N.documentElement;return{send:function(r,i){t=N.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){if(n||!t.readyState||/loaded|complete/.test(t.readyState))t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success")},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(undefined,!0)}}}});var tr=[],nr=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tr.pop()||p.expando+"_"+xn++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(nr.test(t.url)?"url":typeof t.data=="string"&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nr.test(t.data)&&"data");if(u||t.dataTypes[0]==="jsonp")return i=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(nr,"$1"+i):t.jsonp!==!1&&(t.url+=(Tn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||p.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,tr.push(i)),o&&p.isFunction(s)&&s(o[0]),o=s=undefined}),"script"}),p.parseHTML=function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||N;var r=E.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=p.buildFragment([e],t,i),i&&i.length&&p(i).remove(),p.merge([],r.childNodes))};var rr=p.fn.load;p.fn.load=function(e,t,n){if(typeof e!="string"&&rr)return rr.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=e.slice(u,e.length),e=e.slice(0,u)),p.isFunction(t)?(n=t,t=undefined):t&&typeof t=="object"&&(s="POST"),o.length>0&&p.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?p("<div>").append(p.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,i||[e.responseText,t,e])}),this},p.expr.filters.animated=function(e){return p.grep(p.timers,function(t){return e===t.elem}).length};var ir=e.document.documentElement;p.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=p.css(e,"position"),c=p(e),h={};l==="static"&&(e.style.position="relative"),u=c.offset(),s=p.css(e,"top"),a=p.css(e,"left"),f=(l==="absolute"||l==="fixed")&&p.inArray("auto",[s,a])>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),p.isFunction(t)&&(t=t.call(e,n,u)),t.top!=null&&(h.top=t.top-u.top+o),t.left!=null&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},p.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){p.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],s=i&&i.ownerDocument;if(!s)return;return t=s.documentElement,p.contains(t,i)?(typeof i.getBoundingClientRect!==j&&(r=i.getBoundingClientRect()),n=sr(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return p.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),p.nodeName(e[0],"html")||(n=e.offset()),n.top+=p.css(e[0],"borderTopWidth",!0),n.left+=p.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-p.css(r,"marginTop",!0),left:t.left-n.left-p.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||ir;while(e&&!p.nodeName(e,"html")&&p.css(e,"position")==="static")e=e.offsetParent;return e||ir})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);p.fn[e]=function(r){return J(this,function(e,r,i){var s=sr(e);if(i===undefined)return s?t in s?s[t]:s.document.documentElement[r]:e[r];s?s.scrollTo(n?p(s).scrollLeft():i,n?i:p(s).scrollTop()):e[r]=i},e,r,arguments.length,null)}}),p.each(["top","left"],function(e,t){p.cssHooks[t]=Ft(c.pixelPosition,function(e,n){if(n)return n=Bt(e,t),Pt.test(n)?p(e).position()[t]+"px":n})}),p.each({Height:"height",Width:"width"},function(e,t){p.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){p.fn[r]=function(r,i){var s=arguments.length&&(n||typeof r!="boolean"),o=n||(r===!0||i===!0?"margin":"border");return J(this,function(t,n,r){var i;return p.isWindow(t)?t.document.documentElement["client"+e]:t.nodeType===9?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?p.css(t,n,o):p.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return p});var or=e.jQuery,ur=e.$;return p.noConflict=function(t){return e.$===p&&(e.$=ur),t&&e.jQuery===p&&(e.jQuery=or),p},typeof t===j&&(e.jQuery=e.$=p),p}),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),function(e){e("toastr",["jquery"],function(e){return function(){function u(e,t,n){return w({type:i.error,iconClass:E().iconClasses.error,message:e,optionsOverride:n,title:t})}function a(n,r){return n||(n=E()),t=e("#"+n.containerId),t.length?t:(r&&(t=g(n)),t)}function f(e,t,n){return w({type:i.info,iconClass:E().iconClasses.info,message:e,optionsOverride:n,title:t})}function l(e){n=e}function c(e,t,n){return w({type:i.success,iconClass:E().iconClasses.success,message:e,optionsOverride:n,title:t})}function h(e,t,n){return w({type:i.warning,iconClass:E().iconClasses.warning,message:e,optionsOverride:n,title:t})}function p(e,n){var r=E();t||a(r),m(e,r,n)||v(r)}function d(n){var r=E();t||a(r);if(n&&e(":focus",n).length===0){S(n);return}t.children().length&&t.remove()}function v(n){var r=t.children();for(var i=r.length-1;i>=0;i--)m(e(r[i]),n)}function m(t,n,r){var i=r&&r.force?r.force:!1;return t&&(i||e(":focus",t).length===0)?(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){S(t)}}),!0):!1}function g(n){return t=e("<div/>").attr("id",n.containerId).addClass(n.positionClass),t.appendTo(e(n.target)),t}function y(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:undefined,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:undefined,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function b(e){if(!n)return;n(e)}function w(n){function m(e){return e==null&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(){T(),C(),k(),L(),A(),O(),N(),y()}function y(){var e="";switch(n.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}f.attr("aria-live",e)}function w(){i.closeOnHover&&f.hover(P,D),!i.onclick&&i.tapToDismiss&&f.click(_),i.closeButton&&p&&p.click(function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble!==undefined&&e.cancelBubble!==!0&&(e.cancelBubble=!0),i.onCloseClick&&i.onCloseClick(e),_(!0)}),i.onclick&&f.click(function(e){i.onclick(e),_()})}function x(){f.hide(),f[i.showMethod]({duration:i.showDuration,easing:i.showEasing,complete:i.onShown}),i.timeOut>0&&(u=setTimeout(_,i.timeOut),d.maxHideTime=parseFloat(i.timeOut),d.hideEta=(new Date).getTime()+d.maxHideTime,i.progressBar&&(d.intervalId=setInterval(H,10)))}function T(){n.iconClass&&f.addClass(i.toastClass).addClass(s)}function N(){i.newestOnTop?t.prepend(f):t.append(f)}function C(){if(n.title){var e=n.title;i.escapeHtml&&(e=m(n.title)),l.append(e).addClass(i.titleClass),f.append(l)}}function k(){if(n.message){var e=n.message;i.escapeHtml&&(e=m(n.message)),c.append(e).addClass(i.messageClass),f.append(c)}}function L(){i.closeButton&&(p.addClass(i.closeClass).attr("role","button"),f.prepend(p))}function A(){i.progressBar&&(h.addClass(i.progressClass),f.prepend(h))}function O(){i.rtl&&f.addClass("rtl")}function M(e,t){if(e.preventDuplicates){if(t.message===o)return!0;o=t.message}return!1}function _(t){var n=t&&i.closeMethod!==!1?i.closeMethod:i.hideMethod,r=t&&i.closeDuration!==!1?i.closeDuration:i.hideDuration,s=t&&i.closeEasing!==!1?i.closeEasing:i.hideEasing;if(e(":focus",f).length&&!t)return;return clearTimeout(d.intervalId),f[n]({duration:r,easing:s,complete:function(){S(f),clearTimeout(u),i.onHidden&&v.state!=="hidden"&&i.onHidden(),v.state="hidden",v.endTime=new Date,b(v)}})}function D(){if(i.timeOut>0||i.extendedTimeOut>0)u=setTimeout(_,i.extendedTimeOut),d.maxHideTime=parseFloat(i.extendedTimeOut),d.hideEta=(new Date).getTime()+d.maxHideTime}function P(){clearTimeout(u),d.hideEta=0,f.stop(!0,!0)[i.showMethod]({duration:i.showDuration,easing:i.showEasing})}function H(){var e=(d.hideEta-(new Date).getTime())/d.maxHideTime*100;h.width(e+"%")}var i=E(),s=n.iconClass||i.iconClass;typeof n.optionsOverride!="undefined"&&(i=e.extend(i,n.optionsOverride),s=n.optionsOverride.iconClass||s);if(M(i,n))return;r++,t=a(i,!0);var u=null,f=e("<div/>"),l=e("<div/>"),c=e("<div/>"),h=e("<div/>"),p=e(i.closeHtml),d={intervalId:null,hideEta:null,maxHideTime:null},v={toastId:r,state:"visible",startTime:new Date,options:i,map:n};return g(),x(),w(),b(v),i.debug&&console&&console.log(v),f}function E(){return e.extend({},y(),s.options)}function S(e){t||(t=a());if(e.is(":visible"))return;e.remove(),e=null,t.children().length===0&&(t.remove(),o=undefined)}var t,n,r=0,i={error:"error",info:"info",success:"success",warning:"warning"},s={clear:p,remove:d,error:u,getContainer:a,info:f,options:{},subscribe:l,success:c,version:"2.1.3",warning:h},o;return s}()})}(typeof define=="function"&&define.amd?define:function(e,t){typeof module!="undefined"&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)}),define("bower_components/requirejs-text/text",["module"],function(e){"use strict";function v(e,t){return e===undefined||e===""?t:e}function m(e,t,n,r){if(t===r)return!0;if(e===n){if(e==="http")return v(t,"80")===v(r,"80");if(e==="https")return v(t,"443")===v(r,"443")}return!1}var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.15",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||m(s,u,n,i))):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="﻿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("bower_components/requirejs-text/text!app/templates/endpoints.html",[],function(){return'<div class="content-frame">\r\n    <div class="content-frame-top">\r\n        <div class="page-title">\r\n            <h2><span class="fa fa-share-alt"></span> Endpoints</h2>\r\n        </div>\r\n    </div>\r\n    <div class="page-content-wrap">\r\n\r\n        <div class="panel panel-default">\r\n            <div class="panel-body">\r\n                <div class="row" style="padding-bottom: 10px;">\r\n                    <div class="col-sm-12">\r\n                        <input type="text" class="form-control tags" style="float: right; width: 300px;" placeholder="Filter by tags">\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-12 endpointGraph"></div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-12 services"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>'}),define("app/collections/serviceMessages",["backbone"],function(e){"use strict";var t=e.Collection.extend({url:"serviceMessages"});return t}),define("app/collections/services",["backbone"],function(e){"use strict";var t=e.Collection.extend({url:"services"});return t}),define("app/collections/endpoints",["backbone"],function(e){"use strict";var t=e.Collection.extend({url:"endpoints"});return t}),define("bower_components/requirejs-text/text!app/templates/services.html",[],function(){return'<div class="serviceGrid"></div>'}),function(e,t){typeof define=="function"&&define.amd?define("backgrid",["underscore","backbone"],function(n,r){return e.Backgrid=t(n,r)}):typeof exports=="object"?module.exports=t(require("underscore"),require("backbone")):e.Backgrid=t(e._,e.Backbone)}(this,function(e,t){"use strict";function s(e,t,n){var r=t-(e+"").length;r=r<0?0:r;var i="";for(var s=0;s<r;s++)i+=n;return i+e}var n="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||n.trim()){n="["+n+"]";var r=new RegExp("^"+n+n+"*"),i=new RegExp(n+n+"*$");String.prototype.trim=function(){if(this===undefined||this===null)throw new TypeError("can't convert "+this+" to object");return String(this).replace(r,"").replace(i,"")}}var o=t.$,u={Extension:{},resolveNameToClass:function(t,n){if(e.isString(t)){var r=e.map(t.split("-"),function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("")+n,i=u[r]||u.Extension[r];if(e.isUndefined(i))throw new ReferenceError("Class '"+r+"' not found");return i}return t},callByNeed:function(){var t=arguments[0];if(!e.isFunction(t))return t;var n=arguments[1],r=[].slice.call(arguments,2);return t.apply(n,r+""?r:[])}};e.extend(u,t.Events);var a=u.Command=function(t){e.extend(this,{altKey:!!t.altKey,"char":t["char"],charCode:t.charCode,ctrlKey:!!t.ctrlKey,key:t.key,keyCode:t.keyCode,locale:t.locale,location:t.location,metaKey:!!t.metaKey,repeat:!!t.repeat,shiftKey:!!t.shiftKey,which:t.which})};e.extend(a.prototype,{moveUp:function(){return this.keyCode==38},moveDown:function(){return this.keyCode===40},moveLeft:function(){return this.shiftKey&&this.keyCode===9},moveRight:function(){return!this.shiftKey&&this.keyCode===9},save:function(){return this.keyCode===13},cancel:function(){return this.keyCode===27},passThru:function(){return!(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});var f=u.CellFormatter=function(){};e.extend(f.prototype,{fromRaw:function(e,t){return e},toRaw:function(e,t){return e}});var l=u.NumberFormatter=function(t){e.extend(this,this.defaults,t||{});if(this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20")};l.prototype=new f,e.extend(l.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(t,n){if(e.isNull(t)||e.isUndefined(t))return"";t=parseFloat(t).toFixed(~~this.decimals);var r=t.split("."),i=r[0],s=r[1]?(this.decimalSeparator||".")+r[1]:"";return i.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+s},toRaw:function(t,n){t=t.trim();if(t==="")return null;var r="",i=t.split(this.orderSeparator);for(var s=0;s<i.length;s++)r+=i[s];var o=r.split(this.decimalSeparator);r="";for(var s=0;s<o.length;s++)r=r+o[s]+".";r[r.length-1]==="."&&(r=r.slice(0,r.length-1));var u=(r*1).toFixed(~~this.decimals)*1;if(e.isNumber(u)&&!e.isNaN(u))return u}});var c=u.PercentFormatter=function(){u.NumberFormatter.apply(this,arguments)};c.prototype=new u.NumberFormatter,e.extend(c.prototype,{defaults:e.extend({},l.prototype.defaults,{multiplier:1,symbol:"%"}),fromRaw:function(e,t){var n=[].slice.call(arguments,1);return n.unshift(e*this.multiplier),(l.prototype.fromRaw.apply(this,n)||"0")+this.symbol},toRaw:function(t,n){var r=t.split(this.symbol);if(r&&r[0]&&r[1]===""||r[1]==null){var i=l.prototype.toRaw.call(this,r[0]);return e.isUndefined(i)?i:i/this.multiplier}}});var h=u.DatetimeFormatter=function(t){e.extend(this,this.defaults,t||{});if(!this.includeDate&&!this.includeTime)throw new Error("Either includeDate or includeTime must be true")};h.prototype=new f,e.extend(h.prototype,{defaults:{includeDate:!0,includeTime:!0,includeMilli:!1},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(t,n){if((t+"").trim()==="")return null;var r,i=null;if(e.isNumber(t)){var o=new Date(t);r=s(o.getUTCFullYear(),4,0)+"-"+s(o.getUTCMonth()+1,2,0)+"-"+s(o.getUTCDate(),2,0),i=s(o.getUTCHours(),2,0)+":"+s(o.getUTCMinutes(),2,0)+":"+s(o.getUTCSeconds(),2,0)}else{t=t.trim();var u=t.split(this.ISO_SPLITTER_RE)||[];r=this.DATE_RE.test(u[0])?u[0]:"",i=r&&u[1]?u[1]:this.TIME_RE.test(u[0])?u[0]:""}var a=this.DATE_RE.exec(r)||[],f=this.TIME_RE.exec(i)||[];if(n){if(this.includeDate&&e.isUndefined(a[0]))return;if(this.includeTime&&e.isUndefined(f[0]))return;if(!this.includeDate&&r)return;if(!this.includeTime&&i)return}var o=new Date(Date.UTC(a[1]*1||0,a[2]*1-1||0,a[3]*1||0,f[1]*1||null,f[2]*1||null,f[3]*1||null,f[5]*1||null)),l="";return this.includeDate&&(l=s(o.getUTCFullYear(),4,0)+"-"+s(o.getUTCMonth()+1,2,0)+"-"+s(o.getUTCDate(),2,0)),this.includeTime&&(l=l+(this.includeDate?"T":"")+s(o.getUTCHours(),2,0)+":"+s(o.getUTCMinutes(),2,0)+":"+s(o.getUTCSeconds(),2,0),this.includeMilli&&(l=l+"."+s(o.getUTCMilliseconds(),3,0))),this.includeDate&&this.includeTime&&(l+="Z"),l},fromRaw:function(t,n){return e.isNull(t)||e.isUndefined(t)?"":this._convert(t)},toRaw:function(e,t){return this._convert(e,!0)}});var p=u.StringFormatter=function(){};p.prototype=new f,e.extend(p.prototype,{fromRaw:function(t,n){return e.isUndefined(t)||e.isNull(t)?"":t+""}});var d=u.EmailFormatter=function(){};d.prototype=new f,e.extend(d.prototype,{toRaw:function(t,n){var r=t.trim().split("@");if(r.length===2&&e.all(r))return t}});var v=u.SelectFormatter=function(){};v.prototype=new f,e.extend(v.prototype,{fromRaw:function(t,n){return e.isArray(t)?t:t!=null?[t]:[]}});var m=u.CellEditor=t.View.extend({initialize:function(e){this.formatter=e.formatter,this.column=e.column,this.column instanceof _||(this.column=new _(this.column)),this.listenTo(this.model,"backgrid:editing",this.postRender)},postRender:function(e,t){return(t==null||t.get("name")==this.column.get("name"))&&this.$el.focus(),this}}),g=u.InputCellEditor=m.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(e){g.__super__.initialize.apply(this,arguments),e.placeholder&&this.$el.attr("placeholder",e.placeholder)},render:function(){var e=this.model;return this.$el.val(this.formatter.fromRaw(e.get(this.column.get("name")),e)),this},saveOrCancel:function(t){var n=this.formatter,r=this.model,i=this.column,s=new a(t),o=t.type==="blur";if(s.moveUp()||s.moveDown()||s.moveLeft()||s.moveRight()||s.save()||o){t.preventDefault(),t.stopPropagation();var u=this.$el.val(),f=n.toRaw(u,r);e.isUndefined(f)?r.trigger("backgrid:error",r,i,u):(r.set(i.get("name"),f),r.trigger("backgrid:edited",r,i,s))}else s.cancel()&&(t.stopPropagation(),r.trigger("backgrid:edited",r,i,s))},postRender:function(e,t){if(t==null||t.get("name")==this.column.get("name"))if(this.$el.css("text-align")==="right"){var n=this.$el.val();this.$el.focus().val(null).val(n)}else this.$el.focus();return this}}),y=u.Cell=t.View.extend({tagName:"td",formatter:f,editor:g,events:{click:"enterEditMode"},initialize:function(t){this.column=t.column,this.column instanceof _||(this.column=new _(this.column));var n=this.column,r=this.model,i=this.$el,s=u.resolveNameToClass(n.get("formatter")||this.formatter,"Formatter");!e.isFunction(s.fromRaw)&&!e.isFunction(s.toRaw)&&(s=new s),this.formatter=s,this.editor=u.resolveNameToClass(this.editor,"CellEditor"),this.listenTo(r,"change:"+n.get("name"),function(){i.hasClass("editor")||this.render()}),this.listenTo(r,"backgrid:error",this.renderError),this.listenTo(n,"change:editable change:sortable change:renderable",function(e){var t=e.changedAttributes();for(var n in t)t.hasOwnProperty(n)&&i.toggleClass(n,t[n])}),this.updateStateClassesMaybe()},updateStateClassesMaybe:function(){var e=this.model,t=this.column,n=this.$el;n.toggleClass("editable",u.callByNeed(t.editable(),t,e)),n.toggleClass("sortable",u.callByNeed(t.sortable(),t,e)),n.toggleClass("renderable",u.callByNeed(t.renderable(),t,e))},render:function(){var e=this.$el;e.empty();var t=this.model,n=this.column.get("name");return e.text(this.formatter.fromRaw(t.get(n),t)),e.addClass(n),this.updateStateClassesMaybe(),this.delegateEvents(),this},enterEditMode:function(){var e=this.model,t=this.column,n=u.callByNeed(t.editable(),t,e);n&&(this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter}),e.trigger("backgrid:edit",e,t,this,this.currentEditor),this.undelegateEvents(),this.$el.empty(),this.$el.append(this.currentEditor.$el),this.currentEditor.render(),this.$el.addClass("editor"),e.trigger("backgrid:editing",e,t,this,this.currentEditor))},renderError:function(e,t){(t==null||t.get("name")==this.column.get("name"))&&this.$el.addClass("error")},exitEditMode:function(){this.$el.removeClass("error"),this.currentEditor.remove(),this.stopListening(this.currentEditor),delete this.currentEditor,this.$el.removeClass("editor"),this.render()},remove:function(){return this.currentEditor&&(this.currentEditor.remove.apply(this.currentEditor,arguments),delete this.currentEditor),y.__super__.remove.apply(this,arguments)}}),b=u.StringCell=y.extend({className:"string-cell",formatter:p}),w=u.UriCell=y.extend({className:"uri-cell",title:null,target:"_blank",initialize:function(e){w.__super__.initialize.apply(this,arguments),this.title=e.title||this.title,this.target=e.target||this.target},render:function(){this.$el.empty();var e=this.model.get(this.column.get("name")),t=this.formatter.fromRaw(e,this.model);return this.$el.append(o("<a>",{tabIndex:-1,href:e,title:this.title||t,target:this.target}).text(t)),this.delegateEvents(),this}}),E=u.EmailCell=b.extend({className:"email-cell",formatter:d,render:function(){this.$el.empty();var e=this.model,t=this.formatter.fromRaw(e.get(this.column.get("name")),e);return this.$el.append(o("<a>",{tabIndex:-1,href:"mailto:"+t,title:t}).text(t)),this.delegateEvents(),this}}),S=u.NumberCell=y.extend({className:"number-cell",decimals:l.prototype.defaults.decimals,decimalSeparator:l.prototype.defaults.decimalSeparator,orderSeparator:l.prototype.defaults.orderSeparator,formatter:l,initialize:function(e){S.__super__.initialize.apply(this,arguments);var t=this.formatter;t.decimals=this.decimals,t.decimalSeparator=this.decimalSeparator,t.orderSeparator=this.orderSeparator}}),x=u.IntegerCell=S.extend({className:"integer-cell",decimals:0}),T=u.PercentCell=S.extend({className:"percent-cell",multiplier:c.prototype.defaults.multiplier,symbol:c.prototype.defaults.symbol,formatter:c,initialize:function(){T.__super__.initialize.apply(this,arguments);var e=this.formatter;e.multiplier=this.multiplier,e.symbol=this.symbol}}),N=u.DatetimeCell=y.extend({className:"datetime-cell",includeDate:h.prototype.defaults.includeDate,includeTime:h.prototype.defaults.includeTime,includeMilli:h.prototype.defaults.includeMilli,formatter:h,initialize:function(t){N.__super__.initialize.apply(this,arguments);var n=this.formatter;n.includeDate=this.includeDate,n.includeTime=this.includeTime,n.includeMilli=this.includeMilli;var r=this.includeDate?"YYYY-MM-DD":"";r+=this.includeDate&&this.includeTime?"T":"",r+=this.includeTime?"HH:mm:ss":"",r+=this.includeTime&&this.includeMilli?".SSS":"",this.editor=this.editor.extend({attributes:e.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:r})})}}),C=u.DateCell=N.extend({className:"date-cell",includeTime:!1}),k=u.TimeCell=N.extend({className:"time-cell",includeDate:!1}),L=u.BooleanCellEditor=m.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=!0},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=!1},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var e=this.model,t=this.formatter.fromRaw(e.get(this.column.get("name")),e);return this.$el.prop("checked",t),this},enterOrExitEditMode:function(e){if(!this.mouseDown){var t=this.model;t.trigger("backgrid:edited",t,this.column,new a(e))}},saveOrCancel:function(e){var t=this.model,n=this.column,r=this.formatter,i=new a(e);if(i.passThru()&&e.type!="change")return!0;i.cancel()&&(e.stopPropagation(),t.trigger("backgrid:edited",t,n,i));var s=this.$el;if(i.save()||i.moveLeft()||i.moveRight()||i.moveUp()||i.moveDown()){e.preventDefault(),e.stopPropagation();var o=r.toRaw(s.prop("checked"),t);t.set(n.get("name"),o),t.trigger("backgrid:edited",t,n,i)}else if(e.type=="change"){var o=r.toRaw(s.prop("checked"),t);t.set(n.get("name"),o),s.focus()}}}),A=u.BooleanCell=y.extend({className:"boolean-cell",editor:L,events:{click:"enterEditMode"},render:function(){this.$el.empty();var e=this.model,t=this.column,n=u.callByNeed(t.editable(),t,e);return this.$el.append(o("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(e.get(t.get("name")),e),disabled:!n})),this.delegateEvents(),this}}),O=u.SelectCellEditor=m.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:e.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %></option>',null,{variable:null,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g}),setOptionValues:function(t){this.optionValues=t,this.optionValues=e.result(this,"optionValues")},setMultiple:function(e){this.multiple=e,this.$el.prop("multiple",e)},_renderOptions:function(t,n){var r="";for(var i=0;i<t.length;i++)r+=this.template({text:t[i][0],value:t[i][1],selected:e.indexOf(n,t[i][1])>-1});return r},render:function(){this.$el.empty();var t=e.result(this,"optionValues"),n=this.model,r=this.formatter.fromRaw(n.get(this.column.get("name")),n);if(!e.isArray(t))throw new TypeError("optionValues must be an array");var i=null,s=null,i=null,u=null,a=null;for(var f=0;f<t.length;f++){var i=t[f];if(e.isArray(i))s=i[0],i=i[1],this.$el.append(this.template({text:s,value:i,selected:e.indexOf(r,i)>-1}));else{if(!e.isObject(i))throw new TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }");u=i.name,a=o("<optgroup></optgroup>",{label:u}),a.append(this._renderOptions.call(this,i.values,r)),this.$el.append(a)}}return this.delegateEvents(),this},save:function(e){var t=this.model,n=this.column;t.set(n.get("name"),this.formatter.toRaw(this.$el.val(),t))},close:function(e){var t=this.model,n=this.column,r=new a(e);if(r.cancel())e.stopPropagation(),t.trigger("backgrid:edited",t,n,new a(e));else if(r.save()||r.moveLeft()||r.moveRight()||r.moveUp()||r.moveDown()||e.type=="blur")e.preventDefault(),e.stopPropagation(),this.save(e),t.trigger("backgrid:edited",t,n,new a(e))}}),M=u.SelectCell=y.extend({className:"select-cell",editor:O,multiple:!1,formatter:v,optionValues:undefined,delimiter:", ",initialize:function(e){M.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"backgrid:edit",function(e,t,n,r){t.get("name")==this.column.get("name")&&(r.setOptionValues(this.optionValues),r.setMultiple(this.multiple))})},render:function(){this.$el.empty();var t=e.result(this,"optionValues"),n=this.model,r=this.formatter.fromRaw(n.get(this.column.get("name")),n),i=[];try{if(!e.isArray(t)||e.isEmpty(t))throw new TypeError;for(var s=0;s<r.length;s++){var o=r[s];for(var u=0;u<t.length;u++){var a=t[u];if(e.isArray(a)){var f=a[0],a=a[1];a==o&&i.push(f)}else{if(!e.isObject(a))throw new TypeError;var l=a.values;for(var c=0;c<l.length;c++){var h=l[c];h[1]==o&&i.push(h[0])}}}}this.$el.append(i.join(this.delimiter))}catch(p){throw p instanceof TypeError?new TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}"):p}return this.delegateEvents(),this}}),_=u.Column=t.Model.extend({defaults:{name:undefined,label:undefined,sortable:!0,editable:!0,renderable:!0,formatter:undefined,sortType:"cycle",sortValue:undefined,direction:null,cell:undefined,headerCell:undefined},initialize:function(){this.has("label")||this.set({label:this.get("name")},{silent:!0});var e=u.resolveNameToClass(this.get("headerCell"),"HeaderCell"),t=u.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:t,headerCell:e},{silent:!0})},sortValue:function(){var t=this.get("sortValue");return e.isString(t)?this[t]:e.isFunction(t)?t:function(e,t){return e.get(t)}}});e.each(["sortable","renderable","editable"],function(t){_.prototype[t]=function(){var n=this.get(t);return e.isString(n)?this[n]:e.isFunction(n)?n:!!n}});var D=u.Columns=t.Collection.extend({model:_}),P=u.Row=t.View.extend({tagName:"tr",initialize:function(e){var n=this.columns=e.columns;n instanceof t.Collection||(n=this.columns=new D(n));var r=this.cells=[];for(var i=0;i<n.length;i++)r.push(this.makeCell(n.at(i),e));this.listenTo(n,"add",function(t,n){var i=n.indexOf(t),s=this.makeCell(t,e);r.splice(i,0,s);var o=this.$el;i===0?o.prepend(s.render().$el):i===n.length-1?o.append(s.render().$el):o.children().eq(i).before(s.render().$el)}),this.listenTo(n,"remove",function(e,t,n){r[n.index].remove(),r.splice(n.index,1)})},makeCell:function(e){return new(e.get("cell"))({column:e,model:this.model})},render:function(){this.$el.empty();var e=document.createDocumentFragment();for(var t=0;t<this.cells.length;t++)e.appendChild(this.cells[t].render().el);return this.el.appendChild(e),this.delegateEvents(),this},remove:function(){for(var e=0;e<this.cells.length;e++){var n=this.cells[e];n.remove.apply(n,arguments)}return t.View.prototype.remove.apply(this,arguments)}}),H=u.EmptyRow=t.View.extend({tagName:"tr",emptyText:null,initialize:function(e){this.emptyText=e.emptyText,this.columns=e.columns},render:function(){this.$el.empty();var t=document.createElement("td");t.setAttribute("colspan",this.columns.length);var n=document.createElement("span");return n.innerHTML=e.result(this,"emptyText"),t.appendChild(n),this.el.className="empty",this.el.appendChild(t),this}}),B=u.HeaderCell=t.View.extend({tagName:"th",events:{"click button":"onClick"},initialize:function(e){this.column=e.column,this.column instanceof _||(this.column=new _(this.column));var t=this.column,n=this.collection,r=this.$el;this.listenTo(t,"change:editable change:sortable change:renderable",function(e){var t=e.changedAttributes();for(var n in t)t.hasOwnProperty(n)&&r.toggleClass(n,t[n])}),this.listenTo(t,"change:direction",this.setCellDirection),this.listenTo(t,"change:name change:label",this.render),u.callByNeed(t.editable(),t,n)&&r.addClass("editable"),u.callByNeed(t.sortable(),t,n)&&r.addClass("sortable"),u.callByNeed(t.renderable(),t,n)&&r.addClass("renderable"),this.listenTo(n.fullCollection||n,"backgrid:sorted",this.removeCellDirection)},removeCellDirection:function(){this.$el.removeClass("ascending").removeClass("descending"),this.column.set("direction",null)},setCellDirection:function(e,t){this.$el.removeClass("ascending").removeClass("descending"),e.cid==this.column.cid&&this.$el.addClass(t)},onClick:function(e){function i(e,i){t.get("direction")==="ascending"?n.trigger(r,i,"descending"):t.get("direction")==="descending"?n.trigger(r,i,null):n.trigger(r,i,"ascending")}function s(e,i){t.get("direction")==="ascending"?n.trigger(r,i,"descending"):n.trigger(r,i,"ascending")}e.preventDefault();var t=this.column,n=this.collection,r="backgrid:sort",o=u.callByNeed(t.sortable(),t,this.collection);if(o){var a=t.get("sortType");a==="toggle"?s(this,t):i(this,t)}},render:function(){this.$el.empty();var e=this.column,t=u.callByNeed(e.sortable(),e,this.collection),n;return t?n=o("<button>").text(e.get("label")).append("<span class='sort-caret' aria-hidden='true'></span>"):n=document.createTextNode(e.get("label")),this.$el.append(n),this.$el.addClass(e.get("name")),this.$el.addClass(e.get("direction")),this.delegateEvents(),this}}),j=u.HeaderRow=u.Row.extend({initialize:function(){u.Row.prototype.initialize.apply(this,arguments)},makeCell:function(e,t){var n=e.get("headerCell")||t.headerCell||B;return n=new n({column:e,collection:this.collection}),n}}),F=u.Header=t.View.extend({tagName:"thead",initialize:function(e){this.columns=e.columns,this.columns instanceof t.Collection||(this.columns=new D(this.columns)),this.row=new u.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){return this.$el.append(this.row.render().$el),this.delegateEvents(),this},remove:function(){return this.row.remove.apply(this.row,arguments),t.View.prototype.remove.apply(this,arguments)}}),I=u.Body=t.View.extend({tagName:"tbody",initialize:function(e){this.columns=e.columns,this.columns instanceof t.Collection||(this.columns=new D(this.columns)),this.row=e.row||this.row||P,this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this),this.emptyText=e.emptyText,this._unshiftEmptyRowMayBe();var n=this.collection;this.listenTo(n,"add",this.insertRow),this.listenTo(n,"remove",this.removeRow),this.listenTo(n,"sort",this.refresh),this.listenTo(n,"reset",this.refresh),this.listenTo(n,"backgrid:sort",this.sort),this.listenTo(n,"backgrid:edited",this.moveToNextCell),this.listenTo(this.columns,"add remove",this.updateEmptyRow)},_unshiftEmptyRowMayBe:function(){if(this.rows.length===0&&this.emptyText!=null)return this.emptyRow=new H({emptyText:this.emptyText,columns:this.columns}),this.rows.unshift(this.emptyRow),!0},insertRow:function(e,n,r){this.rows[0]instanceof H&&this.rows.pop().remove();if(n instanceof t.Collection||!!r){var i=new this.row({columns:this.columns,model:e}),s=n.indexOf(e);this.rows.splice(s,0,i);var o=this.$el,u=o.children(),a=i.render().$el;return s>=u.length?o.append(a):u.eq(s).before(a),this}this.collection.add(e,r=n);return},removeRow:function(t,n,r){if(!r){this.collection.remove(t,r=n),this._unshiftEmptyRowMayBe()&&this.render();return}return(e.isUndefined(r.render)||r.render)&&this.rows[r.index].remove(),this.rows.splice(r.index,1),this._unshiftEmptyRowMayBe()&&this.render(),this},updateEmptyRow:function(){this.emptyRow!=null&&this.emptyRow.render()},refresh:function(){for(var e=0;e<this.rows.length;e++)this.rows[e].remove();return this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this),this._unshiftEmptyRowMayBe(),this.render(),this.collection.trigger("backgrid:refresh",this),this},render:function(){this.$el.empty();var e=document.createDocumentFragment();for(var t=0;t<this.rows.length;t++){var n=this.rows[t];e.appendChild(n.render().el)}return this.el.appendChild(e),this.delegateEvents(),this},remove:function(){for(var e=0;e<this.rows.length;e++){var n=this.rows[e];n.remove.apply(n,arguments)}return t.View.prototype.remove.apply(this,arguments)},sort:function(n,r){if(!e.contains(["ascending","descending",null],r))throw new RangeError('direction must be one of "ascending", "descending" or `null`');e.isString(n)&&(n=this.columns.findWhere({name:n}));var i=this.collection,s;r==="ascending"?s=-1:r==="descending"?s=1:s=null;var o=this.makeComparator(n.get("name"),s,s?n.sortValue():function(e){return e.cid.replace("c","")*1});return t.PageableCollection&&i instanceof t.PageableCollection?(i.setSorting(s&&n.get("name"),s,{sortValue:n.sortValue()}),i.fullCollection?(i.fullCollection.comparator==null&&(i.fullCollection.comparator=o),i.fullCollection.sort(),i.trigger("backgrid:sorted",n,r,i),n.set("direction",r)):i.fetch({reset:!0,success:function(){i.trigger("backgrid:sorted",n,r,i),n.set("direction",r)}})):(i.comparator=o,i.sort(),i.trigger("backgrid:sorted",n,r,i),n.set("direction",r)),this},makeComparator:function(e,t,n){return function(r,i){var s=n(r,e),o=n(i,e),u;return t===1&&(u=s,s=o,o=u),s===o?0:s<o?-1:1}},moveToNextCell:function(e,t,n){var r=this.collection.indexOf(e),i=this.columns.indexOf(t),s,o,a,f,l;if(i===-1)return this;this.rows[r].cells[i].exitEditMode();if(n.moveUp()||n.moveDown()||n.moveLeft()||n.moveRight()||n.save()){var c=this.columns.length,h=c*this.collection.length;if(n.moveUp()||n.moveDown()){f=r+(n.moveUp()?-1:1);var p=this.rows[f];p?(s=p.cells[i],u.callByNeed(s.column.editable(),s.column,e)&&(s.enterEditMode(),e.trigger("backgrid:next",f,i,!1))):e.trigger("backgrid:next",f,i,!0)}else if(n.moveLeft()||n.moveRight()){var d=n.moveRight();for(var v=r*c+i+(d?1:-1);v>=0&&v<h;d?v++:v--){f=~~(v/c),l=v-f*c,s=this.rows[f].cells[l],o=u.callByNeed(s.column.renderable(),s.column,s.model),a=u.callByNeed(s.column.editable(),s.column,e);if(o&&a){s.enterEditMode(),e.trigger("backgrid:next",f,l,!1);break}}v==h&&e.trigger("backgrid:next",~~(v/c),v-f*c,!0)}}return this}}),q=u.Footer=t.View.extend({tagName:"tfoot",initialize:function(e){this.columns=e.columns,this.columns instanceof t.Collection||(this.columns=new u.Columns(this.columns))}}),R=u.Grid=t.View.extend({tagName:"table",className:"backgrid",header:F,body:I,footer:null,initialize:function(n){n.columns instanceof t.Collection||(n.columns=new D(n.columns||this.columns)),this.columns=n.columns,this.caption=n.caption;var r=e.omit(n,["el","id","attributes","className","tagName","events"]);this.body=n.body||this.body,this.body=new this.body(r),this.header=n.header||this.header,this.header&&(this.header=new this.header(r)),this.footer=n.footer||this.footer,this.footer&&(this.footer=new this.footer(r)),this.listenTo(this.columns,"reset",function(){this.header&&(this.header=new(this.header.remove().constructor)(r)),this.body=new(this.body.remove().constructor)(r),this.footer&&(this.footer=new(this.footer.remove().constructor)(r)),this.render()})},insertRow:function(){return this.body.insertRow.apply(this.body,arguments),this},removeRow:function(){return this.body.removeRow.apply(this.body,arguments),this},insertColumn:function(){return this.columns.add.apply(this.columns,arguments),this},removeColumn:function(){return this.columns.remove.apply(this.columns,arguments),this},sort:function(){return this.body.sort.apply(this.body,arguments),this},render:function(){return this.$el.empty(),this.caption&&this.$el.append(o("<caption>").text(this.caption)),this.header&&this.$el.append(this.header.render().$el),this.footer&&this.$el.append(this.footer.render().$el),this.$el.append(this.body.render().$el),this.delegateEvents(),this.trigger("backgrid:rendered",this),this},remove:function(){return this.header&&this.header.remove.apply(this.header,arguments),this.body.remove.apply(this.body,arguments),this.footer&&this.footer.remove.apply(this.footer,arguments),t.View.prototype.remove.apply(this,arguments)}});return u}),function(e){function tt(e,t,n){switch(arguments.length){case 2:return e!=null?e:t;case 3:return e!=null?e:t!=null?t:n;default:throw new Error("Implement me")}}function nt(e,t){return o.call(e,t)}function rt(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function it(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function st(e,t){var n=!0;return ht(function(){return n&&(it(e),n=!1),t.apply(this,arguments)},t)}function ot(e,t){Z[e]||(it(t),Z[e]=!0)}function ut(e,t){return function(n){return vt(e.call(this,n),t)}}function at(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function ft(){}function lt(e,t){t!==!1&&Mt(e),pt(this,e),this._d=new Date(+e._d)}function ct(e){var n=Tt(e),r=n.year||0,i=n.quarter||0,s=n.month||0,o=n.week||0,u=n.day||0,a=n.hour||0,f=n.minute||0,l=n.second||0,c=n.millisecond||0;this._milliseconds=+c+l*1e3+f*6e4+a*36e5,this._days=+u+o*7,this._months=+s+i*3+r*12,this._data={},this._locale=t.localeData(),this._bubble()}function ht(e,t){for(var n in t)nt(t,n)&&(e[n]=t[n]);return nt(t,"toString")&&(e.toString=t.toString),nt(t,"valueOf")&&(e.valueOf=t.valueOf),e}function pt(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=t._pf),typeof t._locale!="undefined"&&(e._locale=t._locale);if(m.length>0)for(n in m)r=m[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function dt(e){return e<0?Math.ceil(e):Math.floor(e)}function vt(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function mt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function gt(e,t){var n;return t=Bt(t,e),e.isBefore(t)?n=mt(e,t):(n=mt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function yt(e,n){return function(r,i){var s,o;return i!==null&&!isNaN(+i)&&(ot(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period)."),o=r,r=i,i=o),r=typeof r=="string"?+r:r,s=t.duration(r,i),bt(this,s,e),this}}function bt(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&dn(e,"Date",pn(e,"Date")+o*r),u&&hn(e,pn(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function wt(e){return Object.prototype.toString.call(e)==="[object Array]"}function Et(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function St(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&Ct(e[o])!==Ct(t[o]))&&s++;return s+i}function xt(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=V[e]||$[t]||t}return e}function Tt(e){var t={},n,r;for(r in e)nt(e,r)&&(n=xt(r),n&&(t[n]=e[r]));return t}function Nt(n){var r,i;if(n.indexOf("week")===0)r=7,i="day";else{if(n.indexOf("month")!==0)return;r=12,i="month"}t[n]=function(s,o){var u,a,f=t._locale[n],l=[];typeof s=="number"&&(o=s,s=e),a=function(e){var n=t().utc().set(i,e);return f.call(t._locale,n,s||"")};if(o!=null)return a(o);for(u=0;u<r;u++)l.push(a(u));return l}}function Ct(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function kt(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Lt(e,n,r){return an(t([e,11,31+n-r]),n,r).week}function At(e){return Ot(e)?366:365}function Ot(e){return e%4===0&&e%100!==0||e%400===0}function Mt(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[f]<0||e._a[f]>11?f:e._a[l]<1||e._a[l]>kt(e._a[a],e._a[f])?l:e._a[c]<0||e._a[c]>24||e._a[c]===24&&(e._a[h]!==0||e._a[p]!==0||e._a[d]!==0)?c:e._a[h]<0||e._a[h]>59?h:e._a[p]<0||e._a[p]>59?p:e._a[d]<0||e._a[d]>999?d:-1,e._pf._overflowDayOfYear&&(t<a||t>l)&&(t=l),e._pf.overflow=t)}function _t(t){return t._isValid==null&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&t._pf.charsLeftOver===0&&t._pf.unusedTokens.length===0&&t._pf.bigHour===e)),t._isValid}function Dt(e){return e?e.toLowerCase().replace("_","-"):e}function Pt(e){var t=0,n,r,i,s;while(t<e.length){s=Dt(e[t]).split("-"),n=s.length,r=Dt(e[t+1]),r=r?r.split("-"):null;while(n>0){i=Ht(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&St(s,r,!0)>=n-1)break;n--}t++}return null}function Ht(e){var n=null;if(!v[e]&&g)try{n=t.locale(),require("./locale/"+e),t.locale(n)}catch(r){}return v[e]}function Bt(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(t.isMoment(e)||Et(e)?+e:+t(e))- +r,r._d.setTime(+r._d+i),t.updateOffset(r,!1),r):t(e).local()}function jt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Ft(e){var t=e.match(E),n,r;for(n=0,r=t.length;n<r;n++)Y[t[n]]?t[n]=Y[t[n]]:t[n]=jt(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function It(e,t){return e.isValid()?(t=qt(t,e.localeData()),J[t]||(J[t]=Ft(t)),J[t](e)):e.localeData().invalidDate()}function qt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;S.lastIndex=0;while(n>=0&&S.test(e))e=e.replace(S,r),S.lastIndex=0,n-=1;return e}function Rt(e,t){var n,r=t._strict;switch(e){case"Q":return D;case"DDDD":return H;case"YYYY":case"GGGG":case"gggg":return r?B:N;case"Y":case"G":case"g":return F;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?j:C;case"S":if(r)return D;case"SS":if(r)return P;case"SSS":if(r)return H;case"DDD":return T;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return L;case"a":case"A":return t._locale._meridiemParse;case"x":return M;case"X":return _;case"Z":case"ZZ":return A;case"T":return O;case"SSSS":return k;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?P:x;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return x;case"Do":return r?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(Qt(Kt(e.replace("\\","")),"i")),n}}function Ut(e){e=e||"";var t=e.match(A)||[],n=t[t.length-1]||[],r=(n+"").match(z)||["-",0,0],i=+(r[1]*60)+Ct(r[2]);return r[0]==="+"?-i:i}function zt(e,n,r){var i,s=r._a;switch(e){case"Q":n!=null&&(s[f]=(Ct(n)-1)*3);break;case"M":case"MM":n!=null&&(s[f]=Ct(n)-1);break;case"MMM":case"MMMM":i=r._locale.monthsParse(n,e,r._strict),i!=null?s[f]=i:r._pf.invalidMonth=n;break;case"D":case"DD":n!=null&&(s[l]=Ct(n));break;case"Do":n!=null&&(s[l]=Ct(parseInt(n.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":n!=null&&(r._dayOfYear=Ct(n));break;case"YY":s[a]=t.parseTwoDigitYear(n);break;case"YYYY":case"YYYYY":case"YYYYYY":s[a]=Ct(n);break;case"a":case"A":r._isPm=r._locale.isPM(n);break;case"h":case"hh":r._pf.bigHour=!0;case"H":case"HH":s[c]=Ct(n);break;case"m":case"mm":s[h]=Ct(n);break;case"s":case"ss":s[p]=Ct(n);break;case"S":case"SS":case"SSS":case"SSSS":s[d]=Ct(("0."+n)*1e3);break;case"x":r._d=new Date(Ct(n));break;case"X":r._d=new Date(parseFloat(n)*1e3);break;case"Z":case"ZZ":r._useUTC=!0,r._tzm=Ut(n);break;case"dd":case"ddd":case"dddd":i=r._locale.weekdaysParse(n),i!=null?(r._w=r._w||{},r._w.d=i):r._pf.invalidWeekday=n;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),n&&(r._w=r._w||{},r._w[e]=Ct(n));break;case"gg":case"GG":r._w=r._w||{},r._w[e]=t.parseTwoDigitYear(n)}}function Wt(e){var n,r,i,s,o,u,f;n=e._w,n.GG!=null||n.W!=null||n.E!=null?(o=1,u=4,r=tt(n.GG,e._a[a],an(t(),1,4).year),i=tt(n.W,1),s=tt(n.E,1)):(o=e._locale._week.dow,u=e._locale._week.doy,r=tt(n.gg,e._a[a],an(t(),o,u).year),i=tt(n.w,1),n.d!=null?(s=n.d,s<o&&++i):n.e!=null?s=n.e+o:s=o),f=fn(r,i,s,u,o),e._a[a]=f.year,e._dayOfYear=f.dayOfYear}function Xt(e){var t,n,r=[],i,s;if(e._d)return;i=$t(e),e._w&&e._a[l]==null&&e._a[f]==null&&Wt(e),e._dayOfYear&&(s=tt(e._a[a],i[a]),e._dayOfYear>At(s)&&(e._pf._overflowDayOfYear=!0),n=rn(s,0,e._dayOfYear),e._a[f]=n.getUTCMonth(),e._a[l]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[c]===24&&e._a[h]===0&&e._a[p]===0&&e._a[d]===0&&(e._nextDay=!0,e._a[c]=0),e._d=(e._useUTC?rn:nn).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[c]=24)}function Vt(e){var t;if(e._d)return;t=Tt(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],Xt(e)}function $t(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Jt(n){if(n._f===t.ISO_8601){Yt(n);return}n._a=[],n._pf.empty=!0;var r=""+n._i,i,s,o,u,a,f=r.length,l=0;o=qt(n._f,n._locale).match(E)||[];for(i=0;i<o.length;i++)u=o[i],s=(r.match(Rt(u,n))||[])[0],s&&(a=r.substr(0,r.indexOf(s)),a.length>0&&n._pf.unusedInput.push(a),r=r.slice(r.indexOf(s)+s.length),l+=s.length),Y[u]?(s?n._pf.empty=!1:n._pf.unusedTokens.push(u),zt(u,s,n)):n._strict&&!s&&n._pf.unusedTokens.push(u);n._pf.charsLeftOver=f-l,r.length>0&&n._pf.unusedInput.push(r),n._pf.bigHour===!0&&n._a[c]<=12&&(n._pf.bigHour=e),n._isPm&&n._a[c]<12&&(n._a[c]+=12),n._isPm===!1&&n._a[c]===12&&(n._a[c]=0),Xt(n),Mt(n)}function Kt(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Qt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Gt(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=pt({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._pf=rt(),t._f=e._f[i],Jt(t);if(!_t(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}ht(e,n||t)}function Yt(e){var t,n,r=e._i,i=I.exec(r);if(i){e._pf.iso=!0;for(t=0,n=R.length;t<n;t++)if(R[t][1].exec(r)){e._f=R[t][0]+(i[6]||" ");break}for(t=0,n=U.length;t<n;t++)if(U[t][1].exec(r)){e._f+=U[t][0];break}r.match(A)&&(e._f+="Z"),Jt(e)}else e._isValid=!1}function Zt(e){Yt(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function en(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function tn(n){var r=n._i,i;r===e?n._d=new Date:Et(r)?n._d=new Date(+r):(i=y.exec(r))!==null?n._d=new Date(+i[1]):typeof r=="string"?Zt(n):wt(r)?(n._a=en(r.slice(0),function(e){return parseInt(e,10)}),Xt(n)):typeof r=="object"?Vt(n):typeof r=="number"?n._d=new Date(r):t.createFromInputFallback(n)}function nn(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function rn(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function sn(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function on(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function un(e,n,r){var i=t.duration(e).abs(),o=s(i.as("s")),u=s(i.as("m")),a=s(i.as("h")),f=s(i.as("d")),l=s(i.as("M")),c=s(i.as("y")),h=o<K.s&&["s",o]||u===1&&["m"]||u<K.m&&["mm",u]||a===1&&["h"]||a<K.h&&["hh",a]||f===1&&["d"]||f<K.d&&["dd",f]||l===1&&["M"]||l<K.M&&["MM",l]||c===1&&["y"]||["yy",c];return h[2]=n,h[3]=+e>0,h[4]=r,on.apply({},h)}function an(e,n,r){var i=r-n,s=r-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=t(e).add(s,"d"),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function fn(e,t,n,r,i){var s=rn(e,0,1).getUTCDay(),o,u;return s=s===0?7:s,n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:At(e-1)+u}}function ln(n){var r=n._i,i=n._f,s;return n._locale=n._locale||t.localeData(n._l),r===null||i===e&&r===""?t.invalid({nullInput:!0}):(typeof r=="string"&&(n._i=r=n._locale.preparse(r)),t.isMoment(r)?new lt(r,!0):(i?wt(i)?Gt(n):Jt(n):tn(n),s=new lt(n),s._nextDay&&(s.add(1,"d"),s._nextDay=e),s))}function cn(e,n){var r,i;n.length===1&&wt(n[0])&&(n=n[0]);if(!n.length)return t();r=n[0];for(i=1;i<n.length;++i)n[i][e](r)&&(r=n[i]);return r}function hn(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),kt(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function pn(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function dn(e,t,n){return t==="Month"?hn(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function vn(e,n){return function(r){return r!=null?(dn(this,e,r),t.updateOffset(this,n),this):pn(this,e)}}function mn(e){return e*400/146097}function gn(e){return e*146097/400}function yn(e){t.duration.fn[e]=function(){return this._data[e]}}function bn(e){if(typeof ender!="undefined")return;i=r.moment,e?r.moment=st("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",t):r.moment=t}var t,n="2.8.4",r=typeof global!="undefined"?global:this,i,s=Math.round,o=Object.prototype.hasOwnProperty,u,a=0,f=1,l=2,c=3,h=4,p=5,d=6,v={},m=[],g=typeof module!="undefined"&&module&&module.exports,y=/^\/?Date\((\-?\d+)/i,b=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,w=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,E=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,S=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,x=/\d\d?/,T=/\d{1,3}/,N=/\d{1,4}/,C=/[+\-]?\d{1,6}/,k=/\d+/,L=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,A=/Z|[\+\-]\d\d:?\d\d/gi,O=/T/i,M=/[\+\-]?\d+/,_=/[\+\-]?\d+(\.\d{1,3})?/,D=/\d/,P=/\d\d/,H=/\d{3}/,B=/\d{4}/,j=/[+-]?\d{6}/,F=/[+-]?\d+/,I=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,q="YYYY-MM-DDTHH:mm:ssZ",R=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],U=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],z=/([\+\-]|\d\d)/gi,W="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),X={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},V={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},$={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},J={},K={s:45,m:45,h:22,d:26,M:11},Q="DDD w W M D d".split(" "),G="M D H h m s w W".split(" "),Y={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return vt(this.year()%100,2)},YYYY:function(){return vt(this.year(),4)},YYYYY:function(){return vt(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+vt(Math.abs(e),6)},gg:function(){return vt(this.weekYear()%100,2)},gggg:function(){return vt(this.weekYear(),4)},ggggg:function(){return vt(this.weekYear(),5)},GG:function(){return vt(this.isoWeekYear()%100,2)},GGGG:function(){return vt(this.isoWeekYear(),4)},GGGGG:function(){return vt(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return Ct(this.milliseconds()/100)},SS:function(){return vt(Ct(this.milliseconds()/10),2)},SSS:function(){return vt(this.milliseconds(),3)},SSSS:function(){return vt(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+vt(Ct(e/60),2)+":"+vt(Ct(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+vt(Ct(e/60),2)+vt(Ct(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Z={},et=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];while(Q.length)u=Q.pop(),Y[u+"o"]=at(Y[u],u);while(G.length)u=G.pop(),Y[u+u]=ut(Y[u],2);Y.DDDD=ut(Y.DDD,3),ht(ft.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,n,r){var i,s,o;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(i=0;i<12;i++){s=t.utc([2e3,i]),r&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!r&&!this._monthsParse[i]&&(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i"));if(r&&n==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(r&&n==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!r&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var n,r,i;this._weekdaysParse||(this._weekdaysParse=[]);for(n=0;n<7;n++){this._weekdaysParse[n]||(r=t([2e3,1]).day(n),i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[n].test(e))return n}},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return typeof r=="function"?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return an(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),t=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=r,s._strict=i,s._isUTC=!1,s._pf=rt(),ln(s)},t.suppressDeprecationWarnings=!1,t.createFromInputFallback=st("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.min=function(){var e=[].slice.call(arguments,0);return cn("isBefore",e)},t.max=function(){var e=[].slice.call(arguments,0);return cn("isAfter",e)},t.utc=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=t,s._f=n,s._strict=i,s._pf=rt(),ln(s).utc()},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=e,i=null,s,o,u,a;return t.isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(r={},n?r[n]=e:r.milliseconds=e):(i=b.exec(e))?(s=i[1]==="-"?-1:1,r={y:0,d:Ct(i[l])*s,h:Ct(i[c])*s,m:Ct(i[h])*s,s:Ct(i[p])*s,ms:Ct(i[d])*s}):(i=w.exec(e))?(s=i[1]==="-"?-1:1,u=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s},r={y:u(i[2]),M:u(i[3]),d:u(i[4]),h:u(i[5]),m:u(i[6]),s:u(i[7]),w:u(i[8])}):typeof r=="object"&&("from"in r||"to"in r)&&(a=gt(t(r.from),t(r.to)),r={},r.ms=a.milliseconds,r.M=a.months),o=new ct(r),t.isDuration(e)&&nt(e,"_locale")&&(o._locale=e._locale),o},t.version=n,t.defaultFormat=q,t.ISO_8601=function(){},t.momentProperties=m,t.updateOffset=function(){},t.relativeTimeThreshold=function(t,n){return K[t]===e?!1:n===e?K[t]:(K[t]=n,!0)},t.lang=st("moment.lang is deprecated. Use moment.locale instead.",function(e,n){return t.locale(e,n)}),t.locale=function(e,n){var r;return e&&(typeof n!="undefined"?r=t.defineLocale(e,n):r=t.localeData(e),r&&(t.duration._locale=t._locale=r)),t._locale._abbr},t.defineLocale=function(e,n){return n!==null?(n.abbr=e,v[e]||(v[e]=new ft),v[e].set(n),t.locale(e),v[e]):(delete v[e],null)},t.langData=st("moment.langData is deprecated. Use moment.localeData instead.",function(e){return t.localeData(e)}),t.localeData=function(e){var n;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return t._locale;if(!wt(e)){n=Ht(e);if(n)return n;e=[e]}return Pt(e)},t.isMoment=function(e){return e instanceof lt||e!=null&&nt(e,"_isAMomentObject")},t.isDuration=function(e){return e instanceof ct};for(u=et.length-1;u>=0;--u)Nt(et[u]);t.normalizeUnits=function(e){return xt(e)},t.invalid=function(e){var n=t.utc(NaN);return e!=null?ht(n._pf,e):n._pf.userInvalidated=!0,n},t.parseZone=function(){return t.apply(null,arguments).parseZone()},t.parseTwoDigitYear=function(e){return Ct(e)+(Ct(e)>68?1900:2e3)},ht(t.fn=lt.prototype,{clone:function(){return t(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=t(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():It(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):It(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return _t(this)},isDSTShifted:function(){return this._a?this.isValid()&&St(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray())>0:!1},parsingFlags:function(){return ht({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var n=It(this,e||t.defaultFormat);return this.localeData().postformat(n)},add:yt(1,"add"),subtract:yt(-1,"subtract"),diff:function(e,n,r){var i=Bt(e,this),s=(this.zone()-i.zone())*6e4,o,u,a;return n=xt(n),n==="year"||n==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),a=this-t(this).startOf("month")-(i-t(i).startOf("month")),a-=(this.zone()-t(this).startOf("month").zone()-(i.zone()-t(i).startOf("month").zone()))*6e4,u+=a/o,n==="year"&&(u/=12)):(o=this-i,u=n==="second"?o/1e3:n==="minute"?o/6e4:n==="hour"?o/36e5:n==="day"?(o-s)/864e5:n==="week"?(o-s)/6048e5:o),r?u:dt(u)},from:function(e,n){return t.duration({to:this,from:e}).locale(this.locale()).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(e){var n=e||t(),r=Bt(n,this).startOf("day"),i=this.diff(r,"days",!0),s=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this,t(n)))},isLeapYear:function(){return Ot(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=sn(e,this.localeData()),this.add(e-t,"d")):t},month:vn("Month",!0),startOf:function(e){e=xt(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this},endOf:function(t){return t=xt(t),t===e||t==="millisecond"?this:this.startOf(t).add(1,t==="isoWeek"?"week":t).subtract(1,"ms")},isAfter:function(e,n){var r;return n=xt(typeof n!="undefined"?n:"millisecond"),n==="millisecond"?(e=t.isMoment(e)?e:t(e),+this>+e):(r=t.isMoment(e)?+e:+t(e),r<+this.clone().startOf(n))},isBefore:function(e,n){var r;return n=xt(typeof n!="undefined"?n:"millisecond"),n==="millisecond"?(e=t.isMoment(e)?e:t(e),+this<+e):(r=t.isMoment(e)?+e:+t(e),+this.clone().endOf(n)<r)},isSame:function(e,n){var r;return n=xt(n||"millisecond"),n==="millisecond"?(e=t.isMoment(e)?e:t(e),+this===+e):(r=+t(e),+this.clone().startOf(n)<=r&&r<=+this.clone().endOf(n))},min:st("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=t.apply(null,arguments),e<this?this:e}),max:st("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=t.apply(null,arguments),e>this?this:e}),zone:function(e,n){var r=this._offset||0,i;return e==null?this._isUTC?r:this._dateTzOffset():(typeof e=="string"&&(e=Ut(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=this._dateTzOffset()),this._offset=e,this._isUTC=!0,i!=null&&this.subtract(i,"m"),r!==e&&(!n||this._changeInProgress?bt(this,t.duration(r-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e?e=t(e).zone():e=0,(this.zone()-e)%60===0},daysInMonth:function(){return kt(this.year(),this.month())},dayOfYear:function(e){var n=s((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return e==null?n:this.add(e-n,"d")},quarter:function(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)},weekYear:function(e){var t=an(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=an(this,1,4).year;return e==null?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")},isoWeek:function(e){var t=an(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return Lt(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return Lt(this.year(),e.dow,e.doy)},get:function(e){return e=xt(e),this[e]()},set:function(e,t){return e=xt(e),typeof this[e]=="function"&&this[e](t),this},locale:function(n){var r;return n===e?this._locale._abbr:(r=t.localeData(n),r!=null&&(this._locale=r),this)},lang:st("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15}}),t.fn.millisecond=t.fn.milliseconds=vn("Milliseconds",!1),t.fn.second=t.fn.seconds=vn("Seconds",!1),t.fn.minute=t.fn.minutes=vn("Minutes",!1),t.fn.hour=t.fn.hours=vn("Hours",!0),t.fn.date=vn("Date",!0),t.fn.dates=st("dates accessor is deprecated. Use date instead.",vn("Date",!0)),t.fn.year=vn("FullYear",!0),t.fn.years=st("years accessor is deprecated. Use year instead.",vn("FullYear",!0)),t.fn.days=t.fn.day,t.fn.months=t.fn.month,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.fn.quarters=t.fn.quarter,t.fn.toJSON=t.fn.toISOString,ht(t.duration.fn=ct.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u=0;r.milliseconds=e%1e3,i=dt(e/1e3),r.seconds=i%60,s=dt(i/60),r.minutes=s%60,o=dt(s/60),r.hours=o%24,t+=dt(o/24),u=dt(mn(t)),t-=dt(gn(u)),n+=dt(t/30),t%=30,u+=dt(n/12),n%=12,r.days=t,r.months=n,r.years=u},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return dt(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+Ct(this._months/12)*31536e6},humanize:function(e){var t=un(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,n){var r=t.duration(e,n);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(e,n){var r=t.duration(e,n);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(e){return e=xt(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;e=xt(e);if(e==="month"||e==="year")return t=this._days+this._milliseconds/864e5,n=this._months+mn(t)*12,e==="month"?n:n/12;t=this._days+Math.round(gn(this._months/12));switch(e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return t*24+this._milliseconds/36e5;case"minute":return t*24*60+this._milliseconds/6e4;case"second":return t*24*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(t*24*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:t.fn.lang,locale:t.fn.locale,toIsoString:st("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),t.duration.fn.toString=t.duration.fn.toISOString;for(u in X)nt(X,u)&&yn(u.toLowerCase());t.duration.fn.asMilliseconds=function(){return this.as("ms")},t.duration.fn.asSeconds=function(){return this.as("s")},t.duration.fn.asMinutes=function(){return this.as("m")},t.duration.fn.asHours=function(){return this.as("h")},t.duration.fn.asDays=function(){return this.as("d")},t.duration.fn.asWeeks=function(){return this.as("weeks")},t.duration.fn.asMonths=function(){return this.as("M")},t.duration.fn.asYears=function(){return this.as("y")},t.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=Ct(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),g?module.exports=t:typeof define=="function"&&define.amd?(define("moment",["require","exports","module"],function(e,n,s){return s.config&&s.config()&&s.config().noGlobal===!0&&(r.moment=i),t}),bn(!0)):bn()}.call(this),define("app/views/services",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/services.html","backgrid","moment"],function(e,t,n,r,i,s){"use strict";var o=e.View.extend({columns:[{label:"",name:"Status",cell:"html",editable:!1,className:"activeServiceCol",formatter:t.extend({},i.CellFormatter.prototype,{fromRaw:function(e){return e==="Yellow"?'<i class="fa fa-circle" style="color: #fecd5e;"></i>':e==="Green"?'<i class="fa fa-circle" style="color: #a1d26e;"></i>':'<i class="fa fa-circle" style="color: #fd685c;"></i>'}})},{name:"Name",cell:"string",editable:!1},{Label:"Last Heartbeat",name:"LastHeartbeat",cell:"string",editable:!1,formatter:t.extend({},i.CellFormatter.prototype,{fromRaw:function(e){return s.utc(e).local().format("DD/MM/YYYY HH:mm:ss")}})},{name:"InstanceLocation",label:"Location",cell:"string",editable:!1},{name:"LatestMemory",label:"Memory (mb)",cell:"number",editable:!1,decimals:2,formatter:t.extend({},i.CellFormatter.prototype,{fromRaw:function(e){return(e/Math.pow(1024,2)).toFixed(2)}})},{name:"LatestCpu",label:"Latest CPU",cell:"percent",editable:!1,decimals:2},{label:"",name:"Name",cell:"html",className:"detailsCol",editable:!1,formatter:t.extend({},i.CellFormatter.prototype,{fromRaw:function(e,t){return"<a href='#endpoint/"+e+"/"+t.get("InstanceLocation")+"' >Details</a>"}})}],initialize:function(){t.bindAll(this)},render:function(){return this.$el.html(r),this.grid=new i.Grid({columns:this.columns,collection:this.collection}),this.$el.find(".serviceGrid").html(this.grid.render().$el),this.$el.find(".backgrid").addClass("table-hover"),this.$el.find(".backgrid").addClass("table-bordered"),this}});return o}),define("bower_components/requirejs-text/text!app/templates/endPointGraph.html",[],function(){return'<div id="serviceGraph" style="height: 500px;"></div>'}),function(t,n){typeof exports=="object"&&typeof module=="object"?module.exports=n():typeof define=="function"&&define.amd?define("vis",n):typeof exports=="object"?exports.vis=n():t.vis=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){t.util=n(1),t.DOMutil=n(2),t.DataSet=n(3),t.DataView=n(4),t.Queue=n(5),t.Graph3d=n(6),t.graph3d={Camera:n(7),Filter:n(8),Point2d:n(9),Point3d:n(10),Slider:n(11),StepNumber:n(12)},t.Timeline=n(13),t.Graph2d=n(14),t.timeline={DateUtil:n(15),DataStep:n(16),Range:n(17),stack:n(18),TimeStep:n(19),components:{items:{Item:n(31),BackgroundItem:n(32),BoxItem:n(33),PointItem:n(34),RangeItem:n(35)},Component:n(20),CurrentTime:n(21),CustomTime:n(22),DataAxis:n(23),GraphGroup:n(24),Group:n(25),BackgroundGroup:n(26),ItemSet:n(27),Legend:n(28),LineGraph:n(29),TimeAxis:n(30)}},t.Network=n(36),t.network={Edge:n(37),Groups:n(38),Images:n(39),Node:n(40),Popup:n(41),dotparser:n(42),gephiParser:n(43)},t.Graph=function(){throw new Error("Graph is renamed to Network. Please create a graph as new vis.Network(...)")},t.moment=n(44),t.hammer=n(45)},function(module,exports,__webpack_require__){var moment=__webpack_require__(44);exports.isNumber=function(e){return e instanceof Number||typeof e=="number"},exports.isString=function(e){return e instanceof String||typeof e=="string"},exports.isDate=function(e){if(e instanceof Date)return!0;if(exports.isString(e)){var t=ASPDateRegex.exec(e);if(t)return!0;if(!isNaN(Date.parse(e)))return!0}return!1},exports.isDataTable=function(e){return typeof google!="undefined"&&google.visualization&&google.visualization.DataTable&&e instanceof google.visualization.DataTable},exports.randomUUID=function(){var e=function(){return Math.floor(Math.random()*65536).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},exports.extend=function(e,t){for(var n=1,r=arguments.length;n<r;n++){var i=arguments[n];for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])}return e},exports.selectiveExtend=function(e,t,n){if(!Array.isArray(e))throw new Error("Array with property names expected as first argument");for(var r=2;r<arguments.length;r++){var i=arguments[r];for(var s=0;s<e.length;s++){var o=e[s];i.hasOwnProperty(o)&&(t[o]=i[o])}}return t},exports.selectiveDeepExtend=function(e,t,n){if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r=2;r<arguments.length;r++){var i=arguments[r];for(var s=0;s<e.length;s++){var o=e[s];if(i.hasOwnProperty(o))if(n[o]&&n[o].constructor===Object)t[o]===undefined&&(t[o]={}),t[o].constructor===Object?exports.deepExtend(t[o],n[o]):t[o]=n[o];else{if(Array.isArray(n[o]))throw new TypeError("Arrays are not supported by deepExtend");t[o]=n[o]}}}return t},exports.selectiveNotDeepExtend=function(e,t,n){if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r in n)if(n.hasOwnProperty(r)&&e.indexOf(r)==-1)if(n[r]&&n[r].constructor===Object)t[r]===undefined&&(t[r]={}),t[r].constructor===Object?exports.deepExtend(t[r],n[r]):t[r]=n[r];else{if(Array.isArray(n[r]))throw new TypeError("Arrays are not supported by deepExtend");t[r]=n[r]}return t},exports.deepExtend=function(e,t){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(var n in t)if(t.hasOwnProperty(n))if(t[n]&&t[n].constructor===Object)e[n]===undefined&&(e[n]={}),e[n].constructor===Object?exports.deepExtend(e[n],t[n]):e[n]=t[n];else{if(Array.isArray(t[n]))throw new TypeError("Arrays are not supported by deepExtend");e[n]=t[n]}return e},exports.equalArray=function(e,t){if(e.length!=t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!=t[n])return!1;return!0},exports.convert=function(e,t){var n;if(e===undefined)return undefined;if(e===null)return null;if(!t)return e;if(!(typeof t=="string"||t instanceof String))throw new Error("Type must be a string");switch(t){case"boolean":case"Boolean":return Boolean(e);case"number":case"Number":return Number(e.valueOf());case"string":case"String":return String(e);case"Date":if(exports.isNumber(e))return new Date(e);if(e instanceof Date)return new Date(e.valueOf());if(moment.isMoment(e))return new Date(e.valueOf());if(exports.isString(e))return n=ASPDateRegex.exec(e),n?new Date(Number(n[1])):moment(e).toDate();throw new Error("Cannot convert object of type "+exports.getType(e)+" to type Date");case"Moment":if(exports.isNumber(e))return moment(e);if(e instanceof Date)return moment(e.valueOf());if(moment.isMoment(e))return moment(e);if(exports.isString(e))return n=ASPDateRegex.exec(e),n?moment(Number(n[1])):moment(e);throw new Error("Cannot convert object of type "+exports.getType(e)+" to type Date");case"ISODate":if(exports.isNumber(e))return new Date(e);if(e instanceof Date)return e.toISOString();if(moment.isMoment(e))return e.toDate().toISOString();if(exports.isString(e))return n=ASPDateRegex.exec(e),n?(new Date(Number(n[1]))).toISOString():(new Date(e)).toISOString();throw new Error("Cannot convert object of type "+exports.getType(e)+" to type ISODate");case"ASPDate":if(exports.isNumber(e))return"/Date("+e+")/";if(e instanceof Date)return"/Date("+e.valueOf()+")/";if(exports.isString(e)){n=ASPDateRegex.exec(e);var r;return n?r=(new Date(Number(n[1]))).valueOf():r=(new Date(e)).valueOf(),"/Date("+r+")/"}throw new Error("Cannot convert object of type "+exports.getType(e)+" to type ASPDate");default:throw new Error('Unknown type "'+t+'"')}};var ASPDateRegex=/^\/?Date\((\-?\d+)/i;exports.getType=function(e){var t=typeof e;return t=="object"?e==null?"null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":Array.isArray(e)?"Array":e instanceof Date?"Date":"Object":t=="number"?"Number":t=="boolean"?"Boolean":t=="string"?"String":t},exports.getAbsoluteLeft=function(e){return e.getBoundingClientRect().left+window.pageXOffset},exports.getAbsoluteTop=function(e){return e.getBoundingClientRect().top+window.pageYOffset},exports.addClassName=function(e,t){var n=e.className.split(" ");n.indexOf(t)==-1&&(n.push(t),e.className=n.join(" "))},exports.removeClassName=function(e,t){var n=e.className.split(" "),r=n.indexOf(t);r!=-1&&(n.splice(r,1),e.className=n.join(" "))},exports.forEach=function(e,t){var n,r;if(Array.isArray(e))for(n=0,r=e.length;n<r;n++)t(e[n],n,e);else for(n in e)e.hasOwnProperty(n)&&t(e[n],n,e)},exports.toArray=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},exports.updateProperty=function(e,t,n){return e[t]!==n?(e[t]=n,!0):!1},exports.addEventListener=function(e,t,n,r){e.addEventListener?(r===undefined&&(r=!1),t==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.addEventListener(t,n,r)):e.attachEvent("on"+t,n)},exports.removeEventListener=function(e,t,n,r){e.removeEventListener?(r===undefined&&(r=!1),t==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.removeEventListener(t,n,r)):e.detachEvent("on"+t,n)},exports.preventDefault=function(e){e||(e=window.event),e.preventDefault?e.preventDefault():e.returnValue=!1},exports.getTarget=function(e){e||(e=window.event);var t;return e.target?t=e.target:e.srcElement&&(t=e.srcElement),t.nodeType!=undefined&&t.nodeType==3&&(t=t.parentNode),t},exports.option={},exports.option.asBoolean=function(e,t){return typeof e=="function"&&(e=e()),e!=null?e!=0:t||null},exports.option.asNumber=function(e,t){return typeof e=="function"&&(e=e()),e!=null?Number(e)||t||null:t||null},exports.option.asString=function(e,t){return typeof e=="function"&&(e=e()),e!=null?String(e):t||null},exports.option.asSize=function(e,t){return typeof e=="function"&&(e=e()),exports.isString(e)?e:exports.isNumber(e)?e+"px":t||null},exports.option.asElement=function(e,t){return typeof e=="function"&&(e=e()),e||t||null},exports.GiveDec=function(Hex){var Value;return Hex=="A"?Value=10:Hex=="B"?Value=11:Hex=="C"?Value=12:Hex=="D"?Value=13:Hex=="E"?Value=14:Hex=="F"?Value=15:Value=eval(Hex),Value},exports.GiveHex=function(e){var t;return e==10?t="A":e==11?t="B":e==12?t="C":e==13?t="D":e==14?t="E":e==15?t="F":t=""+e,t},exports.parseColor=function(e){var t;if(exports.isString(e)){if(exports.isValidRGB(e)){var n=e.substr(4).substr(0,e.length-5).split(",");e=exports.RGBToHex(n[0],n[1],n[2])}if(exports.isValidHex(e)){var r=exports.hexToHSV(e),i={h:r.h,s:r.s*.45,v:Math.min(1,r.v*1.05)},s={h:r.h,s:Math.min(1,r.v*1.25),v:r.v*.6},o=exports.HSVToHex(s.h,s.h,s.v),u=exports.HSVToHex(i.h,i.s,i.v);t={background:e,border:o,highlight:{background:u,border:o},hover:{background:u,border:o}}}else t={background:e,border:e,highlight:{background:e,border:e},hover:{background:e,border:e}}}else t={},t.background=e.background||"white",t.border=e.border||t.background,exports.isString(e.highlight)?t.highlight={border:e.highlight,background:e.highlight}:(t.highlight={},t.highlight.background=e.highlight&&e.highlight.background||t.background,t.highlight.border=e.highlight&&e.highlight.border||t.border),exports.isString(e.hover)?t.hover={border:e.hover,background:e.hover}:(t.hover={},t.hover.background=e.hover&&e.hover.background||t.background,t.hover.border=e.hover&&e.hover.border||t.border);return t},exports.hexToRGB=function(e){e=e.replace("#","").toUpperCase();var t=exports.GiveDec(e.substring(0,1)),n=exports.GiveDec(e.substring(1,2)),r=exports.GiveDec(e.substring(2,3)),i=exports.GiveDec(e.substring(3,4)),s=exports.GiveDec(e.substring(4,5)),o=exports.GiveDec(e.substring(5,6)),u=t*16+n,a=r*16+i,n=s*16+o;return{r:u,g:a,b:n}},exports.RGBToHex=function(e,t,n){var r=exports.GiveHex(Math.floor(e/16)),i=exports.GiveHex(e%16),s=exports.GiveHex(Math.floor(t/16)),o=exports.GiveHex(t%16),u=exports.GiveHex(Math.floor(n/16)),a=exports.GiveHex(n%16),f=r+i+s+o+u+a;return"#"+f},exports.RGBToHSV=function(e,t,n){e/=255,t/=255,n/=255;var r=Math.min(e,Math.min(t,n)),i=Math.max(e,Math.max(t,n));if(r==i)return{h:0,s:0,v:r};var s=e==r?t-n:n==r?e-t:n-e,o=e==r?3:n==r?1:5,u=60*(o-s/(i-r))/360,a=(i-r)/i,f=i;return{h:u,s:a,v:f}};var cssUtil={split:function(e){var t={};return e.split(";").forEach(function(e){if(e.trim()!=""){var n=e.split(":"),r=n[0].trim(),i=n[1].trim();t[r]=i}}),t},join:function(e){return Object.keys(e).map(function(t){return t+": "+e[t]}).join("; ")}};exports.addCssText=function(e,t){var n=cssUtil.split(e.style.cssText),r=cssUtil.split(t),i=exports.extend(n,r);e.style.cssText=cssUtil.join(i)},exports.removeCssText=function(e,t){var n=cssUtil.split(e.style.cssText),r=cssUtil.split(t);for(var i in r)r.hasOwnProperty(i)&&delete n[i];e.style.cssText=cssUtil.join(n)},exports.HSVToRGB=function(e,t,n){var r,i,s,o=Math.floor(e*6),u=e*6-o,a=n*(1-t),f=n*(1-u*t),l=n*(1-(1-u)*t);switch(o%6){case 0:r=n,i=l,s=a;break;case 1:r=f,i=n,s=a;break;case 2:r=a,i=n,s=l;break;case 3:r=a,i=f,s=n;break;case 4:r=l,i=a,s=n;break;case 5:r=n,i=a,s=f}return{r:Math.floor(r*255),g:Math.floor(i*255),b:Math.floor(s*255)}},exports.HSVToHex=function(e,t,n){var r=exports.HSVToRGB(e,t,n);return exports.RGBToHex(r.r,r.g,r.b)},exports.hexToHSV=function(e){var t=exports.hexToRGB(e);return exports.RGBToHSV(t.r,t.g,t.b)},exports.isValidHex=function(e){var t=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return t},exports.isValidRGB=function(e){e=e.replace(" ","");var t=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(e);return t},exports.selectiveBridgeObject=function(e,t){if(typeof t=="object"){var n=Object.create(t);for(var r=0;r<e.length;r++)t.hasOwnProperty(e[r])&&typeof t[e[r]]=="object"&&(n[e[r]]=exports.bridgeObject(t[e[r]]));return n}return null},exports.bridgeObject=function(e){if(typeof e=="object"){var t=Object.create(e);for(var n in e)e.hasOwnProperty(n)&&typeof e[n]=="object"&&(t[n]=exports.bridgeObject(e[n]));return t}return null},exports.mergeOptions=function(e,t,n){if(t[n]!==undefined)if(typeof t[n]=="boolean")e[n].enabled=t[n];else{e[n].enabled=!0;for(prop in t[n])t[n].hasOwnProperty(prop)&&(e[n][prop]=t[n][prop])}},exports.mergeOptions=function(e,t,n){if(t[n]!==undefined)if(typeof t[n]=="boolean")e[n].enabled=t[n];else{e[n].enabled=!0;for(prop in t[n])t[n].hasOwnProperty(prop)&&(e[n][prop]=t[n][prop])}},exports.binarySearch=function(e,t,n,r){var i=1e4,s=0,o=0,u=e.length-1;while(o<=u&&s<i){var a=Math.floor((o+u)/2),f=e[a];if(f.isVisible(t))return a;var l=r===undefined?f[n]:f[n][r];l<t.start?o=a+1:u=a-1,s++}return-1},exports.binarySearchGeneric=function(e,t,n,r){var i=1e4,s=0,o=0,u=e.length-1,a,f,l,c;while(o<=u&&s<i){c=Math.floor(.5*(u+o)),a=e[Math.max(0,c-1)][n],f=e[c][n],l=e[Math.min(e.length-1,c+1)][n];if(f==t)return c;if(a<t&&f>t)return r=="before"?Math.max(0,c-1):c;if(f<t&&l>t)return r=="before"?c:Math.min(e.length-1,c+1);f<t?o=c+1:u=c-1,s++}return-1},exports.easeInOutQuad=function(e,t,n,r){var i=n-t;return e/=r/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)},exports.easingFunctions={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+ --e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},function(e,t,n){t.prepareElements=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t].redundant=e[t].used,e[t].used=[])},t.cleanupElements=function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t].redundant){for(var n=0;n<e[t].redundant.length;n++)e[t].redundant[n].parentNode.removeChild(e[t].redundant[n]);e[t].redundant=[]}},t.getSVGElement=function(e,t,n){var r;return t.hasOwnProperty(e)?t[e].redundant.length>0?(r=t[e].redundant[0],t[e].redundant.shift()):(r=document.createElementNS("http://www.w3.org/2000/svg",e),n.appendChild(r)):(r=document.createElementNS("http://www.w3.org/2000/svg",e),t[e]={used:[],redundant:[]},n.appendChild(r)),t[e].used.push(r),r},t.getDOMElement=function(e,t,n,r){var i;return t.hasOwnProperty(e)?t[e].redundant.length>0?(i=t[e].redundant[0],t[e].redundant.shift()):(i=document.createElement(e),r!==undefined?n.insertBefore(i,r):n.appendChild(i)):(i=document.createElement(e),t[e]={used:[],redundant:[]},r!==undefined?n.insertBefore(i,r):n.appendChild(i)),t[e].used.push(i),i},t.drawPoint=function(e,n,r,i,s){var o;return r.options.drawPoints.style=="circle"?(o=t.getSVGElement("circle",i,s),o.setAttributeNS(null,"cx",e),o.setAttributeNS(null,"cy",n),o.setAttributeNS(null,"r",.5*r.options.drawPoints.size)):(o=t.getSVGElement("rect",i,s),o.setAttributeNS(null,"x",e-.5*r.options.drawPoints.size),o.setAttributeNS(null,"y",n-.5*r.options.drawPoints.size),o.setAttributeNS(null,"width",r.options.drawPoints.size),o.setAttributeNS(null,"height",r.options.drawPoints.size)),r.options.drawPoints.styles!==undefined&&o.setAttributeNS(null,"style",r.group.options.drawPoints.styles),o.setAttributeNS(null,"class",r.className+" point"),o},t.drawBar=function(e,n,r,i,s,o,u){if(i!=0){i<0&&(i*=-1,n-=i);var a=t.getSVGElement("rect",o,u);a.setAttributeNS(null,"x",e-.5*r),a.setAttributeNS(null,"y",n),a.setAttributeNS(null,"width",r),a.setAttributeNS(null,"height",i),a.setAttributeNS(null,"class",s)}}},function(e,t,n){function s(e,t){e&&!Array.isArray(e)&&!r.isDataTable(e)&&(t=e,e=null),this._options=t||{},this._data={},this._fieldId=this._options.fieldId||"id",this._type={};if(this._options.type)for(var n in this._options.type)if(this._options.type.hasOwnProperty(n)){var i=this._options.type[n];i=="Date"||i=="ISODate"||i=="ASPDate"?this._type[n]="Date":this._type[n]=i}if(this._options.convert)throw new Error('Option "convert" is deprecated. Use "type" instead.');this._subscribers={},e&&this.add(e),this.setOptions(t)}var r=n(1),i=n(5);s.prototype.setOptions=function(e){e&&e.queue!==undefined&&(e.queue===!1?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=i.extend(this,{replace:["add","update","remove"]})),typeof e.queue=="object"&&this._queue.setOptions(e.queue)))},s.prototype.on=function(e,t){var n=this._subscribers[e];n||(n=[],this._subscribers[e]=n),n.push({callback:t})},s.prototype.subscribe=s.prototype.on,s.prototype.off=function(e,t){var n=this._subscribers[e];n&&(this._subscribers[e]=n.filter(function(e){return e.callback!=t}))},s.prototype.unsubscribe=s.prototype.off,s.prototype._trigger=function(e,t,n){if(e=="*")throw new Error("Cannot trigger event *");var r=[];e in this._subscribers&&(r=r.concat(this._subscribers[e])),"*"in this._subscribers&&(r=r.concat(this._subscribers["*"]));for(var i=0;i<r.length;i++){var s=r[i];s.callback&&s.callback(e,t,n||null)}},s.prototype.add=function(e,t){var n=[],i,s=this;if(Array.isArray(e))for(var o=0,u=e.length;o<u;o++)i=s._addItem(e[o]),n.push(i);else if(r.isDataTable(e)){var a=this._getColumnNames(e);for(var f=0,l=e.getNumberOfRows();f<l;f++){var c={};for(var h=0,p=a.length;h<p;h++){var d=a[h];c[d]=e.getValue(f,h)}i=s._addItem(c),n.push(i)}}else{if(!(e instanceof Object))throw new Error("Unknown dataType");i=s._addItem(e),n.push(i)}return n.length&&this._trigger("add",{items:n},t),n},s.prototype.update=function(e,t){var n=[],i=[],s=[],o=this,u=o._fieldId,a=function(e){var t=e[u];o._data[t]?(t=o._updateItem(e),i.push(t),s.push(e)):(t=o._addItem(e),n.push(t))};if(Array.isArray(e))for(var f=0,l=e.length;f<l;f++)a(e[f]);else if(r.isDataTable(e)){var c=this._getColumnNames(e);for(var h=0,p=e.getNumberOfRows();h<p;h++){var d={};for(var v=0,m=c.length;v<m;v++){var g=c[v];d[g]=e.getValue(h,v)}a(d)}}else{if(!(e instanceof Object))throw new Error("Unknown dataType");a(e)}return n.length&&this._trigger("add",{items:n},t),i.length&&this._trigger("update",{items:i,data:s},t),n.concat(i)},s.prototype.get=function(e){var t=this,n,i,s,o,u=r.getType(arguments[0]);u=="String"||u=="Number"?(n=arguments[0],s=arguments[1],o=arguments[2]):u=="Array"?(i=arguments[0],s=arguments[1],o=arguments[2]):(s=arguments[0],o=arguments[1]);var a;if(s&&s.returnType){var f=["DataTable","Array","Object"];a=f.indexOf(s.returnType)==-1?"Array":s.returnType;if(o&&a!=r.getType(o))throw new Error('Type of parameter "data" ('+r.getType(o)+") "+"does not correspond with specified options.type ("+s.type+")");if(a=="DataTable"&&!r.isDataTable(o))throw new Error('Parameter "data" must be a DataTable when options.type is "DataTable"')}else o?a=r.getType(o)=="DataTable"?"DataTable":"Array":a="Array";var l=s&&s.type||this._options.type,c=s&&s.filter,h=[],p,d,v,m;if(n!=undefined)p=t._getItem(n,l),c&&!c(p)&&(p=null);else if(i!=undefined)for(v=0,m=i.length;v<m;v++)p=t._getItem(i[v],l),(!c||c(p))&&h.push(p);else for(d in this._data)this._data.hasOwnProperty(d)&&(p=t._getItem(d,l),(!c||c(p))&&h.push(p));s&&s.order&&n==undefined&&this._sort(h,s.order);if(s&&s.fields){var g=s.fields;if(n!=undefined)p=this._filterFields(p,g);else for(v=0,m=h.length;v<m;v++)h[v]=this._filterFields(h[v],g)}if(a=="DataTable"){var y=this._getColumnNames(o);if(n!=undefined)t._appendRow(o,y,p);else for(v=0;v<h.length;v++)t._appendRow(o,y,h[v]);return o}if(a=="Object"){var b={};for(v=0;v<h.length;v++)b[h[v].id]=h[v];return b}if(n!=undefined)return p;if(o){for(v=0,m=h.length;v<m;v++)o.push(h[v]);return o}return h},s.prototype.getIds=function(e){var t=this._data,n=e&&e.filter,r=e&&e.order,i=e&&e.type||this._options.type,s,o,u,a,f,l=[];if(n)if(r){f=[];for(u in t)t.hasOwnProperty(u)&&(a=this._getItem(u,i),n(a)&&f.push(a));this._sort(f,r);for(s=0,o=f.length;s<o;s++)l[s]=f[s][this._fieldId]}else for(u in t)t.hasOwnProperty(u)&&(a=this._getItem(u,i),n(a)&&l.push(a[this._fieldId]));else if(r){f=[];for(u in t)t.hasOwnProperty(u)&&f.push(t[u]);this._sort(f,r);for(s=0,o=f.length;s<o;s++)l[s]=f[s][this._fieldId]}else for(u in t)t.hasOwnProperty(u)&&(a=t[u],l.push(a[this._fieldId]));return l},s.prototype.getDataSet=function(){return this},s.prototype.forEach=function(e,t){var n=t&&t.filter,r=t&&t.type||this._options.type,i=this._data,s,o;if(t&&t.order){var u=this.get(t);for(var a=0,f=u.length;a<f;a++)s=u[a],o=s[this._fieldId],e(s,o)}else for(o in i)i.hasOwnProperty(o)&&(s=this._getItem(o,r),(!n||n(s))&&e(s,o))},s.prototype.map=function(e,t){var n=t&&t.filter,r=t&&t.type||this._options.type,i=[],s=this._data,o;for(var u in s)s.hasOwnProperty(u)&&(o=this._getItem(u,r),(!n||n(o))&&i.push(e(o,u)));return t&&t.order&&this._sort(i,t.order),i},s.prototype._filterFields=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)!=-1&&(n[r]=e[r]);return n},s.prototype._sort=function(e,t){if(r.isString(t)){var n=t;e.sort(function(e,t){var r=e[n],i=t[n];return r>i?1:r<i?-1:0})}else{if(typeof t!="function")throw new TypeError("Order must be a function or a string");e.sort(t)}},s.prototype.remove=function(e,t){var n=[],r,i,s;if(Array.isArray(e))for(r=0,i=e.length;r<i;r++)s=this._remove(e[r]),s!=null&&n.push(s);else s=this._remove(e),s!=null&&n.push(s);return n.length&&this._trigger("remove",{items:n},t),n},s.prototype._remove=function(e){if(r.isNumber(e)||r.isString(e)){if(this._data[e])return delete this._data[e],e}else if(e instanceof Object){var t=e[this._fieldId];if(t&&this._data[t])return delete this._data[t],t}return null},s.prototype.clear=function(e){var t=Object.keys(this._data);return this._data={},this._trigger("remove",{items:t},e),t},s.prototype.max=function(e){var t=this._data,n=null,r=null;for(var i in t)if(t.hasOwnProperty(i)){var s=t[i],o=s[e];o!=null&&(!n||o>r)&&(n=s,r=o)}return n},s.prototype.min=function(e){var t=this._data,n=null,r=null;for(var i in t)if(t.hasOwnProperty(i)){var s=t[i],o=s[e];o!=null&&(!n||o<r)&&(n=s,r=o)}return n},s.prototype.distinct=function(e){var t=this._data,n=[],i=this._options.type&&this._options.type[e]||null,s=0,o;for(var u in t)if(t.hasOwnProperty(u)){var a=t[u],f=a[e],l=!1;for(o=0;o<s;o++)if(n[o]==f){l=!0;break}!l&&f!==undefined&&(n[s]=f,s++)}if(i)for(o=0;o<n.length;o++)n[o]=r.convert(n[o],i);return n},s.prototype._addItem=function(e){var t=e[this._fieldId];if(t!=undefined){if(this._data[t])throw new Error("Cannot add item: item with id "+t+" already exists")}else t=r.randomUUID(),e[this._fieldId]=t;var n={};for(var i in e)if(e.hasOwnProperty(i)){var s=this._type[i];n[i]=r.convert(e[i],s)}return this._data[t]=n,t},s.prototype._getItem=function(e,t){var n,i,s=this._data[e];if(!s)return null;var o={};if(t)for(n in s)s.hasOwnProperty(n)&&(i=s[n],o[n]=r.convert(i,t[n]));else for(n in s)s.hasOwnProperty(n)&&(i=s[n],o[n]=i);return o},s.prototype._updateItem=function(e){var t=e[this._fieldId];if(t==undefined)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(e)+")");var n=this._data[t];if(!n)throw new Error("Cannot update item: no item with id "+t+" found");for(var i in e)if(e.hasOwnProperty(i)){var s=this._type[i];n[i]=r.convert(e[i],s)}return t},s.prototype._getColumnNames=function(e){var t=[];for(var n=0,r=e.getNumberOfColumns();n<r;n++)t[n]=e.getColumnId(n)||e.getColumnLabel(n);return t},s.prototype._appendRow=function(e,t,n){var r=e.addRow();for(var i=0,s=t.length;i<s;i++){var o=t[i];e.setValue(r,i,n[o])}},e.exports=s},function(e,t,n){function s(e,t){this._data=null,this._ids={},this._options=t||{},this._fieldId="id",this._subscribers={};var n=this;this.listener=function(){n._onEvent.apply(n,arguments)},this.setData(e)}var r=n(1),i=n(3);s.prototype.setData=function(e){var t,n,r;if(this._data){this._data.unsubscribe&&this._data.unsubscribe("*",this.listener),t=[];for(var i in this._ids)this._ids.hasOwnProperty(i)&&t.push(i);this._ids={},this._trigger("remove",{items:t})}this._data=e;if(this._data){this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",t=this._data.getIds({filter:this._options&&this._options.filter});for(n=0,r=t.length;n<r;n++)i=t[n],this._ids[i]=!0;this._trigger("add",{items:t}),this._data.on&&this._data.on("*",this.listener)}},s.prototype.get=function(e){var t=this,n,i,s,o=r.getType(arguments[0]);o=="String"||o=="Number"||o=="Array"?(n=arguments[0],i=arguments[1],s=arguments[2]):(i=arguments[0],s=arguments[1]);var u=r.extend({},this._options,i);this._options.filter&&i&&i.filter&&(u.filter=function(e){return t._options.filter(e)&&i.filter(e)});var a=[];return n!=undefined&&a.push(n),a.push(u),a.push(s),this._data&&this._data.get.apply(this._data,a)},s.prototype.getIds=function(e){var t;if(this._data){var n=this._options.filter,r;e&&e.filter?n?r=function(t){return n(t)&&e.filter(t)}:r=e.filter:r=n,t=this._data.getIds({filter:r,order:e&&e.order})}else t=[];return t},s.prototype.getDataSet=function(){var e=this;while(e instanceof s)e=e._data;return e||null},s.prototype._onEvent=function(e,t,n){var r,i,s,o,u=t&&t.items,a=this._data,f=[],l=[],c=[];if(u&&a){switch(e){case"add":for(r=0,i=u.length;r<i;r++)s=u[r],o=this.get(s),o&&(this._ids[s]=!0,f.push(s));break;case"update":for(r=0,i=u.length;r<i;r++)s=u[r],o=this.get(s),o?this._ids[s]?l.push(s):(this._ids[s]=!0,f.push(s)):this._ids[s]&&(delete this._ids[s],c.push(s));break;case"remove":for(r=0,i=u.length;r<i;r++)s=u[r],this._ids[s]&&(delete this._ids[s],c.push(s))}f.length&&this._trigger("add",{items:f},n),l.length&&this._trigger("update",{items:l},n),c.length&&this._trigger("remove",{items:c},n)}},s.prototype.on=i.prototype.on,s.prototype.off=i.prototype.off,s.prototype._trigger=i.prototype._trigger,s.prototype.subscribe=s.prototype.on,s.prototype.unsubscribe=s.prototype.off,e.exports=s},function(e,t,n){function r(e){this.delay=null,this.max=Infinity,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(e)}r.prototype.setOptions=function(e){e&&typeof e.delay!="undefined"&&(this.delay=e.delay),e&&typeof e.max!="undefined"&&(this.max=e.max),this._flushIfNeeded()},r.extend=function(e,t){var n=new r(t);if(e.flush!==undefined)throw new Error("Target object already has a property flush");e.flush=function(){n.flush()};var i=[{name:"flush",original:undefined}];if(t&&t.replace)for(var s=0;s<t.replace.length;s++){var o=t.replace[s];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n},r.prototype.destroy=function(){this.flush();if(this._extended){var e=this._extended.object,t=this._extended.methods;for(var n=0;n<t.length;n++){var r=t[n];r.original?e[r.name]=r.original:delete e[r.name]}this._extended=null}},r.prototype.replace=function(e,t){var n=this,r=e[t];if(!r)throw new Error("Method "+t+" undefined");e[t]=function(){var e=[];for(var t=0;t<arguments.length;t++)e[t]=arguments[t];n.queue({args:e,fn:r,context:this})}},r.prototype.queue=function(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()},r.prototype._flushIfNeeded=function(){this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout);if(this.queue.length>0&&typeof this.delay=="number"){var e=this;this._timeout=setTimeout(function(){e.flush()},this.delay)}},r.prototype.flush=function(){while(this._queue.length>0){var e=this._queue.shift();e.fn.apply(e.context||e.fn,e.args||[])}},e.exports=r},function(e,t,n){function p(e,t,n){if(!(this instanceof p))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=e,this.width="400px",this.height="400px",this.margin=10,this.defaultXCenter="55%",this.defaultYCenter="50%",this.xLabel="x",this.yLabel="y",this.zLabel="z";var r=function(e){return e};this.xValueLabel=r,this.yValueLabel=r,this.zValueLabel=r,this.filterLabel="time",this.legendLabel="value",this.style=p.STYLE.DOT,this.showPerspective=!0,this.showGrid=!0,this.keepAspectRatio=!0,this.showShadow=!1,this.showGrayBottom=!1,this.showTooltip=!1,this.verticalRatio=.5,this.animationInterval=1e3,this.animationPreload=!1,this.camera=new f,this.eye=new u(0,0,-1),this.dataTable=null,this.dataPoints=null,this.colX=undefined,this.colY=undefined,this.colZ=undefined,this.colValue=undefined,this.colFilter=undefined,this.xMin=0,this.xStep=undefined,this.xMax=1,this.yMin=0,this.yStep=undefined,this.yMax=1,this.zMin=0,this.zStep=undefined,this.zMax=1,this.valueMin=0,this.valueMax=1,this.xBarWidth=1,this.yBarWidth=1,this.colorAxis="#4D4D4D",this.colorGrid="#D3D3D3",this.colorDot="#7DC1FF",this.colorDotBorder="#3267D2",this.create(),this.setOptions(n),t&&this.setData(t)}var r=n(53),i=n(3),s=n(4),o=n(1),u=n(10),a=n(9),f=n(7),l=n(8),c=n(11),h=n(12);r(p.prototype),p.prototype._setScale=function(){this.scale=new u(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin)),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,this.scale.value=1/(this.valueMax-this.valueMin);var e=(this.xMax+this.xMin)/2*this.scale.x,t=(this.yMax+this.yMin)/2*this.scale.y,n=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(e,t,n)},p.prototype._convert3Dto2D=function(e){var t=this._convertPointToTranslation(e);return this._convertTranslationToScreen(t)},p.prototype._convertPointToTranslation=function(e){var t=e.x*this.scale.x,n=e.y*this.scale.y,r=e.z*this.scale.z,i=this.camera.getCameraLocation().x,s=this.camera.getCameraLocation().y,o=this.camera.getCameraLocation().z,a=Math.sin(this.camera.getCameraRotation().x),f=Math.cos(this.camera.getCameraRotation().x),l=Math.sin(this.camera.getCameraRotation().y),c=Math.cos(this.camera.getCameraRotation().y),h=Math.sin(this.camera.getCameraRotation().z),p=Math.cos(this.camera.getCameraRotation().z),d=c*(h*(n-s)+p*(t-i))-l*(r-o),v=a*(c*(r-o)+l*(h*(n-s)+p*(t-i)))+f*(p*(n-s)-h*(t-i)),m=f*(c*(r-o)+l*(h*(n-s)+p*(t-i)))-a*(p*(n-s)-h*(t-i));return new u(d,v,m)},p.prototype._convertTranslationToScreen=function(e){var t=this.eye.x,n=this.eye.y,r=this.eye.z,i=e.x,s=e.y,o=e.z,u,f;return this.showPerspective?(u=(i-t)*(r/o),f=(s-n)*(r/o)):(u=i*-(r/this.camera.getArmLength()),f=s*-(r/this.camera.getArmLength())),new a(this.xcenter+u*this.frame.canvas.clientWidth,this.ycenter-f*this.frame.canvas.clientWidth)},p.prototype._setBackgroundColor=function(e){var t="white",n="gray",r=1;if(typeof e=="string")t=e,n="none",r=0;else if(typeof e=="object")e.fill!==undefined&&(t=e.fill),e.stroke!==undefined&&(n=e.stroke),e.strokeWidth!==undefined&&(r=e.strokeWidth);else if(e!==undefined)throw"Unsupported type of backgroundColor";this.frame.style.backgroundColor=t,this.frame.style.borderColor=n,this.frame.style.borderWidth=r+"px",this.frame.style.borderStyle="solid"},p.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},p.prototype._getStyleNumber=function(e){switch(e){case"dot":return p.STYLE.DOT;case"dot-line":return p.STYLE.DOTLINE;case"dot-color":return p.STYLE.DOTCOLOR;case"dot-size":return p.STYLE.DOTSIZE;case"line":return p.STYLE.LINE;case"grid":return p.STYLE.GRID;case"surface":return p.STYLE.SURFACE;case"bar":return p.STYLE.BAR;case"bar-color":return p.STYLE.BARCOLOR;case"bar-size":return p.STYLE.BARSIZE}return-1},p.prototype._determineColumnIndexes=function(e,t){if(this.style===p.STYLE.DOT||this.style===p.STYLE.DOTLINE||this.style===p.STYLE.LINE||this.style===p.STYLE.GRID||this.style===p.STYLE.SURFACE||this.style===p.STYLE.BAR)this.colX=0,this.colY=1,this.colZ=2,this.colValue=undefined,e.getNumberOfColumns()>3&&(this.colFilter=3);else{if(this.style!==p.STYLE.DOTCOLOR&&this.style!==p.STYLE.DOTSIZE&&this.style!==p.STYLE.BARCOLOR&&this.style!==p.STYLE.BARSIZE)throw'Unknown style "'+this.style+'"';this.colX=0,this.colY=1,this.colZ=2,this.colValue=3,e.getNumberOfColumns()>4&&(this.colFilter=4)}},p.prototype.getNumberOfRows=function(e){return e.length},p.prototype.getNumberOfColumns=function(e){var t=0;for(var n in e[0])e[0].hasOwnProperty(n)&&t++;return t},p.prototype.getDistinctValues=function(e,t){var n=[];for(var r=0;r<e.length;r++)n.indexOf(e[r][t])==-1&&n.push(e[r][t]);return n},p.prototype.getColumnRange=function(e,t){var n={min:e[0][t],max:e[0][t]};for(var r=0;r<e.length;r++)n.min>e[r][t]&&(n.min=e[r][t]),n.max<e[r][t]&&(n.max=e[r][t]);return n},p.prototype._dataInitialize=function(e,t){var n=this;this.dataSet&&this.dataSet.off("*",this._onChange);if(e===undefined)return;Array.isArray(e)&&(e=new i(e));var r;if(!(e instanceof i||e instanceof s))throw new Error("Array, DataSet, or DataView expected");r=e.get();if(r.length==0)return;this.dataSet=e,this.dataTable=r,this._onChange=function(){n.setData(n.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z",this.colValue="style",this.colFilter="filter",r[0].hasOwnProperty("filter")&&this.dataFilter===undefined&&(this.dataFilter=new l(e,this.colFilter,this),this.dataFilter.setOnLoadCallback(function(){n.redraw()}));var o=this.style==p.STYLE.BAR||this.style==p.STYLE.BARCOLOR||this.style==p.STYLE.BARSIZE;if(o){if(this.defaultXBarWidth!==undefined)this.xBarWidth=this.defaultXBarWidth;else{var u=this.getDistinctValues(r,this.colX);this.xBarWidth=u[1]-u[0]||1}if(this.defaultYBarWidth!==undefined)this.yBarWidth=this.defaultYBarWidth;else{var a=this.getDistinctValues(r,this.colY);this.yBarWidth=a[1]-a[0]||1}}var f=this.getColumnRange(r,this.colX);o&&(f.min-=this.xBarWidth/2,f.max+=this.xBarWidth/2),this.xMin=this.defaultXMin!==undefined?this.defaultXMin:f.min,this.xMax=this.defaultXMax!==undefined?this.defaultXMax:f.max,this.xMax<=this.xMin&&(this.xMax=this.xMin+1),this.xStep=this.defaultXStep!==undefined?this.defaultXStep:(this.xMax-this.xMin)/5;var c=this.getColumnRange(r,this.colY);o&&(c.min-=this.yBarWidth/2,c.max+=this.yBarWidth/2),this.yMin=this.defaultYMin!==undefined?this.defaultYMin:c.min,this.yMax=this.defaultYMax!==undefined?this.defaultYMax:c.max,this.yMax<=this.yMin&&(this.yMax=this.yMin+1),this.yStep=this.defaultYStep!==undefined?this.defaultYStep:(this.yMax-this.yMin)/5;var h=this.getColumnRange(r,this.colZ);this.zMin=this.defaultZMin!==undefined?this.defaultZMin:h.min,this.zMax=this.defaultZMax!==undefined?this.defaultZMax:h.max,this.zMax<=this.zMin&&(this.zMax=this.zMin+1),this.zStep=this.defaultZStep!==undefined?this.defaultZStep:(this.zMax-this.zMin)/5;if(this.colValue!==undefined){var d=this.getColumnRange(r,this.colValue);this.valueMin=this.defaultValueMin!==undefined?this.defaultValueMin:d.min,this.valueMax=this.defaultValueMax!==undefined?this.defaultValueMax:d.max,this.valueMax<=this.valueMin&&(this.valueMax=this.valueMin+1)}this._setScale()},p.prototype._getDataPoints=function(e){var t,n,r,i,s,o,a=[];if(this.style===p.STYLE.GRID||this.style===p.STYLE.SURFACE){var f=[],l=[];for(r=0;r<this.getNumberOfRows(e);r++)t=e[r][this.colX]||0,n=e[r][this.colY]||0,f.indexOf(t)===-1&&f.push(t),l.indexOf(n)===-1&&l.push(n);function c(e,t){return e-t}f.sort(c),l.sort(c);var h=[];for(r=0;r<e.length;r++){t=e[r][this.colX]||0,n=e[r][this.colY]||0,i=e[r][this.colZ]||0;var d=f.indexOf(t),v=l.indexOf(n);h[d]===undefined&&(h[d]=[]);var m=new u;m.x=t,m.y=n,m.z=i,s={},s.point=m,s.trans=undefined,s.screen=undefined,s.bottom=new u(t,n,this.zMin),h[d][v]=s,a.push(s)}for(t=0;t<h.length;t++)for(n=0;n<h[t].length;n++)h[t][n]&&(h[t][n].pointRight=t<h.length-1?h[t+1][n]:undefined,h[t][n].pointTop=n<h[t].length-1?h[t][n+1]:undefined,h[t][n].pointCross=t<h.length-1&&n<h[t].length-1?h[t+1][n+1]:undefined)}else for(r=0;r<e.length;r++)o=new u,o.x=e[r][this.colX]||0,o.y=e[r][this.colY]||0,o.z=e[r][this.colZ]||0,this.colValue!==undefined&&(o.value=e[r][this.colValue]||0),s={},s.point=o,s.bottom=new u(o.x,o.y,this.zMin),s.trans=undefined,s.screen=undefined,a.push(s);return a},p.prototype.create=function(){while(this.containerElement.hasChildNodes())this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var t=this,n=function(e){t._onMouseDown(e)},r=function(e){t._onTouchStart(e)},i=function(e){t._onWheel(e)},s=function(e){t._onTooltip(e)};o.addEventListener(this.frame.canvas,"keydown",onkeydown),o.addEventListener(this.frame.canvas,"mousedown",n),o.addEventListener(this.frame.canvas,"touchstart",r),o.addEventListener(this.frame.canvas,"mousewheel",i),o.addEventListener(this.frame.canvas,"mousemove",s),this.containerElement.appendChild(this.frame)},p.prototype.setSize=function(e,t){this.frame.style.width=e,this.frame.style.height=t,this._resizeCanvas()},p.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},p.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw"No animation available";this.frame.filter.slider.play()},p.prototype.animationStop=function(){if(!this.frame.filter||!this.frame.filter.slider)return;this.frame.filter.slider.stop()},p.prototype._resizeCenter=function(){this.defaultXCenter.charAt(this.defaultXCenter.length-1)==="%"?this.xcenter=parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth:this.xcenter=parseFloat(this.defaultXCenter),this.defaultYCenter.charAt(this.defaultYCenter.length-1)==="%"?this.ycenter=parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):this.ycenter=parseFloat(this.defaultYCenter)},p.prototype.setCameraPosition=function(e){if(e===undefined)return;e.horizontal!==undefined&&e.vertical!==undefined&&this.camera.setArmRotation(e.horizontal,e.vertical),e.distance!==undefined&&this.camera.setArmLength(e.distance),this.redraw()},p.prototype.getCameraPosition=function(){var e=this.camera.getArmRotation();return e.distance=this.camera.getArmLength(),e},p.prototype._readData=function(e){this._dataInitialize(e,this.style),this.dataFilter?this.dataPoints=this.dataFilter._getDataPoints():this.dataPoints=this._getDataPoints(this.dataTable),this._redrawFilter()},p.prototype.setData=function(e){this._readData(e),this.redraw(),this.animationAutoStart&&this.dataFilter&&this.animationStart()},p.prototype.setOptions=function(e){var t=undefined;this.animationStop();if(e!==undefined){e.width!==undefined&&(this.width=e.width),e.height!==undefined&&(this.height=e.height),e.xCenter!==undefined&&(this.defaultXCenter=e.xCenter),e.yCenter!==undefined&&(this.defaultYCenter=e.yCenter),e.filterLabel!==undefined&&(this.filterLabel=e.filterLabel),e.legendLabel!==undefined&&(this.legendLabel=e.legendLabel),e.xLabel!==undefined&&(this.xLabel=e.xLabel),e.yLabel!==undefined&&(this.yLabel=e.yLabel),e.zLabel!==undefined&&(this.zLabel=e.zLabel),e.xValueLabel!==undefined&&(this.xValueLabel=e.xValueLabel),e.yValueLabel!==undefined&&(this.yValueLabel=e.yValueLabel),e.zValueLabel!==undefined&&(this.zValueLabel=e.zValueLabel);if(e.style!==undefined){var n=this._getStyleNumber(e.style);n!==-1&&(this.style=n)}e.showGrid!==undefined&&(this.showGrid=e.showGrid),e.showPerspective!==undefined&&(this.showPerspective=e.showPerspective),e.showShadow!==undefined&&(this.showShadow=e.showShadow),e.tooltip!==undefined&&(this.showTooltip=e.tooltip),e.showAnimationControls!==undefined&&(this.showAnimationControls=e.showAnimationControls),e.keepAspectRatio!==undefined&&(this.keepAspectRatio=e.keepAspectRatio),e.verticalRatio!==undefined&&(this.verticalRatio=e.verticalRatio),e.animationInterval!==undefined&&(this.animationInterval=e.animationInterval),e.animationPreload!==undefined&&(this.animationPreload=e.animationPreload),e.animationAutoStart!==undefined&&(this.animationAutoStart=e.animationAutoStart),e.xBarWidth!==undefined&&(this.defaultXBarWidth=e.xBarWidth),e.yBarWidth!==undefined&&(this.defaultYBarWidth=e.yBarWidth),e.xMin!==undefined&&(this.defaultXMin=e.xMin),e.xStep!==undefined&&(this.defaultXStep=e.xStep),e.xMax!==undefined&&(this.defaultXMax=e.xMax),e.yMin!==undefined&&(this.defaultYMin=e.yMin),e.yStep!==undefined&&(this.defaultYStep=e.yStep),e.yMax!==undefined&&(this.defaultYMax=e.yMax),e.zMin!==undefined&&(this.defaultZMin=e.zMin),e.zStep!==undefined&&(this.defaultZStep=e.zStep),e.zMax!==undefined&&(this.defaultZMax=e.zMax),e.valueMin!==undefined&&(this.defaultValueMin=e.valueMin),e.valueMax!==undefined&&(this.defaultValueMax=e.valueMax),e.cameraPosition!==undefined&&(t=e.cameraPosition),t!==undefined?(this.camera.setArmRotation(t.horizontal,t.vertical),this.camera.setArmLength(t.distance)):(this.camera.setArmRotation(1,.5),this.camera.setArmLength(1.7))}this._setBackgroundColor(e&&e.backgroundColor),this.setSize(this.width,this.height),this.dataTable&&this.setData(this.dataTable),this.animationAutoStart&&this.dataFilter&&this.animationStart()},p.prototype.redraw=function(){if(this.dataPoints===undefined)throw"Error: graph data not initialized";this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this.style===p.STYLE.GRID||this.style===p.STYLE.SURFACE?this._redrawDataGrid():this.style===p.STYLE.LINE?this._redrawDataLine():this.style===p.STYLE.BAR||this.style===p.STYLE.BARCOLOR||this.style===p.STYLE.BARSIZE?this._redrawDataBar():this._redrawDataDot(),this._redrawInfo(),this._redrawLegend()},p.prototype._redrawClear=function(){var e=this.frame.canvas,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height)},p.prototype._redrawLegend=function(){var e;if(this.style===p.STYLE.DOTCOLOR||this.style===p.STYLE.DOTSIZE){var t=this.frame.clientWidth*.02,n,r;this.style===p.STYLE.DOTSIZE?(n=t/2,r=t/2+t*2):(n=20,r=20);var i=Math.max(this.frame.clientHeight*.25,100),s=this.margin,o=this.frame.clientWidth-this.margin,u=o-r,a=s+i}var f=this.frame.canvas,l=f.getContext("2d");l.lineWidth=1,l.font="14px arial";if(this.style===p.STYLE.DOTCOLOR){var c=0,d=i;for(e=c;e<d;e++){var v=(e-c)/(d-c),m=v*240,g=this._hsv2rgb(m,1,1);l.strokeStyle=g,l.beginPath(),l.moveTo(u,s+e),l.lineTo(o,s+e),l.stroke()}l.strokeStyle=this.colorAxis,l.strokeRect(u,s,r,i)}this.style===p.STYLE.DOTSIZE&&(l.strokeStyle=this.colorAxis,l.fillStyle=this.colorDot,l.beginPath(),l.moveTo(u,s),l.lineTo(o,s),l.lineTo(o-r+n,a),l.lineTo(u,a),l.closePath(),l.fill(),l.stroke());if(this.style===p.STYLE.DOTCOLOR||this.style===p.STYLE.DOTSIZE){var y=5,b=new h(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,!0);b.start(),b.getCurrent()<this.valueMin&&b.next();while(!b.end())e=a-(b.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*i,l.beginPath(),l.moveTo(u-y,e),l.lineTo(u,e),l.stroke(),l.textAlign="right",l.textBaseline="middle",l.fillStyle=this.colorAxis,l.fillText(b.getCurrent(),u-2*y,e),b.next();l.textAlign="right",l.textBaseline="top";var w=this.legendLabel;l.fillText(w,o,a+this.margin)}},p.prototype._redrawFilter=function(){this.frame.filter.innerHTML="";if(this.dataFilter){var e={visible:this.showAnimationControls},t=new c(this.frame.filter,e);this.frame.filter.slider=t,this.frame.filter.style.padding="10px",t.setValues(this.dataFilter.values),t.setPlayInterval(this.animationInterval);var n=this,r=function(){var e=t.getIndex();n.dataFilter.selectValue(e),n.dataPoints=n.dataFilter._getDataPoints(),n.redraw()};t.setOnChangeCallback(r)}else this.frame.filter.slider=undefined},p.prototype._redrawSlider=function(){this.frame.filter.slider!==undefined&&this.frame.filter.slider.redraw()},p.prototype._redrawInfo=function(){if(this.dataFilter){var e=this.frame.canvas,t=e.getContext("2d");t.font="14px arial",t.lineStyle="gray",t.fillStyle="gray",t.textAlign="left",t.textBaseline="top";var n=this.margin,r=this.margin;t.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),n,r)}},p.prototype._redrawAxis=function(){var e=this.frame.canvas,t=e.getContext("2d"),n,r,i,s,o,a,f,l,c,p,d,v,m;t.font=24/this.camera.getArmLength()+"px arial";var g=.025/this.scale.x,y=.025/this.scale.y,b=5/this.camera.getArmLength(),w=this.camera.getArmRotation().horizontal;t.lineWidth=1,s=this.defaultXStep===undefined,i=new h(this.xMin,this.xMax,this.xStep,s),i.start(),i.getCurrent()<this.xMin&&i.next();while(!i.end()){var E=i.getCurrent();this.showGrid?(n=this._convert3Dto2D(new u(E,this.yMin,this.zMin)),r=this._convert3Dto2D(new u(E,this.yMax,this.zMin)),t.strokeStyle=this.colorGrid,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke()):(n=this._convert3Dto2D(new u(E,this.yMin,this.zMin)),r=this._convert3Dto2D(new u(E,this.yMin+g,this.zMin)),t.strokeStyle=this.colorAxis,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke(),n=this._convert3Dto2D(new u(E,this.yMax,this.zMin)),r=this._convert3Dto2D(new u(E,this.yMax-g,this.zMin)),t.strokeStyle=this.colorAxis,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke()),f=Math.cos(w)>0?this.yMin:this.yMax,o=this._convert3Dto2D(new u(E,f,this.zMin)),Math.cos(w*2)>0?(t.textAlign="center",t.textBaseline="top",o.y+=b):Math.sin(w*2)<0?(t.textAlign="right",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.colorAxis,t.fillText("  "+this.xValueLabel(i.getCurrent())+"  ",o.x,o.y),i.next()}t.lineWidth=1,s=this.defaultYStep===undefined,i=new h(this.yMin,this.yMax,this.yStep,s),i.start(),i.getCurrent()<this.yMin&&i.next();while(!i.end())this.showGrid?(n=this._convert3Dto2D(new u(this.xMin,i.getCurrent(),this.zMin)),r=this._convert3Dto2D(new u(this.xMax,i.getCurrent(),this.zMin)),t.strokeStyle=this.colorGrid,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke()):(n=this._convert3Dto2D(new u(this.xMin,i.getCurrent(),this.zMin)),r=this._convert3Dto2D(new u(this.xMin+y,i.getCurrent(),this.zMin)),t.strokeStyle=this.colorAxis,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke(),n=this._convert3Dto2D(new u(this.xMax,i.getCurrent(),this.zMin)),r=this._convert3Dto2D(new u(this.xMax-y,i.getCurrent(),this.zMin)),t.strokeStyle=this.colorAxis,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke()),a=Math.sin(w)>0?this.xMin:this.xMax,o=this._convert3Dto2D(new u(a,i.getCurrent(),this.zMin)),Math.cos(w*2)<0?(t.textAlign="center",t.textBaseline="top",o.y+=b):Math.sin(w*2)>0?(t.textAlign="right",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.colorAxis,t.fillText("  "+this.yValueLabel(i.getCurrent())+"  ",o.x,o.y),i.next();t.lineWidth=1,s=this.defaultZStep===undefined,i=new h(this.zMin,this.zMax,this.zStep,s),i.start(),i.getCurrent()<this.zMin&&i.next(),a=Math.cos(w)>0?this.xMin:this.xMax,f=Math.sin(w)<0?this.yMin:this.yMax;while(!i.end())n=this._convert3Dto2D(new u(a,f,i.getCurrent())),t.strokeStyle=this.colorAxis,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(n.x-b,n.y),t.stroke(),t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.colorAxis,t.fillText(this.zValueLabel(i.getCurrent())+" ",n.x-5,n.y),i.next();t.lineWidth=1,n=this._convert3Dto2D(new u(a,f,this.zMin)),r=this._convert3Dto2D(new u(a,f,this.zMax)),t.strokeStyle=this.colorAxis,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke(),t.lineWidth=1,v=this._convert3Dto2D(new u(this.xMin,this.yMin,this.zMin)),m=this._convert3Dto2D(new u(this.xMax,this.yMin,this.zMin)),t.strokeStyle=this.colorAxis,t.beginPath(),t.moveTo(v.x,v.y),t.lineTo(m.x,m.y),t.stroke(),v=this._convert3Dto2D(new u(this.xMin,this.yMax,this.zMin)),m=this._convert3Dto2D(new u(this.xMax,this.yMax,this.zMin)),t.strokeStyle=this.colorAxis,t.beginPath(),t.moveTo(v.x,v.y),t.lineTo(m.x,m.y),t.stroke(),t.lineWidth=1,n=this._convert3Dto2D(new u(this.xMin,this.yMin,this.zMin)),r=this._convert3Dto2D(new u(this.xMin,this.yMax,this.zMin)),t.strokeStyle=this.colorAxis,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke(),n=this._convert3Dto2D(new u(this.xMax,this.yMin,this.zMin)),r=this._convert3Dto2D(new u(this.xMax,this.yMax,this.zMin)),t.strokeStyle=this.colorAxis,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke();var S=this.xLabel;S.length>0&&(d=.1/this.scale.y,a=(this.xMin+this.xMax)/2,f=Math.cos(w)>0?this.yMin-d:this.yMax+d,o=this._convert3Dto2D(new u(a,f,this.zMin)),Math.cos(w*2)>0?(t.textAlign="center",t.textBaseline="top"):Math.sin(w*2)<0?(t.textAlign="right",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.colorAxis,t.fillText(S,o.x,o.y));var x=this.yLabel;x.length>0&&(p=.1/this.scale.x,a=Math.sin(w)>0?this.xMin-p:this.xMax+p,f=(this.yMin+this.yMax)/2,o=this._convert3Dto2D(new u(a,f,this.zMin)),Math.cos(w*2)<0?(t.textAlign="center",t.textBaseline="top"):Math.sin(w*2)>0?(t.textAlign="right",t.textBaseline="middle"):(t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.colorAxis,t.fillText(x,o.x,o.y));var T=this.zLabel;T.length>0&&(c=30,a=Math.cos(w)>0?this.xMin:this.xMax,f=Math.sin(w)<0?this.yMin:this.yMax,l=(this.zMin+this.zMax)/2,o=this._convert3Dto2D(new u(a,f,l)),t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.colorAxis,t.fillText(T,o.x-c,o.y))},p.prototype._hsv2rgb=function(e,t,n){var r,i,s,o,u,a;o=n*t,u=Math.floor(e/60),a=o*(1-Math.abs(e/60%2-1));switch(u){case 0:r=o,i=a,s=0;break;case 1:r=a,i=o,s=0;break;case 2:r=0,i=o,s=a;break;case 3:r=0,i=a,s=o;break;case 4:r=a,i=0,s=o;break;case 5:r=o,i=0,s=a;break;default:r=0,i=0,s=0}return"RGB("+parseInt(r*255)+","+parseInt(i*255)+","+parseInt(s*255)+")"},p.prototype._redrawDataGrid=function(){var e=this.frame.canvas,t=e.getContext("2d"),n,r,i,s,o,a,f,l,c,h,d,v,m;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(o=0;o<this.dataPoints.length;o++){var g=this._convertPointToTranslation(this.dataPoints[o].point),y=this._convertTranslationToScreen(g);this.dataPoints[o].trans=g,this.dataPoints[o].screen=y;var b=this._convertPointToTranslation(this.dataPoints[o].bottom);this.dataPoints[o].dist=this.showPerspective?b.length():-b.z}var w=function(e,t){return t.dist-e.dist};this.dataPoints.sort(w);if(this.style===p.STYLE.SURFACE)for(o=0;o<this.dataPoints.length;o++){n=this.dataPoints[o],r=this.dataPoints[o].pointRight,i=this.dataPoints[o].pointTop,s=this.dataPoints[o].pointCross;if(n!==undefined&&r!==undefined&&i!==undefined&&s!==undefined){if(this.showGrayBottom||this.showShadow){var E=u.subtract(s.trans,n.trans),S=u.subtract(i.trans,r.trans),x=u.crossProduct(E,S),T=x.length();a=x.z>0}else a=!0;a?(m=(n.point.z+r.point.z+i.point.z+s.point.z)/4,h=(1-(m-this.zMin)*this.scale.z/this.verticalRatio)*240,d=1,this.showShadow?(v=Math.min(1+x.x/T/2,1),f=this._hsv2rgb(h,d,v),l=f):(v=1,f=this._hsv2rgb(h,d,v),l=this.colorAxis)):(f="gray",l=this.colorAxis),c=.5,t.lineWidth=c,t.fillStyle=f,t.strokeStyle=l,t.beginPath(),t.moveTo(n.screen.x,n.screen.y),t.lineTo(r.screen.x,r.screen.y),t.lineTo(s.screen.x,s.screen.y),t.lineTo(i.screen.x,i.screen.y),t.closePath(),t.fill(),t.stroke()}}else for(o=0;o<this.dataPoints.length;o++)n=this.dataPoints[o],r=this.dataPoints[o].pointRight,i=this.dataPoints[o].pointTop,n!==undefined&&(this.showPerspective?c=2/-n.trans.z:c=2*-(this.eye.z/this.camera.getArmLength())),n!==undefined&&r!==undefined&&(m=(n.point.z+r.point.z)/2,h=(1-(m-this.zMin)*this.scale.z/this.verticalRatio)*240,t.lineWidth=c,t.strokeStyle=this._hsv2rgb(h,1,1),t.beginPath(),t.moveTo(n.screen.x,n.screen.y),t.lineTo(r.screen.x,r.screen.y),t.stroke()),n!==undefined&&i!==undefined&&(m=(n.point.z+i.point.z)/2,h=(1-(m-this.zMin)*this.scale.z/this.verticalRatio)*240,t.lineWidth=c,t.strokeStyle=this._hsv2rgb(h,1,1),t.beginPath(),t.moveTo(n.screen.x,n.screen.y),t.lineTo(i.screen.x,i.screen.y),t.stroke())},p.prototype._redrawDataDot=function(){var e=this.frame.canvas,t=e.getContext("2d"),n;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(n=0;n<this.dataPoints.length;n++){var r=this._convertPointToTranslation(this.dataPoints[n].point),i=this._convertTranslationToScreen(r);this.dataPoints[n].trans=r,this.dataPoints[n].screen=i;var s=this._convertPointToTranslation(this.dataPoints[n].bottom);this.dataPoints[n].dist=this.showPerspective?s.length():-s.z}var o=function(e,t){return t.dist-e.dist};this.dataPoints.sort(o);var u=this.frame.clientWidth*.02;for(n=0;n<this.dataPoints.length;n++){var a=this.dataPoints[n];if(this.style===p.STYLE.DOTLINE){var f=this._convert3Dto2D(a.bottom);t.lineWidth=1,t.strokeStyle=this.colorGrid,t.beginPath(),t.moveTo(f.x,f.y),t.lineTo(a.screen.x,a.screen.y),t.stroke()}var l;this.style===p.STYLE.DOTSIZE?l=u/2+2*u*(a.point.value-this.valueMin)/(this.valueMax-this.valueMin):l=u;var c;this.showPerspective?c=l/-a.trans.z:c=l*-(this.eye.z/this.camera.getArmLength()),c<0&&(c=0);var h,d,v;this.style===p.STYLE.DOTCOLOR?(h=(1-(a.point.value-this.valueMin)*this.scale.value)*240,d=this._hsv2rgb(h,1,1),v=this._hsv2rgb(h,1,.8)):this.style===p.STYLE.DOTSIZE?(d=this.colorDot,v=this.colorDotBorder):(h=(1-(a.point.z-this.zMin)*this.scale.z/this.verticalRatio)*240,d=this._hsv2rgb(h,1,1),v=this._hsv2rgb(h,1,.8)),t.lineWidth=1,t.strokeStyle=v,t.fillStyle=d,t.beginPath(),t.arc(a.screen.x,a.screen.y,c,0,Math.PI*2,!0),t.fill(),t.stroke()}},p.prototype._redrawDataBar=function(){var e=this.frame.canvas,t=e.getContext("2d"),n,r,i,s;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(n=0;n<this.dataPoints.length;n++){var o=this._convertPointToTranslation(this.dataPoints[n].point),a=this._convertTranslationToScreen(o);this.dataPoints[n].trans=o,this.dataPoints[n].screen=a;var f=this._convertPointToTranslation(this.dataPoints[n].bottom);this.dataPoints[n].dist=this.showPerspective?f.length():-f.z}var l=function(e,t){return t.dist-e.dist};this.dataPoints.sort(l);var c=this.xBarWidth/2,h=this.yBarWidth/2;for(n=0;n<this.dataPoints.length;n++){var d=this.dataPoints[n],v,m,g;this.style===p.STYLE.BARCOLOR?(v=(1-(d.point.value-this.valueMin)*this.scale.value)*240,m=this._hsv2rgb(v,1,1),g=this._hsv2rgb(v,1,.8)):this.style===p.STYLE.BARSIZE?(m=this.colorDot,g=this.colorDotBorder):(v=(1-(d.point.z-this.zMin)*this.scale.z/this.verticalRatio)*240,m=this._hsv2rgb(v,1,1),g=this._hsv2rgb(v,1,.8)),this.style===p.STYLE.BARSIZE&&(c=this.xBarWidth/2*((d.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2),h=this.yBarWidth/2*((d.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2));var y=this,b=d.point,w=[{point:new u(b.x-c,b.y-h,b.z)},{point:new u(b.x+c,b.y-h,b.z)},{point:new u(b.x+c,b.y+h,b.z)},{point:new u(b.x-c,b.y+h,b.z)}],E=[{point:new u(b.x-c,b.y-h,this.zMin)},{point:new u(b.x+c,b.y-h,this.zMin)},{point:new u(b.x+c,b.y+h,this.zMin)},{point:new u(b.x-c,b.y+h,this.zMin)}];w.forEach(function(e){e.screen=y._convert3Dto2D(e.point)}),E.forEach(function(e){e.screen=y._convert3Dto2D(e.point)});var S=[{corners:w,center:u.avg(E[0].point,E[2].point)},{corners:[w[0],w[1],E[1],E[0]],center:u.avg(E[1].point,E[0].point)},{corners:[w[1],w[2],E[2],E[1]],center:u.avg(E[2].point,E[1].point)},{corners:[w[2],w[3],E[3],E[2]],center:u.avg(E[3].point,E[2].point)},{corners:[w[3],w[0],E[0],E[3]],center:u.avg(E[0].point,E[3].point)}];d.surfaces=S;for(r=0;r<S.length;r++){i=S[r];var x=this._convertPointToTranslation(i.center);i.dist=this.showPerspective?x.length():-x.z}S.sort(function(e,t){var n=t.dist-e.dist;return n?n:e.corners===w?1:t.corners===w?-1:0}),t.lineWidth=1,t.strokeStyle=g,t.fillStyle=m;for(r=2;r<S.length;r++)i=S[r],s=i.corners,t.beginPath(),t.moveTo(s[3].screen.x,s[3].screen.y),t.lineTo(s[0].screen.x,s[0].screen.y),t.lineTo(s[1].screen.x,s[1].screen.y),t.lineTo(s[2].screen.x,s[2].screen.y),t.lineTo(s[3].screen.x,s[3].screen.y),t.fill(),t.stroke()}},p.prototype._redrawDataLine=function(){var e=this.frame.canvas,t=e.getContext("2d"),n,r;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(r=0;r<this.dataPoints.length;r++){var i=this._convertPointToTranslation(this.dataPoints[r].point),s=this._convertTranslationToScreen(i);this.dataPoints[r].trans=i,this.dataPoints[r].screen=s}this.dataPoints.length>0&&(n=this.dataPoints[0],t.lineWidth=1,t.strokeStyle="blue",t.beginPath(),t.moveTo(n.screen.x,n.screen.y));for(r=1;r<this.dataPoints.length;r++)n=this.dataPoints[r],t.lineTo(n.screen.x,n.screen.y);this.dataPoints.length>0&&t.stroke()},p.prototype._onMouseDown=function(e){e=e||window.event,this.leftButtonDown&&this._onMouseUp(e),this.leftButtonDown=e.which?e.which===1:e.button===1;if(!this.leftButtonDown&&!this.touchDown)return;this.startMouseX=getMouseX(e),this.startMouseY=getMouseY(e),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var t=this;this.onmousemove=function(e){t._onMouseMove(e)},this.onmouseup=function(e){t._onMouseUp(e)},o.addEventListener(document,"mousemove",t.onmousemove),o.addEventListener(document,"mouseup",t.onmouseup),o.preventDefault(e)},p.prototype._onMouseMove=function(e){e=e||window.event;var t=parseFloat(getMouseX(e))-this.startMouseX,n=parseFloat(getMouseY(e))-this.startMouseY,r=this.startArmRotation.horizontal+t/200,i=this.startArmRotation.vertical+n/200,s=4,u=Math.sin(s/360*2*Math.PI);Math.abs(Math.sin(r))<u&&(r=Math.round(r/Math.PI)*Math.PI-.001),Math.abs(Math.cos(r))<u&&(r=(Math.round(r/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(i))<u&&(i=Math.round(i/Math.PI)*Math.PI),Math.abs(Math.cos(i))<u&&(i=(Math.round(i/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(r,i),this.redraw();var a=this.getCameraPosition();this.emit("cameraPositionChange",a),o.preventDefault(e)},p.prototype._onMouseUp=function(e){this.frame.style.cursor="auto",this.leftButtonDown=!1,o.removeEventListener(document,"mousemove",this.onmousemove),o.removeEventListener(document,"mouseup",this.onmouseup),o.preventDefault(e)},p.prototype._onTooltip=function(e){var t=300,n=getMouseX(e)-o.getAbsoluteLeft(this.frame),r=getMouseY(e)-o.getAbsoluteTop(this.frame);if(!this.showTooltip)return;this.tooltipTimeout&&clearTimeout(this.tooltipTimeout);if(this.leftButtonDown){this._hideTooltip();return}if(this.tooltip&&this.tooltip.dataPoint){var i=this._dataPointFromXY(n,r);i!==this.tooltip.dataPoint&&(i?this._showTooltip(i):this._hideTooltip())}else{var s=this;this.tooltipTimeout=setTimeout(function(){s.tooltipTimeout=null;var e=s._dataPointFromXY(n,r);e&&s._showTooltip(e)},t)}},p.prototype._onTouchStart=function(e){this.touchDown=!0;var t=this;this.ontouchmove=function(e){t._onTouchMove(e)},this.ontouchend=function(e){t._onTouchEnd(e)},o.addEventListener(document,"touchmove",t.ontouchmove),o.addEventListener(document,"touchend",t.ontouchend),this._onMouseDown(e)},p.prototype._onTouchMove=function(e){this._onMouseMove(e)},p.prototype._onTouchEnd=function(e){this.touchDown=!1,o.removeEventListener(document,"touchmove",this.ontouchmove),o.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(e)},p.prototype._onWheel=function(e){e||(e=window.event);var t=0;e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3);if(t){var n=this.camera.getArmLength(),r=n*(1-t/10);this.camera.setArmLength(r),this.redraw(),this._hideTooltip()}var i=this.getCameraPosition();this.emit("cameraPositionChange",i),o.preventDefault(e)},p.prototype._insideTriangle=function(e,t){function s(e){return e>0?1:e<0?-1:0}var n=t[0],r=t[1],i=t[2],o=s((r.x-n.x)*(e.y-n.y)-(r.y-n.y)*(e.x-n.x)),u=s((i.x-r.x)*(e.y-r.y)-(i.y-r.y)*(e.x-r.x)),a=s((n.x-i.x)*(e.y-i.y)-(n.y-i.y)*(e.x-i.x));return(o==0||u==0||o==u)&&(u==0||a==0||u==a)&&(o==0||a==0||o==a)},p.prototype._dataPointFromXY=function(e,t){var n,r=100,i=null,s=null,o=null,u=new a(e,t);if(this.style===p.STYLE.BAR||this.style===p.STYLE.BARCOLOR||this.style===p.STYLE.BARSIZE)for(n=this.dataPoints.length-1;n>=0;n--){i=this.dataPoints[n];var f=i.surfaces;if(f)for(var l=f.length-1;l>=0;l--){var c=f[l],h=c.corners,d=[h[0].screen,h[1].screen,h[2].screen],v=[h[2].screen,h[3].screen,h[0].screen];if(this._insideTriangle(u,d)||this._insideTriangle(u,v))return i}}else for(n=0;n<this.dataPoints.length;n++){i=this.dataPoints[n];var m=i.screen;if(m){var g=Math.abs(e-m.x),y=Math.abs(t-m.y),b=Math.sqrt(g*g+y*y);(o===null||b<o)&&b<r&&(o=b,s=i)}}return s},p.prototype._showTooltip=function(e){var t,n,r;this.tooltip?(t=this.tooltip.dom.content,n=this.tooltip.dom.line,r=this.tooltip.dom.dot):(t=document.createElement("div"),t.style.position="absolute",t.style.padding="10px",t.style.border="1px solid #4d4d4d",t.style.color="#1a1a1a",t.style.background="rgba(255,255,255,0.7)",t.style.borderRadius="2px",t.style.boxShadow="5px 5px 10px rgba(128,128,128,0.5)",n=document.createElement("div"),n.style.position="absolute",n.style.height="40px",n.style.width="0",n.style.borderLeft="1px solid #4d4d4d",r=document.createElement("div"),r.style.position="absolute",r.style.height="0",r.style.width="0",r.style.border="5px solid #4d4d4d",r.style.borderRadius="5px",this.tooltip={dataPoint:null,dom:{content:t,line:n,dot:r}}),this._hideTooltip(),this.tooltip.dataPoint=e,typeof this.showTooltip=="function"?t.innerHTML=this.showTooltip(e.point):t.innerHTML="<table><tr><td>x:</td><td>"+e.point.x+"</td></tr>"+"<tr><td>y:</td><td>"+e.point.y+"</td></tr>"+"<tr><td>z:</td><td>"+e.point.z+"</td></tr>"+"</table>",t.style.left="0",t.style.top="0",this.frame.appendChild(t),this.frame.appendChild(n),this.frame.appendChild(r);var i=t.offsetWidth,s=t.offsetHeight,o=n.offsetHeight,u=r.offsetWidth,a=r.offsetHeight,f=e.screen.x-i/2;f=Math.min(Math.max(f,10),this.frame.clientWidth-10-i),n.style.left=e.screen.x+"px",n.style.top=e.screen.y-o+"px",t.style.left=f+"px",t.style.top=e.screen.y-o-s+"px",r.style.left=e.screen.x-u/2+"px",r.style.top=e.screen.y-a/2+"px"},p.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var e in this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(e)){var t=this.tooltip.dom[e];t&&t.parentNode&&t.parentNode.removeChild(t)}}},getMouseX=function(e){return"clientX"in e?e.clientX:e.targetTouches[0]&&e.targetTouches[0].clientX||0},getMouseY=function(e){return"clientY"in e?e.clientY:e.targetTouches[0]&&e.targetTouches[0].clientY||0},e.exports=p},function(e,t,n){var r=n(10);Camera=function(){this.armLocation=new r,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraLocation=new r,this.cameraRotation=new r(.5*Math.PI,0,0),this.calculateCameraOrientation()},Camera.prototype.setArmLocation=function(e,t,n){this.armLocation.x=e,this.armLocation.y=t,this.armLocation.z=n,this.calculateCameraOrientation()},Camera.prototype.setArmRotation=function(e,t){e!==undefined&&(this.armRotation.horizontal=e),t!==undefined&&(this.armRotation.vertical=t,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),(e!==undefined||t!==undefined)&&this.calculateCameraOrientation()},Camera.prototype.getArmRotation=function(){var e={};return e.horizontal=this.armRotation.horizontal,e.vertical=this.armRotation.vertical,e},Camera.prototype.setArmLength=function(e){if(e===undefined)return;this.armLength=e,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.calculateCameraOrientation()},Camera.prototype.getArmLength=function(){return this.armLength},Camera.prototype.getCameraLocation=function(){return this.cameraLocation},Camera.prototype.getCameraRotation=function(){return this.cameraRotation},Camera.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal},e.exports=Camera},function(e,t,n){function i(e,t,n){this.data=e,this.column=t,this.graph=n,this.index=undefined,this.value=undefined,this.values=n.getDistinctValues(e.get(),this.column),this.values.sort(function(e,t){return e>t?1:e<t?-1:0}),this.values.length>0&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=undefined,n.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var r=n(4);i.prototype.isLoaded=function(){return this.loaded},i.prototype.getLoadedProgress=function(){var e=this.values.length,t=0;while(this.dataPoints[t])t++;return Math.round(t/e*100)},i.prototype.getLabel=function(){return this.graph.filterLabel},i.prototype.getColumn=function(){return this.column},i.prototype.getSelectedValue=function(){return this.index===undefined?undefined:this.values[this.index]},i.prototype.getValues=function(){return this.values},i.prototype.getValue=function(e){if(e>=this.values.length)throw"Error: index out of range";return this.values[e]},i.prototype._getDataPoints=function(e){e===undefined&&(e=this.index);if(e===undefined)return[];var t;if(this.dataPoints[e])t=this.dataPoints[e];else{var n={};n.column=this.column,n.value=this.values[e];var i=(new r(this.data,{filter:function(e){return e[n.column]==n.value}})).get();t=this.graph._getDataPoints(i),this.dataPoints[e]=t}return t},i.prototype.setOnLoadCallback=function(e){this.onLoadCallback=e},i.prototype.selectValue=function(e){if(e>=this.values.length)throw"Error: index out of range";this.index=e,this.value=this.values[e]},i.prototype.loadInBackground=function(e){e===undefined&&(e=0);var t=this.graph.frame;if(e<this.values.length){var n=this._getDataPoints(e);t.progress===undefined&&(t.progress=document.createElement("DIV"),t.progress.style.position="absolute",t.progress.style.color="gray",t.appendChild(t.progress));var r=this.getLoadedProgress();t.progress.innerHTML="Loading animation... "+r+"%",t.progress.style.bottom="60px",t.progress.style.left="10px";var i=this;setTimeout(function(){i.loadInBackground(e+1)},10),this.loaded=!1}else this.loaded=!0,t.progress!==undefined&&(t.removeChild(t.progress),t.progress=undefined),this.onLoadCallback&&this.onLoadCallback()},e.exports=i},function(e,t,n){Point2d=function(e,t){this.x=e!==undefined?e:0,this.y=t!==undefined?t:0},e.exports=Point2d},function(e,t,n){function r(e,t,n){this.x=e!==undefined?e:0,this.y=t!==undefined?t:0,this.z=n!==undefined?n:0}r.subtract=function(e,t){var n=new r;return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n},r.add=function(e,t){var n=new r;return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n},r.avg=function(e,t){return new r((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2)},r.crossProduct=function(e,t){var n=new r;return n.x=e.y*t.z-e.z*t.y,n.y=e.z*t.x-e.x*t.z,n.z=e.x*t.y-e.y*t.x,n},r.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.exports=r},function(e,t,n){function i(e,t){if(e===undefined)throw"Error: No container element defined";this.container=e,this.visible=t&&t.visible!=undefined?t.visible:!0;if(this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var n=this;this.frame.slide.onmousedown=function(e){n._onMouseDown(e)},this.frame.prev.onclick=function(e){n.prev(e)},this.frame.play.onclick=function(e){n.togglePlay(e)},this.frame.next.onclick=function(e){n.next(e)}}this.onChangeCallback=undefined,this.values=[],this.index=undefined,this.playTimeout=undefined,this.playInterval=1e3,this.playLoop=!0}var r=n(1);i.prototype.prev=function(){var e=this.getIndex();e>0&&(e--,this.setIndex(e))},i.prototype.next=function(){var e=this.getIndex();e<this.values.length-1&&(e++,this.setIndex(e))},i.prototype.playNext=function(){var e=new Date,t=this.getIndex();t<this.values.length-1?(t++,this.setIndex(t)):this.playLoop&&(t=0,this.setIndex(t));var n=new Date,r=n-e,i=Math.max(this.playInterval-r,0),s=this;this.playTimeout=setTimeout(function(){s.playNext()},i)},i.prototype.togglePlay=function(){this.playTimeout===undefined?this.play():this.stop()},i.prototype.play=function(){if(this.playTimeout)return;this.playNext(),this.frame&&(this.frame.play.value="Stop")},i.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=undefined,this.frame&&(this.frame.play.value="Play")},i.prototype.setOnChangeCallback=function(e){this.onChangeCallback=e},i.prototype.setPlayInterval=function(e){this.playInterval=e},i.prototype.getPlayInterval=function(e){return this.playInterval},i.prototype.setPlayLoop=function(e){this.playLoop=e},i.prototype.onChange=function(){this.onChangeCallback!==undefined&&this.onChangeCallback()},i.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var e=this.indexToLeft(this.index);this.frame.slide.style.left=e+"px"}},i.prototype.setValues=function(e){this.values=e,this.values.length>0?this.setIndex(0):this.index=undefined},i.prototype.setIndex=function(e){if(!(e<this.values.length))throw"Error: index out of range";this.index=e,this.redraw(),this.onChange()},i.prototype.getIndex=function(){return this.index},i.prototype.get=function(){return this.values[this.index]},i.prototype._onMouseDown=function(e){var t=e.which?e.which===1:e.button===1;if(!t)return;this.startClientX=e.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var n=this;this.onmousemove=function(e){n._onMouseMove(e)},this.onmouseup=function(e){n._onMouseUp(e)},r.addEventListener(document,"mousemove",this.onmousemove),r.addEventListener(document,"mouseup",this.onmouseup),r.preventDefault(e)},i.prototype.leftToIndex=function(e){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,n=e-3,r=Math.round(n/t*(this.values.length-1));return r<0&&(r=0),r>this.values.length-1&&(r=this.values.length-1),r},i.prototype.indexToLeft=function(e){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,n=e/(this.values.length-1)*t,r=n+3;return r},i.prototype._onMouseMove=function(e){var t=e.clientX-this.startClientX,n=this.startSlideX+t,i=this.leftToIndex(n);this.setIndex(i),r.preventDefault()},i.prototype._onMouseUp=function(e){this.frame.style.cursor="auto",r.removeEventListener(document,"mousemove",this.onmousemove),r.removeEventListener(document,"mouseup",this.onmouseup),r.preventDefault()},e.exports=i},function(e,t,n){function r(e,t,n,r){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(e,t,n,r)}r.prototype.setRange=function(e,t,n,r){this._start=e?e:0,this._end=t?t:0,this.setStep(n,r)},r.prototype.setStep=function(e,t){if(e===undefined||e<=0)return;t!==undefined&&(this.prettyStep=t),this.prettyStep===!0?this._step=r.calculatePrettyStep(e):this._step=e},r.calculatePrettyStep=function(e){var t=function(e){return Math.log(e)/Math.LN10},n=Math.pow(10,Math.round(t(e))),r=2*Math.pow(10,Math.round(t(e/2))),i=5*Math.pow(10,Math.round(t(e/5))),s=n;return Math.abs(r-e)<=Math.abs(s-e)&&(s=r),Math.abs(i-e)<=Math.abs(s-e)&&(s=i),s<=0&&(s=1),s},r.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},r.prototype.getStep=function(){return this._step},r.prototype.start=function(){this._current=this._start-this._start%this._step},r.prototype.next=function(){this._current+=this._step},r.prototype.end=function(){return this._current>this._end},e.exports=r},function(e,t,n){function d(e,t,n,r){if(!(this instanceof d))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(n)||n instanceof o)&&n instanceof Object){var i=r;r=n,n=i}var u=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:"bottom",width:null,height:null,maxHeight:null,minHeight:null},this.options=s.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{snap:null,toScreen:u._toScreen.bind(u),toGlobalScreen:u._toGlobalScreen.bind(u),toTime:u._toTime.bind(u),toGlobalTime:u._toGlobalTime.bind(u)}},this.range=new a(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new l(this.body),this.components.push(this.timeAxis),this.body.util.snap=this.timeAxis.snap.bind(this.timeAxis),this.currentTime=new c(this.body),this.components.push(this.currentTime),this.customTime=new h(this.body),this.components.push(this.customTime),this.itemSet=new p(this.body),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,r&&this.setOptions(r),n&&this.setGroups(n),t?this.setItems(t):this.redraw()}var r=n(53),i=n(45),s=n(1),o=n(3),u=n(4),a=n(17),f=n(46),l=n(30),c=n(21),h=n(22),p=n(27);d.prototype=new f,d.prototype.setItems=function(e){var t=this.itemsData==null,n;e?e instanceof o||e instanceof u?n=e:n=new o(e,{type:{start:"Date",end:"Date"}}):n=null,this.itemsData=n,this.itemSet&&this.itemSet.setItems(n);if(t)if(this.options.start!=undefined||this.options.end!=undefined){var r=this.options.start!=undefined?this.options.start:null,i=this.options.end!=undefined?this.options.end:null;this.setWindow(r,i,{animate:!1})}else this.fit({animate:!1})},d.prototype.setGroups=function(e){var t;e?e instanceof o||e instanceof u?t=e:t=new o(e):t=null,this.groupsData=t,this.itemSet.setGroups(t)},d.prototype.setSelection=function(e,t){this.itemSet&&this.itemSet.setSelection(e),t&&t.focus&&this.focus(e,t)},d.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},d.prototype.focus=function(e,t){if(!this.itemsData||e==undefined)return;var n=Array.isArray(e)?e:[e],r=this.itemsData.getDataSet().get(n,{type:{start:"Date",end:"Date"}}),i=null,s=null;r.forEach(function(e){var t=e.start.valueOf(),n="end"in e?e.end.valueOf():e.start.valueOf();if(i===null||t<i)i=t;if(s===null||n>s)s=n});if(i!==null&&s!==null){var o=(i+s)/2,u=Math.max(this.range.end-this.range.start,(s-i)*1.1),a=t&&t.animate!==undefined?t.animate:!0;this.range.setRange(o-u/2,o+u/2,a)}},d.prototype.getItemRange=function(){var e=this.itemsData.getDataSet(),t=null,n=null;if(e){var r=e.min("start");t=r?s.convert(r.start,"Date").valueOf():null;var i=e.max("start");i&&(n=s.convert(i.start,"Date").valueOf());var o=e.max("end");o&&(n==null?n=s.convert(o.end,"Date").valueOf():n=Math.max(n,s.convert(o.end,"Date").valueOf()))}return{min:t!=null?new Date(t):null,max:n!=null?new Date(n):null}},e.exports=d},function(e,t,n){function d(e,t,n,r){if(!(Array.isArray(n)||n instanceof o)&&n instanceof Object){var i=r;r=n,n=i}var u=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:"bottom",width:null,height:null,maxHeight:null,minHeight:null},this.options=s.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{snap:null,toScreen:u._toScreen.bind(u),toGlobalScreen:u._toGlobalScreen.bind(u),toTime:u._toTime.bind(u),toGlobalTime:u._toGlobalTime.bind(u)}},this.range=new a(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new l(this.body),this.components.push(this.timeAxis),this.body.util.snap=this.timeAxis.snap.bind(this.timeAxis),this.currentTime=new c(this.body),this.components.push(this.currentTime),this.customTime=new h(this.body),this.components.push(this.customTime),this.linegraph=new p(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,r&&this.setOptions(r),n&&this.setGroups(n),t?this.setItems(t):this.redraw()}var r=n(53),i=n(45),s=n(1),o=n(3),u=n(4),a=n(17),f=n(46),l=n(30),c=n(21),h=n(22),p=n(29);d.prototype=new f,d.prototype.setItems=function(e){var t=this.itemsData==null,n;e?e instanceof o||e instanceof u?n=e:n=new o(e,{type:{start:"Date",end:"Date"}}):n=null,this.itemsData=n,this.linegraph&&this.linegraph.setItems(n);if(t)if(this.options.start!=undefined||this.options.end!=undefined){var r=this.options.start!=undefined?this.options.start:null,i=this.options.end!=undefined?this.options.end:null;this.setWindow(r,i,{animate:!1})}else this.fit({animate:!1})},d.prototype.setGroups=function(e){var t;e?e instanceof o||e instanceof u?t=e:t=new o(e):t=null,this.groupsData=t,this.linegraph.setGroups(t)},d.prototype.getLegend=function(e,t,n){return t===undefined&&(t=15),n===undefined&&(n=15),this.linegraph.groups[e]!==undefined?this.linegraph.groups[e].getLegend(t,n):"cannot find group:"+e},d.prototype.isGroupVisible=function(e){return this.linegraph.groups[e]!==undefined?this.linegraph.groups[e].visible&&(this.linegraph.options.groups.visibility[e]===undefined||this.linegraph.options.groups.visibility[e]==1):!1},d.prototype.getItemRange=function(){var e=null,t=null;for(var n in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(n)&&this.linegraph.groups[n].visible==1)for(var r=0;r<this.linegraph.groups[n].itemsData.length;r++){var i=this.linegraph.groups[n].itemsData[r],o=s.convert(i.x,"Date").valueOf();e=e==null?o:e>o?o:e,t=t==null?o:t<o?o:t}return{min:e!=null?new Date(e):null,max:t!=null?new Date(t):null}},e.exports=d},function(e,t,n){var r=n(44);t.convertHiddenOptions=function(e,t){e.hiddenDates=[];if(t&&Array.isArray(t)==1){for(var n=0;n<t.length;n++)if(t[n].repeat===undefined){var i={};i.start=r(t[n].start).toDate().valueOf(),i.end=r(t[n].end).toDate().valueOf(),e.hiddenDates.push(i)}e.hiddenDates.sort(function(e,t){return e.start-t.start})}},t.updateHiddenDates=function(e,n){if(n&&e.domProps.centerContainer.width!==undefined){t.convertHiddenOptions(e,n);var i=r(e.range.start),s=r(e.range.end),o=e.range.end-e.range.start,u=o/e.domProps.centerContainer.width;for(var a=0;a<n.length;a++)if(n[a].repeat!==undefined){var f=r(n[a].start),l=r(n[a].end);if(f._d=="Invalid Date")throw new Error("Supplied start date is not valid: "+n[a].start);if(l._d=="Invalid Date")throw new Error("Supplied end date is not valid: "+n[a].end);var c=l-f;if(c>=4*u){var h=0,p=s.clone();switch(n[a].repeat){case"daily":f.day()!=l.day()&&(h=1),f.dayOfYear(i.dayOfYear()),f.year(i.year()),f.subtract(7,"days"),l.dayOfYear(i.dayOfYear()),l.year(i.year()),l.subtract(7-h,"days"),p.add(1,"weeks");break;case"weekly":var d=l.diff(f,"days"),v=f.day();f.date(i.date()),f.month(i.month()),f.year(i.year()),l=f.clone(),f.day(v),l.day(v),l.add(d,"days"),f.subtract(1,"weeks"),l.subtract(1,"weeks"),p.add(1,"weeks");break;case"monthly":f.month()!=l.month()&&(h=1),f.month(i.month()),f.year(i.year()),f.subtract(1,"months"),l.month(i.month()),l.year(i.year()),l.subtract(1,"months"),l.add(h,"months"),p.add(1,"months");break;case"yearly":f.year()!=l.year()&&(h=1),f.year(i.year()),f.subtract(1,"years"),l.year(i.year()),l.subtract(1,"years"),l.add(h,"years"),p.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[a].repeat);return}while(f<p){e.hiddenDates.push({start:f.valueOf(),end:l.valueOf()});switch(n[a].repeat){case"daily":f.add(1,"days"),l.add(1,"days");break;case"weekly":f.add(1,"weeks"),l.add(1,"weeks");break;case"monthly":f.add(1,"months"),l.add(1,"months");break;case"yearly":f.add(1,"y"),l.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[a].repeat);return}}e.hiddenDates.push({start:f.valueOf(),end:l.valueOf()})}}t.removeDuplicates(e);var m=t.isHidden(e.range.start,e.hiddenDates),g=t.isHidden(e.range.end,e.hiddenDates),y=e.range.start,b=e.range.end;m.hidden==1&&(y=e.range.startToFront==1?m.startDate-1:m.endDate+1),g.hidden==1&&(b=e.range.endToFront==1?g.startDate-1:g.endDate+1),(m.hidden==1||g.hidden==1)&&e.range._applyRange(y,b)}},t.removeDuplicates=function(e){var t=e.hiddenDates,n=[];for(var r=0;r<t.length;r++)for(var i=0;i<t.length;i++)r!=i&&t[i].remove!=1&&t[r].remove!=1&&(t[i].start>=t[r].start&&t[i].end<=t[r].end?t[i].remove=!0:t[i].start>=t[r].start&&t[i].start<=t[r].end?(t[r].end=t[i].end,t[i].remove=!0):t[i].end>=t[r].start&&t[i].end<=t[r].end&&(t[r].start=t[i].start,t[i].remove=!0));for(var r=0;r<t.length;r++)t[r].remove!==!0&&n.push(t[r]);e.hiddenDates=n,e.hiddenDates.sort(function(e,t){return e.start-t.start})},t.printDates=function(e){for(var t=0;t<e.length;t++)console.log(t,new Date(e[t].start),new Date(e[t].end),e[t].start,e[t].end,e[t].remove)},t.stepOverHiddenDates=function(e,t){var n=!1,i=e.current.valueOf();for(var s=0;s<e.hiddenDates.length;s++){var o=e.hiddenDates[s].start,u=e.hiddenDates[s].end;if(i>=o&&i<u){n=!0;break}}if(n==1&&i<e._end.valueOf()&&i!=t){var a=r(t),f=r(u);a.year()!=f.year()?e.switchedYear=!0:a.month()!=f.month()?e.switchedMonth=!0:a.dayOfYear()!=f.dayOfYear()&&(e.switchedDay=!0),e.current=f.toDate()}},t.toScreen=function(e,n,r){if(e.body.hiddenDates.length==0){var i=e.range.conversion(r);return(n.valueOf()-i.offset)*i.scale}var s=t.isHidden(n,e.body.hiddenDates);s.hidden==1&&(n=s.startDate);var o=t.getHiddenDurationBetween(e.body.hiddenDates,e.range.start,e.range.end);n=t.correctTimeForHidden(e.body.hiddenDates,e.range,n);var i=e.range.conversion(r,o);return(n.valueOf()-i.offset)*i.scale},t.toTime=function(e,n,r){if(e.body.hiddenDates.length==0){var i=e.range.conversion(r);return new Date(n/i.scale+i.offset)}var s=t.getHiddenDurationBetween(e.body.hiddenDates,e.range.start,e.range.end),o=e.range.end-e.range.start-s,u=o*n/r,a=t.getAccumulatedHiddenDuration(e.body.hiddenDates,e.range,u),f=new Date(a+u+e.range.start);return f},t.getHiddenDurationBetween=function(e,t,n){var r=0;for(var i=0;i<e.length;i++){var s=e[i].start,o=e[i].end;s>=t&&o<n&&(r+=o-s)}return r},t.correctTimeForHidden=function(e,n,i){return i=r(i).toDate().valueOf(),i-=t.getHiddenDurationBefore(e,n,i),i},t.getHiddenDurationBefore=function(e,t,n){var i=0;n=r(n).toDate().valueOf();for(var s=0;s<e.length;s++){var o=e[s].start,u=e[s].end;o>=t.start&&u<t.end&&n>=u&&(i+=u-o)}return i},t.getAccumulatedHiddenDuration=function(e,t,n){var r=0,i=0,s=t.start;for(var o=0;o<e.length;o++){var u=e[o].start,a=e[o].end;if(u>=t.start&&a<t.end){i+=u-s,s=a;if(i>=n)break;r+=a-u}}return r},t.snapAwayFromHidden=function(e,n,r,i){var s=t.isHidden(n,e);return s.hidden==1?r<0?i==1?s.startDate-(s.endDate-n)-1:s.startDate-1:i==1?s.endDate+(n-s.startDate)+1:s.endDate+1:n},t.isHidden=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].start,i=t[n].end;if(e>=r&&e<i)return{hidden:!0,startDate:r,endDate:i}}return{hidden:!1,startDate:r,endDate:i}}},function(e,t,n){function r(e,t,n,r,i){this.current=0,this.autoScale=!0,this.stepIndex=0,this.step=1,this.scale=1,this.marginStart,this.marginEnd,this.deadSpace=0,this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.setRange(e,t,n,r,i)}r.prototype.setRange=function(e,t,n,r,i){this._start=i.min===undefined?e:i.min,this._end=i.max===undefined?t:i.max,this._start==this._end&&(this._start-=.75,this._end+=1),this.autoScale&&this.setMinimumStep(n,r),this.setFirst(i)},r.prototype.setMinimumStep=function(e,t){var n=this._end-this._start,r=n*1.2,i=e*(r/t),s=Math.round(Math.log(r)/Math.LN10),o=-1,u=Math.pow(10,s),a=0;s<0&&(a=s);var f=!1;for(var l=a;Math.abs(l)<=Math.abs(s);l++){u=Math.pow(10,l);for(var c=0;c<this.minorSteps.length;c++){var h=u*this.minorSteps[c];if(h>=i){f=!0,o=c;break}}if(f==1)break}this.stepIndex=o,this.scale=u,this.step=u*this.minorSteps[o]},r.prototype.setFirst=function(e){e===undefined&&(e={});var t=e.min===undefined?this._start-this.scale*2*this.minorSteps[this.stepIndex]:e.min,n=e.max===undefined?this._end+this.scale*this.minorSteps[this.stepIndex]:e.max;this.marginEnd=e.max===undefined?this.roundToMinor(n):e.max,this.marginStart=e.min===undefined?this.roundToMinor(t):e.min,this.deadSpace=this.roundToMinor(n)-n+this.roundToMinor(t)-t,this.marginRange=this.marginEnd-this.marginStart,this.current=this.marginEnd},r.prototype.roundToMinor=function(e){var t=e-e%(this.scale*this.minorSteps[this.stepIndex]);return e%(this.scale*this.minorSteps[this.stepIndex])>.5*this.scale*this.minorSteps[this.stepIndex]?t+this.scale*this.minorSteps[this.stepIndex]:t},r.prototype.hasNext=function(){return this.current>=this.marginStart},r.prototype.next=function(){var e=this.current;this.current-=this.step,this.current==e&&(this.current=this._end)},r.prototype.previous=function(){this.current+=this.step,this.marginEnd+=this.step,this.marginRange=this.marginEnd-this.marginStart},r.prototype.getCurrent=function(e){var t=""+Number(this.current).toPrecision(5);if(e!==undefined&&!isNaN(Number(e))){var n="",r=t.indexOf("e");r!=-1&&(n=t.slice(r),t=t.slice(0,r)),r=Math.max(t.indexOf(","),t.indexOf(".")),r===-1?(e!==0&&(t+="."),r=t.length+e):e!==0&&(r+=e+1);if(r>t.length)for(var i=r-t.length;i>0;i--)t+="0";else t=t.slice(0,r);t+=n}else if(t.indexOf(",")!=-1||t.indexOf(".")!=-1)for(var s=t.length-1;s>0;s--){if(t[s]!="0"){if(t[s]=="."||t[s]==","){t=t.slice(0,s);break}break}t=t.slice(0,s)}return t},r.prototype.snap=function(e){},r.prototype.isMajor=function(){return this.current%(this.scale*this.majorSteps[this.stepIndex])==0},e.exports=r},function(e,t,n){function a(e,t){var n=s().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=n.clone().add(-3,"days").valueOf(),this.end=n.clone().add(4,"days").valueOf(),this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={start:null,end:null,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10},this.options=r.extend({},this.defaultOptions),this.props={touch:{}},this.animateTimer=null,this.body.emitter.on("dragstart",this._onDragStart.bind(this)),this.body.emitter.on("drag",this._onDrag.bind(this)),this.body.emitter.on("dragend",this._onDragEnd.bind(this)),this.body.emitter.on("hold",this._onHold.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("DOMMouseScroll",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.setOptions(t)}function f(e){if(e!="horizontal"&&e!="vertical")throw new TypeError('Unknown direction "'+e+'". '+'Choose "horizontal" or "vertical".')}function l(e,t){return{x:e.pageX-r.getAbsoluteLeft(t),y:e.pageY-r.getAbsoluteTop(t)}}var r=n(1),i=n(47),s=n(44),o=n(20),u=n(15);a.prototype=new o,a.prototype.setOptions=function(e){if(e){var t=["direction","min","max","zoomMin","zoomMax","moveable","zoomable","activate","hiddenDates"];r.selectiveExtend(t,this.options,e),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}},a.prototype.setRange=function(e,t,n){var i=e!=undefined?r.convert(e,"Date").valueOf():null,s=t!=undefined?r.convert(t,"Date").valueOf():null;this._cancelAnimation();if(n){var o=this,a=this.start,f=this.end,l=typeof n=="number"?n:500,c=(new Date).valueOf(),h=!1;function p(){if(!o.props.touch.dragging){var e=(new Date).valueOf(),t=e-c,n=t>l,v=n||i===null?i:r.easeInOutQuad(t,a,i,l),m=n||s===null?s:r.easeInOutQuad(t,f,s,l);d=o._applyRange(v,m),u.updateHiddenDates(o.body,o.options.hiddenDates),h=h||d,d&&o.body.emitter.emit("rangechange",{start:new Date(o.start),end:new Date(o.end)}),n?h&&o.body.emitter.emit("rangechanged",{start:new Date(o.start),end:new Date(o.end)}):o.animateTimer=setTimeout(p,20)}}return p()}var d=this._applyRange(i,s);u.updateHiddenDates(this.body,this.options.hiddenDates);if(d){var v={start:new Date(this.start),end:new Date(this.end)};this.body.emitter.emit("rangechange",v),this.body.emitter.emit("rangechanged",v)}},a.prototype._cancelAnimation=function(){this.animateTimer&&(clearTimeout(this.animateTimer),this.animateTimer=null)},a.prototype._applyRange=function(e,t){var n=e!=null?r.convert(e,"Date").valueOf():this.start,i=t!=null?r.convert(t,"Date").valueOf():this.end,s=this.options.max!=null?r.convert(this.options.max,"Date").valueOf():null,o=this.options.min!=null?r.convert(this.options.min,"Date").valueOf():null,u;if(isNaN(n)||n===null)throw new Error('Invalid start "'+e+'"');if(isNaN(i)||i===null)throw new Error('Invalid end "'+t+'"');i<n&&(i=n),o!==null&&n<o&&(u=o-n,n+=u,i+=u,s!=null&&i>s&&(i=s)),s!==null&&i>s&&(u=i-s,n-=u,i-=u,o!=null&&n<o&&(n=o));if(this.options.zoomMin!==null){var a=parseFloat(this.options.zoomMin);a<0&&(a=0),i-n<a&&(this.end-this.start===a?(n=this.start,i=this.end):(u=a-(i-n),n-=u/2,i+=u/2))}if(this.options.zoomMax!==null){var f=parseFloat(this.options.zoomMax);f<0&&(f=0),i-n>f&&(this.end-this.start===f?(n=this.start,i=this.end):(u=i-n-f,n+=u/2,i-=u/2))}var l=this.start!=n||this.end!=i;return this.start=n,this.end=i,l},a.prototype.getRange=function(){return{start:this.start,end:this.end}},a.prototype.conversion=function(e,t){return a.conversion(this.start,this.end,e,t)},a.conversion=function(e,t,n,r){return r===undefined&&(r=0),n!=0&&t-e!=0?{offset:e,scale:n/(t-e-r)}:{offset:0,scale:1}},a.prototype._onDragStart=function(e){this.deltaDifference=0,this.previousDelta=0;if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move")},a.prototype._onDrag=function(e){if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;var t=this.options.direction;f(t);var n=t=="horizontal"?e.gesture.deltaX:e.gesture.deltaY;n-=this.deltaDifference;var r=this.props.touch.end-this.props.touch.start,i=u.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);r-=i;var s=t=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height,o=-n/s*r,a=this.props.touch.start+o,l=this.props.touch.end+o,c=u.snapAwayFromHidden(this.body.hiddenDates,a,this.previousDelta-n,!0),h=u.snapAwayFromHidden(this.body.hiddenDates,l,this.previousDelta-n,!0);if(c!=a||h!=l){this.deltaDifference+=n,this.props.touch.start=c,this.props.touch.end=h,this._onDrag(e);return}this.previousDelta=n,this._applyRange(a,l),this.body.emitter.emit("rangechange",{start:new Date(this.start),end:new Date(this.end)})},a.prototype._onDragEnd=function(e){if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end)})},a.prototype._onMouseWheel=function(e){if(!this.options.zoomable||!this.options.moveable)return;var t=0;e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3);if(t){var n;t<0?n=1-t/5:n=1/(1+t/5);var r=i.fakeGesture(this,e),s=l(r.center,this.body.dom.center),o=this._pointerToDate(s);this.zoom(n,o,t)}e.preventDefault()},a.prototype._onTouch=function(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0},a.prototype._onHold=function(){this.props.touch.allowDragging=!1},a.prototype._onPinch=function(e){if(!this.options.zoomable||!this.options.moveable)return;this.props.touch.allowDragging=!1;if(e.gesture.touches.length>1){this.props.touch.center||(this.props.touch.center=l(e.gesture.center,this.body.dom.center));var t=1/(e.gesture.scale+this.scaleOffset),n=this._pointerToDate(this.props.touch.center),r=u.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),i=u.getHiddenDurationBefore(this.body.hiddenDates,this,n),s=r-i,o=n-i+(this.start-(n-i))*t,a=n+s+(this.end-(n+s))*t;this.startToFront=1-t>0?!1:!0,this.endToFront=t-1>0?!1:!0;var f=u.snapAwayFromHidden(this.body.hiddenDates,o,1-t,!0),c=u.snapAwayFromHidden(this.body.hiddenDates,a,t-1,!0);if(f!=o||c!=a)this.props.touch.start=f,this.props.touch.end=c,this.scaleOffset=1-e.gesture.scale,o=f,a=c;this.setRange(o,a),this.startToFront=!1,this.endToFront=!0}},a.prototype._pointerToDate=function(e){var t,n=this.options.direction;f(n);if(n=="horizontal")return this.body.util.toTime(e.x).valueOf();var r=this.body.domProps.center.height;return t=this.conversion(r),e.y/t.scale+t.offset},a.prototype.zoom=function(e,t,n){t==null&&(t=(this.start+this.end)/2);var r=u.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),i=u.getHiddenDurationBefore(this.body.hiddenDates,this,t),s=r-i,o=t-i+(this.start-(t-i))*e,a=t+s+(this.end-(t+s))*e;this.startToFront=n>0?!1:!0,this.endToFront=-n>0?!1:!0;var f=u.snapAwayFromHidden(this.body.hiddenDates,o,n,!0),l=u.snapAwayFromHidden(this.body.hiddenDates,a,-n,!0);if(f!=o||l!=a)o=f,a=l;this.setRange(o,a),this.startToFront=!1,this.endToFront=!0},a.prototype.move=function(e){var t=this.end-this.start,n=this.start+t*e,r=this.end+t*e;this.start=n,this.end=r},a.prototype.moveTo=function(e){var t=(this.start+this.end)/2,n=t-e,r=this.start-n,i=this.end-n;this.setRange(r,i)},e.exports=a},function(e,t,n){var r=.001;t.orderByStart=function(e){e.sort(function(e,t){return e.data.start-t.data.start})},t.orderByEnd=function(e){e.sort(function(e,t){var n="end"in e.data?e.data.end:e.data.start,r="end"in t.data?t.data.end:t.data.start;return n-r})},t.stack=function(e,n,r){var i,s;if(r)for(i=0,s=e.length;i<s;i++)e[i].top=null;for(i=0,s=e.length;i<s;i++){var o=e[i];if(o.stack&&o.top===null){o.top=n.axis;do{var u=null;for(var a=0,f=e.length;a<f;a++){var l=e[a];if(l.top!==null&&l!==o&&l.stack&&t.collision(o,l,n.item)){u=l;break}}u!=null&&(o.top=u.top+u.height+n.item.vertical)}while(u)}}},t.nostack=function(e,t,n){var r,i,s;for(r=0,i=e.length;r<i;r++)if(e[r].data.subgroup!==undefined){s=t.axis;for(var o in n)n.hasOwnProperty(o)&&n[o].visible==1&&n[o].index<n[e[r].data.subgroup].index&&(s+=n[o].height+t.item.vertical);e[r].top=s}else e[r].top=t.axis},t.collision=function(e,t,n){return e.left-n.horizontal+r<t.left+t.width&&e.left+e.width+n.horizontal-r>t.left&&e.top-n.vertical+r<t.top+t.height&&e.top+e.height+n.vertical-r>t.top}},function(e,t,n){function s(e,t,n,r){this.current=new Date,this._start=new Date,this._end=new Date,this.autoScale=!0,this.scale=s.SCALE.DAY,this.step=1,this.setRange(e,t,n),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,this.hiddenDates=r,r===undefined&&(this.hiddenDates=[])}var r=n(44),i=n(15);s.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8},s.prototype.setRange=function(e,t,n){if(!(e instanceof Date&&t instanceof Date))throw"No legal start or end date in method setRange";this._start=e!=undefined?new Date(e.valueOf()):new Date,this._end=t!=undefined?new Date(t.valueOf()):new Date,this.autoScale&&this.setMinimumStep(n)},s.prototype.first=function(){this.current=new Date(this._start.valueOf()),this.roundToMinor()},s.prototype.roundToMinor=function(){switch(this.scale){case s.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step)),this.current.setMonth(0);case s.SCALE.MONTH:this.current.setDate(1);case s.SCALE.DAY:case s.SCALE.WEEKDAY:this.current.setHours(0);case s.SCALE.HOUR:this.current.setMinutes(0);case s.SCALE.MINUTE:this.current.setSeconds(0);case s.SCALE.SECOND:this.current.setMilliseconds(0)}if(this.step!=1)switch(this.scale){case s.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case s.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case s.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case s.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case s.SCALE.WEEKDAY:case s.SCALE.DAY:this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case s.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case s.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step);break;default:}},s.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},s.prototype.next=function(){var e=this.current.valueOf();if(this.current.getMonth()<6)switch(this.scale){case s.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case s.SCALE.SECOND:this.current=new Date(this.current.valueOf()+this.step*1e3);break;case s.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+this.step*1e3*60);break;case s.SCALE.HOUR:this.current=new Date(this.current.valueOf()+this.step*1e3*60*60);var t=this.current.getHours();this.current.setHours(t-t%this.step);break;case s.SCALE.WEEKDAY:case s.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case s.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case s.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step);break;default:}else switch(this.scale){case s.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case s.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case s.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case s.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case s.SCALE.WEEKDAY:case s.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case s.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case s.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step);break;default:}if(this.step!=1)switch(this.scale){case s.SCALE.MILLISECOND:this.current.getMilliseconds()<this.step&&this.current.setMilliseconds(0);break;case s.SCALE.SECOND:this.current.getSeconds()<this.step&&this.current.setSeconds(0);break;case s.SCALE.MINUTE:this.current.getMinutes()<this.step&&this.current.setMinutes(0);break;case s.SCALE.HOUR:this.current.getHours()<this.step&&this.current.setHours(0);break;case s.SCALE.WEEKDAY:case s.SCALE.DAY:this.current.getDate()<this.step+1&&this.current.setDate(1);break;case s.SCALE.MONTH:this.current.getMonth()<this.step&&this.current.setMonth(0);break;case s.SCALE.YEAR:break;default:}this.current.valueOf()==e&&(this.current=new Date(this._end.valueOf())),i.stepOverHiddenDates(this,e)},s.prototype.getCurrent=function(){return this.current},s.prototype.setScale=function(e,t){this.scale=e,t>0&&(this.step=t),this.autoScale=!1},s.prototype.setAutoScale=function(e){this.autoScale=e},s.prototype.setMinimumStep=function(e){if(e==undefined)return;var t=31104e6,n=2592e6,r=864e5,i=36e5,o=6e4,u=1e3,a=1;t*1e3>e&&(this.scale=s.SCALE.YEAR,this.step=1e3),t*500>e&&(this.scale=s.SCALE.YEAR,this.step=500),t*100>e&&(this.scale=s.SCALE.YEAR,this.step=100),t*50>e&&(this.scale=s.SCALE.YEAR,this.step=50),t*10>e&&(this.scale=s.SCALE.YEAR,this.step=10),t*5>e&&(this.scale=s.SCALE.YEAR,this.step=5),t>e&&(this.scale=s.SCALE.YEAR,this.step=1),n*3>e&&(this.scale=s.SCALE.MONTH,this.step=3),n>e&&(this.scale=s.SCALE.MONTH,this.step=1),r*5>e&&(this.scale=s.SCALE.DAY,this.step=5),r*2>e&&(this.scale=s.SCALE.DAY,this.step=2),r>e&&(this.scale=s.SCALE.DAY,this.step=1),r/2>e&&(this.scale=s.SCALE.WEEKDAY,this.step=1),i*4>e&&(this.scale=s.SCALE.HOUR,this.step=4),i>e&&(this.scale=s.SCALE.HOUR,this.step=1),o*15>e&&(this.scale=s.SCALE.MINUTE,this.step=15),o*10>e&&(this.scale=s.SCALE.MINUTE,this.step=10),o*5>e&&(this.scale=s.SCALE.MINUTE,this.step=5),o>e&&(this.scale=s.SCALE.MINUTE,this.step=1),u*15>e&&(this.scale=s.SCALE.SECOND,this.step=15),u*10>e&&(this.scale=s.SCALE.SECOND,this.step=10),u*5>e&&(this.scale=s.SCALE.SECOND,this.step=5),u>e&&(this.scale=s.SCALE.SECOND,this.step=1),a*200>e&&(this.scale=s.SCALE.MILLISECOND,this.step=200),a*100>e&&(this.scale=s.SCALE.MILLISECOND,this.step=100),a*50>e&&(this.scale=s.SCALE.MILLISECOND,this.step=50),a*10>e&&(this.scale=s.SCALE.MILLISECOND,this.step=10),a*5>e&&(this.scale=s.SCALE.MILLISECOND,this.step=5),a>e&&(this.scale=s.SCALE.MILLISECOND,this.step=1)},s.prototype.snap=function(e){var t=new Date(e.valueOf());if(this.scale==s.SCALE.YEAR){var n=t.getFullYear()+Math.round(t.getMonth()/12);t.setFullYear(Math.round(n/this.step)*this.step),t.setMonth(0),t.setDate(0),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)}else if(this.scale==s.SCALE.MONTH)t.getDate()>15?(t.setDate(1),t.setMonth(t.getMonth()+1)):t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);else if(this.scale==s.SCALE.DAY){switch(this.step){case 5:case 2:t.setHours(Math.round(t.getHours()/24)*24);break;default:t.setHours(Math.round(t.getHours()/12)*12)}t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)}else if(this.scale==s.SCALE.WEEKDAY){switch(this.step){case 5:case 2:t.setHours(Math.round(t.getHours()/12)*12);break;default:t.setHours(Math.round(t.getHours()/6)*6)}t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)}else if(this.scale==s.SCALE.HOUR){switch(this.step){case 4:t.setMinutes(Math.round(t.getMinutes()/60)*60);break;default:t.setMinutes(Math.round(t.getMinutes()/30)*30)}t.setSeconds(0),t.setMilliseconds(0)}else if(this.scale==s.SCALE.MINUTE){switch(this.step){case 15:case 10:t.setMinutes(Math.round(t.getMinutes()/5)*5),t.setSeconds(0);break;case 5:t.setSeconds(Math.round(t.getSeconds()/60)*60);break;default:t.setSeconds(Math.round(t.getSeconds()/30)*30)}t.setMilliseconds(0)}else if(this.scale==s.SCALE.SECOND)switch(this.step){case 15:case 10:t.setSeconds(Math.round(t.getSeconds()/5)*5),t.setMilliseconds(0);break;case 5:t.setMilliseconds(Math.round(t.getMilliseconds()/1e3)*1e3);break;default:t.setMilliseconds(Math.round(t.getMilliseconds()/500)*500)}else if(this.scale==s.SCALE.MILLISECOND){var r=this.step>5?this.step/2:1;t.setMilliseconds(Math.round(t.getMilliseconds()/r)*r)}return t},s.prototype.isMajor=function(){if(this.switchedYear==1){this.switchedYear=!1;switch(this.scale){case s.SCALE.YEAR:case s.SCALE.MONTH:case s.SCALE.WEEKDAY:case s.SCALE.DAY:case s.SCALE.HOUR:case s.SCALE.MINUTE:case s.SCALE.SECOND:case s.SCALE.MILLISECOND:return!0;default:return!1}}else if(this.switchedMonth==1){this.switchedMonth=!1;switch(this.scale){case s.SCALE.WEEKDAY:case s.SCALE.DAY:case s.SCALE.HOUR:case s.SCALE.MINUTE:case s.SCALE.SECOND:case s.SCALE.MILLISECOND:return!0;default:return!1}}else if(this.switchedDay==1){this.switchedDay=!1;switch(this.scale){case s.SCALE.MILLISECOND:case s.SCALE.SECOND:case s.SCALE.MINUTE:case s.SCALE.HOUR:return!0;default:return!1}}switch(this.scale){case s.SCALE.MILLISECOND:return this.current.getMilliseconds()==0;case s.SCALE.SECOND:return this.current.getSeconds()==0;case s.SCALE.MINUTE:return this.current.getHours()==0&&this.current.getMinutes()==0;case s.SCALE.HOUR:return this.current.getHours()==0;case s.SCALE.WEEKDAY:case s.SCALE.DAY:return this.current.getDate()==1;case s.SCALE.MONTH:return this.current.getMonth()==0;case s.SCALE.YEAR:return!1;default:return!1}},s.prototype.getLabelMinor=function(e){e==undefined&&(e=this.current);switch(this.scale){case s.SCALE.MILLISECOND:return r(e).format("SSS");case s.SCALE.SECOND:return r(e).format("s");case s.SCALE.MINUTE:return r(e).format("HH:mm");case s.SCALE.HOUR:return r(e).format("HH:mm");case s.SCALE.WEEKDAY:return r(e).format("ddd D");case s.SCALE.DAY:return r(e).format("D");case s.SCALE.MONTH:return r(e).format("MMM");case s.SCALE.YEAR:return r(e).format("YYYY");default:return""}},s.prototype.getLabelMajor=function(e){e==undefined&&(e=this.current);switch(this.scale){case s.SCALE.MILLISECOND:return r(e).format("HH:mm:ss");case s.SCALE.SECOND:return r(e).format("D MMMM HH:mm");case s.SCALE.MINUTE:case s.SCALE.HOUR:return r(e).format("ddd D MMMM");case s.SCALE.WEEKDAY:case s.SCALE.DAY:return r(e).format("MMMM YYYY");case s.SCALE.MONTH:return r(e).format("YYYY");case s.SCALE.YEAR:return"";default:return""}},e.exports=s},function(e,t,n){function r(e,t){this.options=null,this.props=null}r.prototype.setOptions=function(e){e&&util.extend(this.options,e)},r.prototype.redraw=function(){return!1},r.prototype.destroy=function(){},r.prototype._isResized=function(){var e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e},e.exports=r},function(e,t,n){function u(e,t){this.body=e,this.defaultOptions={showCurrentTime:!0,locales:o,locale:"en"},this.options=r.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(t)}var r=n(1),i=n(20),s=n(44),o=n(48);u.prototype=new i,u.prototype._create=function(){var e=document.createElement("div");e.className="currenttime",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e},u.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},u.prototype.setOptions=function(e){e&&r.selectiveExtend(["showCurrentTime","locale","locales"],this.options,e)},u.prototype.redraw=function(){if(this.options.showCurrentTime){var e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar),this.start());var t=new Date((new Date).valueOf()+this.offset),n=this.body.util.toScreen(t),r=this.options.locales[this.options.locale],i=r.current+" "+r.time+": "+s(t).format("dddd, MMMM Do YYYY, H:mm:ss");i=i.charAt(0).toUpperCase()+i.substring(1),this.bar.style.left=n+"px",this.bar.title=i}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},u.prototype.start=function(){function t(){e.stop();var n=e.body.range.conversion(e.body.domProps.center.width).scale,r=1/n/10;r<30&&(r=30),r>1e3&&(r=1e3),e.redraw(),e.currentTimeTimer=setTimeout(t,r)}var e=this;t()},u.prototype.stop=function(){this.currentTimeTimer!==undefined&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},u.prototype.setCurrentTime=function(e){var t=r.convert(e,"Date").valueOf(),n=(new Date).valueOf();this.offset=t-n,this.redraw()},u.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},e.exports=u},function(e,t,n){function a(e,t){this.body=e,this.defaultOptions={showCustomTime:!1,locales:u,locale:"en"},this.options=i.extend({},this.defaultOptions),this.customTime=new Date,this.eventParams={},this._create(),this.setOptions(t)}var r=n(45),i=n(1),s=n(20),o=n(44),u=n(48);a.prototype=new s,a.prototype.setOptions=function(e){e&&i.selectiveExtend(["showCustomTime","locale","locales"],this.options,e)},a.prototype._create=function(){var e=document.createElement("div");e.className="customtime",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e;var t=document.createElement("div");t.style.position="relative",t.style.top="0px",t.style.left="-10px",t.style.height="100%",t.style.width="20px",e.appendChild(t),this.hammer=r(e,{prevent_default:!0}),this.hammer.on("dragstart",this._onDragStart.bind(this)),this.hammer.on("drag",this._onDrag.bind(this)),this.hammer.on("dragend",this._onDragEnd.bind(this))},a.prototype.destroy=function(){this.options.showCustomTime=!1,this.redraw(),this.hammer.enable(!1),this.hammer=null,this.body=null},a.prototype.redraw=function(){if(this.options.showCustomTime){var e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));var t=this.body.util.toScreen(this.customTime),n=this.options.locales[this.options.locale],r=n.time+": "+o(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss");r=r.charAt(0).toUpperCase()+r.substring(1),this.bar.style.left=t+"px",this.bar.title=r}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar);return!1},a.prototype.setCustomTime=function(e){this.customTime=i.convert(e,"Date"),this.redraw()},a.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},a.prototype._onDragStart=function(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation(),e.preventDefault()},a.prototype._onDrag=function(e){if(!this.eventParams.dragging)return;var t=e.gesture.deltaX,n=this.body.util.toScreen(this.eventParams.customTime)+t,r=this.body.util.toTime(n);this.setCustomTime(r),this.body.emitter.emit("timechange",{time:new Date(this.customTime.valueOf())}),e.stopPropagation(),e.preventDefault()},a.prototype._onDragEnd=function(e){if(!this.eventParams.dragging)return;this.body.emitter.emit("timechanged",{time:new Date(this.customTime.valueOf())}),e.stopPropagation(),e.preventDefault()},e.exports=a},function(e,t,n){function u(e,t,n,i){this.id=r.randomUUID(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!0,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,customRange:{left:{min:undefined,max:undefined},right:{min:undefined,max:undefined}},title:{left:{text:undefined},right:{text:undefined}},format:{left:{decimals:undefined},right:{decimals:undefined}}},this.linegraphOptions=i,this.linegraphSVG=n,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.range={start:0,end:0},this.options=r.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(t),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.offsetHeight,this.stepPixels=25,this.stepPixelsForced=25,this.lineOffset=0,this.master=!0,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create();var s=this;this.body.emitter.on("verticalDrag",function(){s.dom.lineContainer.style.top=s.body.domProps.scrollTop+"px"})}var r=n(1),i=n(2),s=n(20),o=n(16);u.prototype=new s,u.prototype.addGroup=function(e,t){this.groups.hasOwnProperty(e)||(this.groups[e]=t),this.amountOfGroups+=1},u.prototype.updateGroup=function(e,t){this.groups[e]=t},u.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)},u.prototype.setOptions=function(e){if(e){var t=!1;this.options.orientation!=e.orientation&&e.orientation!==undefined&&(t=!0);var n=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","customRange","title","format"];r.selectiveExtend(n,this.options,e),this.minWidth=Number((""+this.options.width).replace("px","")),t==1&&this.dom.frame&&(this.hide(),this.show())}},u.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},u.prototype._redrawGroupIcons=function(){i.prepareElements(this.svgElements);var e,t=this.options.iconWidth,n=15,r=4,s=r+.5*n;this.options.orientation=="left"?e=r:e=this.width-t-r;for(var o in this.groups)this.groups.hasOwnProperty(o)&&this.groups[o].visible==1&&(this.linegraphOptions.visibility[o]===undefined||this.linegraphOptions.visibility[o]==1)&&(this.groups[o].drawIcon(e,s,this.svgElements,this.svg,t,n),s+=n+r);i.cleanupElements(this.svgElements),this.iconsRemoved=!1},u.prototype._cleanupIcons=function(){this.iconsRemoved==0&&(i.prepareElements(this.svgElements),i.cleanupElements(this.svgElements),this.iconsRemoved=!0)},u.prototype.show=function(){this.dom.frame.parentNode||(this.options.orientation=="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},u.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},u.prototype.setRange=function(e,t){this.range.start=e,this.range.end=t},u.prototype.redraw=function(){var e=!1,t=0;this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px";for(var n in this.groups)this.groups.hasOwnProperty(n)&&this.groups[n].visible==1&&(this.linegraphOptions.visibility[n]===undefined||this.linegraphOptions.visibility[n]==1)&&t++;if(this.amountOfGroups==0||t==0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=this.options.visible==1?Number((""+this.options.width).replace("px","")):0;var r=this.props,i=this.dom.frame;i.className="dataaxis",this._calculateCharSize();var s=this.options.orientation,o=this.options.showMinorLabels,u=this.options.showMajorLabels;r.minorLabelHeight=o?r.minorCharHeight:0,r.majorLabelHeight=u?r.majorCharHeight:0,r.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,r.minorLineHeight=1,r.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,r.majorLineHeight=1,s=="left"?(i.style.top="0",i.style.left="0",i.style.bottom="",i.style.width=this.width+"px",i.style.height=this.height+"px"):(i.style.top="",i.style.bottom="0",i.style.left="0",i.style.width=this.width+"px",i.style.height=this.height+"px"),e=this._redrawLabels(),this.options.icons==1?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(s)}return e},u.prototype._redrawLabels=function(){i.prepareElements(this.DOMelements.lines),i.prepareElements(this.DOMelements.labels);var e=this.options.orientation,t=this.master?this.props.majorCharHeight||10:this.stepPixelsForced,n=new o(this.range.start,this.range.end,t,this.dom.frame.offsetHeight,this.options.customRange[this.options.orientation]);this.step=n;var r=(this.dom.frame.offsetHeight-n.deadSpace*(this.dom.frame.offsetHeight/n.marginRange))/((n.marginRange-n.deadSpace)/n.step);this.stepPixels=r;var s=this.height/r,u=0;if(this.master==0){r=this.stepPixelsForced,u=Math.round(this.dom.frame.offsetHeight/r-s);for(var a=0;a<.5*u;a++)n.previous();s=this.height/r}else s+=.25;this.valueAtZero=n.marginEnd;var f=0,l=1,c;this.options.format[e]!==undefined&&(c=this.options.format[e].decimals),this.maxLabelSize=0;var h=0;while(l<Math.round(s)){n.next(),h=Math.round(l*r),f=l*r;var p=n.isMajor();(this.options.showMinorLabels&&p==0||this.master==0&&this.options["showMinorLabels"]==1)&&this._redrawLabel(h-2,n.getCurrent(c),e,"yAxis minor",this.props.minorCharHeight),p&&this.options.showMajorLabels&&this.master==1||this.options["showMinorLabels"]==0&&this.master==0&&p==1?(h>=0&&this._redrawLabel(h-2,n.getCurrent(c),e,"yAxis major",this.props.majorCharHeight),this._redrawLine(h,e,"grid horizontal major",this.options.majorLinesOffset,this.props.majorLineWidth)):this._redrawLine(h,e,"grid horizontal minor",this.options.minorLinesOffset,this.props.minorLineWidth),l++}this.master==0?this.conversionFactor=h/(this.valueAtZero-n.current):this.conversionFactor=this.dom.frame.offsetHeight/n.marginRange;var d=0;this.options.title[e]!==undefined&&this.options.title[e].text!==undefined&&(d=this.props.titleCharHeight);var v=this.options.icons==1?Math.max(this.options.iconWidth,d)+this.options.labelOffsetX+15:d+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-v&&this.options.visible==1?(this.width=this.maxLabelSize+v,this.options.width=this.width+"px",i.cleanupElements(this.DOMelements.lines),i.cleanupElements(this.DOMelements.labels),this.redraw(),!0):this.maxLabelSize<this.width-v&&this.options.visible==1&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+v),this.options.width=this.width+"px",i.cleanupElements(this.DOMelements.lines),i.cleanupElements(this.DOMelements.labels),this.redraw(),!0):(i.cleanupElements(this.DOMelements.lines),i.cleanupElements(this.DOMelements.labels),!1)},u.prototype.convertValue=function(e){var t=this.valueAtZero-e,n=t*this.conversionFactor;return n},u.prototype._redrawLabel=function(e,t,n,r,s){var o=i.getDOMElement("div",this.DOMelements.labels,this.dom.frame);o.className=r,o.innerHTML=t,n=="left"?(o.style.left="-"+this.options.labelOffsetX+"px",o.style.textAlign="right"):(o.style.right="-"+this.options.labelOffsetX+"px",o.style.textAlign="left"),o.style.top=e-.5*s+this.options.labelOffsetY+"px",t+="";var u=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<t.length*u&&(this.maxLabelSize=t.length*u)},u.prototype._redrawLine=function(e,t,n,r,s){if(this.master==1){var o=i.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);o.className=n,o.innerHTML="",t=="left"?o.style.left=this.width-r+"px":o.style.right=this.width-r+"px",o.style.width=s+"px",o.style.top=e+"px"}},u.prototype._redrawTitle=function(e){i.prepareElements(this.DOMelements.title);if(this.options.title[e]!==undefined&&this.options.title[e].text!==undefined){var t=i.getDOMElement("div",this.DOMelements.title,this.dom.frame);t.className="yAxis title "+e,t.innerHTML=this.options.title[e].text,this.options.title[e].style!==undefined&&r.addCssText(t,this.options.title[e].style),e=="left"?t.style.left=this.props.titleCharHeight+"px":t.style.right=this.props.titleCharHeight+"px",t.style.width=this.height+"px"}i.cleanupElements(this.DOMelements.title)},u.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var e=document.createTextNode("0"),t=document.createElement("DIV");t.className="yAxis minor measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.minorCharHeight=t.clientHeight,this.props.minorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("majorCharHeight"in this.props)){var n=document.createTextNode("0"),r=document.createElement("DIV");r.className="yAxis major measure",r.appendChild(n),this.dom.frame.appendChild(r),this.props.majorCharHeight=r.clientHeight,this.props.majorCharWidth=r.clientWidth,this.dom.frame.removeChild(r)}if(!("titleCharHeight"in this.props)){var i=document.createTextNode("0"),s=document.createElement("DIV");s.className="yAxis title measure",s.appendChild(i),this.dom.frame.appendChild(s),this.props.titleCharHeight=s.clientHeight,this.props.titleCharWidth=s.clientWidth,this.dom.frame.removeChild(s)}},u.prototype.snap=function(e){return this.step.snap(e)},e.exports=u},function(e,t,n){function s(e,t,n,i){this.id=t;var s=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","catmullRom"];this.options=r.selectiveBridgeObject(s,n),this.usingDefaultStyle=e.className===undefined,this.groupsUsingDefaultStyles=i,this.zeroPosition=0,this.update(e),this.usingDefaultStyle==1&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=e.visible===undefined?!0:e.visible}var r=n(1),i=n(2);s.prototype.setItems=function(e){e!=null?(this.itemsData=e,this.options.sort==1&&this.itemsData.sort(function(e,t){return e.x-t.x})):this.itemsData=[]},s.prototype.setZeroPosition=function(e){this.zeroPosition=e},s.prototype.setOptions=function(e){if(e!==undefined){var t=["sampling","style","sort","yAxisOrientation","barChart"];r.selectiveDeepExtend(t,this.options,e),r.mergeOptions(this.options,e,"catmullRom"),r.mergeOptions(this.options,e,"drawPoints"),r.mergeOptions(this.options,e,"shaded"),e.catmullRom&&typeof e.catmullRom=="object"&&e.catmullRom.parametrization&&(e.catmullRom.parametrization=="uniform"?this.options.catmullRom.alpha=0:e.catmullRom.parametrization=="chordal"?this.options.catmullRom.alpha=1:(this.options.catmullRom.parametrization="centripetal",this.options.catmullRom.alpha=.5))}},s.prototype.update=function(e){this.group=e,this.content=e.content||"graph",this.className=e.className||this.className||"graphGroup"+this.groupsUsingDefaultStyles[0]%10,this.visible=e.visible===undefined?!0:e.visible,this.style=e.style,this.setOptions(e.options)},s.prototype.drawIcon=function(e,t,n,r,s,o){var u=o*.5,a,f,l=i.getSVGElement("rect",n,r);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",t-u),l.setAttributeNS(null,"width",s),l.setAttributeNS(null,"height",2*u),l.setAttributeNS(null,"class","outline");if(this.options.style=="line")a=i.getSVGElement("path",n,r),a.setAttributeNS(null,"class",this.className),this.style!==undefined&&a.setAttributeNS(null,"style",this.style),a.setAttributeNS(null,"d","M"+e+","+t+" L"+(e+s)+","+t+""),this.options.shaded.enabled==1&&(f=i.getSVGElement("path",n,r),this.options.shaded.orientation=="top"?f.setAttributeNS(null,"d","M"+e+", "+(t-u)+"L"+e+","+t+" L"+(e+s)+","+t+" L"+(e+s)+","+(t-u)):f.setAttributeNS(null,"d","M"+e+","+t+" "+"L"+e+","+(t+u)+" "+"L"+(e+s)+","+(t+u)+"L"+(e+s)+","+t),f.setAttributeNS(null,"class",this.className+" iconFill")),this.options.drawPoints.enabled==1&&i.drawPoint(e+.5*s,t,this,n,r);else{var c=Math.round(.3*s),h=Math.round(.4*o),p=Math.round(.75*o),d=Math.round((s-2*c)/3);i.drawBar(e+.5*c+d,t+u-h-1,c,h,this.className+" bar",n,r),i.drawBar(e+1.5*c+d+2,t+u-p-1,c,p,this.className+" bar",n,r)}},s.prototype.getLegend=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return this.drawIcon(0,.5*t,[],n,e,t),{icon:n,label:this.content,orientation:this.options.yAxisOrientation}},e.exports=s},function(e,t,n){function o(e,t,n){this.groupId=e,this.subgroups={},this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=n,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.orderedItems={byStart:[],byEnd:[]},this._create(),this.setData(t)}var r=n(1),i=n(18),s=n(35);o.prototype._create=function(){var e=document.createElement("div");e.className="vlabel",this.dom.label=e;var t=document.createElement("div");t.className="inner",e.appendChild(t),this.dom.inner=t;var n=document.createElement("div");n.className="group",n["timeline-group"]=this,this.dom.foreground=n,this.dom.background=document.createElement("div"),this.dom.background.className="group",this.dom.axis=document.createElement("div"),this.dom.axis.className="group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.innerHTML="?",this.dom.background.appendChild(this.dom.marker)},o.prototype.setData=function(e){var t=e&&e.content;t instanceof Element?this.dom.inner.appendChild(t):t!==undefined&&t!==null?this.dom.inner.innerHTML=t:this.dom.inner.innerHTML=this.groupId||"",this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?r.removeClassName(this.dom.inner,"hidden"):r.addClassName(this.dom.inner,"hidden");var n=e&&e.className||null;n!=this.className&&(this.className&&(r.removeClassName(this.dom.label,this.className),r.removeClassName(this.dom.foreground,this.className),r.removeClassName(this.dom.background,this.className),r.removeClassName(this.dom.axis,this.className)),r.addClassName(this.dom.label,n),r.addClassName(this.dom.foreground,n),r.addClassName(this.dom.background,n),r.addClassName(this.dom.axis,n),this.className=n),this.style&&(r.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(r.addCssText(this.dom.label,e.style),this.style=e.style)},o.prototype.getLabelWidth=function(){return this.props.label.width},o.prototype.redraw=function(e,t,n){var s=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e);var o=this.dom.marker.clientHeight;o!=this.lastMarkerHeight&&(this.lastMarkerHeight=o,r.forEach(this.items,function(e){e.dirty=!0,e.displayed&&e.redraw()}),n=!0),this.itemSet.options.stack?i.stack(this.visibleItems,t,n):i.nostack(this.visibleItems,t,this.subgroups);var u=this._calculateHeight(t),a=this.dom.foreground;this.top=a.offsetTop,this.left=a.offsetLeft,this.width=a.offsetWidth,s=r.updateProperty(this,"height",u)||s,s=r.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||s,s=r.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||s,this.dom.background.style.height=u+"px",this.dom.foreground.style.height=u+"px",this.dom.label.style.height=u+"px";for(var f=0,l=this.visibleItems.length;f<l;f++){var c=this.visibleItems[f];c.repositionY(t)}return s},o.prototype._calculateHeight=function(e){var t,n=this.visibleItems;this.resetSubgroups();var i=this;if(n.length){var s=n[0].top,o=n[0].top+n[0].height;r.forEach(n,function(e){s=Math.min(s,e.top),o=Math.max(o,e.top+e.height),e.data.subgroup!==undefined&&(i.subgroups[e.data.subgroup].height=Math.max(i.subgroups[e.data.subgroup].height,e.height),i.subgroups[e.data.subgroup].visible=!0)});if(s>e.axis){var u=s-e.axis;o-=u,r.forEach(n,function(e){e.top-=u})}t=o+e.item.vertical/2}else t=e.axis+e.item.vertical;return t=Math.max(t,this.props.label.height),t},o.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},o.prototype.hide=function(){var e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);var t=this.dom.foreground;t.parentNode&&t.parentNode.removeChild(t);var n=this.dom.background;n.parentNode&&n.parentNode.removeChild(n);var r=this.dom.axis;r.parentNode&&r.parentNode.removeChild(r)},o.prototype.add=function(e){this.items[e.id]=e,e.setParent(this),e.data.subgroup!==undefined&&(this.subgroups[e.data.subgroup]===undefined&&(this.subgroups[e.data.subgroup]={height:0,visible:!1,index:this.subgroupIndex,items:[]},this.subgroupIndex++),this.subgroups[e.data.subgroup].items.push(e)),this.orderSubgroups();if(this.visibleItems.indexOf(e)==-1){var t=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,t)}},o.prototype.orderSubgroups=function(){if(this.subgroupOrderer!==undefined){var e=[];if(typeof this.subgroupOrderer=="string"){for(var t in this.subgroups)e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});e.sort(function(e,t){return e.sortField-t.sortField})}else if(typeof this.subgroupOrderer=="function"){for(var t in this.subgroups)e.push(this.subgroups[t].items[0].data);e.sort(this.subgroupOrderer)}if(e.length>0)for(var n=0;n<e.length;n++)this.subgroups[e[n].subgroup].index=n}},o.prototype.resetSubgroups=function(){for(var e in this.subgroups)this.subgroups.hasOwnProperty(e)&&(this.subgroups[e].visible=!1)},o.prototype.remove=function(e){delete this.items[e.id],e.setParent(null);var t=this.visibleItems.indexOf(e);t!=-1&&this.visibleItems.splice(t,1)},o.prototype.removeFromDataSet=function(e){this.itemSet.removeItem(e.id)},o.prototype.order=function(){var e=r.toArray(this.items);this.orderedItems.byStart=e,this.orderedItems.byEnd=this._constructByEndArray(e),i.orderByStart(this.orderedItems.byStart),i.orderByEnd(this.orderedItems.byEnd)},o.prototype._constructByEndArray=function(e){var t=[];for(var n=0;n<e.length;n++)e[n]instanceof s&&t.push(e[n]);return t},o.prototype._updateVisibleItems=function(e,t,n){var i,s=[],o;if(t.length>0)for(o=0;o<t.length;o++)this._checkIfVisible(t[o],s,n);s.length==0?i=r.binarySearch(e.byStart,n,"data","start"):i=e.byStart.indexOf(s[0]);var u=r.binarySearch(e.byEnd,n,"data","end");if(i!=-1){for(o=i;o>=0;o--)if(this._checkIfInvisible(e.byStart[o],s,n))break;for(o=i+1;o<e.byStart.length;o++)if(this._checkIfInvisible(e.byStart[o],s,n))break}if(u!=-1){for(o=u;o>=0;o--)if(this._checkIfInvisible(e.byEnd[o],s,n))break;for(o=u+1;o<e.byEnd.length;o++)if(this._checkIfInvisible(e.byEnd[o],s,n))break}return s},o.prototype._checkIfInvisible=function(e,t,n){return e.isVisible(n)?(e.displayed||e.show(),e.repositionX(),t.indexOf(e)==-1&&t.push(e),!1):(e.displayed&&e.hide(),!0)},o.prototype._checkIfVisible=function(e,t,n){e.isVisible(n)?(e.displayed||e.show(),e.repositionX(),t.push(e)):e.displayed&&e.hide()},e.exports=o},function(e,t,n){function s(e,t,n){i.call(this,e,t,n),this.width=0,this.height=0,this.top=0,this.left=0}var r=n(1),i=n(25);s.prototype=Object.create(i.prototype),s.prototype.redraw=function(e,t,n){var r=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var i=0,s=this.visibleItems.length;i<s;i++){var o=this.visibleItems[i];o.repositionY(t)}return r},s.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},e.exports=s},function(e,t,n){function m(e,t){this.body=e,this.defaultOptions={type:null,orientation:"bottom",align:"auto",stack:!0,groupOrder:null,selectable:!0,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},onAdd:function(e,t){t(e)},onUpdate:function(e,t){t(e)},onMove:function(e,t){t(e)},onRemove:function(e,t){t(e)},onMoving:function(e,t){t(e)},margin:{item:{horizontal:10,vertical:10},axis:20},padding:5},this.options=i.extend({},this.defaultOptions),this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;var n=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(e,t,r){n._onAdd(t.items)},update:function(e,t,r){n._onUpdate(t.items)},remove:function(e,t,r){n._onRemove(t.items)}},this.groupListeners={add:function(e,t,r){n._onAddGroups(t.items)},update:function(e,t,r){n._onUpdateGroups(t.items)},remove:function(e,t,r){n._onRemoveGroups(t.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.stackDirty=!0,this.touchParams={},this._create(),this.setOptions(t)}var r=n(45),i=n(1),s=n(3),o=n(4),u=n(20),a=n(25),f=n(26),l=n(33),c=n(34),h=n(35),p=n(32),d="__ungrouped__",v="__background__";m.prototype=new u,m.types={background:p,box:l,range:h,point:c},m.prototype._create=function(){var e=document.createElement("div");e.className="itemset",e["timeline-itemset"]=this,this.dom.frame=e;var t=document.createElement("div");t.className="background",e.appendChild(t),this.dom.background=t;var n=document.createElement("div");n.className="foreground",e.appendChild(n),this.dom.foreground=n;var i=document.createElement("div");i.className="axis",this.dom.axis=i;var s=document.createElement("div");s.className="labelset",this.dom.labelSet=s,this._updateUngrouped();var o=new f(v,null,this);o.show(),this.groups[v]=o,this.hammer=r(this.body.dom.centerContainer,{prevent_default:!0}),this.hammer.on("touch",this._onTouch.bind(this)),this.hammer.on("dragstart",this._onDragStart.bind(this)),this.hammer.on("drag",this._onDrag.bind(this)),this.hammer.on("dragend",this._onDragEnd.bind(this)),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("hold",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.show()},m.prototype.setOptions=function(e){if(e){var t=["type","align","orientation","padding","stack","selectable","groupOrder","dataAttributes","template","hide"];i.selectiveExtend(t,this.options,e),"margin"in e&&(typeof e.margin=="number"?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):typeof e.margin=="object"&&(i.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&(typeof e.margin.item=="number"?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):typeof e.margin.item=="object"&&i.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),"editable"in e&&(typeof e.editable=="boolean"?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable):typeof e.editable=="object"&&i.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,e.editable));var n=function(t){var n=e[t];if(n){if(!(n instanceof Function))throw new Error("option "+t+" must be a function "+t+"(item, callback)");this.options[t]=n}}.bind(this);["onAdd","onUpdate","onRemove","onMove","onMoving"].forEach(n),this.markDirty()}},m.prototype.markDirty=function(){this.groupIds=[],this.stackDirty=!0},m.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},m.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},m.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||this.body.dom.left.appendChild(this.dom.labelSet)},m.prototype.setSelection=function(e){var t,n,r,i;e==undefined&&(e=[]),Array.isArray(e)||(e=[e]);for(t=0,n=this.selection.length;t<n;t++)r=this.selection[t],i=this.items[r],i&&i.unselect();this.selection=[];for(t=0,n=e.length;t<n;t++)r=e[t],i=this.items[r],i&&(this.selection.push(r),i.select())},m.prototype.getSelection=function(){return this.selection.concat([])},m.prototype.getVisibleItems=function(){var e=this.body.range.getRange(),t=this.body.util.toScreen(e.start),n=this.body.util.toScreen(e.end),r=[];for(var i in this.groups)if(this.groups.hasOwnProperty(i)){var s=this.groups[i],o=s.visibleItems;for(var u=0;u<o.length;u++){var a=o[u];a.left<n&&a.left+a.width>t&&r.push(a.id)}}return r},m.prototype._deselect=function(e){var t=this.selection;for(var n=0,r=t.length;n<r;n++)if(t[n]==e){t.splice(n,1);break}},m.prototype.redraw=function(){var e=this.options.margin,t=this.body.range,n=i.option.asSize,r=this.options,s=r.orientation,o=!1,u=this.dom.frame,a=r.editable.updateTime||r.editable.updateGroup;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,u.className="itemset"+(a?" editable":""),o=this._orderGroups()||o;var f=t.end-t.start,l=f!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;l&&(this.stackDirty=!0),this.lastVisibleInterval=f,this.props.lastWidth=this.props.width;var c=this.stackDirty,h=this._firstGroup(),p={item:e.item,axis:e.axis},d={item:e.item,axis:e.item.vertical/2},m=0,g=e.axis+e.item.vertical;return this.groups[v].redraw(t,d,c),i.forEach(this.groups,function(e){var n=e==h?p:d,r=e.redraw(t,n,c);o=r||o,m+=e.height}),m=Math.max(m,g),this.stackDirty=!1,u.style.height=n(m),this.props.width=u.offsetWidth,this.props.height=m,this.dom.axis.style.top=n(s=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.dom.axis.style.left="0",o=this._isResized()||o,o},m.prototype._firstGroup=function(){var e=this.options.orientation=="top"?0:this.groupIds.length-1,t=this.groupIds[e],n=this.groups[t]||this.groups[d];return n||null},m.prototype._updateUngrouped=function(){var e=this.groups[d],t=this.groups[v],n,r;if(this.groupsData){if(e){e.hide(),delete this.groups[d];for(r in this.items)if(this.items.hasOwnProperty(r)){n=this.items[r],n.parent&&n.parent.remove(n);var i=this._getGroupId(n.data),s=this.groups[i];s&&s.add(n)||n.hide()}}}else if(!e){var o=null,u=null;e=new a(o,u,this),this.groups[d]=e;for(r in this.items)this.items.hasOwnProperty(r)&&(n=this.items[r],e.add(n));e.show()}},m.prototype.getLabelSet=function(){return this.dom.labelSet},m.prototype.setItems=function(e){var t=this,n,r=this.itemsData;if(!e)this.itemsData=null;else{if(!(e instanceof s||e instanceof o))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=e}r&&(i.forEach(this.itemListeners,function(e,t){r.off(t,e)}),n=r.getIds(),this._onRemove(n));if(this.itemsData){var u=this.id;i.forEach(this.itemListeners,function(e,n){t.itemsData.on(n,e,u)}),n=this.itemsData.getIds(),this._onAdd(n),this._updateUngrouped()}},m.prototype.getItems=function(){return this.itemsData},m.prototype.setGroups=function(e){var t=this,n;this.groupsData&&(i.forEach(this.groupListeners,function(e,n){t.groupsData.unsubscribe(n,e)}),n=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(n));if(!e)this.groupsData=null;else{if(!(e instanceof s||e instanceof o))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=e}if(this.groupsData){var r=this.id;i.forEach(this.groupListeners,function(e,n){t.groupsData.on(n,e,r)}),n=this.groupsData.getIds(),this._onAddGroups(n)}this._updateUngrouped(),this._order(),this.body.emitter.emit("change",{queue:!0})},m.prototype.getGroups=function(){return this.groupsData},m.prototype.removeItem=function(e){var t=this.itemsData.get(e),n=this.itemsData.getDataSet();t&&this.options.onRemove(t,function(t){t&&n.remove(e)})},m.prototype._getType=function(e){return e.type||this.options.type||(e.end?"range":"box")},m.prototype._getGroupId=function(e){var t=this._getType(e);return t=="background"&&e.group==undefined?v:this.groupsData?e.group:d},m.prototype._onUpdate=function(e){var t=this;e.forEach(function(e){var n=t.itemsData.get(e,t.itemOptions),r=t.items[e],i=t._getType(n),s=m.types[i];r&&(!!s&&r instanceof s?t._updateItem(r,n):(t._removeItem(r),r=null));if(!r){if(!s)throw i=="rangeoverflow"?new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis.timeline .item.range .content {overflow: visible;}'):new TypeError('Unknown item type "'+i+'"');r=new s(n,t.conversion,t.options),r.id=e,t._addItem(r)}}),this._order(),this.stackDirty=!0,this.body.emitter.emit("change",{queue:!0})},m.prototype._onAdd=m.prototype._onUpdate,m.prototype._onRemove=function(e){var t=0,n=this;e.forEach(function(e){var r=n.items[e];r&&(t++,n._removeItem(r))}),t&&(this._order(),this.stackDirty=!0,this.body.emitter.emit("change",{queue:!0}))},m.prototype._order=function(){i.forEach(this.groups,function(e){e.order()})},m.prototype._onUpdateGroups=function(e){this._onAddGroups(e)},m.prototype._onAddGroups=function(e){var t=this;e.forEach(function(e){var n=t.groupsData.get(e),r=t.groups[e];if(!r){if(e==d||e==v)throw new Error("Illegal group id. "+e+" is a reserved id.");var s=Object.create(t.options);i.extend(s,{height:null}),r=new a(e,n,t),t.groups[e]=r;for(var o in t.items)if(t.items.hasOwnProperty(o)){var u=t.items[o];u.data.group==e&&r.add(u)}r.order(),r.show()}else r.setData(n)}),this.body.emitter.emit("change",{queue:!0})},m.prototype._onRemoveGroups=function(e){var t=this.groups;e.forEach(function(e){var n=t[e];n&&(n.hide(),delete t[e])}),this.markDirty(),this.body.emitter.emit("change",{queue:!0})},m.prototype._orderGroups=function(){if(this.groupsData){var e=this.groupsData.getIds({order:this.options.groupOrder}),t=!i.equalArray(e,this.groupIds);if(t){var n=this.groups;e.forEach(function(e){n[e].hide()}),e.forEach(function(e){n[e].show()}),this.groupIds=e}return t}return!1},m.prototype._addItem=function(e){this.items[e.id]=e;var t=this._getGroupId(e.data),n=this.groups[t];n&&n.add(e)},m.prototype._updateItem=function(e,t){var n=e.data.group;e.setData(t);if(n!=e.data.group){var r=this.groups[n];r&&r.remove(e);var i=this._getGroupId(e.data),s=this.groups[i];s&&s.add(e)}},m.prototype._removeItem=function(e){e.hide(),delete this.items[e.id];var t=this.selection.indexOf(e.id);t!=-1&&this.selection.splice(t,1),e.parent&&e.parent.remove(e)},m.prototype._constructByEndArray=function(e){var t=[];for(var n=0;n<e.length;n++)e[n]instanceof h&&t.push(e[n]);return t},m.prototype._onTouch=function(e){this.touchParams.item=m.itemFromTarget(e)},m.prototype._onDragStart=function(e){if(!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;var t=this.touchParams.item||null,n=this,r;if(t&&t.selected){var i=e.target.dragLeftItem,s=e.target.dragRightItem;i?(r={item:i,initialX:e.gesture.center.clientX},n.options.editable.updateTime&&(r.start=t.data.start.valueOf()),n.options.editable.updateGroup&&"group"in t.data&&(r.group=t.data.group),this.touchParams.itemProps=[r]):s?(r={item:s,initialX:e.gesture.center.clientX},n.options.editable.updateTime&&(r.end=t.data.end.valueOf()),n.options.editable.updateGroup&&"group"in t.data&&(r.group=t.data.group),this.touchParams.itemProps=[r]):this.touchParams.itemProps=this.getSelection().map(function(t){var r=n.items[t],i={item:r,initialX:e.gesture.center.clientX};return n.options.editable.updateTime&&("start"in r.data&&(i.start=r.data.start.valueOf()),"end"in r.data&&(i.end=r.data.end.valueOf())),n.options.editable.updateGroup&&"group"in r.data&&(i.group=r.data.group),i}),e.stopPropagation()}},m.prototype._onDrag=function(e){if(this.touchParams.itemProps){var t=this,n=this.body.util.snap||null,r=this.body.dom.root.offsetLeft+this.body.domProps.left.width;this.touchParams.itemProps.forEach(function(s){var o={},u=t.body.util.toTime(e.gesture.center.clientX-r),a=t.body.util.toTime(s.initialX-r),f=u-a;if("start"in s){var l=new Date(s.start+f);o.start=n?n(l):l}if("end"in s){var c=new Date(s.end+f);o.end=n?n(c):c}if("group"in s){var h=m.groupFromTarget(e);o.group=h&&h.groupId}var p=i.extend({},s.item.data,o);t.options.onMoving(p,function(e){e&&t._updateItemProps(s.item,e)})}),this.stackDirty=!0,this.body.emitter.emit("change"),e.stopPropagation()}},m.prototype._updateItemProps=function(e,t){"start"in t&&(e.data.start=t.start),"end"in t&&(e.data.end=t.end),"group"in t&&e.data.group!=t.group&&this._moveToGroup(e,t.group)},m.prototype._moveToGroup=function(e,t){var n=this.groups[t];if(n&&n.groupId!=e.data.group){var r=e.parent;r.remove(e),r.order(),n.add(e),n.order(),e.data.group=n.groupId}},m.prototype._onDragEnd=function(e){if(this.touchParams.itemProps){var t=[],n=this,r=this.itemsData.getDataSet(),s=this.touchParams.itemProps;this.touchParams.itemProps=null,s.forEach(function(e){var s=e.item.id,o=n.itemsData.get(s,n.itemOptions),u=!1;"start"in e.item.data&&(u=e.start!=e.item.data.start.valueOf(),o.start=i.convert(e.item.data.start,r._options.type&&r._options.type.start||"Date")),"end"in e.item.data&&(u=u||e.end!=e.item.data.end.valueOf(),o.end=i.convert(e.item.data.end,r._options.type&&r._options.type.end||"Date")),"group"in e.item.data&&(u=u||e.group!=e.item.data.group,o.group=e.item.data.group),u&&n.options.onMove(o,function(i){i?(i[r._fieldId]=s,t.push(i)):(n._updateItemProps(e.item,e),n.stackDirty=!0,n.body.emitter.emit("change"))})}),t.length&&r.update(t),e.stopPropagation()}},m.prototype._onSelectItem=function(e){if(!this.options.selectable)return;var t=e.gesture.srcEvent&&e.gesture.srcEvent.ctrlKey,n=e.gesture.srcEvent&&e.gesture.srcEvent.shiftKey;if(t||n){this._onMultiSelectItem(e);return}var r=this.getSelection(),i=m.itemFromTarget(e),s=i?[i.id]:[];this.setSelection(s);var o=this.getSelection();(o.length>0||r.length>0)&&this.body.emitter.emit("select",{items:this.getSelection()})},m.prototype._onAddItem=function(e){if(!this.options.selectable)return;if(!this.options.editable.add)return;var t=this,n=this.body.util.snap||null,r=m.itemFromTarget(e);if(r){var s=t.itemsData.get(r.id);this.options.onUpdate(s,function(e){e&&t.itemsData.update(e)})}else{var o=i.getAbsoluteLeft(this.dom.frame),u=e.gesture.center.pageX-o,a=this.body.util.toTime(u),f={start:n?n(a):a,content:"new item"};if(this.options.type==="range"){var l=this.body.util.toTime(u+this.props.width/5);f.end=n?n(l):l}f[this.itemsData._fieldId]=i.randomUUID();var c=m.groupFromTarget(e);c&&(f.group=c.groupId),this.options.onAdd(f,function(e){e&&t.itemsData.add(e)})}},m.prototype._onMultiSelectItem=function(e){if(!this.options.selectable)return;var t,n=m.itemFromTarget(e);if(n){t=this.getSelection();var r=t.indexOf(n.id);r==-1?t.push(n.id):t.splice(r,1),this.setSelection(t),this.body.emitter.emit("select",{items:this.getSelection()})}},m.itemFromTarget=function(e){var t=e.target;while(t){if(t.hasOwnProperty("timeline-item"))return t["timeline-item"];t=t.parentNode}return null},m.groupFromTarget=function(e){var t=e.target;while(t){if(t.hasOwnProperty("timeline-group"))return t["timeline-group"];t=t.parentNode}return null},m.itemSetFromTarget=function(e){var t=e.target;while(t){if(t.hasOwnProperty("timeline-itemset"))return t["timeline-itemset"];t=t.parentNode}return null},e.exports=m},function(e,t,n){function o(e,t,n,i){this.body=e,this.defaultOptions={enabled:!0,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-left"}},this.side=n,this.options=r.extend({},this.defaultOptions),this.linegraphOptions=i,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.setOptions(t)}var r=n(1),i=n(2),s=n(20);o.prototype=new s,o.prototype.clear=function(){this.groups={},this.amountOfGroups=0},o.prototype.addGroup=function(e,t){this.groups.hasOwnProperty(e)||(this.groups[e]=t),this.amountOfGroups+=1},o.prototype.updateGroup=function(e,t){this.groups[e]=t},o.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)},o.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="legendText",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},o.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},o.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},o.prototype.setOptions=function(e){var t=["enabled","orientation","icons","left","right"];r.selectiveDeepExtend(t,this.options,e)},o.prototype.redraw=function(){var e=0;for(var t in this.groups)this.groups.hasOwnProperty(t)&&this.groups[t].visible==1&&(this.linegraphOptions.visibility[t]===undefined||this.linegraphOptions.visibility[t]==1)&&e++;if(this.options[this.side].visible==0||this.amountOfGroups==0||this.options.enabled==0||e==0)this.hide();else{this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left="");if(this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var n=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+n+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==0?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var r="";for(var t in this.groups)this.groups.hasOwnProperty(t)&&this.groups[t].visible==1&&(this.linegraphOptions.visibility[t]===undefined||this.linegraphOptions.visibility[t]==1)&&(r+=this.groups[t].content+"<br />");this.dom.textArea.innerHTML=r,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},o.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){i.prepareElements(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,t=Number(e.replace("px","")),n=t,r=this.options.iconSize,s=.75*this.options.iconSize,o=t+.5*s+3;this.svg.style.width=r+5+t+"px";for(var u in this.groups)this.groups.hasOwnProperty(u)&&this.groups[u].visible==1&&(this.linegraphOptions.visibility[u]===undefined||this.linegraphOptions.visibility[u]==1)&&(this.groups[u].drawIcon(n,o,this.svgElements,this.svg,r,s),o+=s+this.options.iconSpacing);i.cleanupElements(this.svgElements)}},e.exports=o},function(e,t,n){function h(e,t){this.id=r.randomUUID(),this.body=e,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,handleOverlap:"overlap",align:"center"},catmullRom:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:"40px",visible:!0,customRange:{left:{min:undefined,max:undefined},right:{min:undefined,max:undefined}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},groups:{visibility:{}}},this.options=r.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.autoSizeSVG=!1;var n=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(e,t,r){n._onAdd(t.items)},update:function(e,t,r){n._onUpdate(t.items)},remove:function(e,t,r){n._onRemove(t.items)}},this.groupListeners={add:function(e,t,r){n._onAddGroups(t.items)},update:function(e,t,r){n._onUpdateGroups(t.items)},remove:function(e,t,r){n._onRemoveGroups(t.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(t),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){n.lastStart=n.body.range.start,n.svg.style.left=r.option.asSize(-n.width),n._updateGraph.apply(n)}),this._create(),this.body.emitter.emit("change")}var r=n(1),i=n(2),s=n(3),o=n(4),u=n(20),a=n(23),f=n(24),l=n(28),c="__ungrouped__";h.prototype=new u,h.prototype._create=function(){var e=document.createElement("div");e.className="LineGraph",this.dom.frame=e,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",e.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new a(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new a(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new l(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new l(this.body,this.options.legend,"right",this.options.groups),this.show()},h.prototype.setOptions=function(e){if(e){var t=["sampling","defaultGroup","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];e.graphHeight===undefined&&e.height!==undefined&&this.body.domProps.centerContainer.height!==undefined?this.autoSizeSVG=!0:this.body.domProps.centerContainer.height!==undefined&&e.graphHeight!==undefined&&parseInt((e.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.autoSizeSVG=!0),r.selectiveDeepExtend(t,this.options,e),r.mergeOptions(this.options,e,"catmullRom"),r.mergeOptions(this.options,e,"drawPoints"),r.mergeOptions(this.options,e,"shaded"),r.mergeOptions(this.options,e,"legend"),e.catmullRom&&typeof e.catmullRom=="object"&&e.catmullRom.parametrization&&(e.catmullRom.parametrization=="uniform"?this.options.catmullRom.alpha=0:e.catmullRom.parametrization=="chordal"?this.options.catmullRom.alpha=1:(this.options.catmullRom.parametrization="centripetal",this.options.catmullRom.alpha=.5)),this.yAxisLeft&&e.dataAxis!==undefined&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&e.legend!==undefined&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(c)&&this.groups[c].setOptions(e)}this.dom.frame&&this._updateGraph()},h.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},h.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},h.prototype.setItems=function(e){var t=this,n,i=this.itemsData;if(!e)this.itemsData=null;else{if(!(e instanceof s||e instanceof o))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=e}i&&(r.forEach(this.itemListeners,function(e,t){i.off(t,e)}),n=i.getIds(),this._onRemove(n));if(this.itemsData){var u=this.id;r.forEach(this.itemListeners,function(e,n){t.itemsData.on(n,e,u)}),n=this.itemsData.getIds(),this._onAdd(n)}this._updateUngrouped(),this._updateGraph(),this.redraw()},h.prototype.setGroups=function(e){var t=this,n;this.groupsData&&(r.forEach(this.groupListeners,function(e,n){t.groupsData.unsubscribe(n,e)}),n=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(n));if(!e)this.groupsData=null;else{if(!(e instanceof s||e instanceof o))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=e}if(this.groupsData){var i=this.id;r.forEach(this.groupListeners,function(e,n){t.groupsData.on(n,e,i)}),n=this.groupsData.getIds(),this._onAddGroups(n)}this._onUpdate()},h.prototype._onUpdate=function(e){this._updateUngrouped(),this._updateAllGroupData(),this._updateGraph(),this.redraw()},h.prototype._onAdd=function(e){this._onUpdate(e)},h.prototype._onRemove=function(e){this._onUpdate(e)},h.prototype._onUpdateGroups=function(e){for(var t=0;t<e.length;t++){var n=this.groupsData.get(e[t]);this._updateGroup(n,e[t])}this._updateGraph(),this.redraw()},h.prototype._onAddGroups=function(e){this._onUpdateGroups(e)},h.prototype._onRemoveGroups=function(e){for(var t=0;t<e.length;t++)this.groups.hasOwnProperty(e[t])&&(this.groups[e[t]].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(e[t]),this.legendRight.removeGroup(e[t]),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(e[t]),this.legendLeft.removeGroup(e[t]),this.legendLeft.redraw()),delete this.groups[e[t]]);this._updateUngrouped(),this._updateGraph(),this.redraw()},h.prototype._updateGroup=function(e,t){this.groups.hasOwnProperty(t)?(this.groups[t].update(e),this.groups[t].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(t,this.groups[t]),this.legendRight.updateGroup(t,this.groups[t])):(this.yAxisLeft.updateGroup(t,this.groups[t]),this.legendLeft.updateGroup(t,this.groups[t]))):(this.groups[t]=new f(e,t,this.options,this.groupsUsingDefaultStyles),this.groups[t].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(t,this.groups[t]),this.legendRight.addGroup(t,this.groups[t])):(this.yAxisLeft.addGroup(t,this.groups[t]),this.legendLeft.addGroup(t,this.groups[t]))),this.legendLeft.redraw(),this.legendRight.redraw()},h.prototype._updateAllGroupData=function(){if(this.itemsData!=null){var e={},t;for(t in this.groups)this.groups.hasOwnProperty(t)&&(e[t]=[]);for(var n in this.itemsData._data)if(this.itemsData._data.hasOwnProperty(n)){var i=this.itemsData._data[n];if(e[i.group]===undefined)throw new Error("Cannot find referenced group. Possible reason: items added before groups? Groups need to be added before items, as items refer to groups.");i.x=r.convert(i.x,"Date"),e[i.group].push(i)}for(t in this.groups)this.groups.hasOwnProperty(t)&&this.groups[t].setItems(e[t])}},h.prototype._updateUngrouped=function(){if(this.itemsData&&this.itemsData!=null){var e=0;for(var t in this.itemsData._data)if(this.itemsData._data.hasOwnProperty(t)){var n=this.itemsData._data[t];n!=undefined&&(n.hasOwnProperty("group")?n.group===undefined&&(n.group=c):n.group=c,e=n.group==c?e+1:e)}if(e==0)delete this.groups[c],this.legendLeft.removeGroup(c),this.legendRight.removeGroup(c),this.yAxisLeft.removeGroup(c),this.yAxisRight.removeGroup(c);else{var r={id:c,content:this.options.defaultGroup};this._updateGroup(r,c)}}else delete this.groups[c],this.legendLeft.removeGroup(c),this.legendRight.removeGroup(c),this.yAxisLeft.removeGroup(c),this.yAxisRight.removeGroup(c);this.legendLeft.redraw(),this.legendRight.redraw()},h.prototype.redraw=function(){var e=!1;this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px";if(this.lastWidth===undefined&&this.width||this.lastWidth!=this.width)e=!0;e=this._isResized()||e;var t=this.body.range.end-this.body.range.start,n=t!=this.lastVisibleInterval||this.width!=this.lastWidth;this.lastVisibleInterval=t,this.lastWidth=this.width,this.width=this.dom.frame.offsetWidth,e==1&&(this.svg.style.width=r.option.asSize(3*this.width),this.svg.style.left=r.option.asSize(-this.width));if(n==1||this.abortedGraphUpdate==1)this._updateGraph();else if(this.lastStart!=0){var i=this.body.range.start-this.lastStart,s=this.body.range.end-this.body.range.start;if(this.width!=0){var o=this.width/s,u=i*o;this.svg.style.left=-this.width-u+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),e},h.prototype._updateGraph=function(){i.prepareElements(this.svgElements);if(this.width!=0&&this.itemsData!=null){var e,t,n={},r={},s={},o=!1;this.autoSizeSVG==1&&this.options.graphHeight!=this.body.domProps.centerContainer.height+"px"&&(this.options.graphHeight=this.body.domProps.centerContainer.height+"px",this.svg.style.height=this.body.domProps.centerContainer.height+"px");var u=[];for(var a in this.groups)this.groups.hasOwnProperty(a)&&(e=this.groups[a],e.visible==1&&(this.options.groups.visibility[a]===undefined||this.options.groups.visibility[a]==1)&&u.push(a));if(u.length>0){var f=this.body.util.toGlobalTime(-this.body.domProps.root.width),l=this.body.util.toGlobalTime(2*this.body.domProps.root.width),c={};this._getRelevantData(u,c,f,l);for(t=0;t<u.length;t++)n[u[t]]=this._convertXcoordinates(c[u[t]]);this._getYRanges(u,n,s),o=this._updateYAxis(u,s);if(o==1){i.cleanupElements(this.svgElements),this.abortedGraphUpdate=!0,this.body.emitter.emit("change");return}this.abortedGraphUpdate=!1;for(t=0;t<u.length;t++)e=this.groups[u[t]],r[u[t]]=this._convertYcoordinates(c[u[t]],e);for(t=0;t<u.length;t++)e=this.groups[u[t]],e.options.style=="line"&&this._drawLineGraph(r[u[t]],e);this._drawBarGraphs(u,r)}}i.cleanupElements(this.svgElements)},h.prototype._getRelevantData=function(e,t,n,i){var s,o,u,a;if(e.length>0)for(o=0;o<e.length;o++){s=this.groups[e[o]],t[e[o]]=[];var f=t[e[o]];if(s.options.sort==1){var l=Math.max(0,r.binarySearchGeneric(s.itemsData,n,"x","before"));for(u=l;u<s.itemsData.length;u++){a=s.itemsData[u];if(a!==undefined){if(a.x>i){f.push(a);break}f.push(a)}}}else for(u=0;u<s.itemsData.length;u++)a=s.itemsData[u],a!==undefined&&a.x>n&&a.x<i&&f.push(a)}this._applySampling(e,t)},h.prototype._applySampling=function(e,t){var n;if(e.length>0)for(var r=0;r<e.length;r++){n=this.groups[e[r]];if(n.options.sampling==1){var i=t[e[r]];if(i.length>0){var s=1,o=i.length,u=this.body.util.toGlobalScreen(i[i.length-1].x)-this.body.util.toGlobalScreen(i[0].x),a=o/u;s=Math.min(Math.ceil(.2*o),Math.max(1,Math.round(a)));var f=[];for(var l=0;l<o;l+=s)f.push(i[l]);t[e[r]]=f}}}},h.prototype._getYRanges=function(e,t,n){var r,i,s,o,u=[],a=[],f;if(e.length>0){for(s=0;s<e.length;s++){r=t[e[s]];if(r.length>0){i=this.groups[e[s]];if(i.options.style=="line"||i.options.barChart.handleOverlap!="stack"){var l=r[0].y,c=r[0].y;for(o=0;o<r.length;o++)l=l>r[o].y?r[o].y:l,c=c<r[o].y?r[o].y:c;n[e[s]]={min:l,max:c,yAxisOrientation:i.options.yAxisOrientation}}else if(i.options.style=="bar"){i.options.yAxisOrientation=="left"?f=u:f=a,n[e[s]]={min:0,max:0,yAxisOrientation:i.options.yAxisOrientation,ignore:!0};for(o=0;o<r.length;o++)f.push({x:r[o].x,y:r[o].y,groupId:e[s]})}}}var h;u.length>0&&(u.sort(function(e,t){return e.x==t.x?e.groupId-t.groupId:e.x-t.x}),h={},this._getDataIntersections(h,u),n.__barchartLeft=this._getStackedBarYRange(h,u),n.__barchartLeft.yAxisOrientation="left",e.push("__barchartLeft")),a.length>0&&(a.sort(function(e,t){return e.x==t.x?e.groupId-t.groupId:e.x-t.x}),h={},this._getDataIntersections(h,a),n.__barchartRight=this._getStackedBarYRange(h,a),n.__barchartRight.yAxisOrientation="right",e.push("__barchartRight"))}},h.prototype._getStackedBarYRange=function(e,t){var n,r=t[0].y,i=t[0].y;for(var s=0;s<t.length;s++)n=t[s].x,e[n]===undefined?(r=r>t[s].y?t[s].y:r,i=i<t[s].y?t[s].y:i):e[n].accumulated+=t[s].y;for(var o in e)e.hasOwnProperty(o)&&(r=r>e[o].accumulated?e[o].accumulated:r,i=i<e[o].accumulated?e[o].accumulated:i);return{min:r,max:i}},h.prototype._updateYAxis=function(e,t){var n=!1,r=!1,i=!1,s=1e9,o=1e9,u=-1e9,a=-1e9,f,l;if(e.length>0){for(var c=0;c<e.length;c++)t.hasOwnProperty(e[c])&&t[e[c]].ignore!==!0&&(f=t[e[c]].min,l=t[e[c]].max,t[e[c]].yAxisOrientation=="left"?(r=!0,s=s>f?f:s,u=u<l?l:u):(i=!0,o=o>f?f:o,a=a<l?l:a));r==1&&this.yAxisLeft.setRange(s,u),i==1&&this.yAxisRight.setRange(o,a)}return n=this._toggleAxisVisiblity(r,this.yAxisLeft)||n,n=this._toggleAxisVisiblity(i,this.yAxisRight)||n,i==1&&r==1?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!r,this.yAxisRight.master==0?(i==1?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,n=this.yAxisLeft.redraw()||n,this.yAxisRight.stepPixelsForced=this.yAxisLeft.stepPixels,n=this.yAxisRight.redraw()||n):n=this.yAxisRight.redraw()||n,e.indexOf("__barchartLeft")!=-1&&e.splice(e.indexOf("__barchartLeft"),1),e.indexOf("__barchartRight")!=-1&&e.splice(e.indexOf("__barchartRight"),1),n},h.prototype._toggleAxisVisiblity=function(e,t){var n=!1;return e==0?t.dom.frame.parentNode&&(t.hide(),n=!0):t.dom.frame.parentNode||(t.show(),n=!0),n},h.prototype._drawBarGraphs=function(e,t){var n=[],r={},s,o,u,a,f,l,c=0;for(f=0;f<e.length;f++){a=this.groups[e[f]];if(a.options.style=="bar"&&a.visible==1&&(this.options.groups.visibility[e[f]]===undefined||this.options.groups.visibility[e[f]]==1))for(l=0;l<t[e[f]].length;l++)n.push({x:t[e[f]][l].x,y:t[e[f]][l].y,groupId:e[f]}),c+=1}if(c==0)return;n.sort(function(e,t){return e.x==t.x?e.groupId-t.groupId:e.x-t.x}),this._getDataIntersections(r,n);for(f=0;f<n.length;f++){a=this.groups[n[f].groupId];var h=.1*a.options.barChart.width;o=n[f].x;var p=0;if(r[o]===undefined)f+1<n.length&&(s=Math.abs(n[f+1].x-o)),f>0&&(s=Math.min(s,Math.abs(n[f-1].x-o))),u=this._getSafeDrawData(s,a,h);else{var d=f+(r[o].amount-r[o].resolved),v=f-(r[o].resolved+1);d<n.length&&(s=Math.abs(n[d].x-o)),v>0&&(s=Math.min(s,Math.abs(n[v].x-o))),u=this._getSafeDrawData(s,a,h),r[o].resolved+=1,a.options.barChart.handleOverlap=="stack"?(p=r[o].accumulated,r[o].accumulated+=a.zeroPosition-n[f].y):a.options.barChart.handleOverlap=="sideBySide"&&(u.width=u.width/r[o].amount,u.offset+=r[o].resolved*u.width-.5*u.width*(r[o].amount+1),a.options.barChart.align=="left"?u.offset-=.5*u.width:a.options.barChart.align=="right"&&(u.offset+=.5*u.width))}i.drawBar(n[f].x+u.offset,n[f].y-p,u.width,a.zeroPosition-n[f].y,a.className+" bar",this.svgElements,this.svg),a.options.drawPoints.enabled==1&&i.drawPoint(n[f].x+u.offset,n[f].y-p,a,this.svgElements,this.svg)}},h.prototype._getDataIntersections=function(e,t){var n;for(var r=0;r<t.length;r++)r+1<t.length&&(n=Math.abs(t[r+1].x-t[r].x)),r>0&&(n=Math.min(n,Math.abs(t[r-1].x-t[r].x))),n==0&&(e[t[r].x]===undefined&&(e[t[r].x]={amount:0,resolved:0,accumulated:0}),e[t[r].x].amount+=1)},h.prototype._getSafeDrawData=function(e,t,n){var r,i;return e<t.options.barChart.width&&e>0?(r=e<n?n:e,i=0,t.options.barChart.align=="left"?i-=.5*e:t.options.barChart.align=="right"&&(i+=.5*e)):(r=t.options.barChart.width,i=0,t.options.barChart.align=="left"?i-=.5*t.options.barChart.width:t.options.barChart.align=="right"&&(i+=.5*t.options.barChart.width)),{width:r,offset:i}},h.prototype._drawLineGraph=function(e,t){if(e!=null&&e.length>0){var n,r,s=Number(this.svg.style.height.replace("px",""));n=i.getSVGElement("path",this.svgElements,this.svg),n.setAttributeNS(null,"class",t.className),t.style!==undefined&&n.setAttributeNS(null,"style",t.style),t.options.catmullRom.enabled==1?r=this._catmullRom(e,t):r=this._linear(e);if(t.options.shaded.enabled==1){var o=i.getSVGElement("path",this.svgElements,this.svg),u;t.options.shaded.orientation=="top"?u="M"+e[0].x+","+0+" "+r+"L"+e[e.length-1].x+","+0:u="M"+e[0].x+","+s+" "+r+"L"+e[e.length-1].x+","+s,o.setAttributeNS(null,"class",t.className+" fill"),t.options.shaded.style!==undefined&&o.setAttributeNS(null,"style",t.options.shaded.style),o.setAttributeNS(null,"d",u)}n.setAttributeNS(null,"d","M"+r),t.options.drawPoints.enabled==1&&this._drawPoints(e,t,this.svgElements,this.svg)}},h.prototype._drawPoints=function(e,t,n,r,s){s===undefined&&(s=0);for(var o=0;o<e.length;o++)i.drawPoint(e[o].x+s,e[o].y,t,n,r)},h.prototype._convertXcoordinates=function(e){var t=[],n,r,i=this.body.util.toScreen;for(var s=0;s<e.length;s++)n=i(e[s].x)+this.width,r=e[s].y,t.push({x:n,y:r});return t},h.prototype._convertYcoordinates=function(e,t){var n=[],r,i,s=this.body.util.toScreen,o=this.yAxisLeft,u=Number(this.svg.style.height.replace("px",""));t.options.yAxisOrientation=="right"&&(o=this.yAxisRight);for(var a=0;a<e.length;a++)r=s(e[a].x)+this.width,i=Math.round(o.convertValue(e[a].y)),n.push({x:r,y:i});return t.setZeroPosition(Math.min(u,o.convertValue(0))),n},h.prototype._catmullRomUniform=function(e){var t,n,r,i,s,o,u=Math.round(e[0].x)+","+Math.round(e[0].y)+" ",a=1/6,f=e.length;for(var l=0;l<f-1;l++)t=l==0?e[0]:e[l-1],n=e[l],r=e[l+1],i=l+2<f?e[l+2]:r,s={x:(-t.x+6*n.x+r.x)*a,y:(-t.y+6*n.y+r.y)*a},o={x:(n.x+6*r.x-i.x)*a,y:(n.y+6*r.y-i.y)*a},u+="C"+s.x+","+s.y+" "+o.x+","+o.y+" "+r.x+","+r.y+" ";return u},h.prototype._catmullRom=function(e,t){var n=t.options.catmullRom.alpha;if(n==0||n===undefined)return this._catmullRomUniform(e);var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S=Math.round(e[0].x)+","+Math.round(e[0].y)+" ",x=e.length;for(var T=0;T<x-1;T++)r=T==0?e[0]:e[T-1],i=e[T],s=e[T+1],o=T+2<x?e[T+2]:s,f=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),l=Math.sqrt(Math.pow(i.x-s.x,2)+Math.pow(i.y-s.y,2)),c=Math.sqrt(Math.pow(s.x-o.x,2)+Math.pow(s.y-o.y,2)),m=Math.pow(c,n),y=Math.pow(c,2*n),g=Math.pow(l,n),b=Math.pow(l,2*n),E=Math.pow(f,n),w=Math.pow(f,2*n),h=2*w+3*E*g+b,p=2*y+3*m*g+b,d=3*E*(E+g),d>0&&(d=1/d),v=3*m*(m+g),v>0&&(v=1/v),u={x:(-b*r.x+h*i.x+w*s.x)*d,y:(-b*r.y+h*i.y+w*s.y)*d},a={x:(y*i.x+p*s.x-b*o.x)*v,y:(y*i.y+p*s.y-b*o.y)*v},u.x==0&&u.y==0&&(u=i),a.x==0&&a.y==0&&(a=s),S+="C"+u.x+","+u.y+" "+a.x+","+a.y+" "+s.x+","+s.y+" ";return S},h.prototype._linear=function(e){var t="";for(var n=0;n<e.length;n++)n==0?t+=e[n].x+","+e[n].y:t+=" "+e[n].x+","+e[n].y;return t},e.exports=h},function(e,t,n){function a(e,t){this.dom={foreground:null,majorLines:[],majorTexts:[],minorLines:[],minorTexts:[],redundant:{majorLines:[],majorTexts:[],minorLines:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:"bottom",showMinorLabels:!0,showMajorLabels:!0},this.options=r.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(t)}var r=n(1),i=n(20),s=n(19),o=n(15),u=n(44);a.prototype=new i,a.prototype.setOptions=function(e){e&&(r.selectiveExtend(["orientation","showMinorLabels","showMajorLabels","hiddenDates"],this.options,e),"locale"in e&&(typeof u.locale=="function"?u.locale(e.locale):u.lang(e.locale)))},a.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="timeaxis foreground",this.dom.background.className="timeaxis background"},a.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},a.prototype.redraw=function(){var e=this.options,t=this.props,n=this.dom.foreground,r=this.dom.background,i=e.orientation=="top"?this.body.dom.top:this.body.dom.bottom,s=n.parentNode!==i;this._calculateCharSize();var o=this.options.orientation,u=this.options.showMinorLabels,a=this.options.showMajorLabels;t.minorLabelHeight=u?t.minorCharHeight:0,t.majorLabelHeight=a?t.majorCharHeight:0,t.height=t.minorLabelHeight+t.majorLabelHeight,t.width=n.offsetWidth,t.minorLineHeight=this.body.domProps.root.height-t.majorLabelHeight-(e.orientation=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),t.minorLineWidth=1,t.majorLineHeight=t.minorLineHeight+t.majorLabelHeight,t.majorLineWidth=1;var f=n.nextSibling,l=r.nextSibling;return n.parentNode&&n.parentNode.removeChild(n),r.parentNode&&r.parentNode.removeChild(r),n.style.height=this.props.height+"px",this._repaintLabels(),f?i.insertBefore(n,f):i.appendChild(n),l?this.body.dom.backgroundVertical.insertBefore(r,l):this.body.dom.backgroundVertical.appendChild(r),this._isResized()||s},a.prototype._repaintLabels=function(){var e=this.options.orientation,t=r.convert(this.body.range.start,"Number"),n=r.convert(this.body.range.end,"Number"),i=this.body.util.toTime((this.props.minorCharWidth||10)*7).valueOf(),u=i-o.getHiddenDurationBefore(this.body.hiddenDates,this.body.range,i);u-=this.body.util.toTime(0).valueOf();var a=new s(new Date(t),new Date(n),u,this.body.hiddenDates);this.step=a;var f=this.dom;f.redundant.majorLines=f.majorLines,f.redundant.majorTexts=f.majorTexts,f.redundant.minorLines=f.minorLines,f.redundant.minorTexts=f.minorTexts,f.majorLines=[],f.majorTexts=[],f.minorLines=[],f.minorTexts=[],a.first();var l=undefined,c=0;while(a.hasNext()&&c<1e3){c++;var h=a.getCurrent(),p=this.body.util.toScreen(h),d=a.isMajor();this.options.showMinorLabels&&this._repaintMinorText(p,a.getLabelMinor(),e),d&&this.options.showMajorLabels?(p>0&&(l==undefined&&(l=p),this._repaintMajorText(p,a.getLabelMajor(),e)),this._repaintMajorLine(p,e)):this._repaintMinorLine(p,e),a.next()}if(this.options.showMajorLabels){var v=this.body.util.toTime(0),m=a.getLabelMajor(v),g=m.length*(this.props.majorCharWidth||10)+10;(l==undefined||g<l)&&this._repaintMajorText(0,m,e)}r.forEach(this.dom.redundant,function(e){while(e.length){var t=e.pop();t&&t.parentNode&&t.parentNode.removeChild(t)}})},a.prototype._repaintMinorText=function(e,t,n){var r=this.dom.redundant.minorTexts.shift();if(!r){var i=document.createTextNode("");r=document.createElement("div"),r.appendChild(i),r.className="text minor",this.dom.foreground.appendChild(r)}this.dom.minorTexts.push(r),r.childNodes[0].nodeValue=t,r.style.top=n=="top"?this.props.majorLabelHeight+"px":"0",r.style.left=e+"px"},a.prototype._repaintMajorText=function(e,t,n){var r=this.dom.redundant.majorTexts.shift();if(!r){var i=document.createTextNode(t);r=document.createElement("div"),r.className="text major",r.appendChild(i),this.dom.foreground.appendChild(r)}this.dom.majorTexts.push(r),r.childNodes[0].nodeValue=t,r.style.top=n=="top"?"0":this.props.minorLabelHeight+"px",r.style.left=e+"px"},a.prototype._repaintMinorLine=function(e,t){var n=this.dom.redundant.minorLines.shift();n||(n=document.createElement("div"),n.className="grid vertical minor",this.dom.background.appendChild(n)),this.dom.minorLines.push(n);var r=this.props;t=="top"?n.style.top=r.majorLabelHeight+"px":n.style.top=this.body.domProps.top.height+"px",n.style.height=r.minorLineHeight+"px",n.style.left=e-r.minorLineWidth/2+"px"},a.prototype._repaintMajorLine=function(e,t){var n=this.dom.redundant.majorLines.shift();n||(n=document.createElement("DIV"),n.className="grid vertical major",this.dom.background.appendChild(n)),this.dom.majorLines.push(n);var r=this.props;t=="top"?n.style.top="0":n.style.top=this.body.domProps.top.height+"px",n.style.left=e-r.majorLineWidth/2+"px",n.style.height=r.majorLineHeight+"px"},a.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="text minor measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="text major measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth},a.prototype.snap=function(e){return this.step.snap(e)},e.exports=a},function(e,t,n){function s(e,t,n){this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=t||{},this.options=n||{},this.selected=!1,this.displayed=!1,this.dirty=!0,this.top=null,this.left=null,this.width=null,this.height=null}var r=n(45),i=n(1);s.prototype.stack=!0,s.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},s.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},s.prototype.setData=function(e){this.data=e,this.dirty=!0,this.displayed&&this.redraw()},s.prototype.setParent=function(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e},s.prototype.isVisible=function(e){return!1},s.prototype.show=function(){return!1},s.prototype.hide=function(){return!1},s.prototype.redraw=function(){},s.prototype.repositionX=function(){},s.prototype.repositionY=function(){},s.prototype._repaintDeleteButton=function(e){if(this.selected&&this.options.editable.remove&&!this.dom.deleteButton){var t=this,n=document.createElement("div");n.className="delete",n.title="Delete this item",r(n,{preventDefault:!0}).on("tap",function(e){t.parent.removeFromDataSet(t),e.stopPropagation()}),e.appendChild(n),this.dom.deleteButton=n}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},s.prototype._updateContents=function(e){var t;if(this.options.template){var n=this.parent.itemSet.itemsData.get(this.id);t=this.options.template(n)}else t=this.data.content;if(t!==this.content){if(t instanceof Element)e.innerHTML="",e.appendChild(t);else if(t!=undefined)e.innerHTML=t;else if(this.data.type!="background"||this.data.content!==undefined)throw new Error('Property "content" missing in item '+this.id);this.content=t}},s.prototype._updateTitle=function(e){this.data.title!=null?e.title=this.data.title||"":e.removeAttribute("title")},s.prototype._updateDataAttributes=function(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var t=[];if(Array.isArray(this.options.dataAttributes))t=this.options.dataAttributes;else{if(this.options.dataAttributes!="all")return;t=Object.keys(this.data)}for(var n=0;n<t.length;n++){var r=t[n],i=this.data[r];i!=null?e.setAttribute("data-"+r,i):e.removeAttribute("data-"+r)}}},s.prototype._updateStyle=function(e){this.style&&(i.removeCssText(e,this.style),this.style=null),this.data.style&&(i.addCssText(e,this.data.style),this.style=this.data.style)},e.exports=s},function(e,t,n){function u(e,t,n){this.props={content:{width:0}},this.overflow=!1;if(e){if(e.start==undefined)throw new Error('Property "start" missing in item '+e.id);if(e.end==undefined)throw new Error('Property "end" missing in item '+e.id)}i.call(this,e,t,n),this.emptyContent=!1}var r=n(45),i=n(31),s=n(26),o=n(35);u.prototype=new i(null,null,null),u.prototype.baseClassName="item background",u.prototype.stack=!1,u.prototype.isVisible=function(e){return this.data.start<e.end&&this.data.end>e.start},u.prototype.redraw=function(){var e=this.dom;e||(this.dom={},e=this.dom,e.box=document.createElement("div"),e.content=document.createElement("div"),e.content.className="content",e.box.appendChild(e.content),e.box["timeline-item"]=this,this.dirty=!0);if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.background;if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(e.box)}this.displayed=!0;if(this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var n=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");e.box.className=this.baseClassName+n,this.overflow=window.getComputedStyle(e.content).overflow!=="hidden",this.props.content.width=this.dom.content.offsetWidth,this.height=0,this.dirty=!1}},u.prototype.show=o.prototype.show,u.prototype.hide=o.prototype.hide,u.prototype.repositionX=o.prototype.repositionX,u.prototype.repositionY=function(e){var t=this.options.orientation==="top";this.dom.content.style.top=t?"":"0",this.dom.content.style.bottom=t?"0":"";var n;if(this.data.subgroup!==undefined){var r=this.data.subgroup,i=this.parent.subgroups,o=i[r].index;if(t==1){n=this.parent.subgroups[r].height+e.item.vertical,n+=o==0?e.axis-.5*e.item.vertical:0;var u=this.parent.top;for(var a in i)i.hasOwnProperty(a)&&i[a].visible==1&&i[a].index<o&&(u+=i[a].height+e.item.vertical);u+=o!=0?e.axis-.5*e.item.vertical:0,this.dom.box.style.top=u+"px",this.dom.box.style.bottom=""}else{var u=this.parent.top;for(var a in i)i.hasOwnProperty(a)&&i[a].visible==1&&i[a].index>o&&(u+=i[a].height+e.item.vertical);n=this.parent.subgroups[r].height+e.item.vertical,this.dom.box.style.top=u+"px",this.dom.box.style.bottom=""}}else this.parent instanceof s?(n=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.top=t?"0":"",this.dom.box.style.bottom=t?"":"0"):(n=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=n+"px"},e.exports=u},function(e,t,n){function s(e,t,n){this.props={dot:{width:0,height:0},line:{width:0,height:0}};if(e&&e.start==undefined)throw new Error('Property "start" missing in item '+e);r.call(this,e,t,n)}var r=n(31),i=n(1);s.prototype=new r(null,null,null),s.prototype.isVisible=function(e){var t=(e.end-e.start)/4;return this.data.start>e.start-t&&this.data.start<e.end+t},s.prototype.redraw=function(){var e=this.dom;e||(this.dom={},e=this.dom,e.box=document.createElement("DIV"),e.content=document.createElement("DIV"),e.content.className="content",e.box.appendChild(e.content),e.line=document.createElement("DIV"),e.line.className="line",e.dot=document.createElement("DIV"),e.dot.className="dot",e.box["timeline-item"]=this,this.dirty=!0);if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.box)}if(!e.line.parentNode){var n=this.parent.dom.background;if(!n)throw new Error("Cannot redraw item: parent has no background container element");n.appendChild(e.line)}if(!e.dot.parentNode){var r=this.parent.dom.axis;if(!n)throw new Error("Cannot redraw item: parent has no axis container element");r.appendChild(e.dot)}this.displayed=!0;if(this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var i=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");e.box.className="item box"+i,e.line.className="item line"+i,e.dot.className="item dot"+i,this.props.dot.height=e.dot.offsetHeight,this.props.dot.width=e.dot.offsetWidth,this.props.line.width=e.line.offsetWidth,this.width=e.box.offsetWidth,this.height=e.box.offsetHeight,this.dirty=!1}this._repaintDeleteButton(e.box)},s.prototype.show=function(){this.displayed||this.redraw()},s.prototype.hide=function(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.top=null,this.left=null,this.displayed=!1}},s.prototype.repositionX=function(){var e=this.conversion.toScreen(this.data.start),t=this.options.align,n,r=this.dom.box,i=this.dom.line,s=this.dom.dot;t=="right"?this.left=e-this.width:t=="left"?this.left=e:this.left=e-this.width/2,r.style.left=this.left+"px",i.style.left=e-this.props.line.width/2+"px",s.style.left=e-this.props.dot.width/2+"px"},s.prototype.repositionY=function(){var e=this.options.orientation,t=this.dom.box,n=this.dom.line,r=this.dom.dot;if(e=="top")t.style.top=(this.top||0)+"px",n.style.top="0",n.style.height=this.parent.top+this.top+1+"px",n.style.bottom="";else{var i=this.parent.itemSet.props.height,s=i-this.parent.top-this.parent.height+this.top;t.style.top=(this.parent.height-this.top-this.height||0)+"px",n.style.top=i-s+"px",n.style.bottom="0"}r.style.top=-this.props.dot.height/2+"px"},e.exports=s},function(e,t,n){function i(e,t,n){this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0}};if(e&&e.start==undefined)throw new Error('Property "start" missing in item '+e);r.call(this,e,t,n)}var r=n(31);i.prototype=new r(null,null,null),i.prototype.isVisible=function(e){var t=(e.end-e.start)/4;return this.data.start>e.start-t&&this.data.start<e.end+t},i.prototype.redraw=function(){var e=this.dom;e||(this.dom={},e=this.dom,e.point=document.createElement("div"),e.content=document.createElement("div"),e.content.className="content",e.point.appendChild(e.content),e.dot=document.createElement("div"),e.point.appendChild(e.dot),e.point["timeline-item"]=this,this.dirty=!0);if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.point.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.point)}this.displayed=!0;if(this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.point),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var n=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");e.point.className="item point"+n,e.dot.className="item dot"+n,this.width=e.point.offsetWidth,this.height=e.point.offsetHeight,this.props.dot.width=e.dot.offsetWidth,this.props.dot.height=e.dot.offsetHeight,this.props.content.height=e.content.offsetHeight,e.content.style.marginLeft=2*this.props.dot.width+"px",e.dot.style.top=(this.height-this.props.dot.height)/2+"px",e.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1}this._repaintDeleteButton(e.point)},i.prototype.show=function(){this.displayed||this.redraw()},i.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.top=null,this.left=null,this.displayed=!1)},i.prototype.repositionX=function(){var e=this.conversion.toScreen(this.data.start);this.left=e-this.props.dot.width,this.dom.point.style.left=this.left+"px"},i.prototype.repositionY=function(){var e=this.options.orientation,t=this.dom.point;e=="top"?t.style.top=this.top+"px":t.style.top=this.parent.height-this.top-this.height+"px"},e.exports=i},function(e,t,n){function s(e,t,n){this.props={content:{width:0}},this.overflow=!1;if(e){if(e.start==undefined)throw new Error('Property "start" missing in item '+e.id);if(e.end==undefined)throw new Error('Property "end" missing in item '+e.id)}i.call(this,e,t,n)}var r=n(45),i=n(31);s.prototype=new i(null,null,null),s.prototype.baseClassName="item range",s.prototype.isVisible=function(e){return this.data.start<e.end&&this.data.end>e.start},s.prototype.redraw=function(){var e=this.dom;e||(this.dom={},e=this.dom,e.box=document.createElement("div"),e.content=document.createElement("div"),e.content.className="content",e.box.appendChild(e.content),e.box["timeline-item"]=this,this.dirty=!0);if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.box)}this.displayed=!0;if(this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");e.box.className=this.baseClassName+n,this.overflow=window.getComputedStyle(e.content).overflow!=="hidden",this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dirty=!1}this._repaintDeleteButton(e.box),this._repaintDragLeft(),this._repaintDragRight()},s.prototype.show=function(){this.displayed||this.redraw()},s.prototype.hide=function(){if(this.displayed){var e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.top=null,this.left=null,this.displayed=!1}},s.prototype.repositionX=function(){var e=this.parent.width,t=this.conversion.toScreen(this.data.start),n=this.conversion.toScreen(this.data.end),r,i;t<-e&&(t=-e),n>2*e&&(n=2*e);var s=Math.max(n-t,1);this.overflow?(this.left=t,this.width=s+this.props.content.width,i=this.props.content.width):(this.left=t,this.width=s,i=Math.min(n-t,this.props.content.width)),this.dom.box.style.left=this.left+"px",this.dom.box.style.width=s+"px";switch(this.options.align){case"left":this.dom.content.style.left="0";break;case"right":this.dom.content.style.left=Math.max(s-i-2*this.options.padding,0)+"px";break;case"center":this.dom.content.style.left=Math.max((s-i-2*this.options.padding)/2,0)+"px";break;default:this.overflow?r=Math.max(-t,0):t<0?r=Math.min(-t,n-t-this.props.content.width-2*this.options.padding):r=0,this.dom.content.style.left=r+"px"}},s.prototype.repositionY=function(){var e=this.options.orientation,t=this.dom.box;e=="top"?t.style.top=this.top+"px":t.style.top=this.parent.height-this.top-this.height+"px"},s.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var e=document.createElement("div");e.className="drag-left",e.dragLeftItem=this,r(e,{preventDefault:!0}).on("drag",function(){}),this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},s.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var e=document.createElement("div");e.className="drag-right",e.dragRightItem=this,r(e,{preventDefault:!0}).on("drag",function(){}),this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},e.exports=s},function(e,t,n){function w(e,t,n){if(!(this instanceof w))throw new SyntaxError("Constructor must be called with the new operator");this._initializeMixinLoaders(),this.containerElement=e,this.renderRefreshRate=60,this.renderTimestep=1e3/this.renderRefreshRate,this.renderTime=.5*this.renderTimestep,this.maxPhysicsTicksPerRender=3,this.physicsDiscreteStepsize=.5,this.initializing=!0,this.triggerFunctions={add:null,edit:null,editEdge:null,connect:null,del:null},this.defaultOptions={nodes:{mass:1,radiusMin:10,radiusMax:30,radius:10,shape:"ellipse",image:undefined,widthMin:16,widthMax:64,fontColor:"black",fontSize:14,fontFace:"verdana",fontFill:undefined,level:-1,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},borderColor:"#2B7CE9",backgroundColor:"#97C2FC",highlightColor:"#D2E5FF",group:undefined,borderWidth:1,borderWidthSelected:undefined},edges:{widthMin:1,widthMax:15,width:1,widthSelectionMultiplier:2,hoverWidth:1.5,style:"line",color:{color:"#848484",highlight:"#848484",hover:"#848484"},fontColor:"#343434",fontSize:14,fontFace:"arial",fontFill:"white",arrowScaleFactor:1,dash:{length:10,gap:5,altLength:undefined},inheritColor:"from"},configurePhysics:!1,physics:{barnesHut:{enabled:!0,theta:1/.6,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09},repulsion:{centralGravity:0,springLength:200,springConstant:.05,nodeDistance:100,damping:.09},hierarchicalRepulsion:{enabled:!1,centralGravity:0,springLength:100,springConstant:.01,nodeDistance:150,damping:.09},damping:null,centralGravity:null,springLength:null,springConstant:null},clustering:{enabled:!1,initialMaxNodes:100,clusterThreshold:500,reduceToNodes:300,chainThreshold:.4,clusterEdgeThreshold:20,sectorThreshold:100,screenSizeThreshold:.2,fontSizeMultiplier:4,maxFontSize:1e3,forceAmplification:.1,distanceAmplification:.1,edgeGrowth:20,nodeScaling:{width:1,height:1,radius:1},maxNodeSizeIncrements:600,activeAreaBoxSize:80,clusterLevelDifference:2},navigation:{enabled:!1},keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02}},dataManipulation:{enabled:!1,initiallyVisible:!1},hierarchicalLayout:{enabled:!1,levelSeparation:150,nodeSpacing:100,direction:"UD",layout:"hubsize"},freezeForStabilization:!1,smoothCurves:{enabled:!0,dynamic:!0,type:"continuous",roundness:.5},dynamicSmoothCurves:!0,maxVelocity:30,minVelocity:.1,stabilize:!0,stabilizationIterations:1e3,locale:"en",locales:b,tooltip:{delay:300,fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}},dragNetwork:!0,dragNodes:!0,zoomable:!0,hover:!1,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,width:"100%",height:"100%",selectable:!0},this.constants=o.extend({},this.defaultOptions),this.hoverObj={nodes:{},edges:{}},this.controlNodesActive=!1,this.navigationHammers={existing:[],"new":[]},this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=null,this.lockedOnNodeOffset=null;var r=this;this.groups=new h,this.images=new p,this.images.setOnloadCallback(function(){r._redraw()}),this.xIncrement=0,this.yIncrement=0,this.zoomIncrement=0,this._loadPhysicsSystem(),this._create(),this._loadSectorSystem(),this._loadClusterSystem(),this._loadSelectionSystem(),this._loadHierarchySystem(),this._setTranslation(this.frame.clientWidth/2,this.frame.clientHeight/2),this._setScale(1),this.setOptions(n),this.freezeSimulation=!1,this.cachedFunctions={},this.startedStabilization=!1,this.stabilized=!1,this.stabilizationIterations=null,this.calculationNodes={},this.calculationNodeIndices=[],this.nodeIndices=[],this.nodes={},this.edges={},this.canvasTopLeft={x:0,y:0},this.canvasBottomRight={x:0,y:0},this.pointerPosition={x:0,y:0},this.areaCenter={},this.scale=1,this.previousScale=this.scale,this.nodesData=null,this.edgesData=null,this.nodesListeners={add:function(e,t){r._addNodes(t.items),r.start()},update:function(e,t){r._updateNodes(t.items,t.data),r.start()},remove:function(e,t){r._removeNodes(t.items),r.start()}},this.edgesListeners={add:function(e,t){r._addEdges(t.items),r.start()},update:function(e,t){r._updateEdges(t.items),r.start()},remove:function(e,t){r._removeEdges(t.items),r.start()}},this.moving=!0,this.timer=undefined,this.setData(t,this.constants.clustering.enabled||this.constants.hierarchicalLayout.enabled),this.initializing=!1,this.constants.hierarchicalLayout.enabled==1?this._setupHierarchicalLayout():this.constants.stabilize==0&&this.zoomExtent(undefined,!0,this.constants.clustering.enabled),this.constants.clustering.enabled&&this.startWithClustering()}var r=n(53),i=n(45),s=n(54),o=n(1),u=n(47),a=n(3),f=n(4),l=n(42),c=n(43),h=n(38),p=n(39),d=n(40),v=n(37),m=n(41),g=n(51),y=n(52),b=n(49);n(50),r(w.prototype),w.prototype._getScriptPath=function(){var e=document.getElementsByTagName("script");for(var t=0;t<e.length;t++){var n=e[t].src,r=n&&/\/?vis(.min)?\.js$/.exec(n);if(r)return n.substring(0,n.length-r[0].length)}return null},w.prototype._getRange=function(){var e=1e9,t=-1e9,n=1e9,r=-1e9,i;for(var s in this.nodes)this.nodes.hasOwnProperty(s)&&(i=this.nodes[s],n>i.x&&(n=i.x),r<i.x&&(r=i.x),e>i.y&&(e=i.y),t<i.y&&(t=i.y));return n==1e9&&r==-1e9&&e==1e9&&t==-1e9&&(e=0,t=0,n=0,r=0),{minX:n,maxX:r,minY:e,maxY:t}},w.prototype._findCenter=function(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}},w.prototype.zoomExtent=function(e,t,n){t===undefined&&(t=!1),n===undefined&&(n=!1),e===undefined&&(e=!1);var r=this._getRange(),i;if(t==1){var s=this.nodeIndices.length;this.constants.smoothCurves==1?this.constants.clustering.enabled==1&&s>=this.constants.clustering.initialMaxNodes?i=49.07548/(s+142.05338)+91444e-8:i=12.662/(s+7.4147)+.0964822:this.constants.clustering.enabled==1&&s>=this.constants.clustering.initialMaxNodes?i=77.5271985/(s+187.266146)+476710517e-13:i=30.5062972/(s+19.93597763)+.08413486;var o=Math.min(this.frame.canvas.clientWidth/600,this.frame.canvas.clientHeight/600);i*=o}else{var u=Math.abs(r.maxX-r.minX)*1.1,a=Math.abs(r.maxY-r.minY)*1.1,f=this.frame.canvas.clientWidth/u,l=this.frame.canvas.clientHeight/a;i=f<=l?f:l}i>1&&(i=1);var c=this._findCenter(r);if(n==0){var h={position:c,scale:i,animation:e};this.moveTo(h),this.moving=!0,this.start()}else c.x*=i,c.y*=i,c.x-=.5*this.frame.canvas.clientWidth,c.y-=.5*this.frame.canvas.clientHeight,this._setScale(i),this._setTranslation(-c.x,-c.y)},w.prototype._updateNodeIndexList=function(){this._clearNodeIndexList();for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&this.nodeIndices.push(e)},w.prototype.setData=function(e,t){t===undefined&&(t=!1),this.initializing=!0;if(e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');this.setOptions(e&&e.options);if(e&&e.dot){if(e&&e.dot){var n=l.DOTToGraph(e.dot);this.setData(n);return}}else if(e&&e.gephi){if(e&&e.gephi){var r=c.parseGephi(e.gephi);this.setData(r);return}}else this._setNodes(e&&e.nodes),this._setEdges(e&&e.edges);this._putDataInSector(),t==0&&(this.constants.hierarchicalLayout.enabled==1?(this._resetLevels(),this._setupHierarchicalLayout()):this.constants.stabilize&&this._stabilize(),this.start()),this.initializing=!1},w.prototype.setOptions=function(e){if(e){var t,n=["nodes","edges","smoothCurves","hierarchicalLayout","clustering","navigation","keyboard","dataManipulation","onAdd","onEdit","onEditEdge","onConnect","onDelete","clickToUse"];o.selectiveNotDeepExtend(n,this.constants,e),o.selectiveNotDeepExtend(["color"],this.constants.nodes,e.nodes),o.selectiveNotDeepExtend(["color","length"],this.constants.edges,e.edges);if(e.physics){o.mergeOptions(this.constants.physics,e.physics,"barnesHut"),o.mergeOptions(this.constants.physics,e.physics,"repulsion");if(e.physics.hierarchicalRepulsion){this.constants.hierarchicalLayout.enabled=!0,this.constants.physics.hierarchicalRepulsion.enabled=!0,this.constants.physics.barnesHut.enabled=!1;for(t in e.physics.hierarchicalRepulsion)e.physics.hierarchicalRepulsion.hasOwnProperty(t)&&(this.constants.physics.hierarchicalRepulsion[t]=e.physics.hierarchicalRepulsion[t])}}e.onAdd&&(this.triggerFunctions.add=e.onAdd),e.onEdit&&(this.triggerFunctions.edit=e.onEdit),e.onEditEdge&&(this.triggerFunctions.editEdge=e.onEditEdge),e.onConnect&&(this.triggerFunctions.connect=e.onConnect),e.onDelete&&(this.triggerFunctions.del=e.onDelete),o.mergeOptions(this.constants,e,"smoothCurves"),o.mergeOptions(this.constants,e,"hierarchicalLayout"),o.mergeOptions(this.constants,e,"clustering"),o.mergeOptions(this.constants,e,"navigation"),o.mergeOptions(this.constants,e,"keyboard"),o.mergeOptions(this.constants,e,"dataManipulation"),e.dataManipulation&&(this.editMode=this.constants.dataManipulation.initiallyVisible),e.edges&&(e.edges.color!==undefined&&(o.isString(e.edges.color)?(this.constants.edges.color={},this.constants.edges.color.color=e.edges.color,this.constants.edges.color.highlight=e.edges.color,this.constants.edges.color.hover=e.edges.color):(e.edges.color.color!==undefined&&(this.constants.edges.color.color=e.edges.color.color),e.edges.color.highlight!==undefined&&(this.constants.edges.color.highlight=e.edges.color.highlight),e.edges.color.hover!==undefined&&(this.constants.edges.color.hover=e.edges.color.hover))),e.edges.fontColor||e.edges.color!==undefined&&(o.isString(e.edges.color)?this.constants.edges.fontColor=e.edges.color:e.edges.color.color!==undefined&&(this.constants.edges.fontColor=e.edges.color.color)));if(e.nodes&&e.nodes.color){var r=o.parseColor(e.nodes.color);this.constants.nodes.color.background=r.background,this.constants.nodes.color.border=r.border,this.constants.nodes.color.highlight.background=r.highlight.background,this.constants.nodes.color.highlight.border=r.highlight.border,this.constants.nodes.color.hover.background=r.hover.background,this.constants.nodes.color.hover.border=r.hover.border}if(e.groups)for(var i in e.groups)if(e.groups.hasOwnProperty(i)){var s=e.groups[i];this.groups.add(i,s)}if(e.tooltip){for(t in e.tooltip)e.tooltip.hasOwnProperty(t)&&(this.constants.tooltip[t]=e.tooltip[t]);e.tooltip.color&&(this.constants.tooltip.color=o.parseColor(e.tooltip.color))}"clickToUse"in e&&(e.clickToUse?(this.activator=new y(this.frame),this.activator.on("change",this._createKeyBinds.bind(this))):this.activator&&(this.activator.destroy(),delete this.activator));if(e.labels)throw new Error('Option "labels" is deprecated. Use options "locale" and "locales" instead.')}this._loadPhysicsSystem(),this._loadNavigationControls(),this._loadManipulationSystem(),this._configureSmoothCurves(),this._createKeyBinds(),this.setSize(this.constants.width,this.constants.height),this.moving=!0,this.start()},w.prototype._create=function(){while(this.containerElement.hasChildNodes())this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.className="vis network-frame",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);if(!this.frame.canvas.getContext){var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}var t=this;this.drag={},this.pinch={},this.hammer=i(this.frame.canvas,{prevent_default:!0}),this.hammer.on("tap",t._onTap.bind(t)),this.hammer.on("doubletap",t._onDoubleTap.bind(t)),this.hammer.on("hold",t._onHold.bind(t)),this.hammer.on("pinch",t._onPinch.bind(t)),this.hammer.on("touch",t._onTouch.bind(t)),this.hammer.on("dragstart",t._onDragStart.bind(t)),this.hammer.on("drag",t._onDrag.bind(t)),this.hammer.on("dragend",t._onDragEnd.bind(t)),this.hammer.on("mousewheel",t._onMouseWheel.bind(t)),this.hammer.on("DOMMouseScroll",t._onMouseWheel.bind(t)),this.hammer.on("mousemove",t._onMouseMoveTitle.bind(t)),this.hammerFrame=i(this.frame,{prevent_default:!0}),this.hammerFrame.on("release",t._onRelease.bind(t)),this.containerElement.appendChild(this.frame)},w.prototype._createKeyBinds=function(){var e=this;this.keycharm!==undefined&&this.keycharm.destroy(),this.keycharm=s(),this.keycharm.reset(),this.constants.keyboard.enabled&&this.isActive()&&(this.keycharm.bind("up",this._moveUp.bind(e),"keydown"),this.keycharm.bind("up",this._yStopMoving.bind(e),"keyup"),this.keycharm.bind("down",this._moveDown.bind(e),"keydown"),this.keycharm.bind("down",this._yStopMoving.bind(e),"keyup"),this.keycharm.bind("left",this._moveLeft.bind(e),"keydown"),this.keycharm.bind("left",this._xStopMoving.bind(e),"keyup"),this.keycharm.bind("right",this._moveRight.bind(e),"keydown"),this.keycharm.bind("right",this._xStopMoving.bind(e),"keyup"),this.keycharm.bind("=",this._zoomIn.bind(e),"keydown"),this.keycharm.bind("=",this._stopZoom.bind(e),"keyup"),this.keycharm.bind("num+",this._zoomIn.bind(e),"keydown"),this.keycharm.bind("num+",this._stopZoom.bind(e),"keyup"),this.keycharm.bind("num-",this._zoomOut.bind(e),"keydown"),this.keycharm.bind("num-",this._stopZoom.bind(e),"keyup"),this.keycharm.bind("-",this._zoomOut.bind(e),"keydown"),this.keycharm.bind("-",this._stopZoom.bind(e),"keyup"),this.keycharm.bind("[",this._zoomIn.bind(e),"keydown"),this.keycharm.bind("[",this._stopZoom.bind(e),"keyup"),this.keycharm.bind("]",this._zoomOut.bind(e),"keydown"),this.keycharm.bind("]",this._stopZoom.bind(e),"keyup"),this.keycharm.bind("pageup",this._zoomIn.bind(e),"keydown"),this.keycharm.bind("pageup",this._stopZoom.bind(e),"keyup"),this.keycharm.bind("pagedown",this._zoomOut.bind(e),"keydown"),this.keycharm.bind("pagedown",this._stopZoom.bind(e),"keyup")),this.constants.dataManipulation.enabled==1&&(this.keycharm.bind("esc",this._createManipulatorBar.bind(e)),this.keycharm.bind("delete",this._deleteSelected.bind(e)))},w.prototype._getPointer=function(e){return{x:e.pageX-o.getAbsoluteLeft(this.frame.canvas),y:e.pageY-o.getAbsoluteTop(this.frame.canvas)}},w.prototype._onTouch=function(e){this.drag.pointer=this._getPointer(e.gesture.center),this.drag.pinched=!1,this.pinch.scale=this._getScale(),this._handleTouch(this.drag.pointer)},w.prototype._onDragStart=function(){this._handleDragStart()},w.prototype._handleDragStart=function(){var e=this.drag,t=this._getNodeAt(e.pointer);e.dragging=!0,e.selection=[],e.translation=this._getTranslation(),e.nodeId=null;if(t!=null&&this.constants.dragNodes==1){e.nodeId=t.id,t.isSelected()||this._selectObject(t,!1),this.emit("dragStart",{nodeIds:this.getSelection().nodes});for(var n in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(n)){var r=this.selectionObj.nodes[n],i={id:r.id,node:r,x:r.x,y:r.y,xFixed:r.xFixed,yFixed:r.yFixed};r.xFixed=!0,r.yFixed=!0,e.selection.push(i)}}},w.prototype._onDrag=function(e){this._handleOnDrag(e)},w.prototype._handleOnDrag=function(e){if(this.drag.pinched)return;this.releaseNode();var t=this._getPointer(e.gesture.center),n=this,r=this.drag,i=r.selection;if(i&&i.length&&this.constants.dragNodes==1){var s=t.x-r.pointer.x,o=t.y-r.pointer.y;i.forEach(function(e){var t=e.node;e.xFixed||(t.x=n._XconvertDOMtoCanvas(n._XconvertCanvasToDOM(e.x)+s)),e.yFixed||(t.y=n._YconvertDOMtoCanvas(n._YconvertCanvasToDOM(e.y)+o))}),this.moving||(this.moving=!0,this.start())}else if(this.constants.dragNetwork==1){var u=t.x-this.drag.pointer.x,a=t.y-this.drag.pointer.y;this._setTranslation(this.drag.translation.x+u,this.drag.translation.y+a),this._redraw()}},w.prototype._onDragEnd=function(e){this._handleDragEnd(e)},w.prototype._handleDragEnd=function(e){this.drag.dragging=!1;var t=this.drag.selection;t&&t.length?(t.forEach(function(e){e.node.xFixed=e.xFixed,e.node.yFixed=e.yFixed}),this.moving=!0,this.start()):this._redraw(),this.emit("dragEnd",{nodeIds:this.getSelection().nodes})},w.prototype._onTap=function(e){var t=this._getPointer(e.gesture.center);this.pointerPosition=t,this._handleTap(t)},w.prototype._onDoubleTap=function(e){var t=this._getPointer(e.gesture.center);this._handleDoubleTap(t)},w.prototype._onHold=function(e){var t=this._getPointer(e.gesture.center);this.pointerPosition=t,this._handleOnHold(t)},w.prototype._onRelease=function(e){var t=this._getPointer(e.gesture.center);this._handleOnRelease(t)},w.prototype._onPinch=function(e){var t=this._getPointer(e.gesture.center);this.drag.pinched=!0,"scale"in this.pinch||(this.pinch.scale=1);var n=this.pinch.scale*e.gesture.scale;this._zoom(n,t)},w.prototype._zoom=function(e,t){if(this.constants.zoomable==1){var n=this._getScale();e<1e-5&&(e=1e-5),e>10&&(e=10);var r=null;this.drag!==undefined&&this.drag.dragging==1&&(r=this.DOMtoCanvas(this.drag.pointer));var i=this._getTranslation(),s=e/n,o=(1-s)*t.x+i.x*s,u=(1-s)*t.y+i.y*s;this.areaCenter={x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)},this._setScale(e),this._setTranslation(o,u),this.updateClustersDefault();if(r!=null){var a=this.canvasToDOM(r);this.drag.pointer.x=a.x,this.drag.pointer.y=a.y}return this._redraw(),n<e?this.emit("zoom",{direction:"+"}):this.emit("zoom",{direction:"-"}),e}},w.prototype._onMouseWheel=function(e){var t=0;e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3);if(t){var n=this._getScale(),r=t/10;t<0&&(r/=1-r),n*=1+r;var i=u.fakeGesture(this,e),s=this._getPointer(i.center);this._zoom(n,s)}e.preventDefault()},w.prototype._onMouseMoveTitle=function(e){var t=u.fakeGesture(this,e),n=this._getPointer(t.center);this.popupObj&&this._checkHidePopup(n);var r=this,i=function(){r._checkShowPopup(n)};this.popupTimer&&clearInterval(this.popupTimer),this.drag.dragging||(this.popupTimer=setTimeout(i,this.constants.tooltip.delay));if(this.constants.hover==1){for(var s in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(s)&&(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]);var o=this._getNodeAt(n);o==null&&(o=this._getEdgeAt(n)),o!=null&&this._hoverObject(o);for(var a in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(a)&&(o instanceof d&&o.id!=a||o instanceof v||o==null)&&(this._blurObject(this.hoverObj.nodes[a]),delete this.hoverObj.nodes[a]);this.redraw()}},w.prototype._checkShowPopup=function(e){var t={left:this._XconvertDOMtoCanvas(e.x),top:this._YconvertDOMtoCanvas(e.y),right:this._XconvertDOMtoCanvas(e.x),bottom:this._YconvertDOMtoCanvas(e.y)},n,r=this.popupObj;if(this.popupObj==undefined){var i=this.nodes;for(n in i)if(i.hasOwnProperty(n)){var s=i[n];if(s.getTitle()!==undefined&&s.isOverlappingWith(t)){this.popupObj=s;break}}}if(this.popupObj===undefined){var o=this.edges;for(n in o)if(o.hasOwnProperty(n)){var u=o[n];if(u.connected&&u.getTitle()!==undefined&&u.isOverlappingWith(t)){this.popupObj=u;break}}}if(this.popupObj){if(this.popupObj!=r){var a=this;a.popup||(a.popup=new m(a.frame,a.constants.tooltip)),a.popup.setPosition(e.x-3,e.y-3),a.popup.setText(a.popupObj.getTitle()),a.popup.show()}}else this.popup&&this.popup.hide()},w.prototype._checkHidePopup=function(e){if(!this.popupObj||!this._getNodeAt(e))this.popupObj=undefined,this.popup&&this.popup.hide()},w.prototype.setSize=function(e,t){var n=!1,r=this.frame.canvas.width,i=this.frame.canvas.height;e!=this.constants.width||t!=this.constants.height||this.frame.style.width!=e||this.frame.style.height!=t?(this.frame.style.width=e,this.frame.style.height=t,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.constants.width=e,this.constants.height=t,n=!0):(this.frame.canvas.width!=this.frame.canvas.clientWidth&&(this.frame.canvas.width=this.frame.canvas.clientWidth,n=!0),this.frame.canvas.height!=this.frame.canvas.clientHeight&&(this.frame.canvas.height=this.frame.canvas.clientHeight,n=!0)),n==1&&this.emit("resize",{width:this.frame.canvas.width,height:this.frame.canvas.height,oldWidth:r,oldHeight:i})},w.prototype._setNodes=function(e){var t=this.nodesData;if(e instanceof a||e instanceof f)this.nodesData=e;else if(Array.isArray(e))this.nodesData=new a,this.nodesData.add(e);else{if(!!e)throw new TypeError("Array or DataSet expected");this.nodesData=new a}t&&o.forEach(this.nodesListeners,function(e,n){t.off(n,e)}),this.nodes={};if(this.nodesData){var n=this;o.forEach(this.nodesListeners,function(e,t){n.nodesData.on(t,e)});var r=this.nodesData.getIds();this._addNodes(r)}this._updateSelection()},w.prototype._addNodes=function(e){var t;for(var n=0,r=e.length;n<r;n++){t=e[n];var i=this.nodesData.get(t),s=new d(i,this.images,this.groups,this.constants);this.nodes[t]=s;if((s.xFixed==0||s.yFixed==0)&&(s.x===null||s.y===null)){var o=1*e.length+10,u=2*Math.PI*Math.random();s.xFixed==0&&(s.x=o*Math.cos(u)),s.yFixed==0&&(s.y=o*Math.sin(u))}this.moving=!0}this._updateNodeIndexList(),this.constants.hierarchicalLayout.enabled==1&&this.initializing==0&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateCalculationNodes(),this._reconnectEdges(),this._updateValueRange(this.nodes),this.updateLabels()},w.prototype._updateNodes=function(e,t){var n=this.nodes;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=n[s],u=t[r];o?o.setProperties(u,this.constants):(o=new d(properties,this.images,this.groups,this.constants),n[s]=o)}this.moving=!0,this.constants.hierarchicalLayout.enabled==1&&this.initializing==0&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateNodeIndexList(),this._updateValueRange(n)},w.prototype._removeNodes=function(e){var t=this.nodes;for(var n=0,r=e.length;n<r;n++){var i=e[n];delete t[i]}this._updateNodeIndexList(),this.constants.hierarchicalLayout.enabled==1&&this.initializing==0&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateCalculationNodes(),this._reconnectEdges(),this._updateSelection(),this._updateValueRange(t)},w.prototype._setEdges=function(e){var t=this.edgesData;if(e instanceof a||e instanceof f)this.edgesData=e;else if(Array.isArray(e))this.edgesData=new a,this.edgesData.add(e);else{if(!!e)throw new TypeError("Array or DataSet expected");this.edgesData=new a}t&&o.forEach(this.edgesListeners,function(e,n){t.off(n,e)}),this.edges={};if(this.edgesData){var n=this;o.forEach(this.edgesListeners,function(e,t){n.edgesData.on(t,e)});var r=this.edgesData.getIds();this._addEdges(r)}this._reconnectEdges()},w.prototype._addEdges=function(e){var t=this.edges,n=this.edgesData;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=t[s];o&&o.disconnect();var u=n.get(s,{showInternalIds:!0});t[s]=new v(u,this,this.constants)}this.moving=!0,this._updateValueRange(t),this._createBezierNodes(),this._updateCalculationNodes(),this.constants.hierarchicalLayout.enabled==1&&this.initializing==0&&(this._resetLevels(),this._setupHierarchicalLayout())},w.prototype._updateEdges=function(e){var t=this.edges,n=this.edgesData;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=n.get(s),u=t[s];u?(u.disconnect(),u.setProperties(o,this.constants),u.connect()):(u=new v(o,this,this.constants),this.edges[s]=u)}this._createBezierNodes(),this.constants.hierarchicalLayout.enabled==1&&this.initializing==0&&(this._resetLevels(),this._setupHierarchicalLayout()),this.moving=!0,this._updateValueRange(t)},w.prototype._removeEdges=function(e){var t=this.edges;for(var n=0,r=e.length;n<r;n++){var i=e[n],s=t[i];s&&(s.via!=null&&delete this.sectors.support.nodes[s.via.id],s.disconnect(),delete t[i])}this.moving=!0,this._updateValueRange(t),this.constants.hierarchicalLayout.enabled==1&&this.initializing==0&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateCalculationNodes()},w.prototype._reconnectEdges=function(){var e,t=this.nodes,n=this.edges;for(e in t)t.hasOwnProperty(e)&&(t[e].edges=[],t[e].dynamicEdges=[]);for(e in n)if(n.hasOwnProperty(e)){var r=n[e];r.from=null,r.to=null,r.connect()}},w.prototype._updateValueRange=function(e){var t,n=undefined,r=undefined;for(t in e)if(e.hasOwnProperty(t)){var i=e[t].getValue();i!==undefined&&(n=n===undefined?i:Math.min(i,n),r=r===undefined?i:Math.max(i,r))}if(n!==undefined&&r!==undefined)for(t in e)e.hasOwnProperty(t)&&e[t].setValueRange(n,r)},w.prototype.redraw=function(){this.setSize(this.constants.width,this.constants.height),this._redraw()},w.prototype._redraw=function(){var e=this.frame.canvas.getContext("2d"),t=this.frame.canvas.width,n=this.frame.canvas.height;e.clearRect(0,0,t,n),e.save(),e.translate(this.translation.x,this.translation.y),e.scale(this.scale,this.scale),this.canvasTopLeft={x:this._XconvertDOMtoCanvas(0),y:this._YconvertDOMtoCanvas(0)},this.canvasBottomRight={x:this._XconvertDOMtoCanvas(this.frame.canvas.clientWidth),y:this._YconvertDOMtoCanvas(this.frame.canvas.clientHeight)},this._doInAllSectors("_drawAllSectorNodes",e),(this.drag.dragging==0||this.drag.dragging===undefined||this.constants.hideEdgesOnDrag==0)&&this._doInAllSectors("_drawEdges",e),(this.drag.dragging==0||this.drag.dragging===undefined||this.constants.hideNodesOnDrag==0)&&this._doInAllSectors("_drawNodes",e,!1),this.controlNodesActive==1&&this._doInAllSectors("_drawControlNodes",e),e.restore()},w.prototype._setTranslation=function(e,t){this.translation===undefined&&(this.translation={x:0,y:0}),e!==undefined&&(this.translation.x=e),t!==undefined&&(this.translation.y=t),this.emit("viewChanged")},w.prototype._getTranslation=function(){return{x:this.translation.x,y:this.translation.y}},w.prototype._setScale=function(e){this.scale=e},w.prototype._getScale=function(){return this.scale},w.prototype._XconvertDOMtoCanvas=function(e){return(e-this.translation.x)/this.scale},w.prototype._XconvertCanvasToDOM=function(e){return e*this.scale+this.translation.x},w.prototype._YconvertDOMtoCanvas=function(e){return(e-this.translation.y)/this.scale},w.prototype._YconvertCanvasToDOM=function(e){return e*this.scale+this.translation.y},w.prototype.canvasToDOM=function(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}},w.prototype.DOMtoCanvas=function(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}},w.prototype._drawNodes=function(e,t){t===undefined&&(t=!1);var n=this.nodes,r=[];for(var i in n)n.hasOwnProperty(i)&&(n[i].setScaleAndPos(this.scale,this.canvasTopLeft,this.canvasBottomRight),n[i].isSelected()?r.push(i):(n[i].inArea()||t)&&n[i].draw(e));for(var s=0,o=r.length;s<o;s++)(n[r[s]].inArea()||t)&&n[r[s]].draw(e)},w.prototype._drawEdges=function(e){var t=this.edges;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.setScale(this.scale),r.connected&&t[n].draw(e)}},w.prototype._drawControlNodes=function(e){var t=this.edges;for(var n in t)t.hasOwnProperty(n)&&t[n]._drawControlNodes(e)},w.prototype._stabilize=function(){this.constants.freezeForStabilization==1&&this._freezeDefinedNodes();var e=0;while(this.moving&&e<this.constants.stabilizationIterations)this._physicsTick(),e++;this.zoomExtent(undefined,!1,!0),this.constants.freezeForStabilization==1&&this._restoreFrozenNodes()},w.prototype._freezeDefinedNodes=function(){var e=this.nodes;for(var t in e)e.hasOwnProperty(t)&&e[t].x!=null&&e[t].y!=null&&(e[t].fixedData.x=e[t].xFixed,e[t].fixedData.y=e[t].yFixed,e[t].xFixed=!0,e[t].yFixed=!0)},w.prototype._restoreFrozenNodes=function(){var e=this.nodes;for(var t in e)e.hasOwnProperty(t)&&e[t].fixedData.x!=null&&(e[t].xFixed=e[t].fixedData.x,e[t].yFixed=e[t].fixedData.y)},w.prototype._isMoving=function(e){var t=this.nodes;for(var n in t)if(t.hasOwnProperty(n)&&t[n].isMoving(e))return!0;return!1},w.prototype._discreteStepNodes=function(){var e=this.physicsDiscreteStepsize,t=this.nodes,n,r=!1;if(this.constants.maxVelocity>0)for(n in t)t.hasOwnProperty(n)&&(t[n].discreteStepLimited(e,this.constants.maxVelocity),r=!0);else for(n in t)t.hasOwnProperty(n)&&(t[n].discreteStep(e),r=!0);if(r==1){var i=this.constants.minVelocity/Math.max(this.scale,.05);return i>.5*this.constants.maxVelocity?!0:this._isMoving(i)}return!1},w.prototype._physicsTick=function(){if(!this.freezeSimulation&&this.moving==1){var e=!1,t=!1;this._doInAllActiveSectors("_initializeForceCalculation");var n=this._doInAllActiveSectors("_discreteStepNodes");this.constants.smoothCurves.enabled==1&&this.constants.smoothCurves.dynamic==1&&(t=this._doInSupportSector("_discreteStepNodes"));for(var r=0;r<n.length;r++)e=n[0]||e;this.moving=e||t,this.stabilizationIterations++}},w.prototype._animationStep=function(){this.timer=undefined,this._handleNavigation(),this.start();var e=Date.now(),t=1;this._physicsTick();var n=Date.now()-e;while(n<.9*(this.renderTimestep-this.renderTime)&&t<this.maxPhysicsTicksPerRender)this._physicsTick(),n=Date.now()-e,t++;var r=Date.now();this._redraw(),this.renderTime=Date.now()-r},typeof window!="undefined"&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),w.prototype.start=function(){if(this.moving==1||this.xIncrement!=0||this.yIncrement!=0||this.zoomIncrement!=0){this.startedStabilization==0&&(this.emit("startStabilization"),this.startedStabilization=!0);if(!this.timer){var e=navigator.userAgent.toLowerCase(),t=!1;e.indexOf("msie 9.0")!=-1?t=!0:e.indexOf("safari")!=-1&&e.indexOf("chrome")<=-1&&(t=!0),t==1?this.timer=window.setTimeout(this._animationStep.bind(this),this.renderTimestep):this.timer=window.requestAnimationFrame(this._animationStep.bind(this),this.renderTimestep)}}else{this._redraw();if(this.stabilizationIterations>0){var n=this,r={iterations:n.stabilizationIterations};n.stabilizationIterations=0,n.startedStabilization=!1,setTimeout(function(){n.emit("stabilized",r)},0)}}},w.prototype._handleNavigation=function(){if(this.xIncrement!=0||this.yIncrement!=0){var e=this._getTranslation();this._setTranslation(e.x+this.xIncrement,e.y+this.yIncrement)}if(this.zoomIncrement!=0){var t={x:this.frame.canvas.clientWidth/2,y:this.frame.canvas.clientHeight/2};this._zoom(this.scale*(1+this.zoomIncrement),t)}},w.prototype.toggleFreeze=function(){this.freezeSimulation==0?this.freezeSimulation=!0:(this.freezeSimulation=!1,this.start())},w.prototype._configureSmoothCurves=function(e){e===undefined&&(e=!0);if(this.constants.smoothCurves.enabled==1&&this.constants.smoothCurves.dynamic==1){this._createBezierNodes();for(var t in this.sectors.support.nodes)this.sectors.support.nodes.hasOwnProperty(t)&&this.edges[this.sectors.support.nodes[t].parentEdgeId]===undefined&&delete this.sectors.support.nodes[t]}else{this.sectors.support.nodes={};for(var n in this.edges)this.edges.hasOwnProperty(n)&&(this.edges[n].via=null)}this._updateCalculationNodes(),e||(this.moving=!0,this.start())},w.prototype._createBezierNodes=function(){if(this.constants.smoothCurves.enabled==1&&this.constants.smoothCurves.dynamic==1)for(var e in this.edges)if(this.edges.hasOwnProperty(e)){var t=this.edges[e];if(t.via==null){var n="edgeId:".concat(t.id);this.sectors.support.nodes[n]=new d({id:n,mass:1,shape:"circle",image:"",internalMultiplier:1},{},{},this.constants),t.via=this.sectors.support.nodes[n],t.via.parentEdgeId=t.id,t.positionBezierNode()}}},w.prototype._initializeMixinLoaders=function(){for(var e in g)g.hasOwnProperty(e)&&(w.prototype[e]=g[e])},w.prototype.storePosition=function(){console.log("storePosition is depricated: use .storePositions() from now on."),this.storePositions()},w.prototype.storePositions=function(){var e=[];for(var t in this.nodes)if(this.nodes.hasOwnProperty(t)){var n=this.nodes[t],r=!this.nodes.xFixed,i=!this.nodes.yFixed;(this.nodesData._data[t].x!=Math.round(n.x)||this.nodesData._data[t].y!=Math.round(n.y))&&e.push({id:t,x:Math.round(n.x),y:Math.round(n.y),allowedToMoveX:r,allowedToMoveY:i})}this.nodesData.update(e)},w.prototype.getPositions=function(e){var t={};if(e!==undefined){if(Array.isArray(e)==1){for(var n=0;n<e.length;n++)if(this.nodes[e[n]]!==undefined){var r=this.nodes[e[n]];t[e[n]]={x:Math.round(r.x),y:Math.round(r.y)}}}else if(this.nodes[e]!==undefined){var r=this.nodes[e];t[e]={x:Math.round(r.x),y:Math.round(r.y)}}}else for(var i in this.nodes)if(this.nodes.hasOwnProperty(i)){var r=this.nodes[i];t[i]={x:Math.round(r.x),y:Math.round(r.y)}}return t},w.prototype.focusOnNode=function(e,t){if(this.nodes.hasOwnProperty(e)){t===undefined&&(t={});var n={x:this.nodes[e].x,y:this.nodes[e].y};t.position=n,t.lockedOnNode=e,this.moveTo(t)}else console.log("This nodeId cannot be found.")},w.prototype.moveTo=function(e){if(e===undefined){e={};return}e.offset===undefined&&(e.offset={x:0,y:0}),e.offset.x===undefined&&(e.offset.x=0),e.offset.y===undefined&&(e.offset.y=0),e.scale===undefined&&(e.scale=this._getScale()),e.position===undefined&&(e.position=this._getTranslation()),e.animation===undefined&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===undefined&&(e.animation.duration=1e3),e.animation.easingFunction===undefined&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)},w.prototype.animateView=function(e){if(e===undefined){e={};return}this.releaseNode(),e.locked==1&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(1),this.sourceScale=this._getScale(),this.sourceTranslation=this._getTranslation(),this.targetScale=e.scale,this._setScale(this.targetScale);var t=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),n={x:t.x-e.position.x,y:t.y-e.position.y};this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration==0?this.lockedOnNodeId!=null?(this._classicRedraw=this._redraw,this._redraw=this._lockedRedraw):(this._setScale(this.targetScale),this._setTranslation(this.targetTranslation.x,this.targetTranslation.y),this._redraw()):(this.animationSpeed=1/(this.renderRefreshRate*e.animation.duration*.001)||1/this.renderRefreshRate,this.animationEasingFunction=e.animation.easingFunction,this._classicRedraw=this._redraw,this._redraw=this._transitionRedraw,this._redraw(),this.moving=!0,this.start())},w.prototype._lockedRedraw=function(){var e={x:this.nodes[this.lockedOnNodeId].x,y:this.nodes[this.lockedOnNodeId].y},t=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),n={x:t.x-e.x,y:t.y-e.y},r=this._getTranslation(),i={x:r.x+n.x*this.scale+this.lockedOnNodeOffset.x,y:r.y+n.y*this.scale+this.lockedOnNodeOffset.y};this._setTranslation(i.x,i.y),this._classicRedraw()},w.prototype.releaseNode=function(){this.lockedOnNodeId!=null&&(this._redraw=this._classicRedraw,this.lockedOnNodeId=null,this.lockedOnNodeOffset=null)},w.prototype._transitionRedraw=function(e){this.easingTime=e||this.easingTime+this.animationSpeed,this.easingTime+=this.animationSpeed;var t=o.easingFunctions[this.animationEasingFunction](this.easingTime);this._setScale(this.sourceScale+(this.targetScale-this.sourceScale)*t),this._setTranslation(this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*t,this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*t),this._classicRedraw(),this.moving=!0,this.easingTime>=1&&(this.easingTime=0,this.lockedOnNodeId!=null?this._redraw=this._lockedRedraw:this._redraw=this._classicRedraw,this.emit("animationFinished"))},w.prototype._classicRedraw=function(){},w.prototype.isActive=function(){return!this.activator||this.activator.active},w.prototype.setScale=function(){return this._setScale()},w.prototype.getScale=function(){return this._getScale()},w.prototype.getCenterCoordinates=function(){return this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight})},e.exports=w},function(e,t,n){function s(e,t,n){if(!t)throw"No network provided";var i=["edges","physics"],s=r.selectiveBridgeObject(i,n);this.options=s.edges,this.physics=s.physics,this.options.smoothCurves=n.smoothCurves,this.network=t,this.id=undefined,this.fromId=undefined,this.toId=undefined,this.title=undefined,this.widthSelected=this.options.width*this.options.widthSelectionMultiplier,this.value=undefined,this.selected=!1,this.hover=!1,this.labelDimensions={top:0,left:0,width:0,height:0,yLine:0},this.dirtyLabel=!0,this.from=null,this.to=null,this.via=null,this.originalFromId=[],this.originalToId=[],this.connected=!1,this.widthFixed=!1,this.lengthFixed=!1,this.setProperties(e),this.controlNodesEnabled=!1,this.controlNodes={from:null,to:null,positions:{}},this.connectedNode=null}var r=n(1),i=n(40);s.prototype.setProperties=function(e){if(!e)return;var t=["style","fontSize","fontFace","fontColor","fontFill","width","widthSelectionMultiplier","hoverWidth","arrowScaleFactor","dash","inheritColor"];r.selectiveDeepExtend(t,this.options,e),e.from!==undefined&&(this.fromId=e.from),e.to!==undefined&&(this.toId=e.to),e.id!==undefined&&(this.id=e.id),e.label!==undefined&&(this.label=e.label,this.dirtyLabel=!0),e.title!==undefined&&(this.title=e.title),e.value!==undefined&&(this.value=e.value),e.length!==undefined&&(this.physics.springLength=e.length),e.color!==undefined&&(this.options.inheritColor=!1,r.isString(e.color)?(this.options.color.color=e.color,this.options.color.highlight=e.color):(e.color.color!==undefined&&(this.options.color.color=e.color.color),e.color.highlight!==undefined&&(this.options.color.highlight=e.color.highlight),e.color.hover!==undefined&&(this.options.color.hover=e.color.hover))),this.connect(),this.widthFixed=this.widthFixed||e.width!==undefined,this.lengthFixed=this.lengthFixed||e.length!==undefined,this.widthSelected=this.options.width*this.options.widthSelectionMultiplier;switch(this.options.style){case"line":this.draw=this._drawLine;break;case"arrow":this.draw=this._drawArrow;break;case"arrow-center":this.draw=this._drawArrowCenter;break;case"dash-line":this.draw=this._drawDashLine;break;default:this.draw=this._drawLine}},s.prototype.connect=function(){this.disconnect(),this.from=this.network.nodes[this.fromId]||null,this.to=this.network.nodes[this.toId]||null,this.connected=this.from&&this.to,this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this))},s.prototype.disconnect=function(){this.from&&(this.from.detachEdge(this),this.from=null),this.to&&(this.to.detachEdge(this),this.to=null),this.connected=!1},s.prototype.getTitle=function(){return typeof this.title=="function"?this.title():this.title},s.prototype.getValue=function(){return this.value},s.prototype.setValueRange=function(e,t){if(!this.widthFixed&&this.value!==undefined){var n=(this.options.widthMax-this.options.widthMin)/(t-e);this.options.width=(this.value-e)*n+this.options.widthMin,this.widthSelected=this.options.width*this.options.widthSelectionMultiplier}},s.prototype.draw=function(e){throw"Method draw not initialized in edge"},s.prototype.isOverlappingWith=function(e){if(this.connected){var t=10,n=this.from.x,r=this.from.y,i=this.to.x,s=this.to.y,o=e.left,u=e.top,a=this._getDistanceToEdge(n,r,i,s,o,u);return a<t}return!1},s.prototype._getColor=function(){var e=this.options.color;if(this.options.inheritColor=="to")e={highlight:this.to.options.color.highlight.border,hover:this.to.options.color.hover.border,color:this.to.options.color.border};else if(this.options.inheritColor=="from"||this.options.inheritColor==1)e={highlight:this.from.options.color.highlight.border,hover:this.from.options.color.hover.border,color:this.from.options.color.border};return this.selected==1?e.highlight:this.hover==1?e.hover:e.color},s.prototype._drawLine=function(e){e.strokeStyle=this._getColor(),e.lineWidth=this._getLineWidth();if(this.from!=this.to){var t=this._line(e),n;if(this.label){if(this.options.smoothCurves.enabled==1&&t!=null){var r=.5*(.5*(this.from.x+t.x)+.5*(this.to.x+t.x)),i=.5*(.5*(this.from.y+t.y)+.5*(this.to.y+t.y));n={x:r,y:i}}else n=this._pointOnLine(.5);this._label(e,this.label,n.x,n.y)}}else{var s,o,u=this.physics.springLength/4,a=this.from;a.width||a.resize(e),a.width>a.height?(s=a.x+a.width/2,o=a.y-u):(s=a.x+u,o=a.y-a.height/2),this._circle(e,s,o,u),n=this._pointOnCircle(s,o,u,.5),this._label(e,this.label,n.x,n.y)}},s.prototype._getLineWidth=function(){return this.selected==1?Math.max(Math.min(this.widthSelected,this.options.widthMax),.3*this.networkScaleInv):this.hover==1?Math.max(Math.min(this.options.hoverWidth,this.options.widthMax),.3*this.networkScaleInv):Math.max(this.options.width,.3*this.networkScaleInv)},s.prototype._getViaCoordinates=function(){var e=null,t=null,n=this.options.smoothCurves.roundness,r=this.options.smoothCurves.type,i=Math.abs(this.from.x-this.to.x),s=Math.abs(this.from.y-this.to.y);return r=="discrete"||r=="diagonalCross"?Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?(this.from.y>this.to.y?this.from.x<this.to.x?(e=this.from.x+n*s,t=this.from.y-n*s):this.from.x>this.to.x&&(e=this.from.x-n*s,t=this.from.y-n*s):this.from.y<this.to.y&&(this.from.x<this.to.x?(e=this.from.x+n*s,t=this.from.y+n*s):this.from.x>this.to.x&&(e=this.from.x-n*s,t=this.from.y+n*s)),r=="discrete"&&(e=i<n*s?this.from.x:e)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>this.to.y?this.from.x<this.to.x?(e=this.from.x+n*i,t=this.from.y-n*i):this.from.x>this.to.x&&(e=this.from.x-n*i,t=this.from.y-n*i):this.from.y<this.to.y&&(this.from.x<this.to.x?(e=this.from.x+n*i,t=this.from.y+n*i):this.from.x>this.to.x&&(e=this.from.x-n*i,t=this.from.y+n*i)),r=="discrete"&&(t=s<n*i?this.from.y:t)):r=="straightCross"?Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?(e=this.from.x,this.from.y<this.to.y?t=this.to.y-(1-n)*s:t=this.to.y+(1-n)*s):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.x<this.to.x?e=this.to.x-(1-n)*i:e=this.to.x+(1-n)*i,t=this.from.y):r=="horizontal"?(this.from.x<this.to.x?e=this.to.x-(1-n)*i:e=this.to.x+(1-n)*i,t=this.from.y):r=="vertical"?(e=this.from.x,this.from.y<this.to.y?t=this.to.y-(1-n)*s:t=this.to.y+(1-n)*s):Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?this.from.y>this.to.y?this.from.x<this.to.x?(e=this.from.x+n*s,t=this.from.y-n*s,e=this.to.x<e?this.to.x:e):this.from.x>this.to.x&&(e=this.from.x-n*s,t=this.from.y-n*s,e=this.to.x>e?this.to.x:e):this.from.y<this.to.y&&(this.from.x<this.to.x?(e=this.from.x+n*s,t=this.from.y+n*s,e=this.to.x<e?this.to.x:e):this.from.x>this.to.x&&(e=this.from.x-n*s,t=this.from.y+n*s,e=this.to.x>e?this.to.x:e)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>this.to.y?this.from.x<this.to.x?(e=this.from.x+n*i,t=this.from.y-n*i,t=this.to.y>t?this.to.y:t):this.from.x>this.to.x&&(e=this.from.x-n*i,t=this.from.y-n*i,t=this.to.y>t?this.to.y:t):this.from.y<this.to.y&&(this.from.x<this.to.x?(e=this.from.x+n*i,t=this.from.y+n*i,t=this.to.y<t?this.to.y:t):this.from.x>this.to.x&&(e=this.from.x-n*i,t=this.from.y+n*i,t=this.to.y<t?this.to.y:t))),{x:e,y:t}},s.prototype._line=function(e){e.beginPath(),e.moveTo(this.from.x,this.from.y);if(this.options.smoothCurves.enabled==1){if(this.options.smoothCurves.dynamic==0){var t=this._getViaCoordinates();return t.x==null?(e.lineTo(this.to.x,this.to.y),e.stroke(),null):(e.quadraticCurveTo(t.x,t.y,this.to.x,this.to.y),e.stroke(),t)}return e.quadraticCurveTo(this.via.x,this.via.y,this.to.x,this.to.y),e.stroke(),this.via}return e.lineTo(this.to.x,this.to.y),e.stroke(),null},s.prototype._circle=function(e,t,n,r){e.beginPath(),e.arc(t,n,r,0,2*Math.PI,!1),e.stroke()},s.prototype._label=function(e,t,n,r){if(t){e.font=(this.from.selected||this.to.selected?"bold ":"")+this.options.fontSize+"px "+this.options.fontFace;var i;if(this.dirtyLabel==1){var s=String(t).split("\n"),o=s.length,u=Number(this.options.fontSize)+4;i=r+(1-o)/2*u;var a=e.measureText(s[0]).width;for(var f=1;f<o;f++){var l=e.measureText(s[f]).width;a=l>a?l:a}var c=this.options.fontSize*o,h=n-a/2,p=r-c/2;this.labelDimensions={top:p,left:h,width:a,height:c,yLine:i}}this.options.fontFill!==undefined&&this.options.fontFill!==null&&this.options.fontFill!=="none"&&(e.fillStyle=this.options.fontFill,e.fillRect(this.labelDimensions.left,this.labelDimensions.top,this.labelDimensions.width,this.labelDimensions.height)),e.fillStyle=this.options.fontColor||"black",e.textAlign="center",e.textBaseline="middle",i=this.labelDimensions.yLine;for(var f=0;f<o;f++)e.fillText(s[f],n,i),i+=u}},s.prototype._drawDashLine=function(e){e.strokeStyle=this._getColor(),e.lineWidth=this._getLineWidth();var t=null;if(e.mozDash!==undefined||e.setLineDash!==undefined){var n=[0];this.options.dash.length!==undefined&&this.options.dash.gap!==undefined?n=[this.options.dash.length,this.options.dash.gap]:n=[5,5],typeof e.setLineDash!="undefined"?(e.setLineDash(n),e.lineDashOffset=0):(e.mozDash=n,e.mozDashOffset=0),t=this._line(e),typeof e.setLineDash!="undefined"?(e.setLineDash([0]),e.lineDashOffset=0):(e.mozDash=[0],e.mozDashOffset=0)}else e.beginPath(),e.lineCap="round",this.options.dash.altLength!==undefined?e.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.options.dash.length,this.options.dash.gap,this.options.dash.altLength,this.options.dash.gap]):this.options.dash.length!==undefined&&this.options.dash.gap!==undefined?e.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.options.dash.length,this.options.dash.gap]):(e.moveTo(this.from.x,this.from.y),e.lineTo(this.to.x,this.to.y)),e.stroke();if(this.label){var r;if(this.options.smoothCurves.enabled==1&&t!=null){var i=.5*(.5*(this.from.x+t.x)+.5*(this.to.x+t.x)),s=.5*(.5*(this.from.y+t.y)+.5*(this.to.y+t.y));r={x:i,y:s}}else r=this._pointOnLine(.5);this._label(e,this.label,r.x,r.y)}},s.prototype._pointOnLine=function(e){return{x:(1-e)*this.from.x+e*this.to.x,y:(1-e)*this.from.y+e*this.to.y}},s.prototype._pointOnCircle=function(e,t,n,r){var i=(r-3/8)*2*Math.PI;return{x:e+n*Math.cos(i),y:t-n*Math.sin(i)}},s.prototype._drawArrowCenter=function(e){var t;e.strokeStyle=this._getColor(),e.fillStyle=e.strokeStyle,e.lineWidth=this._getLineWidth();if(this.from!=this.to){var n=this._line(e),r=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),i=(10+5*this.options.width)*this.options.arrowScaleFactor;if(this.options.smoothCurves.enabled==1&&n!=null){var s=.5*(.5*(this.from.x+n.x)+.5*(this.to.x+n.x)),o=.5*(.5*(this.from.y+n.y)+.5*(this.to.y+n.y));t={x:s,y:o}}else t=this._pointOnLine(.5);e.arrow(t.x,t.y,r,i),e.fill(),e.stroke(),this.label&&this._label(e,this.label,t.x,t.y)}else{var u,a,f=.25*Math.max(100,this.physics.springLength),l=this.from;l.width||l.resize(e),l.width>l.height?(u=l.x+l.width*.5,a=l.y-f):(u=l.x+f,a=l.y-l.height*.5),this._circle(e,u,a,f);var r=.2*Math.PI,i=(10+5*this.options.width)*this.options.arrowScaleFactor;t=this._pointOnCircle(u,a,f,.5),e.arrow(t.x,t.y,r,i),e.fill(),e.stroke(),this.label&&(t=this._pointOnCircle(u,a,f,.5),this._label(e,this.label,t.x,t.y))}},s.prototype._drawArrow=function(e){e.strokeStyle=this._getColor(),e.fillStyle=e.strokeStyle,e.lineWidth=this._getLineWidth();var t,n;if(this.from!=this.to){t=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x);var r=this.to.x-this.from.x,i=this.to.y-this.from.y,s=Math.sqrt(r*r+i*i),o=this.from.distanceToBorder(e,t+Math.PI),u=(s-o)/s,a=u*this.from.x+(1-u)*this.to.x,f=u*this.from.y+(1-u)*this.to.y,l;this.options.smoothCurves.dynamic==1&&this.options.smoothCurves.enabled==1?l=this.via:this.options.smoothCurves.enabled==1&&(l=this._getViaCoordinates()),this.options.smoothCurves.enabled==1&&l.x!=null&&(t=Math.atan2(this.to.y-l.y,this.to.x-l.x),r=this.to.x-l.x,i=this.to.y-l.y,s=Math.sqrt(r*r+i*i));var c=this.to.distanceToBorder(e,t),h=(s-c)/s,p,d;this.options.smoothCurves.enabled==1&&l.x!=null?(p=(1-h)*l.x+h*this.to.x,d=(1-h)*l.y+h*this.to.y):(p=(1-h)*this.from.x+h*this.to.x,d=(1-h)*this.from.y+h*this.to.y),e.beginPath(),e.moveTo(a,f),this.options.smoothCurves.enabled==1&&l.x!=null?e.quadraticCurveTo(l.x,l.y,p,d):e.lineTo(p,d),e.stroke(),n=(10+5*this.options.width)*this.options.arrowScaleFactor,e.arrow(p,d,t,n),e.fill(),e.stroke();if(this.label){var v;if(this.options.smoothCurves.enabled==1&&l!=null){var m=.5*(.5*(this.from.x+l.x)+.5*(this.to.x+l.x)),g=.5*(.5*(this.from.y+l.y)+.5*(this.to.y+l.y));v={x:m,y:g}}else v=this._pointOnLine(.5);this._label(e,this.label,v.x,v.y)}}else{var y=this.from,b,w,E,S=.25*Math.max(100,this.physics.springLength);y.width||y.resize(e),y.width>y.height?(b=y.x+y.width*.5,w=y.y-S,E={x:b,y:y.y,angle:.9*Math.PI}):(b=y.x+S,w=y.y-y.height*.5,E={x:y.x,y:w,angle:.6*Math.PI}),e.beginPath(),e.arc(b,w,S,0,2*Math.PI,!1),e.stroke();var n=(10+5*this.options.width)*this.options.arrowScaleFactor;e.arrow(E.x,E.y,E.angle,n),e.fill(),e.stroke(),this.label&&(v=this._pointOnCircle(b,w,S,.5),this._label(e,this.label,v.x,v.y))}},s.prototype._getDistanceToEdge=function(e,t,n,r,i,s){var o=0;if(this.from!=this.to)if(this.options.smoothCurves.enabled==1){var u,a;if(this.options.smoothCurves.enabled==1&&this.options.smoothCurves.dynamic==1)u=this.via.x,a=this.via.y;else{var f=this._getViaCoordinates();u=f.x,a=f.y}var l=1e9,c,h,p,d,v,m,g;for(h=0;h<10;h++)p=.1*h,d=Math.pow(1-p,2)*e+2*p*(1-p)*u+Math.pow(p,2)*n,v=Math.pow(1-p,2)*t+2*p*(1-p)*a+Math.pow(p,2)*r,h>0&&(c=this._getDistanceToLine(m,g,d,v,i,s),l=c<l?c:l),m=d,g=v;o=l}else o=this._getDistanceToLine(e,t,n,r,i,s);else{var d,v,y,b,w=.25*this.physics.springLength,E=this.from;E.width>E.height?(d=E.x+.5*E.width,v=E.y-w):(d=E.x+w,v=E.y-.5*E.height),y=d-i,b=v-s,o=Math.abs(Math.sqrt(y*y+b*b)-w)}return this.labelDimensions.left<i&&this.labelDimensions.left+this.labelDimensions.width>i&&this.labelDimensions.top<s&&this.labelDimensions.top+this.labelDimensions.height>s?0:o},s.prototype._getDistanceToLine=function(e,t,n,r,i,s){var o=n-e,u=r-t,a=o*o+u*u,f=((i-e)*o+(s-t)*u)/a;f>1?f=1:f<0&&(f=0);var l=e+f*o,c=t+f*u,h=l-i,p=c-s;return Math.sqrt(h*h+p*p)},s.prototype.setScale=function(e){this.networkScaleInv=1/e},s.prototype.select=function(){this.selected=!0},s.prototype.unselect=function(){this.selected=!1},s.prototype.positionBezierNode=function(){this.via!==null&&this.from!==null&&this.to!==null&&(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y))},s.prototype._drawControlNodes=function(e){if(this.controlNodesEnabled==1){if(this.controlNodes.from===null&&this.controlNodes.to===null){var t="edgeIdFrom:".concat(this.id),n="edgeIdTo:".concat(this.id),r={nodes:{group:"",radius:8},physics:{damping:0},clustering:{maxNodeSizeIncrements:0,nodeScaling:{width:0,height:0,radius:0}}};this.controlNodes.from=new i({id:t,shape:"dot",color:{background:"#ff4e00",border:"#3c3c3c",highlight:{background:"#07f968"}}},{},{},r),this.controlNodes.to=new i({id:n,shape:"dot",color:{background:"#ff4e00",border:"#3c3c3c",highlight:{background:"#07f968"}}},{},{},r)}this.controlNodes.from.selected==0&&this.controlNodes.to.selected==0&&(this.controlNodes.positions=this.getControlNodePositions(e),this.controlNodes.from.x=this.controlNodes.positions.from.x,this.controlNodes.from.y=this.controlNodes.positions.from.y,this.controlNodes.to.x=this.controlNodes.positions.to.x,this.controlNodes.to.y=this.controlNodes.positions.to.y),this.controlNodes.from.draw(e),this.controlNodes.to.draw(e)}else this.controlNodes={from:null,to:null,positions:{}}},s.prototype._enableControlNodes=function(){this.controlNodesEnabled=!0},s.prototype._disableControlNodes=function(){this.controlNodesEnabled=!1},s.prototype._getSelectedControlNode=function(e,t){var n=this.controlNodes.positions,r=Math.sqrt(Math.pow(e-n.from.x,2)+Math.pow(t-n.from.y,2)),i=Math.sqrt(Math.pow(e-n.to.x,2)+Math.pow(t-n.to.y,2));return r<15?(this.connectedNode=this.from,this.from=this.controlNodes.from,this.controlNodes.from):i<15?(this.connectedNode=this.to,this.to=this.controlNodes.to,this.controlNodes.to):null},s.prototype._restoreControlNodes=function(){this.controlNodes.from.selected==1&&(this.from=this.connectedNode,this.connectedNode=null,this.controlNodes.from.unselect()),this.controlNodes.to.selected==1&&(this.to=this.connectedNode,this.connectedNode=null,this.controlNodes.to.unselect())},s.prototype.getControlNodePositions=function(e){var t=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),n=this.to.x-this.from.x,r=this.to.y-this.from.y,i=Math.sqrt(n*n+r*r),s=this.from.distanceToBorder(e,t+Math.PI),o=(i-s)/i,u=o*this.from.x+(1-o)*this.to.x,a=o*this.from.y+(1-o)*this.to.y,f;this.options.smoothCurves.dynamic==1&&this.options.smoothCurves.enabled==1?f=this.via:this.options.smoothCurves.enabled==1&&(f=this._getViaCoordinates()),this.options.smoothCurves.enabled==1&&f.x!=null&&(t=Math.atan2(this.to.y-f.y,this.to.x-f.x),n=this.to.x-f.x,r=this.to.y-f.y,i=Math.sqrt(n*n+r*r));var l=this.to.distanceToBorder(e,t),c=(i-l)/i,h,p;return this.options.smoothCurves.enabled==1&&f.x!=null?(h=(1-c)*f.x+c*this.to.x,p=(1-c)*f.y+c*this.to.y):(h=(1-c)*this.from.x+c*this.to.x,p=(1-c)*this.from.y+c*this.to.y),{from:{x:u,y:a},to:{x:h,y:p}}},e.exports=s},function(e,t,n){function i(){this.clear(),this.defaultIndex=0}var r=n(1);i.DEFAULT=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}}],i.prototype.clear=function(){this.groups={},this.groups.length=function(){var e=0;for(var t in this)this.hasOwnProperty(t)&&e++;return e}},i.prototype.get=function(e){var t=this.groups[e];if(t==undefined){var n=this.defaultIndex%i.DEFAULT.length;this.defaultIndex++,t={},t.color=i.DEFAULT[n],this.groups[e]=t}return t},i.prototype.add=function(e,t){return this.groups[e]=t,t.color&&(t.color=r.parseColor(t.color)),t},e.exports=i},function(e,t,n){function r(){this.images={},this.callback=undefined}r.prototype.setOnloadCallback=function(e){this.callback=e},r.prototype.load=function(e,t){var n=this.images[e];if(n==undefined){var r=this;n=new Image,this.images[e]=n,n.onload=function(){r.callback&&r.callback(this)},n.onerror=function(){this.src=t,r.callback&&r.callback(this)},n.src=e}return n},e.exports=r},function(e,t,n){function i(e,t,n,i){var s=r.selectiveBridgeObject(["nodes"],i);this.options=s.nodes,this.selected=!1,this.hover=!1,this.edges=[],this.dynamicEdges=[],this.reroutedEdges={},this.fontDrawThreshold=3,this.id=undefined,this.x=null,this.y=null,this.allowedToMoveX=!1,this.allowedToMoveY=!1,this.xFixed=!1,this.yFixed=!1,this.horizontalAlignLeft=!0,this.verticalAlignTop=!0,this.baseRadiusValue=i.nodes.radius,this.radiusFixed=!1,this.level=-1,this.preassignedLevel=!1,this.hierarchyEnumerated=!1,this.labelDimensions={top:0,left:0,width:0,height:0,yLine:0},this.imagelist=t,this.grouplist=n,this.fx=0,this.fy=0,this.vx=0,this.vy=0,this.damping=i.physics.damping,this.fixedData={x:null,y:null},this.setProperties(e,s),this.resetCluster(),this.dynamicEdgesLength=0,this.clusterSession=0,this.clusterSizeWidthFactor=i.clustering.nodeScaling.width,this.clusterSizeHeightFactor=i.clustering.nodeScaling.height,this.clusterSizeRadiusFactor=i.clustering.nodeScaling.radius,this.maxNodeSizeIncrements=i.clustering.maxNodeSizeIncrements,this.growthIndicator=0,this.networkScaleInv=1,this.networkScale=1,this.canvasTopLeft={x:-300,y:-300},this.canvasBottomRight={x:300,y:300},this.parentEdgeId=null}var r=n(1);i.prototype.resetCluster=function(){this.formationScale=undefined,this.clusterSize=1,this.containedNodes={},this.containedEdges={},this.clusterSessions=[]},i.prototype.attachEdge=function(e){this.edges.indexOf(e)==-1&&this.edges.push(e),this.dynamicEdges.indexOf(e)==-1&&this.dynamicEdges.push(e),this.dynamicEdgesLength=this.dynamicEdges.length},i.prototype.detachEdge=function(e){var t=this.edges.indexOf(e);t!=-1&&this.edges.splice(t,1),t=this.dynamicEdges.indexOf(e),t!=-1&&this.dynamicEdges.splice(t,1),this.dynamicEdgesLength=this.dynamicEdges.length},i.prototype.setProperties=function(e,t){if(!e)return;var n=["borderWidth","borderWidthSelected","shape","image","brokenImage","radius","fontColor","fontSize","fontFace","fontFill","group","mass"];r.selectiveDeepExtend(n,this.options,e),e.id!==undefined&&(this.id=e.id),e.label!==undefined&&(this.label=e.label,this.originalLabel=e.label),e.title!==undefined&&(this.title=e.title),e.x!==undefined&&(this.x=e.x),e.y!==undefined&&(this.y=e.y),e.value!==undefined&&(this.value=e.value),e.level!==undefined&&(this.level=e.level,this.preassignedLevel=!0),e.horizontalAlignLeft!==undefined&&(this.horizontalAlignLeft=e.horizontalAlignLeft),e.verticalAlignTop!==undefined&&(this.verticalAlignTop=e.verticalAlignTop),e.triggerFunction!==undefined&&(this.triggerFunction=e.triggerFunction);if(this.id===undefined)throw"Node must have an id";if(typeof this.options.group=="number"||typeof this.options.group=="string"&&this.options.group!=""){var i=this.grouplist.get(this.options.group);for(var s in i)i.hasOwnProperty(s)&&(this.options[s]=i[s])}e.radius!==undefined&&(this.baseRadiusValue=this.options.radius),e.color!==undefined&&(this.options.color=r.parseColor(e.color));if(this.options.image!==undefined&&this.options.image!=""){if(!this.imagelist)throw"No imagelist provided";this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage)}e.allowedToMoveX!==undefined?(this.xFixed=!e.allowedToMoveX,this.allowedToMoveX=e.allowedToMoveX):e.x!==undefined&&this.allowedToMoveX==0&&(this.xFixed=!0),e.allowedToMoveY!==undefined?(this.yFixed=!e.allowedToMoveY,this.allowedToMoveY=e.allowedToMoveY):e.y!==undefined&&this.allowedToMoveY==0&&(this.yFixed=!0),this.radiusFixed=this.radiusFixed||e.radius!==undefined,this.options.shape=="image"&&(this.options.radiusMin=t.nodes.widthMin,this.options.radiusMax=t.nodes.widthMax);switch(this.options.shape){case"database":this.draw=this._drawDatabase,this.resize=this._resizeDatabase;break;case"box":this.draw=this._drawBox,this.resize=this._resizeBox;break;case"circle":this.draw=this._drawCircle,this.resize=this._resizeCircle;break;case"ellipse":this.draw=this._drawEllipse,this.resize=this._resizeEllipse;break;case"image":this.draw=this._drawImage,this.resize=this._resizeImage;break;case"text":this.draw=this._drawText,this.resize=this._resizeText;break;case"dot":this.draw=this._drawDot,this.resize=this._resizeShape;break;case"square":this.draw=this._drawSquare,this.resize=this._resizeShape;break;case"triangle":this.draw=this._drawTriangle,this.resize=this._resizeShape;break;case"triangleDown":this.draw=this._drawTriangleDown,this.resize=this._resizeShape;break;case"star":this.draw=this._drawStar,this.resize=this._resizeShape;break;default:this.draw=this._drawEllipse,this.resize=this._resizeEllipse}this._reset()},i.prototype.select=function(){this.selected=!0,this._reset()},i.prototype.unselect=function(){this.selected=!1,this._reset()},i.prototype.clearSizeCache=function(){this._reset()},i.prototype._reset=function(){this.width=undefined,this.height=undefined},i.prototype.getTitle=function(){return typeof this.title=="function"?this.title():this.title},i.prototype.distanceToBorder=function(e,t){var n=1;this.width||this.resize(e);switch(this.options.shape){case"circle":case"dot":return this.options.radius+n;case"ellipse":var r=this.width/2,i=this.height/2,s=Math.sin(t)*r,o=Math.cos(t)*i;return r*i/Math.sqrt(s*s+o*o);case"box":case"image":case"text":default:return this.width?Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+n:0}},i.prototype._setForce=function(e,t){this.fx=e,this.fy=t},i.prototype._addForce=function(e,t){this.fx+=e,this.fy+=t},i.prototype.discreteStep=function(e){if(!this.xFixed){var t=this.damping*this.vx,n=(this.fx-t)/this.options.mass;this.vx+=n*e,this.x+=this.vx*e}else this.fx=0,this.vx=0;if(!this.yFixed){var r=this.damping*this.vy,i=(this.fy-r)/this.options.mass;this.vy+=i*e,this.y+=this.vy*e}else this.fy=0,this.vy=0},i.prototype.discreteStepLimited=function(e,t){if(!this.xFixed){var n=this.damping*this.vx,r=(this.fx-n)/this.options.mass;this.vx+=r*e,this.vx=Math.abs(this.vx)>t?this.vx>0?t:-t:this.vx,this.x+=this.vx*e}else this.fx=0,this.vx=0;if(!this.yFixed){var i=this.damping*this.vy,s=(this.fy-i)/this.options.mass;this.vy+=s*e,this.vy=Math.abs(this.vy)>t?this.vy>0?t:-t:this.vy,this.y+=this.vy*e}else this.fy=0,this.vy=0},i.prototype.isFixed=function(){return this.xFixed&&this.yFixed},i.prototype.isMoving=function(e){var t=Math.sqrt(Math.pow(this.vx,2)+Math.pow(this.vy,2));return t>e},i.prototype.isSelected=function(){return this.selected},i.prototype.getValue=function(){return this.value},i.prototype.getDistance=function(e,t){var n=this.x-e,r=this.y-t;return Math.sqrt(n*n+r*r)},i.prototype.setValueRange=function(e,t){if(!this.radiusFixed&&this.value!==undefined)if(t==e)this.options.radius=(this.options.radiusMin+this.options.radiusMax)/2;else{var n=(this.options.radiusMax-this.options.radiusMin)/(t-e);this.options.radius=(this.value-e)*n+this.options.radiusMin}this.baseRadiusValue=this.options.radius},i.prototype.draw=function(e){throw"Draw method not initialized for node"},i.prototype.resize=function(e){throw"Resize method not initialized for node"},i.prototype.isOverlappingWith=function(e){return this.left<e.right&&this.left+this.width>e.left&&this.top<e.bottom&&this.top+this.height>e.top},i.prototype._resizeImage=function(e){if(!this.width||!this.height){var t,n;if(this.value){this.options.radius=this.baseRadiusValue;var r=this.imageObj.height/this.imageObj.width;r!==undefined?(t=this.options.radius||this.imageObj.width,n=this.options.radius*r||this.imageObj.height):(t=0,n=0)}else t=this.imageObj.width,n=this.imageObj.height;this.width=t,this.height=n,this.growthIndicator=0,this.width>0&&this.height>0&&(this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-t)}},i.prototype._drawImage=function(e){this._resizeImage(e),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var t;if(this.imageObj.width!=0){if(this.clusterSize>1){var n=this.clusterSize>1?10:0;n*=this.networkScaleInv,n=Math.min(.2*this.width,n),e.globalAlpha=.5,e.drawImage(this.imageObj,this.left-n,this.top-n,this.width+2*n,this.height+2*n)}e.globalAlpha=1,e.drawImage(this.imageObj,this.left,this.top,this.width,this.height),t=this.y+this.height/2}else t=this.y;this._label(e,this.label,this.x,t,undefined,"top")},i.prototype._resizeBox=function(e){if(!this.width){var t=5,n=this.getTextSize(e);this.width=n.width+2*t,this.height=n.height+2*t,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeHeightFactor,this.growthIndicator=this.width-(n.width+2*t)}},i.prototype._drawBox=function(e){this._resizeBox(e),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var t=2.5,n=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth;e.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border,this.clusterSize>1&&(e.lineWidth=(this.selected?r:n)+(this.clusterSize>1?t:0),e.lineWidth*=this.networkScaleInv,e.lineWidth=Math.min(this.width,e.lineWidth),e.roundRect(this.left-2*e.lineWidth,this.top-2*e.lineWidth,this.width+4*e.lineWidth,this.height+4*e.lineWidth,this.options.radius),e.stroke()),e.lineWidth=(this.selected?r:n)+(this.clusterSize>1?t:0),e.lineWidth*=this.networkScaleInv,e.lineWidth=Math.min(this.width,e.lineWidth),e.fillStyle=this.selected?this.options.color.highlight.background:this.options.color.background,e.roundRect(this.left,this.top,this.width,this.height,this.options.radius),e.fill(),e.stroke(),this._label(e,this.label,this.x,this.y)},i.prototype._resizeDatabase=function(e){if(!this.width){var t=5,n=this.getTextSize(e),r=n.width+2*t;this.width=r,this.height=r,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-r}},i.prototype._drawDatabase=function(e){this._resizeDatabase(e),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var t=2.5,n=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth;e.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border,this.clusterSize>1&&(e.lineWidth=(this.selected?r:n)+(this.clusterSize>1?t:0),e.lineWidth*=this.networkScaleInv,e.lineWidth=Math.min(this.width,e.lineWidth),e.database(this.x-this.width/2-2*e.lineWidth,this.y-this.height*.5-2*e.lineWidth,this.width+4*e.lineWidth,this.height+4*e.lineWidth),e.stroke()),e.lineWidth=(this.selected?r:n)+(this.clusterSize>1?t:0),e.lineWidth*=this.networkScaleInv,e.lineWidth=Math.min(this.width,e.lineWidth),e.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background,e.database(this.x-this.width/2,this.y-this.height*.5,this.width,this.height),e.fill(),e.stroke(),this._label(e,this.label,this.x,this.y)},i.prototype._resizeCircle=function(e){if(!this.width){var t=5,n=this.getTextSize(e),r=Math.max(n.width,n.height)+2*t;this.options.radius=r/2,this.width=r,this.height=r,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeRadiusFactor,this.growthIndicator=this.options.radius-.5*r}},i.prototype._drawCircle=function(e){this._resizeCircle(e),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var t=2.5,n=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth;e.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border,this.clusterSize>1&&(e.lineWidth=(this.selected?r:n)+(this.clusterSize>1?t:0),e.lineWidth*=this.networkScaleInv,e.lineWidth=Math.min(this.width,e.lineWidth),e.circle(this.x,this.y,this.options.radius+2*e.lineWidth),e.stroke()),e.lineWidth=(this.selected?r:n)+(this.clusterSize>1?t:0),e.lineWidth*=this.networkScaleInv,e.lineWidth=Math.min(this.width,e.lineWidth),e.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background,e.circle(this.x,this.y,this.options.radius),e.fill(),e.stroke(),this._label(e,this.label,this.x,this.y)},i.prototype._resizeEllipse=function(e){if(!this.width){var t=this.getTextSize(e);this.width=t.width*1.5,this.height=t.height*2,this.width<this.height&&(this.width=this.height);var n=this.width;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-n}},i.prototype._drawEllipse=function(e){this._resizeEllipse(e),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var t=2.5,n=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth;e.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border,this.clusterSize>1&&(e.lineWidth=(this.selected?r:n)+(this.clusterSize>1?t:0),e.lineWidth*=this.networkScaleInv,e.lineWidth=Math.min(this.width,e.lineWidth),e.ellipse(this.left-2*e.lineWidth,this.top-2*e.lineWidth,this.width+4*e.lineWidth,this.height+4*e.lineWidth),e.stroke()),e.lineWidth=(this.selected?r:n)+(this.clusterSize>1?t:0),e.lineWidth*=this.networkScaleInv,e.lineWidth=Math.min(this.width,e.lineWidth),e.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background,e.ellipse(this.left,this.top,this.width,this.height),e.fill(),e.stroke(),this._label(e,this.label,this.x,this.y)},i.prototype._drawDot=function(e){this._drawShape(e,"circle")},i.prototype._drawTriangle=function(e){this._drawShape(e,"triangle")},i.prototype._drawTriangleDown=function(e){this._drawShape(e,"triangleDown")},i.prototype._drawSquare=function(e){this._drawShape(e,"square")},i.prototype._drawStar=function(e){this._drawShape(e,"star")},i.prototype._resizeShape=function(e){if(!this.width){this.options.radius=this.baseRadiusValue;var t=2*this.options.radius;this.width=t,this.height=t,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-t}},i.prototype._drawShape=function(e,t){this._resizeShape(e),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var n=2.5,r=this.options.borderWidth,i=this.options.borderWidthSelected||2*this.options.borderWidth,s=2;switch(t){case"dot":s=2;break;case"square":s=2;break;case"triangle":s=3;break;case"triangleDown":s=3;break;case"star":s=4}e.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border,this.clusterSize>1&&(e.lineWidth=(this.selected?i:r)+(this.clusterSize>1?n:0),e.lineWidth*=this.networkScaleInv,e.lineWidth=Math.min(this.width,e.lineWidth),e[t](this.x,this.y,this.options.radius+s*e.lineWidth),e.stroke()),e.lineWidth=(this.selected?i:r)+(this.clusterSize>1?n:0),e.lineWidth*=this.networkScaleInv,e.lineWidth=Math.min(this.width,e.lineWidth),e.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background,e[t](this.x,this.y,this.options.radius),e.fill(),e.stroke(),this.label&&this._label(e,this.label,this.x,this.y+this.height/2,undefined,"top",!0)},i.prototype._resizeText=function(e){if(!this.width){var t=5,n=this.getTextSize(e);this.width=n.width+2*t,this.height=n.height+2*t,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-(n.width+2*t)}},i.prototype._drawText=function(e){this._resizeText(e),this.left=this.x-this.width/2,this.top=this.y-this.height/2,this._label(e,this.label,this.x,this.y)},i.prototype._label=function(e,t,n,r,i,s,o){if(t&&Number(this.options.fontSize)*this.networkScale>this.fontDrawThreshold){e.font=(this.selected?"bold ":"")+this.options.fontSize+"px "+this.options.fontFace;var u=t.split("\n"),a=u.length,f=Number(this.options.fontSize)+4,l=r+(1-a)/2*f;o==1&&(l=r+(1-a)/(2*f));var c=e.measureText(u[0]).width;for(var h=1;h<a;h++){var p=e.measureText(u[h]).width;c=p>c?p:c}var d=this.options.fontSize*a,v=n-c/2,m=r-d/2;s=="top"&&(m+=.5*f),this.labelDimensions={top:m,left:v,width:c,height:d,yLine:l},this.options.fontFill!==undefined&&this.options.fontFill!==null&&this.options.fontFill!=="none"&&(e.fillStyle=this.options.fontFill,e.fillRect(v,m,c,d)),e.fillStyle=this.options.fontColor||"black",e.textAlign=i||"center",e.textBaseline=s||"middle";for(var h=0;h<a;h++)e.fillText(u[h],n,l),l+=f}},i.prototype.getTextSize=function(e){if(this.label!==undefined){e.font=(this.selected?"bold ":"")+this.options.fontSize+"px "+this.options.fontFace;var t=this.label.split("\n"),n=(Number(this.options.fontSize)+4)*t.length,r=0;for(var i=0,s=t.length;i<s;i++)r=Math.max(r,e.measureText(t[i]).width);return{width:r,height:n}}return{width:0,height:0}},i.prototype.inArea=function(){return this.width!==undefined?this.x+this.width*this.networkScaleInv>=this.canvasTopLeft.x&&this.x-this.width*this.networkScaleInv<this.canvasBottomRight.x&&this.y+this.height*this.networkScaleInv>=this.canvasTopLeft.y&&this.y-this.height*this.networkScaleInv<this.canvasBottomRight.y:!0},i.prototype.inView=function(){return this.x>=this.canvasTopLeft.x&&this.x<this.canvasBottomRight.x&&this.y>=this.canvasTopLeft.y&&this.y<this.canvasBottomRight.y},i.prototype.setScaleAndPos=function(e,t,n){this.networkScaleInv=1/e,this.networkScale=e,this.canvasTopLeft=t,this.canvasBottomRight=n},i.prototype.setScale=function(e){this.networkScaleInv=1/e,this.networkScale=e},i.prototype.clearVelocity=function(){this.vx=0,this.vy=0},i.prototype.updateVelocity=function(e){var t=this.vx*this.vx*e;this.vx=Math.sqrt(t/this.options.mass),t=this.vy*this.vy*e,this.vy=Math.sqrt(t/this.options.mass)},e.exports=i},function(e,t,n){function r(e,t,n,r,i){e?this.container=e:this.container=document.body,i===undefined&&(typeof t=="object"?(i=t,t=undefined):typeof r=="object"?(i=r,r=undefined):i={fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}}),this.x=0,this.y=0,this.padding=5,t!==undefined&&n!==undefined&&this.setPosition(t,n),r!==undefined&&this.setText(r),this.frame=document.createElement("div");var s=this.frame.style;s.position="absolute",s.visibility="hidden",s.border="1px solid "+i.color.border,s.color=i.fontColor,s.fontSize=i.fontSize+"px",s.fontFamily=i.fontFace,s.padding=this.padding+"px",s.backgroundColor=i.color.background,s.borderRadius="3px",s.MozBorderRadius="3px",s.WebkitBorderRadius="3px",s.boxShadow="3px 3px 10px rgba(128, 128, 128, 0.5)",s.whiteSpace="nowrap",this.container.appendChild(this.frame)}r.prototype.setPosition=function(e,t){this.x=parseInt(e),this.y=parseInt(t)},r.prototype.setText=function(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=e},r.prototype.show=function(e){e===undefined&&(e=!0);if(e){var t=this.frame.clientHeight,n=this.frame.clientWidth,r=this.frame.parentNode.clientHeight,i=this.frame.parentNode.clientWidth,s=this.y-t;s+t+this.padding>r&&(s=r-t-this.padding),s<this.padding&&(s=this.padding);var o=this.x;o+n+this.padding>i&&(o=i-n-this.padding),o<this.padding&&(o=this.padding),this.frame.style.left=o+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible"}else this.hide()},r.prototype.hide=function(){this.frame.style.visibility="hidden"},e.exports=r},function(e,t,n){function r(e){return o=e,S()}function c(){u=0,a=o.charAt(0)}function h(){u++,a=o.charAt(u)}function p(){return o.charAt(u+1)}function v(e){return d.test(e)}function m(e,t){e||(e={});if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function g(e,t,n){var r=t.split("."),i=e;while(r.length){var s=r.shift();r.length?(i[s]||(i[s]={}),i=i[s]):i[s]=n}}function y(e,t){var n,r,i=null,s=[e],o=e;while(o.parent)s.push(o.parent),o=o.parent;if(o.nodes)for(n=0,r=o.nodes.length;n<r;n++)if(t.id===o.nodes[n].id){i=o.nodes[n];break}i||(i={id:t.id},e.node&&(i.attr=m(i.attr,e.node)));for(n=s.length-1;n>=0;n--){var u=s[n];u.nodes||(u.nodes=[]),u.nodes.indexOf(i)==-1&&u.nodes.push(i)}t.attr&&(i.attr=m(i.attr,t.attr))}function b(e,t){e.edges||(e.edges=[]),e.edges.push(t);if(e.edge){var n=m({},e.edge);t.attr=m(n,t.attr)}}function w(e,t,n,r,i){var s={from:t,to:n,type:r};return e.edge&&(s.attr=m({},e.edge)),s.attr=m(s.attr||{},i),s}function E(){l=i.NULL,f="";while(a==" "||a=="	"||a=="\n"||a=="\r")h();do{var e=!1;if(a=="#"){var t=u-1;while(o.charAt(t)==" "||o.charAt(t)=="	")t--;if(o.charAt(t)=="\n"||o.charAt(t)==""){while(a!=""&&a!="\n")h();e=!0}}if(a=="/"&&p()=="/"){while(a!=""&&a!="\n")h();e=!0}if(a=="/"&&p()=="*"){while(a!=""){if(a=="*"&&p()=="/"){h(),h();break}h()}e=!0}while(a==" "||a=="	"||a=="\n"||a=="\r")h()}while(e);if(a==""){l=i.DELIMITER;return}var n=a+p();if(s[n]){l=i.DELIMITER,f=n,h(),h();return}if(s[a]){l=i.DELIMITER,f=a,h();return}if(v(a)||a=="-"){f+=a,h();while(v(a))f+=a,h();f=="false"?f=!1:f=="true"?f=!0:isNaN(Number(f))||(f=Number(f)),l=i.IDENTIFIER;return}if(a=='"'){h();while(a!=""&&(a!='"'||a=='"'&&p()=='"'))f+=a,a=='"'&&h(),h();if(a!='"')throw O('End of string " expected');h(),l=i.IDENTIFIER;return}l=i.UNKNOWN;while(a!="")f+=a,h();throw new SyntaxError('Syntax error in part "'+M(f,30)+'"')}function S(){var e={};c(),E(),f=="strict"&&(e.strict=!0,E());if(f=="graph"||f=="digraph")e.type=f,E();l==i.IDENTIFIER&&(e.id=f,E());if(f!="{")throw O("Angle bracket { expected");E(),x(e);if(f!="}")throw O("Angle bracket } expected");E();if(f!=="")throw O("End of file expected");return E(),delete e.node,delete e.edge,delete e.graph,e}function x(e){while(f!==""&&f!="}")T(e),f==";"&&E()}function T(e){var t=N(e);if(t){L(e,t);return}var n=C(e);if(n)return;if(l!=i.IDENTIFIER)throw O("Identifier expected");var r=f;E();if(f=="="){E();if(l!=i.IDENTIFIER)throw O("Identifier expected");e[r]=f,E()}else k(e,r)}function N(e){var t=null;f=="subgraph"&&(t={},t.type="subgraph",E(),l==i.IDENTIFIER&&(t.id=f,E()));if(f=="{"){E(),t||(t={}),t.parent=e,t.node=e.node,t.edge=e.edge,t.graph=e.graph,x(t);if(f!="}")throw O("Angle bracket } expected");E(),delete t.node,delete t.edge,delete t.graph,delete t.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(t)}return t}function C(e){return f=="node"?(E(),e.node=A(),"node"):f=="edge"?(E(),e.edge=A(),"edge"):f=="graph"?(E(),e.graph=A(),"graph"):null}function k(e,t){var n={id:t},r=A();r&&(n.attr=r),y(e,n),L(e,t)}function L(e,t){while(f=="->"||f=="--"){var n,r=f;E();var s=N(e);if(s)n=s;else{if(l!=i.IDENTIFIER)throw O("Identifier or subgraph expected");n=f,y(e,{id:n}),E()}var o=A(),u=w(e,t,n,r,o);b(e,u),t=n}}function A(){var e=null;while(f=="["){E(),e={};while(f!==""&&f!="]"){if(l!=i.IDENTIFIER)throw O("Attribute name expected");var t=f;E();if(f!="=")throw O("Equal sign = expected");E();if(l!=i.IDENTIFIER)throw O("Attribute value expected");var n=f;g(e,t,n),E(),f==","&&E()}if(f!="]")throw O("Bracket ] expected");E()}return e}function O(e){return new SyntaxError(e+', got "'+M(f,30)+'" (char '+u+")")}function M(e,t){return e.length<=t?e:e.substr(0,27)+"..."}function _(e,t,n){Array.isArray(e)?e.forEach(function(e){Array.isArray(t)?t.forEach(function(t){n(e,t)}):n(e,t)}):Array.isArray(t)?t.forEach(function(t){n(e,t)}):n(e,t)}function D(e){var t=r(e),n={nodes:[],edges:[],options:{}};t.nodes&&t.nodes.forEach(function(e){var t={id:e.id,label:String(e.label||e.id)};m(t,e.attr),t.image&&(t.shape="image"),n.nodes.push(t)});if(t.edges){function i(e){var t={from:e.from,to:e.to};return m(t,e.attr),t.style=e.type=="->"?"arrow":"line",t}t.edges.forEach(function(e){var t,r;e.from instanceof Object?t=e.from.nodes:t={id:e.from},e.to instanceof Object?r=e.to.nodes:r={id:e.to},e.from instanceof Object&&e.from.edges&&e.from.edges.forEach(function(e){var t=i(e);n.edges.push(t)}),_(t,r,function(t,r){var s=w(n,t.id,r.id,e.type,e.attr),o=i(s);n.edges.push(o)}),e.to instanceof Object&&e.to.edges&&e.to.edges.forEach(function(e){var t=i(e);n.edges.push(t)})})}return t.attr&&(n.options=t.attr),n}var i={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},s={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},o="",u=0,a="",f="",l=i.NULL,d=/[a-zA-Z_0-9.:#]/;t.parseDOT=r,t.DOTToGraph=D},function(e,t,n){function r(e,t){var n=[],r=[];this.options={edges:{inheritColor:!0},nodes:{allowedToMove:!1,parseColor:!1}},t!==undefined&&(this.options.nodes.allowedToMove=t.allowedToMove|!1,this.options.nodes.parseColor=t.parseColor|!1,this.options.edges.inheritColor=t.inheritColor|!0);var i=e.edges,s=e.nodes;for(var o=0;o<i.length;o++){var u={},a=i[o];u.id=a.id,u.from=a.source,u.to=a.target,u.attributes=a.attributes,u.color=a.color,u.inheritColor=u.color!==undefined?!1:this.options.inheritColor,n.push(u)}for(var o=0;o<s.length;o++){var f={},l=s[o];f.id=l.id,f.attributes=l.attributes,f.x=l.x,f.y=l.y,f.label=l.label,this.options.nodes.parseColor==1?f.color=l.color:f.color=l.color!==undefined?{background:l.color,border:l.color}:undefined,f.radius=l.size,f.allowedToMoveX=this.options.nodes.allowedToMove,f.allowedToMoveY=this.options.nodes.allowedToMove,r.push(f)}return{nodes:r,edges:n}}t.parseGephi=r},function(e,t,n){e.exports=typeof window!="undefined"&&window.moment||n(55)},function(e,t,n){typeof window!="undefined"?e.exports=window.Hammer||n(56):e.exports=function(){throw Error("hammer.js is only available in a browser, not in node.js.")}},function(e,t,n){function v(){}var r=n(53),i=n(45),s=n(1),o=n(3),u=n(4),a=n(17),f=n(30),l=n(21),c=n(22),h=n(27),p=n(52),d=n(15);r(v.prototype),v.prototype._create=function(e){this.dom={},this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.root.className="vis timeline root",this.dom.background.className="vispanel background",this.dom.backgroundVertical.className="vispanel background vertical",this.dom.backgroundHorizontal.className="vispanel background horizontal",this.dom.centerContainer.className="vispanel center",this.dom.leftContainer.className="vispanel left",this.dom.rightContainer.className="vispanel right",this.dom.top.className="vispanel top",this.dom.bottom.className="vispanel bottom",this.dom.left.className="content",this.dom.center.className="content",this.dom.right.className="content",this.dom.shadowTop.className="shadow top",this.dom.shadowBottom.className="shadow bottom",this.dom.shadowTopLeft.className="shadow top",this.dom.shadowBottomLeft.className="shadow bottom",this.dom.shadowTopRight.className="shadow top",this.dom.shadowBottomRight.className="shadow bottom",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.on("rangechange",this.redraw.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("pinch",this._onPinch.bind(this)),this.on("dragstart",this._onDragStart.bind(this)),this.on("drag",this._onDrag.bind(this));var t=this;this.on("change",function(e){e&&e.queue==1?t._redrawTimer||(t._redrawTimer=setTimeout(function(){t._redrawTimer=null,t.redraw()},0)):t.redraw()}),this.hammer=i(this.dom.root,{preventDefault:!0}),this.listeners={};var n=["touch","pinch","tap","doubletap","hold","dragstart","drag","dragend","mousewheel","DOMMouseScroll"];n.forEach(function(e){var n=function(){var n=[e].concat(Array.prototype.slice.call(arguments,0));t.isActive()&&t.emit.apply(t,n)};t.hammer.on(e,n),t.listeners[e]=n}),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.touch={};if(!e)throw new Error("No container provided");e.appendChild(this.dom.root)},v.prototype.setOptions=function(e){if(e){var t=["width","height","minHeight","maxHeight","autoResize","start","end","orientation","clickToUse","dataAttributes","hiddenDates"];s.selectiveExtend(t,this.options,e),"hiddenDates"in this.options&&d.convertHiddenOptions(this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator=new p(this.dom.root):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}this.components.forEach(function(t){t.setOptions(e)});if(e&&e.order)throw new Error("Option order is deprecated. There is no replacement for this feature.");this.redraw()},v.prototype.isActive=function(){return!this.activator||this.activator.active},v.prototype.destroy=function(){this.clear(),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var e in this.listeners)this.listeners.hasOwnProperty(e)&&delete this.listeners[e];this.listeners=null,this.hammer=null,this.components.forEach(function(e){e.destroy()}),this.body=null},v.prototype.setCustomTime=function(e){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");this.customTime.setCustomTime(e)},v.prototype.getCustomTime=function(){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");return this.customTime.getCustomTime()},v.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},v.prototype.clear=function(e){(!e||e.items)&&this.setItems(null),(!e||e.groups)&&this.setGroups(null);if(!e||e.options)this.components.forEach(function(e){e.setOptions(e.defaultOptions)}),this.setOptions(this.defaultOptions)},v.prototype.fit=function(e){var t=this.getItemRange(),n=t.min,r=t.max;if(n!=null&&r!=null){var i=r.valueOf()-n.valueOf();i<=0&&(i=864e5),n=new Date(n.valueOf()-i*.05),r=new Date(r.valueOf()+i*.05)}if(n===null&&r===null)return;var s=e&&e.animate!==undefined?e.animate:!0;this.range.setRange(n,r,s)},v.prototype.setWindow=function(e,t,n){var r=n&&n.animate!==undefined?n.animate:!0;if(arguments.length==1){var i=arguments[0];this.range.setRange(i.start,i.end,r)}else this.range.setRange(e,t,r)},v.prototype.moveTo=function(e,t){var n=this.range.end-this.range.start,r=s.convert(e,"Date").valueOf(),i=r-n/2,o=r+n/2,u=t&&t.animate!==undefined?t.animate:!0;this.range.setRange(i,o,u)},v.prototype.getWindow=function(){var e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}},v.prototype.redraw=function(){var e=!1,t=this.options,n=this.props,r=this.dom;if(!r)return;d.updateHiddenDates(this.body,this.options.hiddenDates),t.orientation=="top"?(s.addClassName(r.root,"top"),s.removeClassName(r.root,"bottom")):(s.removeClassName(r.root,"top"),s.addClassName(r.root,"bottom")),r.root.style.maxHeight=s.option.asSize(t.maxHeight,""),r.root.style.minHeight=s.option.asSize(t.minHeight,""),r.root.style.width=s.option.asSize(t.width,""),n.border.left=(r.centerContainer.offsetWidth-r.centerContainer.clientWidth)/2,n.border.right=n.border.left,n.border.top=(r.centerContainer.offsetHeight-r.centerContainer.clientHeight)/2,n.border.bottom=n.border.top;var i=r.root.offsetHeight-r.root.clientHeight,o=r.root.offsetWidth-r.root.clientWidth;r.centerContainer.clientHeight===0&&(n.border.left=n.border.top,n.border.right=n.border.left),r.root.clientHeight===0&&(o=i),n.center.height=r.center.offsetHeight,n.left.height=r.left.offsetHeight,n.right.height=r.right.offsetHeight,n.top.height=r.top.clientHeight||-n.border.top,n.bottom.height=r.bottom.clientHeight||-n.border.bottom;var u=Math.max(n.left.height,n.center.height,n.right.height),a=n.top.height+u+n.bottom.height+i+n.border.top+n.border.bottom;r.root.style.height=s.option.asSize(t.height,a+"px"),n.root.height=r.root.offsetHeight,n.background.height=n.root.height-i;var f=n.root.height-n.top.height-n.bottom.height-i;n.centerContainer.height=f,n.leftContainer.height=f,n.rightContainer.height=n.leftContainer.height,n.root.width=r.root.offsetWidth,n.background.width=n.root.width-o,n.left.width=r.leftContainer.clientWidth||-n.border.left,n.leftContainer.width=n.left.width,n.right.width=r.rightContainer.clientWidth||-n.border.right,n.rightContainer.width=n.right.width;var l=n.root.width-n.left.width-n.right.width-o;n.center.width=l,n.centerContainer.width=l,n.top.width=l,n.bottom.width=l,r.background.style.height=n.background.height+"px",r.backgroundVertical.style.height=n.background.height+"px",r.backgroundHorizontal.style.height=n.centerContainer.height+"px",r.centerContainer.style.height=n.centerContainer.height+"px",r.leftContainer.style.height=n.leftContainer.height+"px",r.rightContainer.style.height=n.rightContainer.height+"px",r.background.style.width=n.background.width+"px",r.backgroundVertical.style.width=n.centerContainer.width+"px",r.backgroundHorizontal.style.width=n.background.width+"px",r.centerContainer.style.width=n.center.width+"px",r.top.style.width=n.top.width+"px",r.bottom.style.width=n.bottom.width+"px",r.background.style.left="0",r.background.style.top="0",r.backgroundVertical.style.left=n.left.width+n.border.left+"px",r.backgroundVertical.style.top="0",r.backgroundHorizontal.style.left="0",r.backgroundHorizontal.style.top=n.top.height+"px",r.centerContainer.style.left=n.left.width+"px",r.centerContainer.style.top=n.top.height+"px",r.leftContainer.style.left="0",r.leftContainer.style.top=n.top.height+"px",r.rightContainer.style.left=n.left.width+n.center.width+"px",r.rightContainer.style.top=n.top.height+"px",r.top.style.left=n.left.width+"px",r.top.style.top="0",r.bottom.style.left=n.left.width+"px",r.bottom.style.top=n.top.height+n.centerContainer.height+"px",this._updateScrollTop();var c=this.props.scrollTop;t.orientation=="bottom"&&(c+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),r.center.style.left="0",r.center.style.top=c+"px",r.left.style.left="0",r.left.style.top=c+"px",r.right.style.left="0",r.right.style.top=c+"px";var h=this.props.scrollTop==0?"hidden":"",p=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";r.shadowTop.style.visibility=h,r.shadowBottom.style.visibility=p,r.shadowTopLeft.style.visibility=h,r.shadowBottomLeft.style.visibility=p,r.shadowTopRight.style.visibility=h,r.shadowBottomRight.style.visibility=p,this.components.forEach(function(t){e=t.redraw()||e}),e&&this.redraw()},v.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},v.prototype.setCurrentTime=function(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)},v.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},v.prototype._toTime=function(e){return d.toTime(this,e,this.props.center.width)},v.prototype._toGlobalTime=function(e){return d.toTime(this,e,this.props.root.width)},v.prototype._toScreen=function(e){return d.toScreen(this,e,this.props.center.width)},v.prototype._toGlobalScreen=function(e){return d.toScreen(this,e,this.props.root.width)},v.prototype._initAutoResize=function(){this.options.autoResize==1?this._startAutoResize():this._stopAutoResize()},v.prototype._startAutoResize=function(){var e=this;this._stopAutoResize(),this._onResize=function(){if(e.options.autoResize!=1){e._stopAutoResize();return}e.dom.root&&(e.dom.root.offsetWidth!=e.props.lastWidth||e.dom.root.offsetHeight!=e.props.lastHeight)&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight,e.emit("change"))},s.addEventListener(window,"resize",this._onResize),this.watchTimer=setInterval(this._onResize,1e3)},v.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=undefined),s.removeEventListener(window,"resize",this._onResize),this._onResize=null},v.prototype._onTouch=function(e){this.touch.allowDragging=!0},v.prototype._onPinch=function(e){this.touch.allowDragging=!1},v.prototype._onDragStart=function(e){this.touch.initialScrollTop=this.props.scrollTop},v.prototype._onDrag=function(e){if(!this.touch.allowDragging)return;var t=e.gesture.deltaY,n=this._getScrollTop(),r=this._setScrollTop(this.touch.initialScrollTop+t);r!=n&&(this.redraw(),this.emit("verticalDrag"))},v.prototype._setScrollTop=function(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop},v.prototype._updateScrollTop=function(){var e=Math.min(this.props.centerContainer.height-this.props.center.height,0);return e!=this.props.scrollTopMin&&(this.options.orientation=="bottom"&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.props.scrollTop},v.prototype._getScrollTop=function(){return this.props.scrollTop},e.exports=v},function(e,t,n){var r=n(45);t.fakeGesture=function(e,t){var n=null,i=r.event.getTouchList(t,n),s=r.event.collectEventData(this,n,i,t);return isNaN(s.center.pageX)&&(s.center.pageX=t.pageX),isNaN(s.center.pageY)&&(s.center.pageY=t.pageY),s}},function(e,t,n){t.en={current:"current",time:"time"},t.en_EN=t.en,t.en_US=t.en,t.nl={custom:"aangepaste",time:"tijd"},t.nl_NL=t.nl,t.nl_BE=t.nl},function(e,t,n){t.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted."},t.en_EN=t.en,t.en_US=t.en,t.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd."},t.nl_NL=t.nl,t.nl_BE=t.nl},function(e,t,n){typeof CanvasRenderingContext2D!="undefined"&&(CanvasRenderingContext2D.prototype.circle=function(e,t,n){this.beginPath(),this.arc(e,t,n,0,2*Math.PI,!1)},CanvasRenderingContext2D.prototype.square=function(e,t,n){this.beginPath(),this.rect(e-n,t-n,n*2,n*2)},CanvasRenderingContext2D.prototype.triangle=function(e,t,n){this.beginPath();var r=n*2,i=r/2,s=Math.sqrt(3)/6*r,o=Math.sqrt(r*r-i*i);this.moveTo(e,t-(o-s)),this.lineTo(e+i,t+s),this.lineTo(e-i,t+s),this.lineTo(e,t-(o-s)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(e,t,n){this.beginPath();var r=n*2,i=r/2,s=Math.sqrt(3)/6*r,o=Math.sqrt(r*r-i*i);this.moveTo(e,t+(o-s)),this.lineTo(e+i,t-s),this.lineTo(e-i,t-s),this.lineTo(e,t+(o-s)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(e,t,n){this.beginPath();for(var r=0;r<10;r++){var i=r%2===0?n*1.3:n*.5;this.lineTo(e+i*Math.sin(r*2*Math.PI/10),t-i*Math.cos(r*2*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(e,t,n,r,i){var s=Math.PI/180;n-2*i<0&&(i=n/2),r-2*i<0&&(i=r/2),this.beginPath(),this.moveTo(e+i,t),this.lineTo(e+n-i,t),this.arc(e+n-i,t+i,i,s*270,s*360,!1),this.lineTo(e+n,t+r-i),this.arc(e+n-i,t+r-i,i,0,s*90,!1),this.lineTo(e+i,t+r),this.arc(e+i,t+r-i,i,s*90,s*180,!1),this.lineTo(e,t+i),this.arc(e+i,t+i,i,s*180,s*270,!1)},CanvasRenderingContext2D.prototype.ellipse=function(e,t,n,r){var i=.5522848,s=n/2*i,o=r/2*i,u=e+n,a=t+r,f=e+n/2,l=t+r/2;this.beginPath(),this.moveTo(e,l),this.bezierCurveTo(e,l-o,f-s,t,f,t),this.bezierCurveTo(f+s,t,u,l-o,u,l),this.bezierCurveTo(u,l+o,f+s,a,f,a),this.bezierCurveTo(f-s,a,e,l+o,e,l)},CanvasRenderingContext2D.prototype.database=function(e,t,n,r){var i=1/3,s=n,o=r*i,u=.5522848,a=s/2*u,f=o/2*u,l=e+s,c=t+o,h=e+s/2,p=t+o/2,d=t+(r-o/2),v=t+r;this.beginPath(),this.moveTo(l,p),this.bezierCurveTo(l,p+f,h+a,c,h,c),this.bezierCurveTo(h-a,c,e,p+f,e,p),this.bezierCurveTo(e,p-f,h-a,t,h,t),this.bezierCurveTo(h+a,t,l,p-f,l,p),this.lineTo(l,d),this.bezierCurveTo(l,d+f,h+a,v,h,v),this.bezierCurveTo(h-a,v,e,d+f,e,d),this.lineTo(e,p)},CanvasRenderingContext2D.prototype.arrow=function(e,t,n,r){var i=e-r*Math.cos(n),s=t-r*Math.sin(n),o=e-r*.9*Math.cos(n),u=t-r*.9*Math.sin(n),a=i+r/3*Math.cos(n+.5*Math.PI),f=s+r/3*Math.sin(n+.5*Math.PI),l=i+r/3*Math.cos(n-.5*Math.PI),c=s+r/3*Math.sin(n-.5*Math.PI);this.beginPath(),this.moveTo(e,t),this.lineTo(a,f),this.lineTo(o,u),this.lineTo(l,c),this.closePath()},CanvasRenderingContext2D.prototype.dashedLine=function(e,t,n,r,i){i||(i=[10,5]),h==0&&(h=.001);var s=i.length;this.moveTo(e,t);var o=n-e,u=r-t,a=u/o,f=Math.sqrt(o*o+u*u),l=0,c=!0;while(f>=.1){var h=i[l++%s];h>f&&(h=f);var p=Math.sqrt(h*h/(1+a*a));o<0&&(p=-p),e+=p,t+=a*p,this[c?"lineTo":"moveTo"](e,t),f-=h,c=!c}})},function(e,t,n){var r=n(63),i=n(57),s=n(58),o=n(59),u=n(60),a=n(61),f=n(62);t._loadMixin=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},t._clearMixin=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=undefined)},t._loadPhysicsSystem=function(){this._loadMixin(r),this._loadSelectedForceSolver(),this.constants.configurePhysics==1&&this._loadPhysicsConfiguration()},t._loadClusterSystem=function(){this.clusterSession=0,this.hubThreshold=5,this._loadMixin(i)},t._loadSectorSystem=function(){this.sectors={},this.activeSector=["default"],this.sectors.active={},this.sectors.active["default"]={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:undefined},this.sectors.frozen={},this.sectors.support={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:undefined},this.nodeIndices=this.sectors.active["default"].nodeIndices,this._loadMixin(s)},t._loadSelectionSystem=function(){this.selectionObj={nodes:{},edges:{}},this._loadMixin(o)},t._loadManipulationSystem=function(){this.blockConnectingEdgeSelection=!1,this.forceAppendSelection=!1,this.constants.dataManipulation.enabled==1?(this.manipulationDiv===undefined&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="network-manipulationDiv",this.manipulationDiv.id="network-manipulationDiv",this.editMode==1?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.frame.appendChild(this.manipulationDiv)),this.editModeDiv===undefined&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="network-manipulation-editMode",this.editModeDiv.id="network-manipulation-editMode",this.editMode==1?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.frame.appendChild(this.editModeDiv)),this.closeDiv===undefined&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="network-manipulation-closeDiv",this.closeDiv.id="network-manipulation-closeDiv",this.closeDiv.style.display=this.manipulationDiv.style.display,this.frame.appendChild(this.closeDiv)),this._loadMixin(u),this._createManipulatorBar()):this.manipulationDiv!==undefined&&(this._createManipulatorBar(),this.frame.removeChild(this.manipulationDiv),this.frame.removeChild(this.editModeDiv),this.frame.removeChild(this.closeDiv),this.manipulationDiv=undefined,this.editModeDiv=undefined,this.closeDiv=undefined,this._clearMixin(u))},t._loadNavigationControls=function(){this._loadMixin(a),this._cleanNavigation(),this.constants.navigation.enabled==1&&this._loadNavigationElements()},t._loadHierarchySystem=function(){this._loadMixin(f)}},function(e,t,n){function u(e){this.active=!1,this.dom={container:e},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=s(this.dom.overlay,{prevent_default:!1}),this.hammer.on("tap",this._onTapOverlay.bind(this));var t=this,n=["touch","pinch","doubletap","hold","dragstart","drag","dragend","mousewheel","DOMMouseScroll"];n.forEach(function(e){t.hammer.on(e,function(e){e.stopPropagation()})}),this.windowHammer=s(window,{prevent_default:!1}),this.windowHammer.on("tap",function(n){a(n.target,e)||t.deactivate()}),this.keycharm!==undefined&&this.keycharm.destroy(),this.keycharm=r(),this.escListener=this.deactivate.bind(this)}function a(e,t){while(e){if(e===t)return!0;e=e.parentNode}return!1}var r=n(54),i=n(53),s=n(45),o=n(1);i(u.prototype),u.current=null,u.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.hammer=null,this.windowHammer=null},u.prototype.activate=function(){u.current&&u.current.deactivate(),u.current=this,this.active=!0,this.dom.overlay.style.display="none",o.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},u.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",o.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},u.prototype._onTapOverlay=function(e){this.activate(),e.stopPropagation()},e.exports=u},function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var r;for(var i=0;i<n.length;i++){r=n[i];if(r===t||r.fn===t){n.splice(i,1);break}}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r,i,s;(function(n,o){i=[],r=o,s=typeof r=="function"?r.apply(t,i):r,s===undefined||!(e.exports=s)})(this,function(){function e(e){var t=e&&e.preventDefault||!1,n={keydown:{},keyup:{}},r={},i;for(i=97;i<=122;i++)r[String.fromCharCode(i)]={code:65+(i-97),shift:!1};for(i=65;i<=90;i++)r[String.fromCharCode(i)]={code:i,shift:!0};for(i=0;i<=9;i++)r[""+i]={code:48+i,shift:!1};for(i=1;i<=12;i++)r["F"+i]={code:111+i,shift:!1};for(i=0;i<=9;i++)r["num"+i]={code:96+i,shift:!1};r["num*"]={code:106,shift:!1},r["num+"]={code:107,shift:!1},r["num-"]={code:109,shift:!1},r["num/"]={code:111,shift:!1},r["num."]={code:110,shift:!1},r.left={code:37,shift:!1},r.up={code:38,shift:!1},r.right={code:39,shift:!1},r.down={code:40,shift:!1},r.space={code:32,shift:!1},r.enter={code:13,shift:!1},r.shift={code:16,shift:undefined},r.esc={code:27,shift:!1},r.backspace={code:8,shift:!1},r.tab={code:9,shift:!1},r.ctrl={code:17,shift:!1},r.alt={code:18,shift:!1},r["delete"]={code:46,shift:!1},r.pageup={code:33,shift:!1},r.pagedown={code:34,shift:!1},r["="]={code:187,shift:!1},r["-"]={code:189,shift:!1},r["]"]={code:221,shift:!1},r["["]={code:219,shift:!1};var s=function(e){u(e,"keydown")},o=function(e){u(e,"keyup")},u=function(e,r){if(n[r][e.keyCode]!==undefined){var i=n[r][e.keyCode];for(var s=0;s<i.length;s++)i[s].shift===undefined?i[s].fn(e):i[s].shift==1&&e.shiftKey==1?i[s].fn(e):i[s].shift==0&&e.shiftKey==0&&i[s].fn(e);t==1&&e.preventDefault()}};return this.bind=function(e,t,i){i===undefined&&(i="keydown");if(r[e]===undefined)throw new Error("unsupported key: "+e);n[i][r[e].code]===undefined&&(n[i][r[e].code]=[]),n[i][r[e].code].push({fn:t,shift:r[e].shift})},this.bindAll=function(e,t){t===undefined&&(t="keydown");for(key in r)r.hasOwnProperty(key)&&this.bind(key,e,t)},this.getKey=function(e){for(key in r)if(r.hasOwnProperty(key)){if(e.shiftKey==1&&r[key].shift==1&&e.keyCode==r[key].code)return key;if(e.shiftKey==0&&r[key].shift==0&&e.keyCode==r[key].code)return key;if(e.keyCode==r[key].code&&key=="shift")return key}return"unknown key, currently not supported"},this.unbind=function(e,t,i){i===undefined&&(i="keydown");if(r[e]===undefined)throw new Error("unsupported key: "+e);if(t!==undefined){var s=[],o=n[i][r[e].code];for(var u=0;u<o.length;u++)(o[u].fn!=t||o[u].shift!=r[e].shift)&&s.push(n[i][r[e].code][u]);n[i][r[e].code]=s}else n[i][r[e].code]=[]},this.reset=function(){n={keydown:{},keyup:{}}},this.destroy=function(){n={keydown:{},keyup:{}},window.removeEventListener("keydown",s,!0),window.removeEventListener("keyup",o,!0)},window.addEventListener("keydown",s,!0),window.addEventListener("keyup",o,!0),this}return e})},function(e,t,n){var r;(function(e,i){(function(s){function ot(e,t,n){switch(arguments.length){case 2:return e!=null?e:t;case 3:return e!=null?e:t!=null?t:n;default:throw new Error("Implement me")}}function ut(e,t){return c.call(e,t)}function at(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function ft(e){o.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function lt(e,t){var n=!0;return gt(function(){return n&&(ft(e),n=!1),t.apply(this,arguments)},t)}function ct(e,t){it[e]||(ft(t),it[e]=!0)}function ht(e,t){return function(n){return wt(e.call(this,n),t)}}function pt(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function dt(){}function vt(e,t){t!==!1&&Bt(e),yt(this,e),this._d=new Date(+e._d)}function mt(e){var t=At(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,u=t.day||0,a=t.hour||0,f=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+l*1e3+f*6e4+a*36e5,this._days=+u+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=o.localeData(),this._bubble()}function gt(e,t){for(var n in t)ut(t,n)&&(e[n]=t[n]);return ut(t,"toString")&&(e.toString=t.toString),ut(t,"valueOf")&&(e.valueOf=t.valueOf),e}function yt(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=t._pf),typeof t._locale!="undefined"&&(e._locale=t._locale);if(E.length>0)for(n in E)r=E[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function bt(e){return e<0?Math.ceil(e):Math.floor(e)}function wt(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function Et(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function St(e,t){var n;return t=Rt(t,e),e.isBefore(t)?n=Et(e,t):(n=Et(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function xt(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(ct(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=o.duration(n,r),Tt(this,i,e),this}}function Tt(e,t,n,r){var i=t._milliseconds,s=t._days,u=t._months;r=r==null?!0:r,i&&e._d.setTime(+e._d+i*n),s&&bn(e,"Date",yn(e,"Date")+s*n),u&&gn(e,yn(e,"Month")+u*n),r&&o.updateOffset(e,s||u)}function Nt(e){return Object.prototype.toString.call(e)==="[object Array]"}function Ct(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function kt(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&Mt(e[o])!==Mt(t[o]))&&s++;return s+i}function Lt(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=G[e]||Y[t]||t}return e}function At(e){var t={},n,r;for(r in e)ut(e,r)&&(n=Lt(r),n&&(t[n]=e[r]));return t}function Ot(e){var t,n;if(e.indexOf("week")===0)t=7,n="day";else{if(e.indexOf("month")!==0)return;t=12,n="month"}o[e]=function(r,i){var u,a,f=o._locale[e],l=[];typeof r=="number"&&(i=r,r=s),a=function(e){var t=o().utc().set(n,e);return f.call(o._locale,t,r||"")};if(i!=null)return a(i);for(u=0;u<t;u++)l.push(a(u));return l}}function Mt(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function _t(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Dt(e,t,n){return pn(o([e,11,31+t-n]),t,n).week}function Pt(e){return Ht(e)?366:365}function Ht(e){return e%4===0&&e%100!==0||e%400===0}function Bt(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[d]<0||e._a[d]>11?d:e._a[v]<1||e._a[v]>_t(e._a[p],e._a[d])?v:e._a[m]<0||e._a[m]>23?m:e._a[g]<0||e._a[g]>59?g:e._a[y]<0||e._a[y]>59?y:e._a[b]<0||e._a[b]>999?b:-1,e._pf._overflowDayOfYear&&(t<p||t>v)&&(t=v),e._pf.overflow=t)}function jt(e){return e._isValid==null&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&e._pf.charsLeftOver===0&&e._pf.unusedTokens.length===0)),e._isValid}function Ft(e){return e?e.toLowerCase().replace("_","-"):e}function It(e){var t=0,n,r,i,s;while(t<e.length){s=Ft(e[t]).split("-"),n=s.length,r=Ft(e[t+1]),r=r?r.split("-"):null;while(n>0){i=qt(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&kt(s,r,!0)>=n-1)break;n--}t++}return null}function qt(e){var t=null;if(!w[e]&&S)try{t=o.locale(),!function(){var t=new Error('Cannot find module "./locale"');throw t.code="MODULE_NOT_FOUND",t}(),o.locale(t)}catch(n){}return w[e]}function Rt(e,t){return t._isUTC?o(e).zone(t._offset||0):o(e).local()}function Ut(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function zt(e){var t=e.match(C),n,r;for(n=0,r=t.length;n<r;n++)rt[t[n]]?t[n]=rt[t[n]]:t[n]=Ut(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function Wt(e,t){return e.isValid()?(t=Xt(t,e.localeData()),Z[t]||(Z[t]=zt(t)),Z[t](e)):e.localeData().invalidDate()}function Xt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;k.lastIndex=0;while(n>=0&&k.test(e))e=e.replace(k,r),k.lastIndex=0,n-=1;return e}function Vt(e,t){var n,r=t._strict;switch(e){case"Q":return F;case"DDDD":return q;case"YYYY":case"GGGG":case"gggg":return r?R:O;case"Y":case"G":case"g":return z;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?U:M;case"S":if(r)return F;case"SS":if(r)return I;case"SSS":if(r)return q;case"DDD":return A;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return D;case"a":case"A":return t._locale._meridiemParse;case"X":return B;case"Z":case"ZZ":return P;case"T":return H;case"SSSS":return _;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?I:L;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return L;case"Do":return j;default:return n=new RegExp(tn(en(e.replace("\\","")),"i")),n}}function $t(e){e=e||"";var t=e.match(P)||[],n=t[t.length-1]||[],r=(n+"").match(J)||["-",0,0],i=+(r[1]*60)+Mt(r[2]);return r[0]==="+"?-i:i}function Jt(e,t,n){var r,i=n._a;switch(e){case"Q":t!=null&&(i[d]=(Mt(t)-1)*3);break;case"M":case"MM":t!=null&&(i[d]=Mt(t)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(t),r!=null?i[d]=r:n._pf.invalidMonth=t;break;case"D":case"DD":t!=null&&(i[v]=Mt(t));break;case"Do":t!=null&&(i[v]=Mt(parseInt(t,10)));break;case"DDD":case"DDDD":t!=null&&(n._dayOfYear=Mt(t));break;case"YY":i[p]=o.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":i[p]=Mt(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":i[m]=Mt(t);break;case"m":case"mm":i[g]=Mt(t);break;case"s":case"ss":i[y]=Mt(t);break;case"S":case"SS":case"SSS":case"SSSS":i[b]=Mt(("0."+t)*1e3);break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=$t(t);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(t),r!=null?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=Mt(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=o.parseTwoDigitYear(t)}}function Kt(e){var t,n,r,i,s,u,a;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,u=4,n=ot(t.GG,e._a[p],pn(o(),1,4).year),r=ot(t.W,1),i=ot(t.E,1)):(s=e._locale._week.dow,u=e._locale._week.doy,n=ot(t.gg,e._a[p],pn(o(),s,u).year),r=ot(t.w,1),t.d!=null?(i=t.d,i<s&&++r):t.e!=null?i=t.e+s:i=s),a=dn(n,r,i,u,s),e._a[p]=a.year,e._dayOfYear=a.dayOfYear}function Qt(e){var t,n,r=[],i,s;if(e._d)return;i=Yt(e),e._w&&e._a[v]==null&&e._a[d]==null&&Kt(e),e._dayOfYear&&(s=ot(e._a[p],i[p]),e._dayOfYear>Pt(s)&&(e._pf._overflowDayOfYear=!0),n=fn(s,0,e._dayOfYear),e._a[d]=n.getUTCMonth(),e._a[v]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._d=(e._useUTC?fn:an).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}function Gt(e){var t;if(e._d)return;t=At(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],Qt(e)}function Yt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Zt(e){if(e._f===o.ISO_8601){rn(e);return}e._a=[],e._pf.empty=!0;var t=""+e._i,n,r,i,s,u,a=t.length,f=0;i=Xt(e._f,e._locale).match(C)||[];for(n=0;n<i.length;n++)s=i[n],r=(t.match(Vt(s,e))||[])[0],r&&(u=t.substr(0,t.indexOf(r)),u.length>0&&e._pf.unusedInput.push(u),t=t.slice(t.indexOf(r)+r.length),f+=r.length),rt[s]?(r?e._pf.empty=!1:e._pf.unusedTokens.push(s),Jt(s,r,e)):e._strict&&!r&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=a-f,t.length>0&&e._pf.unusedInput.push(t),e._isPm&&e._a[m]<12&&(e._a[m]+=12),e._isPm===!1&&e._a[m]===12&&(e._a[m]=0),Qt(e),Bt(e)}function en(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function tn(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function nn(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=yt({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._pf=at(),t._f=e._f[i],Zt(t);if(!jt(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}gt(e,n||t)}function rn(e){var t,n,r=e._i,i=W.exec(r);if(i){e._pf.iso=!0;for(t=0,n=V.length;t<n;t++)if(V[t][1].exec(r)){e._f=V[t][0]+(i[6]||" ");break}for(t=0,n=$.length;t<n;t++)if($[t][1].exec(r)){e._f+=$[t][0];break}r.match(P)&&(e._f+="Z"),Zt(e)}else e._isValid=!1}function sn(e){rn(e),e._isValid===!1&&(delete e._isValid,o.createFromInputFallback(e))}function on(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function un(e){var t=e._i,n;t===s?e._d=new Date:Ct(t)?e._d=new Date(+t):(n=x.exec(t))!==null?e._d=new Date(+n[1]):typeof t=="string"?sn(e):Nt(t)?(e._a=on(t.slice(0),function(e){return parseInt(e,10)}),Qt(e)):typeof t=="object"?Gt(e):typeof t=="number"?e._d=new Date(t):o.createFromInputFallback(e)}function an(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function fn(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function ln(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function cn(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function hn(e,t,n){var r=o.duration(e).abs(),i=l(r.as("s")),s=l(r.as("m")),u=l(r.as("h")),a=l(r.as("d")),f=l(r.as("M")),c=l(r.as("y")),h=i<et.s&&["s",i]||s===1&&["m"]||s<et.m&&["mm",s]||u===1&&["h"]||u<et.h&&["hh",u]||a===1&&["d"]||a<et.d&&["dd",a]||f===1&&["M"]||f<et.M&&["MM",f]||c===1&&["y"]||["yy",c];return h[2]=t,h[3]=+e>0,h[4]=n,cn.apply({},h)}function pn(e,t,n){var r=n-t,i=n-e.day(),s;return i>r&&(i-=7),i<r-7&&(i+=7),s=o(e).add(i,"d"),{week:Math.ceil(s.dayOfYear()/7),year:s.year()}}function dn(e,t,n,r,i){var s=fn(e,0,1).getUTCDay(),o,u;return s=s===0?7:s,n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:Pt(e-1)+u}}function vn(e){var t=e._i,n=e._f;return e._locale=e._locale||o.localeData(e._l),t===null||n===s&&t===""?o.invalid({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),o.isMoment(t)?new vt(t,!0):(n?Nt(n)?nn(e):Zt(e):un(e),new vt(e)))}function mn(e,t){var n,r;t.length===1&&Nt(t[0])&&(t=t[0]);if(!t.length)return o();n=t[0];for(r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function gn(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),_t(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function yn(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function bn(e,t,n){return t==="Month"?gn(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function wn(e,t){return function(n){return n!=null?(bn(this,e,n),o.updateOffset(this,t),this):yn(this,e)}}function En(e){return e*400/146097}function Sn(e){return e*146097/400}function xn(e){o.duration.fn[e]=function(){return this._data[e]}}function Tn(e){if(typeof ender!="undefined")return;f=a.moment,e?a.moment=lt("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",o):a.moment=o}var o,u="2.8.3",a=typeof e!="undefined"?e:this,f,l=Math.round,c=Object.prototype.hasOwnProperty,h,p=0,d=1,v=2,m=3,g=4,y=5,b=6,w={},E=[],S=typeof i!="undefined"&&i.exports,x=/^\/?Date\((\-?\d+)/i,T=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,N=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,C=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,k=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,L=/\d\d?/,A=/\d{1,3}/,O=/\d{1,4}/,M=/[+\-]?\d{1,6}/,_=/\d+/,D=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,P=/Z|[\+\-]\d\d:?\d\d/gi,H=/T/i,B=/[\+\-]?\d+(\.\d{1,3})?/,j=/\d{1,2}/,F=/\d/,I=/\d\d/,q=/\d{3}/,R=/\d{4}/,U=/[+-]?\d{6}/,z=/[+-]?\d+/,W=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,X="YYYY-MM-DDTHH:mm:ssZ",V=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],$=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],J=/([\+\-]|\d\d)/gi,K="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Q={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},G={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Y={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Z={},et={s:45,m:45,h:22,d:26,M:11},tt="DDD w W M D d".split(" "),nt="M D H h m s w W".split(" "),rt={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return wt(this.year()%100,2)},YYYY:function(){return wt(this.year(),4)},YYYYY:function(){return wt(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+wt(Math.abs(e),6)},gg:function(){return wt(this.weekYear()%100,2)},gggg:function(){return wt(this.weekYear(),4)},ggggg:function(){return wt(this.weekYear(),5)},GG:function(){return wt(this.isoWeekYear()%100,2)},GGGG:function(){return wt(this.isoWeekYear(),4)},GGGGG:function(){return wt(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return Mt(this.milliseconds()/100)},SS:function(){return wt(Mt(this.milliseconds()/10),2)},SSS:function(){return wt(this.milliseconds(),3)},SSSS:function(){return wt(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+wt(Mt(e/60),2)+":"+wt(Mt(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+wt(Mt(e/60),2)+wt(Mt(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},it={},st=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];while(tt.length)h=tt.pop(),rt[h+"o"]=pt(rt[h],h);while(nt.length)h=nt.pop(),rt[h+h]=ht(rt[h],2);rt.DDDD=ht(rt.DDD,3),gt(dt.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,r;this._monthsParse||(this._monthsParse=[]);for(t=0;t<12;t++){this._monthsParse[t]||(n=o.utc([2e3,t]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(r.replace(".",""),"i"));if(this._monthsParse[t].test(e))return t}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;this._weekdaysParse||(this._weekdaysParse=[]);for(t=0;t<7;t++){this._weekdaysParse[t]||(n=o([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i"));if(this._weekdaysParse[t].test(e))return t}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n=="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return pn(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),o=function(e,t,n,r){var i;return typeof n=="boolean"&&(r=n,n=s),i={},i._isAMomentObject=!0,i._i=e,i._f=t,i._l=n,i._strict=r,i._isUTC=!1,i._pf=at(),vn(i)},o.suppressDeprecationWarnings=!1,o.createFromInputFallback=lt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),o.min=function(){var e=[].slice.call(arguments,0);return mn("isBefore",e)},o.max=function(){var e=[].slice.call(arguments,0);return mn("isAfter",e)},o.utc=function(e,t,n,r){var i;return typeof n=="boolean"&&(r=n,n=s),i={},i._isAMomentObject=!0,i._useUTC=!0,i._isUTC=!0,i._l=n,i._i=e,i._f=t,i._strict=r,i._pf=at(),vn(i).utc()},o.unix=function(e){return o(e*1e3)},o.duration=function(e,t){var n=e,r=null,i,s,u,a;return o.isDuration(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=T.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:Mt(r[v])*i,h:Mt(r[m])*i,m:Mt(r[g])*i,s:Mt(r[y])*i,ms:Mt(r[b])*i}):(r=N.exec(e))?(i=r[1]==="-"?-1:1,u=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},n={y:u(r[2]),M:u(r[3]),d:u(r[4]),h:u(r[5]),m:u(r[6]),s:u(r[7]),w:u(r[8])}):typeof n=="object"&&("from"in n||"to"in n)&&(a=St(o(n.from),o(n.to)),n={},n.ms=a.milliseconds,n.M=a.months),s=new mt(n),o.isDuration(e)&&ut(e,"_locale")&&(s._locale=e._locale),s},o.version=u,o.defaultFormat=X,o.ISO_8601=function(){},o.momentProperties=E,o.updateOffset=function(){},o.relativeTimeThreshold=function(e,t){return et[e]===s?!1:t===s?et[e]:(et[e]=t,!0)},o.lang=lt("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return o.locale(e,t)}),o.locale=function(e,t){var n;return e&&(typeof t!="undefined"?n=o.defineLocale(e,t):n=o.localeData(e),n&&(o.duration._locale=o._locale=n)),o._locale._abbr},o.defineLocale=function(e,t){return t!==null?(t.abbr=e,w[e]||(w[e]=new dt),w[e].set(t),o.locale(e),w[e]):(delete w[e],null)},o.langData=lt("moment.langData is deprecated. Use moment.localeData instead.",function(e){return o.localeData(e)}),o.localeData=function(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return o._locale;if(!Nt(e)){t=qt(e);if(t)return t;e=[e]}return It(e)},o.isMoment=function(e){return e instanceof vt||e!=null&&ut(e,"_isAMomentObject")},o.isDuration=function(e){return e instanceof mt};for(h=st.length-1;h>=0;--h)Ot(st[h]);o.normalizeUnits=function(e){return Lt(e)},o.invalid=function(e){var t=o.utc(NaN);return e!=null?gt(t._pf,e):t._pf.userInvalidated=!0,t},o.parseZone=function(){return o.apply(null,arguments).parseZone()},o.parseTwoDigitYear=function(e){return Mt(e)+(Mt(e)>68?1900:2e3)},gt(o.fn=vt.prototype,{clone:function(){return o(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=o(this).utc();return 0<e.year()&&e.year()<=9999?Wt(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Wt(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return jt(this)},isDSTShifted:function(){return this._a?this.isValid()&&kt(this._a,(this._isUTC?o.utc(this._a):o(this._a)).toArray())>0:!1},parsingFlags:function(){return gt({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=Wt(this,e||o.defaultFormat);return this.localeData().postformat(t)},add:xt(1,"add"),subtract:xt(-1,"subtract"),diff:function(e,t,n){var r=Rt(e,this),i=(this.zone()-r.zone())*6e4,s,u,a;return t=Lt(t),t==="year"||t==="month"?(s=(this.daysInMonth()+r.daysInMonth())*432e5,u=(this.year()-r.year())*12+(this.month()-r.month()),a=this-o(this).startOf("month")-(r-o(r).startOf("month")),a-=(this.zone()-o(this).startOf("month").zone()-(r.zone()-o(r).startOf("month").zone()))*6e4,u+=a/s,t==="year"&&(u/=12)):(s=this-r,u=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?u:bt(u)},from:function(e,t){return o.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(o(),e)},calendar:function(e){var t=e||o(),n=Rt(t,this).startOf("day"),r=this.diff(n,"days",!0),i=r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this))},isLeapYear:function(){return Ht(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=ln(e,this.localeData()),this.add(e-t,"d")):t},month:wn("Month",!0),startOf:function(e){e=Lt(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this},endOf:function(e){return e=Lt(e),this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t=Lt(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=o.isMoment(e)?e:o(e),+this>+e):+this.clone().startOf(t)>+o(e).startOf(t)},isBefore:function(e,t){return t=Lt(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=o.isMoment(e)?e:o(e),+this<+e):+this.clone().startOf(t)<+o(e).startOf(t)},isSame:function(e,t){return t=Lt(t||"millisecond"),t==="millisecond"?(e=o.isMoment(e)?e:o(e),+this===+e):+this.clone().startOf(t)===+Rt(e,this).startOf(t)},min:lt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=o.apply(null,arguments),e<this?this:e}),max:lt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=o.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n=this._offset||0,r;return e==null?this._isUTC?n:this._dateTzOffset():(typeof e=="string"&&(e=$t(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(r=this._dateTzOffset()),this._offset=e,this._isUTC=!0,r!=null&&this.subtract(r,"m"),n!==e&&(!t||this._changeInProgress?Tt(this,o.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,o.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e?e=o(e).zone():e=0,(this.zone()-e)%60===0},daysInMonth:function(){return _t(this.year(),this.month())},dayOfYear:function(e){var t=l((o(this).startOf("day")-o(this).startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")},quarter:function(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)},weekYear:function(e){var t=pn(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=pn(this,1,4).year;return e==null?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")},isoWeek:function(e){var t=pn(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return Dt(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return Dt(this.year(),e.dow,e.doy)},get:function(e){return e=Lt(e),this[e]()},set:function(e,t){return e=Lt(e),typeof this[e]=="function"&&this[e](t),this},locale:function(e){var t;return e===s?this._locale._abbr:(t=o.localeData(e),t!=null&&(this._locale=t),this)},lang:lt("moment().lang() is deprecated. Use moment().localeData() instead.",function(e){return e===s?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15}}),o.fn.millisecond=o.fn.milliseconds=wn("Milliseconds",!1),o.fn.second=o.fn.seconds=wn("Seconds",!1),o.fn.minute=o.fn.minutes=wn("Minutes",!1),o.fn.hour=o.fn.hours=wn("Hours",!0),o.fn.date=wn("Date",!0),o.fn.dates=lt("dates accessor is deprecated. Use date instead.",wn("Date",!0)),o.fn.year=wn("FullYear",!0),o.fn.years=lt("years accessor is deprecated. Use year instead.",wn("FullYear",!0)),o.fn.days=o.fn.day,o.fn.months=o.fn.month,o.fn.weeks=o.fn.week,o.fn.isoWeeks=o.fn.isoWeek,o.fn.quarters=o.fn.quarter,o.fn.toJSON=o.fn.toISOString,gt(o.duration.fn=mt.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u=0;r.milliseconds=e%1e3,i=bt(e/1e3),r.seconds=i%60,s=bt(i/60),r.minutes=s%60,o=bt(s/60),r.hours=o%24,t+=bt(o/24),u=bt(En(t)),t-=bt(Sn(u)),n+=bt(t/30),t%=30,u+=bt(n/12),n%=12,r.days=t,r.months=n,r.years=u},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return bt(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+Mt(this._months/12)*31536e6},humanize:function(e){var t=hn(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=o.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=o.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=Lt(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;e=Lt(e);if(e==="month"||e==="year")return t=this._days+this._milliseconds/864e5,n=this._months+En(t)*12,e==="month"?n:n/12;t=this._days+Sn(this._months/12);switch(e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return t*24+this._milliseconds/36e5;case"minute":return t*24*60+this._milliseconds/6e4;case"second":return t*24*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(t*24*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:o.fn.lang,locale:o.fn.locale,toIsoString:lt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),o.duration.fn.toString=o.duration.fn.toISOString;for(h in Q)ut(Q,h)&&xn(h.toLowerCase());o.duration.fn.asMilliseconds=function(){return this.as("ms")},o.duration.fn.asSeconds=function(){return this.as("s")},o.duration.fn.asMinutes=function(){return this.as("m")},o.duration.fn.asHours=function(){return this.as("h")},o.duration.fn.asDays=function(){return this.as("d")},o.duration.fn.asWeeks=function(){return this.as("weeks")},o.duration.fn.asMonths=function(){return this.as("M")},o.duration.fn.asYears=function(){return this.as("y")},o.locale("en",{ordinal:function(e){var t=e%10,n=Mt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),S?i.exports=o:(r=function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(a.moment=f),o}.call(t,n,t,i),r===s||!(i.exports=r),Tn(!0))}).call(this)}).call(t,function(){return this}(),n(68)(e))},function(e,t,n){var r;(function(i,s){"use strict";function w(){if(o.READY)return;S.determineEventTypes(),E.each(o.gestures,function(e){T.register(e)}),S.onTouch(o.DOCUMENT,m,T.detect),S.onTouch(o.DOCUMENT,g,T.detect),o.READY=!0}var o=function N(e,t){return new N.Instance(e,t||{})};o.VERSION="1.1.3",o.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},o.DOCUMENT=document,o.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,o.HAS_TOUCHEVENTS="ontouchstart"in i,o.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),o.NO_MOUSEEVENTS=o.HAS_TOUCHEVENTS&&o.IS_MOBILE||o.HAS_POINTEREVENTS,o.CALCULATE_INTERVAL=25;var u={},a=o.DIRECTION_DOWN="down",f=o.DIRECTION_LEFT="left",l=o.DIRECTION_UP="up",c=o.DIRECTION_RIGHT="right",h=o.POINTER_MOUSE="mouse",p=o.POINTER_TOUCH="touch",d=o.POINTER_PEN="pen",v=o.EVENT_START="start",m=o.EVENT_MOVE="move",g=o.EVENT_END="end",y=o.EVENT_RELEASE="release",b=o.EVENT_TOUCH="touch";o.READY=!1,o.plugins=o.plugins||{},o.gestures=o.gestures||{};var E=o.utils={extend:function(t,n,r){for(var i in n){if(!n.hasOwnProperty(i)||t[i]!==s&&r)continue;t[i]=n[i]}return t},on:function(t,n,r){t.addEventListener(n,r,!1)},off:function(t,n,r){t.removeEventListener(n,r,!1)},each:function(t,n,r){var i,o;if("forEach"in t)t.forEach(n,r);else if(t.length!==s){for(i=0,o=t.length;i<o;i++)if(n.call(r,t[i],i,t)===!1)return}else for(i in t)if(t.hasOwnProperty(i)&&n.call(r,t[i],i,t)===!1)return},inStr:function(t,n){return t.indexOf(n)>-1},inArray:function(t,n){if(t.indexOf){var r=t.indexOf(n);return r===-1?!1:r}for(var i=0,s=t.length;i<s;i++)if(t[i]===n)return i;return!1},toArray:function(t){return Array.prototype.slice.call(t,0)},hasParent:function(t,n){while(t){if(t==n)return!0;t=t.parentNode}return!1},getCenter:function(t){var n=[],r=[],i=[],s=[],o=Math.min,u=Math.max;return t.length===1?{pageX:t[0].pageX,pageY:t[0].pageY,clientX:t[0].clientX,clientY:t[0].clientY}:(E.each(t,function(e){n.push(e.pageX),r.push(e.pageY),i.push(e.clientX),s.push(e.clientY)}),{pageX:(o.apply(Math,n)+u.apply(Math,n))/2,pageY:(o.apply(Math,r)+u.apply(Math,r))/2,clientX:(o.apply(Math,i)+u.apply(Math,i))/2,clientY:(o.apply(Math,s)+u.apply(Math,s))/2})},getVelocity:function(t,n,r){return{x:Math.abs(n/t)||0,y:Math.abs(r/t)||0}},getAngle:function(t,n){var r=n.clientX-t.clientX,i=n.clientY-t.clientY;return Math.atan2(i,r)*180/Math.PI},getDirection:function(t,n){var r=Math.abs(t.clientX-n.clientX),i=Math.abs(t.clientY-n.clientY);return r>=i?t.clientX-n.clientX>0?f:c:t.clientY-n.clientY>0?l:a},getDistance:function(t,n){var r=n.clientX-t.clientX,i=n.clientY-t.clientY;return Math.sqrt(r*r+i*i)},getScale:function(t,n){return t.length>=2&&n.length>=2?this.getDistance(n[0],n[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,n){return t.length>=2&&n.length>=2?this.getAngle(n[1],n[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==l||t==a},setPrefixedCss:function(t,n,r,i){var s=["","Webkit","Moz","O","ms"];n=E.toCamelCase(n);for(var o=0;o<s.length;o++){var u=n;s[o]&&(u=s[o]+u.slice(0,1).toUpperCase()+u.slice(1));if(u in t.style){t.style[u]=(i==null||i)&&r||"";break}}},toggleBehavior:function(t,n,r){if(!n||!t||!t.style)return;E.each(n,function(e,n){E.setPrefixedCss(t,n,e,r)});var i=r&&function(){return!1};n.userSelect=="none"&&(t.onselectstart=i),n.userDrag=="none"&&(t.ondragstart=i)},toCamelCase:function(t){return t.replace(/[_-]([a-z])/g,function(e){return e[1].toUpperCase()})}},S=o.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(t,n,r,i){var s=n.split(" ");E.each(s,function(e){E.on(t,e,r),i&&i(e)})},off:function(t,n,r,i){var s=n.split(" ");E.each(s,function(e){E.off(t,e,r),i&&i(e)})},onTouch:function(t,n,r){var i=this,s=function(s){var u=s.type.toLowerCase(),a=o.HAS_POINTEREVENTS,f=E.inStr(u,"mouse"),l;if(f&&i.preventMouseEvents)return;f&&n==v&&s.button===0?(i.preventMouseEvents=!1,i.shouldDetect=!0):a&&n==v?i.shouldDetect=s.buttons===1||x.matchType(p,s):!f&&n==v&&(i.preventMouseEvents=!0,i.shouldDetect=!0),a&&n!=g&&x.updatePointer(n,s),i.shouldDetect&&(l=i.doDetect.call(i,s,n,t,r)),l==g&&(i.preventMouseEvents=!1,i.shouldDetect=!1,x.reset()),a&&n==g&&x.updatePointer(n,s)};return this.on(t,u[n],s),s},doDetect:function(t,n,r,i){var s=this.getTouchList(t,n),o=s.length,u=n,a=s.trigger,f=o;n==v?a=b:n==g&&(a=y,f=s.length-(t.changedTouches?t.changedTouches.length:1)),f>0&&this.started&&(u=m),this.started=!0;var l=this.collectEventData(r,u,s,t);return n!=g&&i.call(T,l),a&&(l.changedLength=f,l.eventType=a,i.call(T,l),l.eventType=u,delete l.changedLength),u==g&&(i.call(T,l),this.started=!1),u},determineEventTypes:function(){var t;return o.HAS_POINTEREVENTS?i.PointerEvent?t=["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:t=["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:o.NO_MOUSEEVENTS?t=["touchstart","touchmove","touchend touchcancel"]:t=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],u[v]=t[0],u[m]=t[1],u[g]=t[2],u},getTouchList:function(t,n){if(o.HAS_POINTEREVENTS)return x.getTouchList();if(t.touches){if(n==m)return t.touches;var r=[],i=[].concat(E.toArray(t.touches),E.toArray(t.changedTouches)),s=[];return E.each(i,function(e){E.inArray(r,e.identifier)===!1&&s.push(e),r.push(e.identifier)}),s}return t.identifier=1,[t]},collectEventData:function(t,n,r,i){var s=p;return E.inStr(i.type,"mouse")||x.matchType(h,i)?s=h:x.matchType(d,i)&&(s=d),{center:E.getCenter(r),timeStamp:Date.now(),target:i.target,touches:r,eventType:n,pointerType:s,srcEvent:i,preventDefault:function(){var e=this.srcEvent;e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return T.stopDetect()}}}},x=o.PointerEvent={pointers:{},getTouchList:function(){var t=[];return E.each(this.pointers,function(e){t.push(e)}),t},updatePointer:function(t,n){t==g||t!=g&&n.buttons!==1?delete this.pointers[n.pointerId]:(n.identifier=n.pointerId,this.pointers[n.pointerId]=n)},matchType:function(t,n){if(!n.pointerType)return!1;var r=n.pointerType,i={};return i[h]=r===(n.MSPOINTER_TYPE_MOUSE||h),i[p]=r===(n.MSPOINTER_TYPE_TOUCH||p),i[d]=r===(n.MSPOINTER_TYPE_PEN||d),i[t]},reset:function(){this.pointers={}}},T=o.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,n){if(this.current)return;this.stopped=!1,this.current={inst:t,startEvent:E.extend({},n),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(n)},detect:function(t){if(!this.current||this.stopped)return;t=this.extendEventData(t);var n=this.current.inst,r=n.options;return E.each(this.gestures,function(i){!this.stopped&&n.enabled&&r[i.name]&&i.handler.call(i,t,n)},this),this.current&&(this.current.lastEvent=t),t.eventType==g&&this.stopDetect(),t},stopDetect:function(){this.previous=E.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(t,n,r,i,s){var u=this.current,a=!1,f=u.lastCalcEvent,l=u.lastCalcData;f&&t.timeStamp-f.timeStamp>o.CALCULATE_INTERVAL&&(n=f.center,r=t.timeStamp-f.timeStamp,i=t.center.clientX-f.center.clientX,s=t.center.clientY-f.center.clientY,a=!0);if(t.eventType==b||t.eventType==y)u.futureCalcEvent=t;if(!u.lastCalcEvent||a)l.velocity=E.getVelocity(r,i,s),l.angle=E.getAngle(n,t.center),l.direction=E.getDirection(n,t.center),u.lastCalcEvent=u.futureCalcEvent||t,u.futureCalcEvent=t;t.velocityX=l.velocity.x,t.velocityY=l.velocity.y,t.interimAngle=l.angle,t.interimDirection=l.direction},extendEventData:function(t){var n=this.current,r=n.startEvent,i=n.lastEvent||r;if(t.eventType==b||t.eventType==y)r.touches=[],E.each(t.touches,function(e){r.touches.push({clientX:e.clientX,clientY:e.clientY})});var s=t.timeStamp-r.timeStamp,o=t.center.clientX-r.center.clientX,u=t.center.clientY-r.center.clientY;return this.getCalculatedData(t,i.center,s,o,u),E.extend(t,{startEvent:r,deltaTime:s,deltaX:o,deltaY:u,distance:E.getDistance(r.center,t.center),angle:E.getAngle(r.center,t.center),direction:E.getDirection(r.center,t.center),scale:E.getScale(r.touches,t.touches),rotation:E.getRotation(r.touches,t.touches)}),t},register:function(t){var n=t.defaults||{};return n[t.name]===s&&(n[t.name]=!0),E.extend(o.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}};o.Instance=function(e,t){var n=this;w(),this.element=e,this.enabled=!0,E.each(t,function(e,n){delete t[n],t[E.toCamelCase(n)]=e}),this.options=E.extend(E.extend({},o.defaults),t||{}),this.options.behavior&&E.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=S.onTouch(e,v,function(e){n.enabled&&e.eventType==v?T.startDetect(n,e):e.eventType==b&&T.detect(e)}),this.eventHandlers=[]},o.Instance.prototype={on:function(t,n){var r=this;return S.on(r.element,t,n,function(e){r.eventHandlers.push({gesture:e,handler:n})}),r},off:function(t,n){var r=this;return S.off(r.element,t,n,function(e){var t=E.inArray({gesture:e,handler:n});t!==!1&&r.eventHandlers.splice(t,1)}),r},trigger:function(t,n){n||(n={});var r=o.DOCUMENT.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=n;var i=this.element;return E.hasParent(n.target,i)&&(i=n.target),i.dispatchEvent(r),this},enable:function(t){return this.enabled=t,this},dispose:function(){var t,n;E.toggleBehavior(this.element,this.options.behavior,!1);for(t=-1;n=this.eventHandlers[++t];)E.off(this.element,n.gesture,n.handler);return this.eventHandlers=[],S.off(this.element,u[v],this.eventStartHandler),null}},function(e){function n(n,r){var i=T.current;if(r.options.dragMaxTouches>0&&n.touches.length>r.options.dragMaxTouches)return;switch(n.eventType){case v:t=!1;break;case m:if(n.distance<r.options.dragMinDistance&&i.name!=e)return;var s=i.startEvent.center;if(i.name!=e){i.name=e;if(r.options.dragDistanceCorrection&&n.distance>0){var o=Math.abs(r.options.dragMinDistance/n.distance);s.pageX+=n.deltaX*o,s.pageY+=n.deltaY*o,s.clientX+=n.deltaX*o,s.clientY+=n.deltaY*o,n=T.extendEventData(n)}}if(i.lastEvent.dragLockToAxis||r.options.dragLockToAxis&&r.options.dragLockMinDistance<=n.distance)n.dragLockToAxis=!0;var u=i.lastEvent.direction;n.dragLockToAxis&&u!==n.direction&&(E.isVertical(u)?n.direction=n.deltaY<0?l:a:n.direction=n.deltaX<0?f:c),t||(r.trigger(e+"start",n),t=!0),r.trigger(e,n),r.trigger(e+n.direction,n);var h=E.isVertical(n.direction);(r.options.dragBlockVertical&&h||r.options.dragBlockHorizontal&&!h)&&n.preventDefault();break;case y:t&&n.changedLength<=r.options.dragMaxTouches&&(r.trigger(e+"end",n),t=!1);break;case g:t=!1}}var t=!1;o.gestures.Drag={name:e,index:50,handler:n,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),o.gestures.Gesture={name:"gesture",index:1337,handler:function(t,n){n.trigger(this.name,t)}},function(e){function n(n,r){var i=r.options,s=T.current;switch(n.eventType){case v:clearTimeout(t),s.name=e,t=setTimeout(function(){s&&s.name==e&&r.trigger(e,n)},i.holdTimeout);break;case m:n.distance>i.holdThreshold&&clearTimeout(t);break;case y:clearTimeout(t)}}var t;o.gestures.Hold={name:e,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:n}}("hold"),o.gestures.Release={name:"release",index:Infinity,handler:function(t,n){t.eventType==y&&n.trigger(this.name,t)}},o.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(t,n){if(t.eventType==y){var r=t.touches.length,i=n.options;if(r<i.swipeMinTouches||r>i.swipeMaxTouches)return;if(t.velocityX>i.swipeVelocityX||t.velocityY>i.swipeVelocityY)n.trigger(this.name,t),n.trigger(this.name+t.direction,t)}}},function(e){function n(n,r){var i=r.options,s=T.current,o=T.previous,u,a;switch(n.eventType){case v:t=!1;break;case m:t=t||n.distance>i.tapMaxDistance;break;case g:if(!E.inStr(n.srcEvent.type,"cancel")&&n.deltaTime<i.tapMaxTime&&!t){u=o&&o.lastEvent&&n.timeStamp-o.lastEvent.timeStamp,a=!1,o&&o.name==e&&u&&u<i.doubleTapInterval&&n.distance<i.doubleTapDistance&&(r.trigger("doubletap",n),a=!0);if(!a||i.tapAlways)s.name=e,r.trigger(s.name,n)}}}var t=!1;o.gestures.Tap={name:e,index:100,handler:n,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),o.gestures.Touch={name:"touch",index:-Infinity,defaults:{preventDefault:!1,preventMouse:!1},handler:function(t,n){if(n.options.preventMouse&&t.pointerType==h){t.stopDetect();return}n.options.preventDefault&&t.preventDefault(),t.eventType==b&&n.trigger("touch",t)}},function(e){function n(n,r){switch(n.eventType){case v:t=!1;break;case m:if(n.touches.length<2)return;var i=Math.abs(1-n.scale),s=Math.abs(n.rotation);if(i<r.options.transformMinScale&&s<r.options.transformMinRotation)return;T.current.name=e,t||(r.trigger(e+"start",n),t=!0),r.trigger(e,n),s>r.options.transformMinRotation&&r.trigger("rotate",n),i>r.options.transformMinScale&&(r.trigger("pinch",n),r.trigger("pinch"+(n.scale<1?"in":"out"),n));break;case y:t&&n.changedLength<2&&(r.trigger(e+"end",n),t=!1)}}var t=!1;o.gestures.Transform={name:e,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:n}}("transform"),r=function(){return o}.call(t,n,t,e),r===s||!(e.exports=r)})(window)},function(e,t,n){t.startWithClustering=function(){this.clusterToFit(this.constants.clustering.initialMaxNodes,!0),this.updateLabels(),this.stabilize&&this._stabilize(),this.start()},t.clusterToFit=function(e,t){var n=this.nodeIndices.length,r=50,i=0;while(n>e&&i<r)i%3==0?(this.forceAggregateHubs(!0),this.normalizeClusterLevels()):this.increaseClusterLevel(),n=this.nodeIndices.length,i+=1;i>0&&t==1&&this.repositionNodes(),this._updateCalculationNodes()},t.openCluster=function(e){var t=this.moving;if(e.clusterSize>this.constants.clustering.sectorThreshold&&this._nodeInActiveArea(e)&&(this._sector()!="default"||this.nodeIndices.length!=1)){this._addSector(e);var n=0;while(this.nodeIndices.length<this.constants.clustering.initialMaxNodes&&n<10)this.decreaseClusterLevel(),n+=1}else this._expandClusterNode(e,!1,!0),this._updateNodeIndexList(),this._updateDynamicEdges(),this._updateCalculationNodes(),this.updateLabels();this.moving!=t&&this.start()},t.updateClustersDefault=function(){this.constants.clustering.enabled==1&&this.updateClusters(0,!1,!1)},t.increaseClusterLevel=function(){this.updateClusters(-1,!1,!0)},t.decreaseClusterLevel=function(){this.updateClusters(1,!1,!0)},t.updateClusters=function(e,t,n,r){var i=this.moving,s=this.nodeIndices.length;this.previousScale>this.scale&&e==0&&this._collapseSector();if(this.previousScale>this.scale||e==-1)this._formClusters(n);else if(this.previousScale<this.scale||e==1)n==1?this._openClusters(t,n):this._openClustersBySize();this._updateNodeIndexList(),this.nodeIndices.length==s&&(this.previousScale>this.scale||e==-1)&&(this._aggregateHubs(n),this._updateNodeIndexList());if(this.previousScale>this.scale||e==-1)this.handleChains(),this._updateNodeIndexList();this.previousScale=this.scale,this._updateDynamicEdges(),this.updateLabels(),this.nodeIndices.length<s&&(this.clusterSession+=1,this.normalizeClusterLevels()),(r==0||r===undefined)&&this.moving!=i&&this.start(),this._updateCalculationNodes()},t.handleChains=function(){var e=this._getChainFraction();e>this.constants.clustering.chainThreshold&&this._reduceAmountOfChains(1-this.constants.clustering.chainThreshold/e)},t._aggregateHubs=function(e){this._getHubSize(),this._formClustersByHub(e,!1)},t.forceAggregateHubs=function(e){var t=this.moving,n=this.nodeIndices.length;this._aggregateHubs(!0),this._updateNodeIndexList(),this._updateDynamicEdges(),this.updateLabels(),this.nodeIndices.length!=n&&(this.clusterSession+=1),(e==0||e===undefined)&&this.moving!=t&&this.start()},t._openClustersBySize=function(){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e)){var t=this.nodes[e];t.inView()==1&&(t.width*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||t.height*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight)&&this.openCluster(t)}},t._openClusters=function(e,t){for(var n=0;n<this.nodeIndices.length;n++){var r=this.nodes[this.nodeIndices[n]];this._expandClusterNode(r,e,t),this._updateCalculationNodes()}},t._expandClusterNode=function(e,t,n,r){if(e.clusterSize>1){e.clusterSize<this.constants.clustering.sectorThreshold&&(r=!0),t=r?!0:t;if(e.formationScale<this.scale||n==1)for(var i in e.containedNodes)if(e.containedNodes.hasOwnProperty(i)){var s=e.containedNodes[i];n==1?(s.clusterSession==e.clusterSessions[e.clusterSessions.length-1]||r)&&this._expelChildFromParent(e,i,t,n,r):this._nodeInActiveArea(e)&&this._expelChildFromParent(e,i,t,n,r)}}},t._expelChildFromParent=function(e,t,n,r,i){var s=e.containedNodes[t];if(s.formationScale<this.scale||r==1){this._unselectAll(),this.nodes[t]=s,this._releaseContainedEdges(e,s),this._connectEdgeBackToChild(e,s),this._validateEdges(e),e.options.mass-=s.options.mass,e.clusterSize-=s.clusterSize,e.options.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*(e.clusterSize-1)),e.dynamicEdgesLength=e.dynamicEdges.length,s.x=e.x+e.growthIndicator*(.5-Math.random()),s.y=e.y+e.growthIndicator*(.5-Math.random()),delete e.containedNodes[t];var o=!1;for(var u in e.containedNodes)if(e.containedNodes.hasOwnProperty(u)&&e.containedNodes[u].clusterSession==s.clusterSession){o=!0;break}o==0&&e.clusterSessions.pop(),this._repositionBezierNodes(s),s.clusterSession=0,e.clearSizeCache(),this.moving=!0}n==1&&this._expandClusterNode(s,n,r,i)},t._repositionBezierNodes=function(e){for(var t=0;t<e.dynamicEdges.length;t++)e.dynamicEdges[t].positionBezierNode()},t._formClusters=function(e){e==0?this._formClustersByZoom():this._forceClustersByZoom()},t._formClustersByZoom=function(){var e,t,n,r=this.constants.clustering.clusterEdgeThreshold/this.scale;for(var i in this.edges)if(this.edges.hasOwnProperty(i)){var s=this.edges[i];if(s.connected&&s.toId!=s.fromId){e=s.to.x-s.from.x,t=s.to.y-s.from.y,n=Math.sqrt(e*e+t*t);if(n<r){var o=s.from,u=s.to;s.to.options.mass>s.from.options.mass&&(o=s.to,u=s.from),u.dynamicEdgesLength==1?this._addToCluster(o,u,!1):o.dynamicEdgesLength==1&&this._addToCluster(u,o,!1)}}}},t._forceClustersByZoom=function(){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e)){var t=this.nodes[e];if(t.dynamicEdgesLength==1&&t.dynamicEdges.length!=0){var n=t.dynamicEdges[0],r=n.toId==t.id?this.nodes[n.fromId]:this.nodes[n.toId];t.id!=r.id&&(r.options.mass>t.options.mass?this._addToCluster(r,t,!0):this._addToCluster(t,r,!0))}}},t._clusterToSmallestNeighbour=function(e){var t=-1,n=null;for(var r=0;r<e.dynamicEdges.length;r++)if(e.dynamicEdges[r]!==undefined){var i=null;e.dynamicEdges[r].fromId!=e.id?i=e.dynamicEdges[r].from:e.dynamicEdges[r].toId!=e.id&&(i=e.dynamicEdges[r].to),i!=null&&t>i.clusterSessions.length&&(t=i.clusterSessions.length,n=i)}i!=null&&this.nodes[i.id]!==undefined&&this._addToCluster(i,e,!0)},t._formClustersByHub=function(e,t){for(var n in this.nodes)this.nodes.hasOwnProperty(n)&&this._formClusterFromHub(this.nodes[n],e,t)},t._formClusterFromHub=function(e,t,n,r){r===undefined&&(r=0);if(e.dynamicEdgesLength>=this.hubThreshold&&n==0||e.dynamicEdgesLength==this.hubThreshold&&n==1){var i,s,o,u=this.constants.clustering.clusterEdgeThreshold/this.scale,a=!1,f=[],l=e.dynamicEdges.length;for(var c=0;c<l;c++)f.push(e.dynamicEdges[c].id);if(t==0){a=!1;for(c=0;c<l;c++){var h=this.edges[f[c]];if(h!==undefined&&h.connected&&h.toId!=h.fromId){i=h.to.x-h.from.x,s=h.to.y-h.from.y,o=Math.sqrt(i*i+s*s);if(o<u){a=!0;break}}}}if(!t&&a||t)for(c=0;c<l;c++){h=this.edges[f[c]];if(h!==undefined){var p=this.nodes[h.fromId==e.id?h.toId:h.fromId];p.dynamicEdges.length<=this.hubThreshold+r&&p.id!=e.id&&this._addToCluster(e,p,t)}}}},t._addToCluster=function(e,t,n){e.containedNodes[t.id]=t;for(var r=0;r<t.dynamicEdges.length;r++){var i=t.dynamicEdges[r];i.toId==e.id||i.fromId==e.id?this._addToContainedEdges(e,t,i):this._connectEdgeToCluster(e,t,i)}t.dynamicEdges=[],this._containCircularEdgesFromNode(e,t),delete this.nodes[t.id];var s=e.options.mass;t.clusterSession=this.clusterSession,e.options.mass+=t.options.mass,e.clusterSize+=t.clusterSize,e.options.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*e.clusterSize),e.clusterSessions[e.clusterSessions.length-1]!=this.clusterSession&&e.clusterSessions.push(this.clusterSession),n==1?e.formationScale=0:e.formationScale=this.scale,e.clearSizeCache(),e.containedNodes[t.id].formationScale=e.formationScale,t.clearVelocity(),e.updateVelocity(s),this.moving=!0},t._updateDynamicEdges=function(){for(var e=0;e<this.nodeIndices.length;e++){var t=this.nodes[this.nodeIndices[e]];t.dynamicEdgesLength=t.dynamicEdges.length;var n=0;if(t.dynamicEdgesLength>1)for(var r=0;r<t.dynamicEdgesLength-1;r++){var i=t.dynamicEdges[r].toId,s=t.dynamicEdges[r].fromId;for(var o=r+1;o<t.dynamicEdgesLength;o++)if(t.dynamicEdges[o].toId==i&&t.dynamicEdges[o].fromId==s||t.dynamicEdges[o].fromId==i&&t.dynamicEdges[o].toId==s)n+=1}t.dynamicEdgesLength-=n}},t._addToContainedEdges=function(e,t,n){e.containedEdges.hasOwnProperty(t.id)||(e.containedEdges[t.id]=[]),e.containedEdges[t.id].push(n),delete this.edges[n.id];for(var r=0;r<e.dynamicEdges.length;r++)if(e.dynamicEdges[r].id==n.id){e.dynamicEdges.splice(r,1);break}},t._connectEdgeToCluster=function(e,t,n){n.toId==n.fromId?this._addToContainedEdges(e,t,n):(n.toId==t.id?(n.originalToId.push(t.id),n.to=e,n.toId=e.id):(n.originalFromId.push(t.id),n.from=e,n.fromId=e.id),this._addToReroutedEdges(e,t,n))},t._containCircularEdgesFromNode=function(e,t){for(var n=0;n<e.dynamicEdges.length;n++){var r=e.dynamicEdges[n];r.toId==r.fromId&&this._addToContainedEdges(e,t,r)}},t._addToReroutedEdges=function(e,t,n){e.reroutedEdges.hasOwnProperty(t.id)||(e.reroutedEdges[t.id]=[]),e.reroutedEdges[t.id].push(n),e.dynamicEdges.push(n)},t._connectEdgeBackToChild=function(e,t){if(e.reroutedEdges.hasOwnProperty(t.id)){for(var n=0;n<e.reroutedEdges[t.id].length;n++){var r=e.reroutedEdges[t.id][n];r.originalFromId[r.originalFromId.length-1]==t.id?(r.originalFromId.pop(),r.fromId=t.id,r.from=t):(r.originalToId.pop(),r.toId=t.id,r.to=t),t.dynamicEdges.push(r);for(var i=0;i<e.dynamicEdges.length;i++)if(e.dynamicEdges[i].id==r.id){e.dynamicEdges.splice(i,1);break}}delete e.reroutedEdges[t.id]}},t._validateEdges=function(e){for(var t=0;t<e.dynamicEdges.length;t++){var n=e.dynamicEdges[t];e.id!=n.toId&&e.id!=n.fromId&&e.dynamicEdges.splice(t,1)}},t._releaseContainedEdges=function(e,t){for(var n=0;n<e.containedEdges[t.id].length;n++){var r=e.containedEdges[t.id][n];this.edges[r.id]=r,t.dynamicEdges.push(r),e.dynamicEdges.push(r)}delete e.containedEdges[t.id]},t.updateLabels=function(){var e;for(e in this.nodes)if(this.nodes.hasOwnProperty(e)){var t=this.nodes[e];t.clusterSize>1&&(t.label="[".concat(String(t.clusterSize),"]"))}for(e in this.nodes)this.nodes.hasOwnProperty(e)&&(t=this.nodes[e],t.clusterSize==1&&(t.originalLabel!==undefined?t.label=t.originalLabel:t.label=String(t.id)))},t.normalizeClusterLevels=function(){var e=0,t=1e9,n=0,r;for(r in this.nodes)this.nodes.hasOwnProperty(r)&&(n=this.nodes[r].clusterSessions.length,e<n&&(e=n),t>n&&(t=n));if(e-t>this.constants.clustering.clusterLevelDifference){var i=this.nodeIndices.length,s=e-this.constants.clustering.clusterLevelDifference;for(r in this.nodes)this.nodes.hasOwnProperty(r)&&this.nodes[r].clusterSessions.length<s&&this._clusterToSmallestNeighbour(this.nodes[r]);this._updateNodeIndexList(),this._updateDynamicEdges(),this.nodeIndices.length!=i&&(this.clusterSession+=1)}},t._nodeInActiveArea=function(e){return Math.abs(e.x-this.areaCenter.x)<=this.constants.clustering.activeAreaBoxSize/this.scale&&Math.abs(e.y-this.areaCenter.y)<=this.constants.clustering.activeAreaBoxSize/this.scale},t.repositionNodes=function(){for(var e=0;e<this.nodeIndices.length;e++){var t=this.nodes[this.nodeIndices[e]];if(t.xFixed==0||t.yFixed==0){var n=1*this.nodeIndices.length*Math.min(100,t.options.mass),r=2*Math.PI*Math.random();t.xFixed==0&&(t.x=n*Math.cos(r)),t.yFixed==0&&(t.y=n*Math.sin(r)),this._repositionBezierNodes(t)}}},t._getHubSize=function(){var e=0,t=0,n=0,r=0;for(var i=0;i<this.nodeIndices.length;i++){var s=this.nodes[this.nodeIndices[i]];s.dynamicEdgesLength>r&&(r=s.dynamicEdgesLength),e+=s.dynamicEdgesLength,t+=Math.pow(s.dynamicEdgesLength,2),n+=1}e/=n,t/=n;var o=t-Math.pow(e,2),u=Math.sqrt(o);this.hubThreshold=Math.floor(e+2*u),this.hubThreshold>r&&(this.hubThreshold=r)},t._reduceAmountOfChains=function(e){this.hubThreshold=2;var t=Math.floor(this.nodeIndices.length*e);for(var n in this.nodes)this.nodes.hasOwnProperty(n)&&this.nodes[n].dynamicEdgesLength==2&&this.nodes[n].dynamicEdges.length>=2&&t>0&&(this._formClusterFromHub(this.nodes[n],!0,!0,1),t-=1)},t._getChainFraction=function(){var e=0,t=0;for(var n in this.nodes)this.nodes.hasOwnProperty(n)&&(this.nodes[n].dynamicEdgesLength==2&&this.nodes[n].dynamicEdges.length>=2&&(e+=1),t+=1);return e/t}},function(e,t,n){var r=n(1),i=n(40);t._putDataInSector=function(){this.sectors.active[this._sector()].nodes=this.nodes,this.sectors.active[this._sector()].edges=this.edges,this.sectors.active[this._sector()].nodeIndices=this.nodeIndices},t._switchToSector=function(e,t){t===undefined||t=="active"?this._switchToActiveSector(e):this._switchToFrozenSector(e)},t._switchToActiveSector=function(e){this.nodeIndices=this.sectors.active[e].nodeIndices,this.nodes=this.sectors.active[e].nodes,this.edges=this.sectors.active[e].edges},t._switchToSupportSector=function(){this.nodeIndices=this.sectors.support.nodeIndices,this.nodes=this.sectors.support.nodes,this.edges=this.sectors.support.edges},t._switchToFrozenSector=function(e){this.nodeIndices=this.sectors.frozen[e].nodeIndices,this.nodes=this.sectors.frozen[e].nodes,this.edges=this.sectors.frozen[e].edges},t._loadLatestSector=function(){this._switchToSector(this._sector())},t._sector=function(){return this.activeSector[this.activeSector.length-1]},t._previousSector=function(){if(this.activeSector.length>1)return this.activeSector[this.activeSector.length-2];throw new TypeError("there are not enough sectors in the this.activeSector array.")},t._setActiveSector=function(e){this.activeSector.push(e)},t._forgetLastSector=function(){this.activeSector.pop()},t._createNewSector=function(e){this.sectors.active[e]={nodes:{},edges:{},nodeIndices:[],formationScale:this.scale,drawingNode:undefined},this.sectors.active[e].drawingNode=new i({id:e,color:{background:"#eaefef",border:"495c5e"}},{},{},this.constants),this.sectors.active[e].drawingNode.clusterSize=2},t._deleteActiveSector=function(e){delete this.sectors.active[e]},t._deleteFrozenSector=function(e){delete this.sectors.frozen[e]},t._freezeSector=function(e){this.sectors.frozen[e]=this.sectors.active[e],this._deleteActiveSector(e)},t._activateSector=function(e){this.sectors.active[e]=this.sectors.frozen[e],this._deleteFrozenSector(e)},t._mergeThisWithFrozen=function(e){for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&(this.sectors.frozen[e].nodes[t]=this.nodes[t]);for(var n in this.edges)this.edges.hasOwnProperty(n)&&(this.sectors.frozen[e].edges[n]=this.edges[n]);for(var r=0;r<this.nodeIndices.length;r++)this.sectors.frozen[e].nodeIndices.push(this.nodeIndices[r])},t._collapseThisToSingleCluster=function(){this.clusterToFit(1,!1)},t._addSector=function(e){var t=this._sector();delete this.nodes[e.id];var n=r.randomUUID();this._freezeSector(t),this._createNewSector(n),this._setActiveSector(n),this._switchToSector(this._sector()),this.nodes[e.id]=e},t._collapseSector=function(){var e=this._sector();if(e!="default")if(this.nodeIndices.length==1||this.sectors.active[e].drawingNode.width*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||this.sectors.active[e].drawingNode.height*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight){var t=this._previousSector();this._collapseThisToSingleCluster(),this._mergeThisWithFrozen(t),this._deleteActiveSector(e),this._activateSector(t),this._switchToSector(t),this._forgetLastSector(),this._updateNodeIndexList(),this._updateCalculationNodes()}},t._doInAllActiveSectors=function(e,t){var n=[];if(t===undefined)for(var r in this.sectors.active)this.sectors.active.hasOwnProperty(r)&&(this._switchToActiveSector(r),n.push(this[e]()));else for(var r in this.sectors.active)if(this.sectors.active.hasOwnProperty(r)){this._switchToActiveSector(r);var i=Array.prototype.splice.call(arguments,1);i.length>1?n.push(this[e](i[0],i[1])):n.push(this[e](t))}return this._loadLatestSector(),n},t._doInSupportSector=function(e,t){var n=!1;if(t===undefined)this._switchToSupportSector(),n=this[e]();else{this._switchToSupportSector();var r=Array.prototype.splice.call(arguments,1);r.length>1?n=this[e](r[0],r[1]):n=this[e](t)}return this._loadLatestSector(),n},t._doInAllFrozenSectors=function(e,t){if(t===undefined)for(var n in this.sectors.frozen)this.sectors.frozen.hasOwnProperty(n)&&(this._switchToFrozenSector(n),this[e]());else for(var n in this.sectors.frozen)if(this.sectors.frozen.hasOwnProperty(n)){this._switchToFrozenSector(n);var r=Array.prototype.splice.call(arguments,1);r.length>1?this[e](r[0],r[1]):this[e](t)}this._loadLatestSector()},t._doInAllSectors=function(e,t){var n=Array.prototype.splice.call(arguments,1);t===undefined?(this._doInAllActiveSectors(e),this._doInAllFrozenSectors(e)):n.length>1?(this._doInAllActiveSectors(e,n[0],n[1]),this._doInAllFrozenSectors(e,n[0],n[1])):(this._doInAllActiveSectors(e,t),this._doInAllFrozenSectors(e,t))},t._clearNodeIndexList=function(){var e=this._sector();this.sectors.active[e].nodeIndices=[],this.nodeIndices=this.sectors.active[e].nodeIndices},t._drawSectorNodes=function(e,t){var n=1e9,r=-1e9,i=1e9,s=-1e9,o;for(var u in this.sectors[t])if(this.sectors[t].hasOwnProperty(u)&&this.sectors[t][u].drawingNode!==undefined){this._switchToSector(u,t),n=1e9,r=-1e9,i=1e9,s=-1e9;for(var a in this.nodes)this.nodes.hasOwnProperty(a)&&(o=this.nodes[a],o.resize(e),i>o.x-.5*o.width&&(i=o.x-.5*o.width),s<o.x+.5*o.width&&(s=o.x+.5*o.width),n>o.y-.5*o.height&&(n=o.y-.5*o.height),r<o.y+.5*o.height&&(r=o.y+.5*o.height));o=this.sectors[t][u].drawingNode,o.x=.5*(s+i),o.y=.5*(r+n),o.width=2*(o.x-i),o.height=2*(o.y-n),o.options.radius=Math.sqrt(Math.pow(.5*o.width,2)+Math.pow(.5*o.height,2)),o.setScale(this.scale),o._drawCircle(e)}},t._drawAllSectorNodes=function(e){this._drawSectorNodes(e,"frozen"),this._drawSectorNodes(e,"active"),this._loadLatestSector()}},function(e,t,n){var r=n(40);t._getNodesOverlappingWith=function(e,t){var n=this.nodes;for(var r in n)n.hasOwnProperty(r)&&n[r].isOverlappingWith(e)&&t.push(r)},t._getAllNodesOverlappingWith=function(e){var t=[];return this._doInAllActiveSectors("_getNodesOverlappingWith",e,t),t},t._pointerToPositionObject=function(e){var t=this._XconvertDOMtoCanvas(e.x),n=this._YconvertDOMtoCanvas(e.y);return{left:t,top:n,right:t,bottom:n}},t._getNodeAt=function(e){var t=this._pointerToPositionObject(e),n=this._getAllNodesOverlappingWith(t);return n.length>0?this.nodes[n[n.length-1]]:null},t._getEdgesOverlappingWith=function(e,t){var n=this.edges;for(var r in n)n.hasOwnProperty(r)&&n[r].isOverlappingWith(e)&&t.push(r)},t._getAllEdgesOverlappingWith=function(e){var t=[];return this._doInAllActiveSectors("_getEdgesOverlappingWith",e,t),t},t._getEdgeAt=function(e){var t=this._pointerToPositionObject(e),n=this._getAllEdgesOverlappingWith(t);return n.length>0?this.edges[n[n.length-1]]:null},t._addToSelection=function(e){e instanceof r?this.selectionObj.nodes[e.id]=e:this.selectionObj.edges[e.id]=e},t._addToHover=function(e){e instanceof r?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e},t._removeFromSelection=function(e){e instanceof r?delete this.selectionObj.nodes[e.id]:delete this.selectionObj.edges[e.id]},t._unselectAll=function(e){e===undefined&&(e=!1);for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].unselect();for(var n in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(n)&&this.selectionObj.edges[n].unselect();this.selectionObj={nodes:{},edges:{}},e==0&&this.emit("select",this.getSelection())},t._unselectClusters=function(e){e===undefined&&(e=!1);for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].clusterSize>1&&(this.selectionObj.nodes[t].unselect(),this._removeFromSelection(this.selectionObj.nodes[t]));e==0&&this.emit("select",this.getSelection())},t._getSelectedNodeCount=function(){var e=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(e+=1);return e},t._getSelectedNode=function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return this.selectionObj.nodes[e];return null},t._getSelectedEdge=function(){for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return this.selectionObj.edges[e];return null},t._getSelectedEdgeCount=function(){var e=0;for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(e+=1);return e},t._getSelectedObjectCount=function(){var e=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(e+=1);for(var n in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(n)&&(e+=1);return e},t._selectionIsEmpty=function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return!1;for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return!1;return!0},t._clusterInSelection=function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].clusterSize>1)return!0;return!1},t._selectConnectedEdges=function(e){for(var t=0;t<e.dynamicEdges.length;t++){var n=e.dynamicEdges[t];n.select(),this._addToSelection(n)}},t._hoverConnectedEdges=function(e){for(var t=0;t<e.dynamicEdges.length;t++){var n=e.dynamicEdges[t];n.hover=!0,this._addToHover(n)}},t._unselectConnectedEdges=function(e){for(var t=0;t<e.dynamicEdges.length;t++){var n=e.dynamicEdges[t];n.unselect(),this._removeFromSelection(n)}},t._selectObject=function(e,t,n,i,s){n===undefined&&(n=!1),i===undefined&&(i=!0),this._selectionIsEmpty()==0&&t==0&&this.forceAppendSelection==0&&this._unselectAll(!0),e.selected!=0||this.constants.selectable!=1&&!s?e.selected==0?(this._addToSelection(e),n=!0):(e.unselect(),this._removeFromSelection(e)):(e.select(),this._addToSelection(e),e instanceof r&&this.blockConnectingEdgeSelection==0&&i==1&&this._selectConnectedEdges(e)),n==0&&this.emit("select",this.getSelection())},t._blurObject=function(e){e.hover==1&&(e.hover=!1,this.emit("blurNode",{node:e.id}))},t._hoverObject=function(e){e.hover==0&&(e.hover=!0,this._addToHover(e),e instanceof r&&this.emit("hoverNode",{node:e.id})),e instanceof r&&this._hoverConnectedEdges(e)},t._handleTouch=function(e){},t._handleTap=function(e){var t=this._getNodeAt(e);if(t!=null)this._selectObject(t,!1);else{var n=this._getEdgeAt(e);n!=null?this._selectObject(n,!1):this._unselectAll()}this.emit("click",this.getSelection()),this._redraw()},t._handleDoubleTap=function(e){var t=this._getNodeAt(e);t!=null&&t!==undefined&&(this.areaCenter={x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)},this.openCluster(t)),this.emit("doubleClick",this.getSelection())},t._handleOnHold=function(e){var t=this._getNodeAt(e);if(t!=null)this._selectObject(t,!0);else{var n=this._getEdgeAt(e);n!=null&&this._selectObject(n,!0)}this._redraw()},t._handleOnRelease=function(e){this._manipulationReleaseOverload(e),this._navigationReleaseOverload(e)},t._manipulationReleaseOverload=function(e){},t._navigationReleaseOverload=function(e){},t.getSelection=function(){var e=this.getSelectedNodes(),t=this.getSelectedEdges();return{nodes:e,edges:t}},t.getSelectedNodes=function(){var e=[];if(this.constants.selectable==1)for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&e.push(t);return e},t.getSelectedEdges=function(){var e=[];if(this.constants.selectable==1)for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&e.push(t);return e},t.setSelection=function(){console.log("setSelection is deprecated. Please use selectNodes instead.")},t.selectNodes=function(e,t){var n,r,i;if(!e||e.length==undefined)throw"Selection must be an array with ids";this._unselectAll(!0);for(n=0,r=e.length;n<r;n++){i=e[n];var s=this.nodes[i];if(!s)throw new RangeError('Node with id "'+i+'" not found');this._selectObject(s,!0,!0,t,!0)}this.redraw()},t.selectEdges=function(e){var t,n,r;if(!e||e.length==undefined)throw"Selection must be an array with ids";this._unselectAll(!0);for(t=0,n=e.length;t<n;t++){r=e[t];var i=this.edges[r];if(!i)throw new RangeError('Edge with id "'+r+'" not found');this._selectObject(i,!0,!0,!1,!0)}this.redraw()},t._updateSelection=function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(this.nodes.hasOwnProperty(e)||delete this.selectionObj.nodes[e]);for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(this.edges.hasOwnProperty(t)||delete this.selectionObj.edges[t])}},function(e,t,n){var r=n(1),i=n(40),s=n(37);t._clearManipulatorBar=function(){while(this.manipulationDiv.hasChildNodes())this.manipulationDiv.removeChild(this.manipulationDiv.firstChild);this._manipulationReleaseOverload=function(){},delete this.sectors.support.nodes.targetNode,delete this.sectors.support.nodes.targetViaNode,this.controlNodesActive=!1},t._restoreOverloadedFunctions=function(){for(var e in this.cachedFunctions)this.cachedFunctions.hasOwnProperty(e)&&(this[e]=this.cachedFunctions[e])},t._toggleEditMode=function(){this.editMode=!this.editMode;var e=document.getElementById("network-manipulationDiv"),t=document.getElementById("network-manipulation-closeDiv"),n=document.getElementById("network-manipulation-editMode");this.editMode==1?(e.style.display="block",t.style.display="block",n.style.display="none",t.onclick=this._toggleEditMode.bind(this)):(e.style.display="none",t.style.display="none",n.style.display="block",t.onclick=null),this._createManipulatorBar()},t._createManipulatorBar=function(){this.boundFunction&&this.off("select",this.boundFunction);var e=this.constants.locales[this.constants.locale];this.edgeBeingEdited!==undefined&&(this.edgeBeingEdited._disableControlNodes(),this.edgeBeingEdited=undefined,this.selectedControlNode=null,this.controlNodesActive=!1),this._restoreOverloadedFunctions(),this.freezeSimulation=!1,this.blockConnectingEdgeSelection=!1,this.forceAppendSelection=!1;if(this.editMode==1){while(this.manipulationDiv.hasChildNodes())this.manipulationDiv.removeChild(this.manipulationDiv.firstChild);this.manipulationDiv.innerHTML="<span class='network-manipulationUI add' id='network-manipulate-addNode'><span class='network-manipulationLabel'>"+e.addNode+"</span></span>"+"<div class='network-seperatorLine'></div>"+"<span class='network-manipulationUI connect' id='network-manipulate-connectNode'>"+"<span class='network-manipulationLabel'>"+e.addEdge+"</span></span>",this._getSelectedNodeCount()==1&&this.triggerFunctions.edit?this.manipulationDiv.innerHTML+="<div class='network-seperatorLine'></div><span class='network-manipulationUI edit' id='network-manipulate-editNode'><span class='network-manipulationLabel'>"+e.editNode+"</span></span>":this._getSelectedEdgeCount()==1&&this._getSelectedNodeCount()==0&&(this.manipulationDiv.innerHTML+="<div class='network-seperatorLine'></div><span class='network-manipulationUI edit' id='network-manipulate-editEdge'><span class='network-manipulationLabel'>"+e.editEdge+"</span></span>"),this._selectionIsEmpty()==0&&(this.manipulationDiv.innerHTML+="<div class='network-seperatorLine'></div><span class='network-manipulationUI delete' id='network-manipulate-delete'><span class='network-manipulationLabel'>"+e.del+"</span></span>");var t=document.getElementById("network-manipulate-addNode");t.onclick=this._createAddNodeToolbar.bind(this);var n=document.getElementById("network-manipulate-connectNode");n.onclick=this._createAddEdgeToolbar.bind(this);if(this._getSelectedNodeCount()==1&&this.triggerFunctions.edit){var r=document.getElementById("network-manipulate-editNode");r.onclick=this._editNode.bind(this)}else if(this._getSelectedEdgeCount()==1&&this._getSelectedNodeCount()==0){var r=document.getElementById("network-manipulate-editEdge");r.onclick=this._createEditEdgeToolbar.bind(this)}if(this._selectionIsEmpty()==0){var i=document.getElementById("network-manipulate-delete");i.onclick=this._deleteSelected.bind(this)}var s=document.getElementById("network-manipulation-closeDiv");s.onclick=this._toggleEditMode.bind(this),this.boundFunction=this._createManipulatorBar.bind(this),this.on("select",this.boundFunction)}else{this.editModeDiv.innerHTML="<span class='network-manipulationUI edit editmode' id='network-manipulate-editModeButton'><span class='network-manipulationLabel'>"+e.edit+"</span></span>";var o=document.getElementById("network-manipulate-editModeButton");o.onclick=this._toggleEditMode.bind(this)}},t._createAddNodeToolbar=function(){this._clearManipulatorBar(),this.boundFunction&&this.off("select",this.boundFunction);var e=this.constants.locales[this.constants.locale];this.manipulationDiv.innerHTML="<span class='network-manipulationUI back' id='network-manipulate-back'><span class='network-manipulationLabel'>"+e.back+" </span></span>"+"<div class='network-seperatorLine'></div>"+"<span class='network-manipulationUI none' id='network-manipulate-back'>"+"<span id='network-manipulatorLabel' class='network-manipulationLabel'>"+e.addDescription+"</span></span>";var t=document.getElementById("network-manipulate-back");t.onclick=this._createManipulatorBar.bind(this),this.boundFunction=this._addNode.bind(this),this.on("select",this.boundFunction)},t._createAddEdgeToolbar=function(){this._clearManipulatorBar(),this._unselectAll(!0),this.freezeSimulation=!0;var e=this.constants.locales[this.constants.locale];this.boundFunction&&this.off("select",this.boundFunction),this._unselectAll(),this.forceAppendSelection=!1,this.blockConnectingEdgeSelection=!0,this.manipulationDiv.innerHTML="<span class='network-manipulationUI back' id='network-manipulate-back'><span class='network-manipulationLabel'>"+e.back+" </span></span>"+"<div class='network-seperatorLine'></div>"+"<span class='network-manipulationUI none' id='network-manipulate-back'>"+"<span id='network-manipulatorLabel' class='network-manipulationLabel'>"+e.edgeDescription+"</span></span>";var t=document.getElementById("network-manipulate-back");t.onclick=this._createManipulatorBar.bind(this),this.boundFunction=this._handleConnect.bind(this),this.on("select",this.boundFunction),this.cachedFunctions._handleTouch=this._handleTouch,this.cachedFunctions._manipulationReleaseOverload=this._manipulationReleaseOverload,this.cachedFunctions._handleDragStart=this._handleDragStart,this.cachedFunctions._handleDragEnd=this._handleDragEnd,this._handleTouch=this._handleConnect,this._manipulationReleaseOverload=function(){},this._handleDragStart=function(){},this._handleDragEnd=this._finishConnect,this._redraw()},t._createEditEdgeToolbar=function(){this._clearManipulatorBar(),this.controlNodesActive=!0,this.boundFunction&&this.off("select",this.boundFunction),this.edgeBeingEdited=this._getSelectedEdge(),this.edgeBeingEdited._enableControlNodes();var e=this.constants.locales[this.constants.locale];this.manipulationDiv.innerHTML="<span class='network-manipulationUI back' id='network-manipulate-back'><span class='network-manipulationLabel'>"+e.back+" </span></span>"+"<div class='network-seperatorLine'></div>"+"<span class='network-manipulationUI none' id='network-manipulate-back'>"+"<span id='network-manipulatorLabel' class='network-manipulationLabel'>"+e.editEdgeDescription+"</span></span>";var t=document.getElementById("network-manipulate-back");t.onclick=this._createManipulatorBar.bind(this),this.cachedFunctions._handleTouch=this._handleTouch,this.cachedFunctions._manipulationReleaseOverload=this._manipulationReleaseOverload,this.cachedFunctions._handleTap=this._handleTap,this.cachedFunctions._handleDragStart=this._handleDragStart,this.cachedFunctions._handleOnDrag=this._handleOnDrag,this._handleTouch=this._selectControlNode,this._handleTap=function(){},this._handleOnDrag=this._controlNodeDrag,this._handleDragStart=function(){},this._manipulationReleaseOverload=this._releaseControlNode,this._redraw()},t._selectControlNode=function(e){this.edgeBeingEdited.controlNodes.from.unselect(),this.edgeBeingEdited.controlNodes.to.unselect(),this.selectedControlNode=this.edgeBeingEdited._getSelectedControlNode(this._XconvertDOMtoCanvas(e.x),this._YconvertDOMtoCanvas(e.y)),this.selectedControlNode!==null&&(this.selectedControlNode.select(),this.freezeSimulation=!0),this._redraw()},t._controlNodeDrag=function(e){var t=this._getPointer(e.gesture.center);this.selectedControlNode!==null&&this.selectedControlNode!==undefined&&(this.selectedControlNode.x=this._XconvertDOMtoCanvas(t.x),this.selectedControlNode.y=this._YconvertDOMtoCanvas(t.y)),this._redraw()},t._releaseControlNode=function(e){var t=this._getNodeAt(e);t!=null?(this.edgeBeingEdited.controlNodes.from.selected==1&&(this._editEdge(t.id,this.edgeBeingEdited.to.id),this.edgeBeingEdited.controlNodes.from.unselect()),this.edgeBeingEdited.controlNodes.to.selected==1&&(this._editEdge(this.edgeBeingEdited.from.id,t.id),this.edgeBeingEdited.controlNodes.to.unselect())):this.edgeBeingEdited._restoreControlNodes(),this.freezeSimulation=!1,this._redraw()},t._handleConnect=function(e){if(this._getSelectedNodeCount()==0){var t=this._getNodeAt(e);if(t!=null)if(t.clusterSize>1)alert(this.constants.locales[this.constants.locale].createEdgeError);else{this._selectObject(t,!1);var n=this.sectors.support.nodes;n.targetNode=new i({id:"targetNode"},{},{},this.constants);var r=n.targetNode;r.x=t.x,r.y=t.y,this.edges.connectionEdge=new s({id:"connectionEdge",from:t.id,to:r.id},this,this.constants);var o=this.edges.connectionEdge;o.from=t,o.connected=!0,o.options.smoothCurves={enabled:!0,dynamic:!1,type:"continuous",roundness:.5},o.selected=!0,o.to=r,this.cachedFunctions._handleOnDrag=this._handleOnDrag,this._handleOnDrag=function(e){var t=this._getPointer(e.gesture.center),n=this.edges.connectionEdge;n.to.x=this._XconvertDOMtoCanvas(t.x),n.to.y=this._YconvertDOMtoCanvas(t.y)},this.moving=!0,this.start()}}},t._finishConnect=function(e){if(this._getSelectedNodeCount()==1){var t=this._getPointer(e.gesture.center);this._handleOnDrag=this.cachedFunctions._handleOnDrag,delete this.cachedFunctions._handleOnDrag;var n=this.edges.connectionEdge.fromId;delete this.edges.connectionEdge,delete this.sectors.support.nodes.targetNode,delete this.sectors.support.nodes.targetViaNode;var r=this._getNodeAt(t);r!=null&&(r.clusterSize>1?alert(this.constants.locales[this.constants.locale].createEdgeError):(this._createEdge(n,r.id),this._createManipulatorBar())),this._unselectAll()}},t._addNode=function(){if(this._selectionIsEmpty()&&this.editMode==1){var e=this._pointerToPositionObject(this.pointerPosition),t={id:r.randomUUID(),x:e.left,y:e.top,label:"new",allowedToMoveX:!0,allowedToMoveY:!0};if(this.triggerFunctions.add){if(this.triggerFunctions.add.length!=2)throw new Error("The function for add does not support two arguments (data,callback)");var n=this;this.triggerFunctions.add(t,function(e){n.nodesData.add(e),n._createManipulatorBar(),n.moving=!0,n.start()})}else this.nodesData.add(t),this._createManipulatorBar(),this.moving=!0,this.start()}},t._createEdge=function(e,t){if(this.editMode==1){var n={from:e,to:t};if(this.triggerFunctions.connect){if(this.triggerFunctions.connect.length!=2)throw new Error("The function for connect does not support two arguments (data,callback)");var r=this;this.triggerFunctions.connect(n,function(e){r.edgesData.add(e),r.moving=!0,r.start()})}else this.edgesData.add(n),this.moving=!0,this.start()}},t._editEdge=function(e,t){if(this.editMode==1){var n={id:this.edgeBeingEdited.id,from:e,to:t};if(this.triggerFunctions.editEdge){if(this.triggerFunctions.editEdge.length!=2)throw new Error("The function for edit does not support two arguments (data, callback)");var r=this;this.triggerFunctions.editEdge(n,function(e){r.edgesData.update(e),r.moving=!0,r.start()})}else this.edgesData.update(n),this.moving=!0,this.start()}},t._editNode=function(){if(!this.triggerFunctions.edit||this.editMode!=1)throw new Error("No edit function has been bound to this button");var e=this._getSelectedNode(),t={id:e.id,label:e.label,group:e.options.group,shape:e.options.shape,color:{background:e.options.color.background,border:e.options.color.border,highlight:{background:e.options.color.highlight.background,border:e.options.color.highlight.border}}};if(this.triggerFunctions.edit.length!=2)throw new Error("The function for edit does not support two arguments (data, callback)");var n=this;this.triggerFunctions.edit(t,function(e){n.nodesData.update(e),n._createManipulatorBar(),n.moving=!0,n.start()})},t._deleteSelected=function(){if(!this._selectionIsEmpty()&&this.editMode==1)if(!this._clusterInSelection()){var e=this.getSelectedNodes(),t=this.getSelectedEdges();if(this.triggerFunctions.del){var n=this,r={nodes:e,edges:t};if(!(this.triggerFunctions.del.length=2))throw new Error("The function for delete does not support two arguments (data, callback)");this.triggerFunctions.del(r,function(e){n.edgesData.remove(e.edges),n.nodesData.remove(e.nodes),n._unselectAll(),n.moving=!0,n.start()})}else this.edgesData.remove(t),this.nodesData.remove(e),this._unselectAll(),this.moving=!0,this.start()}else alert(this.constants.locales[this.constants.locale].deleteClusterError)}},function(e,t,n){var r=n(1),i=n(45);t._cleanNavigation=function(){if(this.navigationHammers.existing.length!=0){for(var e=0;e<this.navigationHammers.existing.length;e++)this.navigationHammers.existing[e].dispose();this.navigationHammers.existing=[]}this._navigationReleaseOverload=function(){};var t=document.getElementById("network-navigation_wrapper");t&&t.parentNode&&t.parentNode.removeChild(t)},t._loadNavigationElements=function(){this._cleanNavigation(),this.navigationDivs={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],t=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_zoomExtent"];this.navigationDivs.wrapper=document.createElement("div"),this.navigationDivs.wrapper.id="network-navigation_wrapper",this.frame.appendChild(this.navigationDivs.wrapper);for(var n=0;n<e.length;n++){this.navigationDivs[e[n]]=document.createElement("div"),this.navigationDivs[e[n]].id="network-navigation_"+e[n],this.navigationDivs[e[n]].className="network-navigation "+e[n],this.navigationDivs.wrapper.appendChild(this.navigationDivs[e[n]]);var r=i(this.navigationDivs[e[n]],{prevent_default:!0});r.on("touch",this[t[n]].bind(this)),this.navigationHammers.new.push(r)}this._navigationReleaseOverload=this._stopMovement,this.navigationHammers.existing=this.navigationHammers.new},t._zoomExtent=function(e){this.zoomExtent({duration:800}),e.stopPropagation()},t._stopMovement=function(){this._xStopMoving(),this._yStopMoving(),this._stopZoom()},t._moveUp=function(e){this.yIncrement=this.constants.keyboard.speed.y,this.start(),e.preventDefault()},t._moveDown=function(e){this.yIncrement=-this.constants.keyboard.speed.y,this.start(),e.preventDefault()},t._moveLeft=function(e){this.xIncrement=this.constants.keyboard.speed.x,this.start(),e.preventDefault()},t._moveRight=function(e){this.xIncrement=-this.constants.keyboard.speed.y,this.start(),e.preventDefault()},t._zoomIn=function(e){this.zoomIncrement=this.constants.keyboard.speed.zoom,this.start(),e.preventDefault()},t._zoomOut=function(e){this.zoomIncrement=-this.constants.keyboard.speed.zoom,this.start(),e.preventDefault()},t._stopZoom=function(e){this.zoomIncrement=0,e&&e.preventDefault()},t._yStopMoving=function(e){this.yIncrement=0,e&&e.preventDefault()},t._xStopMoving=function(e){this.xIncrement=0,e&&e.preventDefault()}},function(e,t,n){t._resetLevels=function(){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e)){var t=this.nodes[e];t.preassignedLevel==0&&(t.level=-1,t.hierarchyEnumerated=!1)}},t._setupHierarchicalLayout=function(){if(this.constants.hierarchicalLayout.enabled==1&&this.nodeIndices.length>0){this.constants.hierarchicalLayout.direction=="RL"||this.constants.hierarchicalLayout.direction=="DU"?this.constants.hierarchicalLayout.levelSeparation*=-1:this.constants.hierarchicalLayout.levelSeparation=Math.abs(this.constants.hierarchicalLayout.levelSeparation),this.constants.hierarchicalLayout.direction=="RL"||this.constants.hierarchicalLayout.direction=="LR"?this.constants.smoothCurves.enabled==1&&(this.constants.smoothCurves.type="vertical"):this.constants.smoothCurves.enabled==1&&(this.constants.smoothCurves.type="horizontal");var e=0,t,n,r=!1,i=!1;for(n in this.nodes)this.nodes.hasOwnProperty(n)&&(t=this.nodes[n],t.level!=-1?r=!0:i=!0,e<t.edges.length&&(e=t.edges.length));if(i==1&&r==1)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");this._changeConstants(),i==1&&(this.constants.hierarchicalLayout.layout=="hubsize"?this._determineLevels(e):this._determineLevelsDirected());var s=this._getDistribution();this._placeNodesByHierarchy(s),this.start()}},t._placeNodesByHierarchy=function(e){var t,n;for(var r in e)if(e.hasOwnProperty(r))for(t in e[r].nodes)e[r].nodes.hasOwnProperty(t)&&(n=e[r].nodes[t],this.constants.hierarchicalLayout.direction=="UD"||this.constants.hierarchicalLayout.direction=="DU"?n.xFixed&&(n.x=e[r].minPos,n.xFixed=!1,e[r].minPos+=e[r].nodeSpacing):n.yFixed&&(n.y=e[r].minPos,n.yFixed=!1,e[r].minPos+=e[r].nodeSpacing),this._placeBranchNodes(n.edges,n.id,e,n.level));this._stabilize()},t._getDistribution=function(){var e={},t,n,r;for(t in this.nodes)this.nodes.hasOwnProperty(t)&&(n=this.nodes[t],n.xFixed=!0,n.yFixed=!0,this.constants.hierarchicalLayout.direction=="UD"||this.constants.hierarchicalLayout.direction=="DU"?n.y=this.constants.hierarchicalLayout.levelSeparation*n.level:n.x=this.constants.hierarchicalLayout.levelSeparation*n.level,e[n.level]===undefined&&(e[n.level]={amount:0,nodes:{},minPos:0,nodeSpacing:0}),e[n.level].amount+=1,e[n.level].nodes[t]=n);var i=0;for(r in e)e.hasOwnProperty(r)&&i<e[r].amount&&(i=e[r].amount);for(r in e)e.hasOwnProperty(r)&&(e[r].nodeSpacing=(i+1)*this.constants.hierarchicalLayout.nodeSpacing,e[r].nodeSpacing/=e[r].amount+1,e[r].minPos=e[r].nodeSpacing-.5*(e[r].amount+1)*e[r].nodeSpacing);return e},t._determineLevels=function(e){var t,n;for(t in this.nodes)this.nodes.hasOwnProperty(t)&&(n=this.nodes[t],n.edges.length==e&&(n.level=0));for(t in this.nodes)this.nodes.hasOwnProperty(t)&&(n=this.nodes[t],n.level==0&&this._setLevel(1,n.edges,n.id))},t._determineLevelsDirected=function(){var e,t;for(e in this.nodes)if(this.nodes.hasOwnProperty(e)){this.nodes[e].level=1e4;break}for(e in this.nodes)this.nodes.hasOwnProperty(e)&&(t=this.nodes[e],t.level==1e4&&this._setLevelDirected(1e4,t.edges,t.id));var n=1e4;for(e in this.nodes)this.nodes.hasOwnProperty(e)&&(t=this.nodes[e],n=t.level<n?t.level:n);for(e in this.nodes)this.nodes.hasOwnProperty(e)&&(t=this.nodes[e],t.level-=n)},t._changeConstants=function(){this.constants.clustering.enabled=!1,this.constants.physics.barnesHut.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!0,this._loadSelectedForceSolver(),this.constants.smoothCurves.enabled==1&&(this.constants.smoothCurves.dynamic=!1),this._configureSmoothCurves()},t._placeBranchNodes=function(e,t,n,r){for(var i=0;i<e.length;i++){var s=null;e[i].toId==t?s=e[i].from:s=e[i].to;var o=!1;this.constants.hierarchicalLayout.direction=="UD"||this.constants.hierarchicalLayout.direction=="DU"?s.xFixed&&s.level>r&&(s.xFixed=!1,s.x=n[s.level].minPos,o=!0):s.yFixed&&s.level>r&&(s.yFixed=!1,s.y=n[s.level].minPos,o=!0),o==1&&(n[s.level].minPos+=n[s.level].nodeSpacing,s.edges.length>1&&this._placeBranchNodes(s.edges,s.id,n,s.level))}},t._setLevel=function(e,t,n){for(var r=0;r<t.length;r++){var i=null;t[r].toId==n?i=t[r].from:i=t[r].to;if(i.level==-1||i.level>e)i.level=e,i.edges.length>1&&this._setLevel(e+1,i.edges,i.id)}},t._setLevelDirected=function(e,t,n){this.nodes[n].hierarchyEnumerated=!0;for(var r=0;r<t.length;r++){var i=null,s=1;t[r].toId==n?(i=t[r].from,s=-1):i=t[r].to,i.level==-1&&(i.level=e+s)}for(var r=0;r<t.length;r++){var i=null;t[r].toId==n?i=t[r].from:i=t[r].to,i.edges.length>1&&i.hierarchyEnumerated===!1&&this._setLevelDirected(i.level,i.edges,i.id)}},t._restoreNodes=function(){for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(this.nodes[e].xFixed=!1,this.nodes[e].yFixed=!1)}},function(e,t,n){function u(){this.constants.smoothCurves.enabled=!this.constants.smoothCurves.enabled;var e=document.getElementById("graph_toggleSmooth");this.constants.smoothCurves.enabled==1?e.style.background="#A4FF56":e.style.background="#FF8532",this._configureSmoothCurves(!1)}function a(){for(var e in this.calculationNodes)this.calculationNodes.hasOwnProperty(e)&&(this.calculationNodes[e].vx=0,this.calculationNodes[e].vy=0,this.calculationNodes[e].fx=0,this.calculationNodes[e].fy=0);this.constants.hierarchicalLayout.enabled==1?(this._setupHierarchicalLayout(),c.call(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance"),c.call(this,"graph_H_cg",1,"physics_centralGravity"),c.call(this,"graph_H_sc",1,"physics_springConstant"),c.call(this,"graph_H_sl",1,"physics_springLength"),c.call(this,"graph_H_damp",1,"physics_damping")):this.repositionNodes(),this.moving=!0,this.start()}function f(){var e="No options are required, default values used.",t=[],n=document.getElementById("graph_physicsMethod1"),r=document.getElementById("graph_physicsMethod2");if(n.checked==1){this.constants.physics.barnesHut.gravitationalConstant!=this.backupConstants.physics.barnesHut.gravitationalConstant&&t.push("gravitationalConstant: "+this.constants.physics.barnesHut.gravitationalConstant),this.constants.physics.centralGravity!=this.backupConstants.physics.barnesHut.centralGravity&&t.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.barnesHut.springLength&&t.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.barnesHut.springConstant&&t.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.barnesHut.damping&&t.push("damping: "+this.constants.physics.damping);if(t.length!=0){e="var options = {",e+="physics: {barnesHut: {";for(var i=0;i<t.length;i++)e+=t[i],i<t.length-1&&(e+=", ");e+="}}"}this.constants.smoothCurves.enabled!=this.backupConstants.smoothCurves.enabled&&(t.length==0?e="var options = {":e+=", ",e+="smoothCurves: "+this.constants.smoothCurves.enabled),e!="No options are required, default values used."&&(e+="};")}else if(r.checked==1){e="var options = {",e+="physics: {barnesHut: {enabled: false}",this.constants.physics.repulsion.nodeDistance!=this.backupConstants.physics.repulsion.nodeDistance&&t.push("nodeDistance: "+this.constants.physics.repulsion.nodeDistance),this.constants.physics.centralGravity!=this.backupConstants.physics.repulsion.centralGravity&&t.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.repulsion.springLength&&t.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.repulsion.springConstant&&t.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.repulsion.damping&&t.push("damping: "+this.constants.physics.damping);if(t.length!=0){e+=", repulsion: {";for(var i=0;i<t.length;i++)e+=t[i],i<t.length-1&&(e+=", ");e+="}}"}t.length==0&&(e+="}"),this.constants.smoothCurves!=this.backupConstants.smoothCurves&&(e+=", smoothCurves: "+this.constants.smoothCurves),e+="};"}else{e="var options = {",this.constants.physics.hierarchicalRepulsion.nodeDistance!=this.backupConstants.physics.hierarchicalRepulsion.nodeDistance&&t.push("nodeDistance: "+this.constants.physics.hierarchicalRepulsion.nodeDistance),this.constants.physics.centralGravity!=this.backupConstants.physics.hierarchicalRepulsion.centralGravity&&t.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.hierarchicalRepulsion.springLength&&t.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.hierarchicalRepulsion.springConstant&&t.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.hierarchicalRepulsion.damping&&t.push("damping: "+this.constants.physics.damping);if(t.length!=0){e+="physics: {hierarchicalRepulsion: {";for(var i=0;i<t.length;i++)e+=t[i],i<t.length-1&&(e+=", ");e+="}},"}e+="hierarchicalLayout: {",t=[],this.constants.hierarchicalLayout.direction!=this.backupConstants.hierarchicalLayout.direction&&t.push("direction: "+this.constants.hierarchicalLayout.direction),Math.abs(this.constants.hierarchicalLayout.levelSeparation)!=this.backupConstants.hierarchicalLayout.levelSeparation&&t.push("levelSeparation: "+this.constants.hierarchicalLayout.levelSeparation),this.constants.hierarchicalLayout.nodeSpacing!=this.backupConstants.hierarchicalLayout.nodeSpacing&&t.push("nodeSpacing: "+this.constants.hierarchicalLayout.nodeSpacing);if(t.length!=0){for(var i=0;i<t.length;i++)e+=t[i],i<t.length-1&&(e+=", ");e+="}"}else e+="enabled:true}";e+="};"}this.optionsDiv.innerHTML=e}function l(){var e=["graph_BH_table","graph_R_table","graph_H_table"],t=document.querySelector('input[name="graph_physicsMethod"]:checked').value,n="graph_"+t+"_table",r=document.getElementById(n);r.style.display="block";for(var i=0;i<e.length;i++)e[i]!=n&&(r=document.getElementById(e[i]),r.style.display="none");this._restoreNodes(),t=="R"?(this.constants.hierarchicalLayout.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!1,this.constants.physics.barnesHut.enabled=!1):t=="H"?this.constants.hierarchicalLayout.enabled==0&&(this.constants.hierarchicalLayout.enabled=!0,this.constants.physics.hierarchicalRepulsion.enabled=!0,this.constants.physics.barnesHut.enabled=!1,this.constants.smoothCurves.enabled=!1,this._setupHierarchicalLayout()):(this.constants.hierarchicalLayout.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!1,this.constants.physics.barnesHut.enabled=!0),this._loadSelectedForceSolver();var s=document.getElementById("graph_toggleSmooth");this.constants.smoothCurves.enabled==1?s.style.background="#A4FF56":s.style.background="#FF8532",this.moving=!0,this.start()}function c(e,t,n){var r=e+"_value",i=document.getElementById(e).value;Array.isArray(t)?(document.getElementById(r).value=t[parseInt(i)],this._overWriteGraphConstants(n,t[parseInt(i)])):(document.getElementById(r).value=parseInt(t)*parseFloat(i),this._overWriteGraphConstants(n,parseInt(t)*parseFloat(i))),(n=="hierarchicalLayout_direction"||n=="hierarchicalLayout_levelSeparation"||n=="hierarchicalLayout_nodeSpacing")&&this._setupHierarchicalLayout(),this.moving=!0,this.start()}var r=n(1),i=n(65),s=n(66),o=n(67);t._toggleBarnesHut=function(){this.constants.physics.barnesHut.enabled=!this.constants.physics.barnesHut.enabled,this._loadSelectedForceSolver(),this.moving=!0,this.start()},t._loadSelectedForceSolver=function(){this.constants.physics.barnesHut.enabled==1?(this._clearMixin(i),this._clearMixin(s),this.constants.physics.centralGravity=this.constants.physics.barnesHut.centralGravity,this.constants.physics.springLength=this.constants.physics.barnesHut.springLength,this.constants.physics.springConstant=this.constants.physics.barnesHut.springConstant,this.constants.physics.damping=this.constants.physics.barnesHut.damping,this._loadMixin(o)):this.constants.physics.hierarchicalRepulsion.enabled==1?(this._clearMixin(o),this._clearMixin(i),this.constants.physics.centralGravity=this.constants.physics.hierarchicalRepulsion.centralGravity,this.constants.physics.springLength=this.constants.physics.hierarchicalRepulsion.springLength,this.constants.physics.springConstant=this.constants.physics.hierarchicalRepulsion.springConstant,this.constants.physics.damping=this.constants.physics.hierarchicalRepulsion.damping,this._loadMixin(s)):(this._clearMixin(o),this._clearMixin(s),this.barnesHutTree=undefined,this.constants.physics.centralGravity=this.constants.physics.repulsion.centralGravity,this.constants.physics.springLength=this.constants.physics.repulsion.springLength,this.constants.physics.springConstant=this.constants.physics.repulsion.springConstant,this.constants.physics.damping=this.constants.physics.repulsion.damping,this._loadMixin(i))},t._initializeForceCalculation=function(){this.nodeIndices.length==1?this.nodes[this.nodeIndices[0]]._setForce(0,0):(this.nodeIndices.length>this.constants.clustering.clusterThreshold&&this.constants.clustering.enabled==1&&this.clusterToFit(this.constants.clustering.reduceToNodes,!1),this._calculateForces())},t._calculateForces=function(){this._calculateGravitationalForces(),this._calculateNodeForces(),this.constants.physics.springConstant>0&&(this.constants.smoothCurves.enabled==1&&this.constants.smoothCurves.dynamic==1?this._calculateSpringForcesWithSupport():this.constants.physics.hierarchicalRepulsion.enabled==1?this._calculateHierarchicalSpringForces():this._calculateSpringForces())},t._updateCalculationNodes=function(){if(this.constants.smoothCurves.enabled==1&&this.constants.smoothCurves.dynamic==1){this.calculationNodes={},this.calculationNodeIndices=[];for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(this.calculationNodes[e]=this.nodes[e]);var t=this.sectors.support.nodes;for(var n in t)t.hasOwnProperty(n)&&(this.edges.hasOwnProperty(t[n].parentEdgeId)?this.calculationNodes[n]=t[n]:t[n]._setForce(0,0));for(var r in this.calculationNodes)this.calculationNodes.hasOwnProperty(r)&&this.calculationNodeIndices.push(r)}else this.calculationNodes=this.nodes,this.calculationNodeIndices=this.nodeIndices},t._calculateGravitationalForces=function(){var e,t,n,r,i,s=this.calculationNodes,o=this.constants.physics.centralGravity,u=0;for(i=0;i<this.calculationNodeIndices.length;i++)r=s[this.calculationNodeIndices[i]],r.damping=this.constants.physics.damping,this._sector()=="default"&&o!=0?(e=-r.x,t=-r.y,n=Math.sqrt(e*e+t*t),u=n==0?0:o/n,r.fx=e*u,r.fy=t*u):(r.fx=0,r.fy=0)},t._calculateSpringForces=function(){var e,t,n,r,i,s,o,u,a,f=this.edges;for(n in f)f.hasOwnProperty(n)&&(t=f[n],t.connected&&this.nodes.hasOwnProperty(t.toId)&&this.nodes.hasOwnProperty(t.fromId)&&(e=t.physics.springLength,e+=(t.to.clusterSize+t.from.clusterSize-2)*this.constants.clustering.edgeGrowth,r=t.from.x-t.to.x,i=t.from.y-t.to.y,a=Math.sqrt(r*r+i*i),a==0&&(a=.01),u=this.constants.physics.springConstant*(e-a)/a,s=r*u,o=i*u,t.from.fx+=s,t.from.fy+=o,t.to.fx-=s,t.to.fy-=o))},t._calculateSpringForcesWithSupport=function(){var e,t,n,r,i=this.edges;for(n in i)if(i.hasOwnProperty(n)){t=i[n];if(t.connected&&this.nodes.hasOwnProperty(t.toId)&&this.nodes.hasOwnProperty(t.fromId)&&t.via!=null){var s=t.to,o=t.via,u=t.from;e=t.physics.springLength,r=s.clusterSize+u.clusterSize-2,e+=r*this.constants.clustering.edgeGrowth,this._calculateSpringForce(s,o,.5*e),this._calculateSpringForce(o,u,.5*e)}}},t._calculateSpringForce=function(e,t,n){var r,i,s,o,u,a;r=e.x-t.x,i=e.y-t.y,a=Math.sqrt(r*r+i*i),a==0&&(a=.01),u=this.constants.physics.springConstant*(n-a)/a,s=r*u,o=i*u,e.fx+=s,e.fy+=o,t.fx-=s,t.fy-=o},t._loadPhysicsConfiguration=function(){if(this.physicsConfiguration===undefined){this.backupConstants={},r.deepExtend(this.backupConstants,this.constants);var e=["LR","RL","UD","DU"];this.physicsConfiguration=document.createElement("div"),this.physicsConfiguration.className="PhysicsConfiguration",this.physicsConfiguration.innerHTML='<table><tr><td><b>Simulation Mode:</b></td></tr><tr><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod1" value="BH" checked="checked">Barnes Hut</td><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod2" value="R">Repulsion</td><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod3" value="H">Hierarchical</td></tr></table><table id="graph_BH_table" style="display:none"><tr><td><b>Barnes Hut</b></td></tr><tr><td width="150px">gravitationalConstant</td><td>0</td><td><input type="range" min="0" max="20000" value="'+ -1*this.constants.physics.barnesHut.gravitationalConstant+'" step="25" style="width:300px" id="graph_BH_gc"></td><td  width="50px">-20000</td><td><input value="'+ -1*this.constants.physics.barnesHut.gravitationalConstant+'" id="graph_BH_gc_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.barnesHut.centralGravity+'" step="0.05"  style="width:300px" id="graph_BH_cg"></td><td>3</td><td><input value="'+this.constants.physics.barnesHut.centralGravity+'" id="graph_BH_cg_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.barnesHut.springLength+'" step="1" style="width:300px" id="graph_BH_sl"></td><td>500</td><td><input value="'+this.constants.physics.barnesHut.springLength+'" id="graph_BH_sl_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.barnesHut.springConstant+'" step="0.001" style="width:300px" id="graph_BH_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.barnesHut.springConstant+'" id="graph_BH_sc_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.barnesHut.damping+'" step="0.005" style="width:300px" id="graph_BH_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.barnesHut.damping+'" id="graph_BH_damp_value" style="width:60px"></td>'+"</tr>"+"</table>"+'<table id="graph_R_table" style="display:none">'+"<tr><td><b>Repulsion</b></td></tr>"+"<tr>"+'<td width="150px">nodeDistance</td><td>0</td><td><input type="range" min="0" max="300" value="'+this.constants.physics.repulsion.nodeDistance+'" step="1" style="width:300px" id="graph_R_nd"></td><td width="50px">300</td><td><input value="'+this.constants.physics.repulsion.nodeDistance+'" id="graph_R_nd_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.repulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_R_cg"></td><td>3</td><td><input value="'+this.constants.physics.repulsion.centralGravity+'" id="graph_R_cg_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.repulsion.springLength+'" step="1" style="width:300px" id="graph_R_sl"></td><td>500</td><td><input value="'+this.constants.physics.repulsion.springLength+'" id="graph_R_sl_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.repulsion.springConstant+'" step="0.001" style="width:300px" id="graph_R_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.repulsion.springConstant+'" id="graph_R_sc_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.repulsion.damping+'" step="0.005" style="width:300px" id="graph_R_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.repulsion.damping+'" id="graph_R_damp_value" style="width:60px"></td>'+"</tr>"+"</table>"+'<table id="graph_H_table" style="display:none">'+'<tr><td width="150"><b>Hierarchical</b></td></tr>'+"<tr>"+'<td width="150px">nodeDistance</td><td>0</td><td><input type="range" min="0" max="300" value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" step="1" style="width:300px" id="graph_H_nd"></td><td width="50px">300</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" id="graph_H_nd_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_H_cg"></td><td>3</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" id="graph_H_cg_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" step="1" style="width:300px" id="graph_H_sl"></td><td>500</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" id="graph_H_sl_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" step="0.001" style="width:300px" id="graph_H_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" id="graph_H_sc_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.hierarchicalRepulsion.damping+'" step="0.005" style="width:300px" id="graph_H_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.damping+'" id="graph_H_damp_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">direction</td><td>1</td><td><input type="range" min="0" max="3" value="'+e.indexOf(this.constants.hierarchicalLayout.direction)+'" step="1" style="width:300px" id="graph_H_direction"></td><td>4</td><td><input value="'+this.constants.hierarchicalLayout.direction+'" id="graph_H_direction_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">levelSeparation</td><td>1</td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.levelSeparation+'" step="1" style="width:300px" id="graph_H_levsep"></td><td>500</td><td><input value="'+this.constants.hierarchicalLayout.levelSeparation+'" id="graph_H_levsep_value" style="width:60px"></td>'+"</tr>"+"<tr>"+'<td width="150px">nodeSpacing</td><td>1</td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.nodeSpacing+'" step="1" style="width:300px" id="graph_H_nspac"></td><td>500</td><td><input value="'+this.constants.hierarchicalLayout.nodeSpacing+'" id="graph_H_nspac_value" style="width:60px"></td>'+"</tr>"+"</table>"+"<table><tr><td><b>Options:</b></td></tr>"+"<tr>"+'<td width="180px"><input type="button" id="graph_toggleSmooth" value="Toggle smoothCurves" style="width:150px"></td>'+'<td width="180px"><input type="button" id="graph_repositionNodes" value="Reinitialize" style="width:150px"></td>'+'<td width="180px"><input type="button" id="graph_generateOptions" value="Generate Options" style="width:150px"></td>'+"</tr>"+"</table>",this.containerElement.parentElement.insertBefore(this.physicsConfiguration,this.containerElement),this.optionsDiv=document.createElement("div"),this.optionsDiv.style.fontSize="14px",this.optionsDiv.style.fontFamily="verdana",this.containerElement.parentElement.insertBefore(this.optionsDiv,this.containerElement);var t;t=document.getElementById("graph_BH_gc"),t.onchange=c.bind(this,"graph_BH_gc",-1,"physics_barnesHut_gravitationalConstant"),t=document.getElementById("graph_BH_cg"),t.onchange=c.bind(this,"graph_BH_cg",1,"physics_centralGravity"),t=document.getElementById("graph_BH_sc"),t.onchange=c.bind(this,"graph_BH_sc",1,"physics_springConstant"),t=document.getElementById("graph_BH_sl"),t.onchange=c.bind(this,"graph_BH_sl",1,"physics_springLength"),t=document.getElementById("graph_BH_damp"),t.onchange=c.bind(this,"graph_BH_damp",1,"physics_damping"),t=document.getElementById("graph_R_nd"),t.onchange=c.bind(this,"graph_R_nd",1,"physics_repulsion_nodeDistance"),t=document.getElementById("graph_R_cg"),t.onchange=c.bind(this,"graph_R_cg",1,"physics_centralGravity"),t=document.getElementById("graph_R_sc"),t.onchange=c.bind(this,"graph_R_sc",1,"physics_springConstant"),t=document.getElementById("graph_R_sl"),t.onchange=c.bind(this,"graph_R_sl",1,"physics_springLength"),t=document.getElementById("graph_R_damp"),t.onchange=c.bind(this,"graph_R_damp",1,"physics_damping"),t=document.getElementById("graph_H_nd"),t.onchange=c.bind(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance"),t=document.getElementById("graph_H_cg"),t.onchange=c.bind(this,"graph_H_cg",1,"physics_centralGravity"),t=document.getElementById("graph_H_sc"),t.onchange=c.bind(this,"graph_H_sc",1,"physics_springConstant"),t=document.getElementById("graph_H_sl"),t.onchange=c.bind(this,"graph_H_sl",1,"physics_springLength"),t=document.getElementById("graph_H_damp"),t.onchange=c.bind(this,"graph_H_damp",1,"physics_damping"),t=document.getElementById("graph_H_direction"),t.onchange=c.bind(this,"graph_H_direction",e,"hierarchicalLayout_direction"),t=document.getElementById("graph_H_levsep"),t.onchange=c.bind(this,"graph_H_levsep",1,"hierarchicalLayout_levelSeparation"),t=document.getElementById("graph_H_nspac"),t.onchange=c.bind(this,"graph_H_nspac",1,"hierarchicalLayout_nodeSpacing");var n=document.getElementById("graph_physicsMethod1"),i=document.getElementById("graph_physicsMethod2"),s=document.getElementById("graph_physicsMethod3");i.checked=!0,this.constants.physics.barnesHut.enabled&&(n.checked=!0),this.constants.hierarchicalLayout.enabled&&(s.checked=!0);var o=document.getElementById("graph_toggleSmooth"),h=document.getElementById("graph_repositionNodes"),p=document.getElementById("graph_generateOptions");o.onclick=u.bind(this),h.onclick=a.bind(this),p.onclick=f.bind(this),this.constants.smoothCurves==1&&this.constants.dynamicSmoothCurves==0?o.style.background="#A4FF56":o.style.background="#FF8532",l.apply(this),n.onchange=l.bind(this),i.onchange=l.bind(this),s.onchange=l.bind(this)}},t._overWriteGraphConstants=function(e,t){var n=e.split("_");n.length==1?this.constants[n[0]]=t:n.length==2?this.constants[n[0]][n[1]]=t:n.length==3&&(this.constants[n[0]][n[1]][n[2]]=t)}},function(e,t,n){function r(e){throw new Error("Cannot find module '"+e+"'.")}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=64},function(e,t,n){t._calculateNodeForces=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h=this.calculationNodes,p=this.calculationNodeIndices,d=-2/3,v=4/3,m=this.constants.physics.repulsion.nodeDistance,g=m;for(l=0;l<p.length-1;l++){a=h[p[l]];for(c=l+1;c<p.length;c++){f=h[p[c]],o=a.clusterSize+f.clusterSize-2,e=f.x-a.x,t=f.y-a.y,r=Math.sqrt(e*e+t*t),g=o==0?m:m*(1+o*this.constants.clustering.distanceAmplification);var y=d/g;r<2*g&&(r<.5*g?u=1:u=y*r+v,u*=o==0?1:1+o*this.constants.clustering.forceAmplification,u/=r,i=e*u,s=t*u,a.fx-=i,a.fy-=s,f.fx+=i,f.fy+=s)}}}},function(e,t,n){t._calculateNodeForces=function(){var e,t,n,r,i,s,o,u,a,f,l=this.calculationNodes,c=this.calculationNodeIndices,h=this.constants.physics.hierarchicalRepulsion.nodeDistance;for(a=0;a<c.length-1;a++){o=l[c[a]];for(f=a+1;f<c.length;f++){u=l[c[f]];if(o.level==u.level){e=u.x-o.x,t=u.y-o.y,n=Math.sqrt(e*e+t*t);var p=.05;n<h?s=-Math.pow(p*n,2)+Math.pow(p*h,2):s=0,n==0?n=.01:s/=n,r=e*s,i=t*s,o.fx-=r,o.fy-=i,u.fx+=r,u.fy+=i}}}},t._calculateHierarchicalSpringForces=function(){var e,t,n,r,i,s,o,u,a,f=this.edges,l=this.calculationNodes,c=this.calculationNodeIndices;for(var h=0;h<c.length;h++){var p=l[c[h]];p.springFx=0,p.springFy=0}for(n in f)if(f.hasOwnProperty(n)){t=f[n];if(t.connected&&this.nodes.hasOwnProperty(t.toId)&&this.nodes.hasOwnProperty(t.fromId)){e=t.physics.springLength,e+=(t.to.clusterSize+t.from.clusterSize-2)*this.constants.clustering.edgeGrowth,r=t.from.x-t.to.x,i=t.from.y-t.to.y,a=Math.sqrt(r*r+i*i),a==0&&(a=.01),u=this.constants.physics.springConstant*(e-a)/a,s=r*u,o=i*u;if(t.to.level!=t.from.level)t.to.springFx-=s,t.to.springFy-=o,t.from.springFx+=s,t.from.springFy+=o;else{var d=.5;t.to.fx-=d*s,t.to.fy-=d*o,t.from.fx+=d*s,t.from.fy+=d*o}}}var u=1,v,m;for(h=0;h<c.length;h++){var g=l[c[h]];v=Math.min(u,Math.max(-u,g.springFx)),m=Math.min(u,Math.max(-u,g.springFy)),g.fx+=v,g.fy+=m}var y=0,b=0;for(h=0;h<c.length;h++){var g=l[c[h]];y+=g.fx,b+=g.fy}var w=y/c.length,E=b/c.length;for(h=0;h<c.length;h++){var g=l[c[h]];g.fx-=w,g.fy-=E}}},function(e,t,n){t._calculateNodeForces=function(){if(this.constants.physics.barnesHut.gravitationalConstant!=0){var e,t=this.calculationNodes,n=this.calculationNodeIndices,r=n.length;this._formBarnesHutTree(t,n);var i=this.barnesHutTree;for(var s=0;s<r;s++)e=t[n[s]],e.options.mass>0&&(this._getForceContribution(i.root.children.NW,e),this._getForceContribution(i.root.children.NE,e),this._getForceContribution(i.root.children.SW,e),this._getForceContribution(i.root.children.SE,e))}},t._getForceContribution=function(e,t){if(e.childrenCount>0){var n,r,i;n=e.centerOfMass.x-t.x,r=e.centerOfMass.y-t.y,i=Math.sqrt(n*n+r*r);if(i*e.calcSize>this.constants.physics.barnesHut.theta){i==0&&(i=.1*Math.random(),n=i);var s=this.constants.physics.barnesHut.gravitationalConstant*e.mass*t.options.mass/(i*i*i),o=n*s,u=r*s;t.fx+=o,t.fy+=u}else if(e.childrenCount==4)this._getForceContribution(e.children.NW,t),this._getForceContribution(e.children.NE,t),this._getForceContribution(e.children.SW,t),this._getForceContribution(e.children.SE,t);else if(e.children.data.id!=t.id){i==0&&(i=.5*Math.random(),n=i);var s=this.constants.physics.barnesHut.gravitationalConstant*e.mass*t.options.mass/(i*i*i),o=n*s,u=r*s;t.fx+=o,t.fy+=u}}},t._formBarnesHutTree=function(e,t){var n,r=t.length,i=Number.MAX_VALUE,s=Number.MAX_VALUE,o=-Number.MAX_VALUE,u=-Number.MAX_VALUE;for(var a=0;a<r;a++){var f=e[t[a]].x,l=e[t[a]].y;e[t[a]].options.mass>0&&(f<i&&(i=f),f>o&&(o=f),l<s&&(s=l),l>u&&(u=l))}var c=Math.abs(o-i)-Math.abs(u-s);c>0?(s-=.5*c,u+=.5*c):(i+=.5*c,o-=.5*c);var h=1e-5,p=Math.max(h,Math.abs(o-i)),d=.5*p,v=.5*(i+o),m=.5*(s+u),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:v-d,maxX:v+d,minY:m-d,maxY:m+d},size:p,calcSize:1/p,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(a=0;a<r;a++)n=e[t[a]],n.options.mass>0&&this._placeInTree(g.root,n);this.barnesHutTree=g},t._updateBranchMass=function(e,t){var n=e.mass+t.options.mass,r=1/n;e.centerOfMass.x=e.centerOfMass.x*e.mass+t.x*t.options.mass,e.centerOfMass.x*=r,e.centerOfMass.y=e.centerOfMass.y*e.mass+t.y*t.options.mass,e.centerOfMass.y*=r,e.mass=n;var i=Math.max(Math.max(t.height,t.radius),t.width);e.maxWidth=e.maxWidth<i?i:e.maxWidth},t._placeInTree=function(e,t,n){(n!=1||n===undefined)&&this._updateBranchMass(e,t),e.children.NW.range.maxX>t.x?e.children.NW.range.maxY>t.y?this._placeInRegion(e,t,"NW"):this._placeInRegion(e,t,"SW"):e.children.NW.range.maxY>t.y?this._placeInRegion(e,t,"NE"):this._placeInRegion(e,t,"SE")},t._placeInRegion=function(e,t,n){switch(e.children[n].childrenCount){case 0:e.children[n].children.data=t,e.children[n].childrenCount=1,this._updateBranchMass(e.children[n],t);break;case 1:e.children[n].children.data.x==t.x&&e.children[n].children.data.y==t.y?(t.x+=Math.random(),t.y+=Math.random()):(this._splitBranch(e.children[n]),this._placeInTree(e.children[n],t));break;case 4:this._placeInTree(e.children[n],t)}},t._splitBranch=function(e){var t=null;e.childrenCount==1&&(t=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),t!=null&&this._placeInTree(e,t)},t._insertRegion=function(e,t){var n,r,i,s,o=.5*e.size;switch(t){case"NW":n=e.range.minX,r=e.range.minX+o,i=e.range.minY,s=e.range.minY+o;break;case"NE":n=e.range.minX+o,r=e.range.maxX,i=e.range.minY,s=e.range.minY+o;break;case"SW":n=e.range.minX,r=e.range.minX+o,i=e.range.minY+o,s=e.range.maxY;break;case"SE":n=e.range.minX+o,r=e.range.maxX,i=e.range.minY+o,s=e.range.maxY}e.children[t]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:r,minY:i,maxY:s},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}},t._drawTree=function(e,t){this.barnesHutTree!==undefined&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,t))},t._drawBranch=function(e,t,n){n===undefined&&(n="#FF0000"),e.childrenCount==4&&(this._drawBranch(e.children.NW,t),this._drawBranch(e.children.NE,t),this._drawBranch(e.children.SE,t),this._drawBranch(e.children.SW,t)),t.strokeStyle=n,t.beginPath(),t.moveTo(e.range.minX,e.range.minY),t.lineTo(e.range.maxX,e.range.minY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.minY),t.lineTo(e.range.maxX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.maxY),t.lineTo(e.range.minX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.minX,e.range.maxY),t.lineTo(e.range.minX,e.range.minY),t.stroke()}},function(e,t,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])}),define("app/views/endpointGraph",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/endPointGraph.html","vis"],function(e,t,n,r,i){"use strict";var s=e.View.extend({initialize:function(e){t.bindAll(this),this.endpointCollection=e.endpointCollection,this.serviceMessagesCollection=e.serviceMessagesCollection},render:function(){return this.$el.html(r),this._renderGraph(),this},refresh:function(){this._renderGraph()},_buidGraphModel:function(){var e=[];this.serviceMessagesCollection.each(function(t){e.push({from:t.get("Out"),to:t.get("In"),label:t.get("Type")+" ("+t.get("Count")+")"})});var n=[];this.endpointCollection.each(function(r){var i=t.find(e,function(e){return e.from===r.get("Name")||e.to===r.get("Name")});i&&n.push({id:r.get("Name"),label:r.get("Name")})}),this.nodes=n,this.edges=e},_renderGraph:function(){this._buidGraphModel();var e=document.getElementById("serviceGraph"),t={nodes:this.nodes,edges:this.edges},n={edges:{style:"arrow-center",fontSize:10},nodes:{shape:"box",fontSize:11},physics:{barnesHut:{enabled:!0,springLength:250,gravitationalConstant:-6400}}};this.network=new i.Network(e,t,n)}});return s}),define("app/helpers/timer",[],function(){"use strict";function e(e,t){this.callback=e,this.period=t,this.handler=null}return e.prototype.start=function(){this.handler=setInterval(this.callback,this.period)},e.prototype.stop=function(){clearInterval(this.handler)},e}),define("app/views/endpoints",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/endpoints.html","app/collections/serviceMessages","app/collections/services","app/collections/endpoints","app/views/services","app/views/endpointGraph","app/helpers/timer"],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l=e.View.extend({el:".mainContent",initialize:function(){t.bindAll(this),this.tags=[]},render:function(){this.$el.html(r),this.serviceMessagesCollection=new i,this.endpointCollection=new o,this.serviceCollection=new s,this.serviceCollection.fetch({success:this._renderServices});var e=this.endpointCollection.fetch(),t=this.serviceMessagesCollection.fetch();n.when(e,t).done(this._renderEndpointGraph);var u=this;return this.$el.find(".tags").select2({multiple:!0,allowClear:!0,query:function(e){n.ajax({url:"/tags",data:{query:e.term},success:function(t){var n=[];for(var r=0;r<t.length;r++)n.push({id:t[r],text:t[r]});e.callback({results:n})}})}}).on("select2-selecting",function(e,t){u.tags.push(e.object.id),u._filterServices()}).on("select2-removed",function(e,t){var r;n.each(u.tags,function(t,n){n===e.val&&(r=t)}),u.tags.splice(r,1),u._filterServices()}),this.timer=new f(this._refresh,5e3),this.timer.start(),this},_filterServices:function(){var e=this.endpointCollection.fetch({data:{tags:this.tags.join()},dataType:"json"}),t=this.serviceMessagesCollection.fetch();this.serviceCollection.fetch({data:{tags:this.tags.join()},reset:!0,dataType:"json"}),n.when(e,t).done(this.endpointGraph.refresh)},_renderServices:function(){this.services&&this.services.close(),this.services=new u({collection:this.serviceCollection}),this.renderView(this.services),this.$el.find(".services").html(this.services.$el)},_renderEndpointGraph:function(){this.endpointGraph=new a({endpointCollection:this.endpointCollection,serviceMessagesCollection:this.serviceMessagesCollection}),this.$el.find(".endpointGraph").html(this.endpointGraph.$el),this.renderView(this.endpointGraph)},_refresh:function(){this.serviceCollection.fetch({data:{tags:this.tags.join()},reset:!0,dataType:"json"})},onClose:function(){this.timer.stop()}});return l}),define("bower_components/requirejs-text/text!app/templates/auditMessages.html",[],function(){return'<div class="content-frame">\r\n    <div class="content-frame-top">\r\n        <div class="page-title">\r\n            <h2><span class="fa fa-envelope"></span> Audit Messages</h2>\r\n        </div>\r\n    </div>\r\n    <div class="page-content-wrap">\r\n\r\n        <div class="panel panel-default">\r\n            <div class="panel-body">\r\n                <div class="row">\r\n                    <div class="col-md-1 ">\r\n                        <label class="control-label dateRange" style="padding-top: 5px;">From: </label>\r\n                    </div>\r\n                    <div class="col-md-3 ">\r\n                        <div class="dateRange">\r\n                            <div datepicker="" class="input-group date" style="width: 100%">\r\n                                <input class="form-control from" type="text" value="" style="width: 100%">\r\n                                <span class="input-group-addon" style="width: 50px"><i class="glyphicon glyphicon-calendar"></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-1 ">\r\n                        <label class="control-label dateRange" style="padding-top: 5px;">To: </label>\r\n                    </div>\r\n                    <div class="col-md-3 ">\r\n                        <div class="dateRange">\r\n                            <div datepicker="" class="input-group date" style="width: 100%">\r\n                                <input id="startDateTime" class="form-control to" type="text" value="" style="width: 100%">\r\n                                <span class="input-group-addon" style="width: 50px"><i class="glyphicon glyphicon-calendar"></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2">\r\n                        <select class="form-control timeRange">\r\n                            <option>Last 5m</option>\r\n                            <option selected>Last 15m</option>\r\n                            <option>Last 30m</option>\r\n                            <option>Last 1h</option>\r\n                            <option>Last 2h</option>\r\n                            <option>Last 4h</option>\r\n                            <option>Last 6h</option>\r\n                            <option>Last 12h</option>\r\n                            <option>Last 24h</option>\r\n                            <option>Last 2d</option>\r\n                            <option>Last 7d</option>\r\n                            <option>Last 14d</option>\r\n                            <option>Last 30d</option>\r\n                            <option>Custom Range</option>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-md-2">\r\n                        <input type="text" class="form-control tags" style="float: right; width: 100%;" placeholder="Filter by tags">\r\n                    </div>\r\n                </div>\r\n                <div class="row auditHistogram">\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-12 auditTable"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>'}),function(e){if(typeof exports=="object")module.exports=e(require("underscore"),require("backbone"));else if(typeof define=="function"&&define.amd)define("backbone-pageable",["underscore","backbone"],e);else if(typeof _!="undefined"&&typeof Backbone!="undefined"){var t=Backbone.PageableCollection,n=e(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=t,n}}}(function(e,t){"use strict";function E(t,n){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+n+"` must be a finite integer");return t}function S(e){var t,n,r,i,s={},o=decodeURIComponent,u=e.split("&");for(var a=0,f=u.length;a<f;a++){var l=u[a];t=l.split("="),n=t[0],r=t[1]||!0,n=o(n),r=o(r),i=s[n],c(i)?i.push(r):i?s[n]=[i,r]:s[n]=r}return s}function x(e,t,n){var r=e._events[t];if(r&&r.length){var i=r[r.length-1],s=i.callback;i.callback=function(){try{s.apply(this,arguments),n()}catch(e){throw e}finally{i.callback=s}}}else n()}var n=e.extend,r=e.omit,i=e.clone,s=e.each,o=e.pick,u=e.contains,a=e.isEmpty,f=e.pairs,l=e.invert,c=e.isArray,h=e.isFunction,p=e.isObject,d=e.keys,v=e.isUndefined,m=e.result,g=Math.ceil,y=Math.floor,b=Math.max,w=t.Collection.prototype,T=/[\s'"]/g,N=/[<>\s'"]/g,C=t.PageableCollection=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(e,t){w.constructor.apply(this,arguments),t=t||{};var r=this.mode=t.mode||this.mode||k.mode,s=n({},k.queryParams,this.queryParams,t.queryParams||{});s.directions=n({},k.queryParams.directions,this.queryParams.directions,s.directions||{}),this.queryParams=s;var o=this.state=n({},k.state,this.state,t.state||{});o.currentPage=o.currentPage==null?o.firstPage:o.currentPage,c(e)||(e=e?[e]:[]),e=e.slice(),r!="server"&&o.totalRecords==null&&!a(e)&&(o.totalRecords=e.length),this.switchMode(r,n({fetch:!1,resetState:!1,models:e},t));var u=t.comparator;o.sortKey&&!u&&this.setSorting(o.sortKey,o.order,t);if(r!="server"){var f=this.fullCollection;u&&t.full&&(this.comparator=null,f.comparator=u),t.full&&f.sort(),e&&!a(e)&&(this.reset(e,n({silent:!0},t)),this.getPage(o.currentPage),e.splice.apply(e,[0,e.length].concat(this.models)))}this._initState=i(this.state)},_makeFullCollection:function(e,n){var r=["url","model","sync","comparator"],i=this.constructor.prototype,s,o,u,a={};for(s=0,o=r.length;s<o;s++)u=r[s],v(i[u])||(a[u]=i[u]);var f=new(t.Collection.extend(a))(e,n);for(s=0,o=r.length;s<o;s++)u=r[s],this[u]!==i[u]&&(f[u]=this[u]);return f},_makeCollectionEventHandler:function(e,t){return function(o,u,a,f){var l=e._handlers;s(d(l),function(n){var r=l[n];e.off(n,r),t.off(n,r)});var c=i(e.state),h=c.firstPage,p=h===0?c.currentPage:c.currentPage-1,m=c.pageSize,y=p*m,b=y+m;if(o=="add"){var w,E,S,T,f=f||{};if(a==t)E=t.indexOf(u),E>=y&&E<b&&(T=e,w=S=E-y);else{w=e.indexOf(u),E=y+w,T=t;var S=v(f.at)?E:f.at+y}f.onRemove||(++c.totalRecords,delete f.onRemove),e.state=e._checkState(c);if(T){T.add(u,n({},f||{},{at:S}));var N=w>=m?u:!v(f.at)&&S<b&&e.length>m?e.at(m):null;N&&x(a,o,function(){e.remove(N,{onAdd:!0})})}}if(o=="remove")if(!f.onAdd){if(!--c.totalRecords)c.totalRecords=null,c.totalPages=null;else{var C=c.totalPages=g(c.totalRecords/m);c.lastPage=h===0?C-1:C||h,c.currentPage>C&&(c.currentPage=c.lastPage)}e.state=e._checkState(c);var k,L=f.index;a==e?((k=t.at(b))&&x(e,o,function(){e.push(k,{onRemove:!0})}),t.remove(u)):L>=y&&L<b&&((k=t.at(b-1))&&x(e,o,function(){e.push(k,{onRemove:!0})}),e.remove(u))}else delete f.onAdd;if(o=="reset"){f=a,a=u;if(a==e&&f.from==null&&f.to==null){var A=t.models.slice(0,y),O=t.models.slice(y+e.models.length);t.reset(A.concat(e.models).concat(O),f)}else a==t&&((c.totalRecords=t.models.length)||(c.totalRecords=null,c.totalPages=null),e.mode=="client"&&(c.lastPage=c.currentPage=c.firstPage),e.state=e._checkState(c),e.reset(t.models.slice(y,b),n({},f,{parse:!1})))}o=="sort"&&(f=a,a=u,a===t&&e.reset(t.models.slice(y,b),n({},f,{parse:!1}))),s(d(l),function(n){var r=l[n];s([e,t],function(e){e.on(n,r);var t=e._events[n]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode,n=this.links,r=e.totalRecords,i=e.pageSize,s=e.currentPage,o=e.firstPage,u=e.totalPages;if(r!=null&&i!=null&&s!=null&&o!=null&&(t=="infinite"?n:!0)){r=E(r,"totalRecords"),i=E(i,"pageSize"),s=E(s,"currentPage"),o=E(o,"firstPage");if(i<1)throw new RangeError("`pageSize` must be >= 1");u=e.totalPages=g(r/i);if(o<0||o>1)throw new RangeError("`firstPage must be 0 or 1`");e.lastPage=o===0?b(0,u-1):u||o;if(t=="infinite"){if(!n[s+""])throw new RangeError("No link found for page "+s)}else if(s<o||u>0&&(o?s>u:s>=u))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(o?">":">=")+" totalPages if "+o+"-based. Got "+s+".")}return e},setPageSize:function(e,t){e=E(e,"pageSize"),t=t||{first:!1};var i=this.state,s=g(i.totalRecords/e),o=s?b(i.firstPage,y(s*i.currentPage/i.totalPages)):i.firstPage;return i=this.state=this._checkState(n({},i,{pageSize:e,currentPage:t.first?i.firstPage:o,totalPages:s})),this.getPage(i.currentPage,r(t,["first"]))},switchMode:function(t,o){if(!u(["server","client","infinite"],t))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');o=o||{fetch:!0,resetState:!0};var a=this.state=o.resetState?i(this._initState):this._checkState(n({},this.state));this.mode=t;var f=this,l=this.fullCollection,c=this._handlers=this._handlers||{},h;if(t!="server"&&!l){l=this._makeFullCollection(o.models||[],o),l.pageableCollection=this,this.fullCollection=l;var p=this._makeCollectionEventHandler(this,l);s(["add","remove","reset","sort"],function(t){c[t]=h=e.bind(p,{},t),f.on(t,h),l.on(t,h)}),l.comparator=this._fullComparator}else t=="server"&&l&&(s(d(c),function(e){h=c[e],f.off(e,h),l.off(e,h)}),delete this._handlers,this._fullComparator=l.comparator,delete this.fullCollection);if(t=="infinite"){var v=this.links={},m=a.firstPage,y=g(a.totalRecords/a.pageSize),w=m===0?b(0,y-1):y||m;for(var E=a.firstPage;E<=w;E++)v[E]=this.url}else this.links&&delete this.links;return o.fetch?this.fetch(r(o,"fetch","resetState")):this},hasPreviousPage:function(){var e=this.state,t=e.currentPage;return this.mode!="infinite"?t>e.firstPage:!!this.links[t-1]},hasPrevious:function(){var e="hasPrevious has been deprecated, use hasPreviousPage instead";return typeof console!="undefined"&&console.warn&&console.warn(e),this.hasPreviousPage()},hasNextPage:function(){var e=this.state,t=this.state.currentPage;return this.mode!="infinite"?t<e.lastPage:!!this.links[t+1]},hasNext:function(){var e="hasNext has been deprecated, use hasNextPage instead";return typeof console!="undefined"&&console.warn&&console.warn(e),this.hasNextPage()},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var i=this.mode,s=this.fullCollection;t=t||{fetch:!1};var o=this.state,u=o.firstPage,f=o.currentPage,l=o.lastPage,c=o.pageSize,h=e;switch(e){case"first":h=u;break;case"prev":h=f-1;break;case"next":h=f+1;break;case"last":h=l;break;default:h=E(e,"index")}this.state=this._checkState(n({},o,{currentPage:h})),t.from=f,t.to=h;var p=(u===0?h:h-1)*c,d=s&&s.length?s.models.slice(p,p+c):[];return(i=="client"||i=="infinite"&&!a(d))&&!t.fetch?(this.reset(d,r(t,"fetch")),this):(i=="infinite"&&(t.url=this.links[h]),this.fetch(r(t,"fetch")))},getPageByOffset:function(e,t){if(e<0)throw new RangeError("`offset must be > 0`");e=E(e);var n=y(e/this.state.pageSize);return this.state.firstPage!==0&&n++,n>this.state.lastPage&&(n=this.state.lastPage),this.getPage(n,t)},sync:function(e,r,i){var s=this;if(s.mode=="infinite"){var o=i.success,u=s.state.currentPage;i.success=function(e,t,r){var a=s.links,f=s.parseLinks(e,n({xhr:r},i));f.first&&(a[s.state.firstPage]=f.first),f.prev&&(a[u-1]=f.prev),f.next&&(a[u+1]=f.next),o&&o(e,t,r)}}return(w.sync||t.sync).call(s,e,r,i)},parseLinks:function(e,t){var n={},r=t.xhr.getResponseHeader("Link");if(r){var i=["first","prev","next"];s(r.split(","),function(e){var t=e.split(";"),r=t[0].replace(N,""),o=t.slice(1);s(o,function(e){var t=e.split("="),s=t[0].replace(T,""),o=t[1].replace(T,"");s=="rel"&&u(i,o)&&(n[o]=r)})})}return n},parse:function(e,t){var r=this.parseState(e,i(this.queryParams),i(this.state),t);return r&&(this.state=this._checkState(n({},this.state,r))),this.parseRecords(e,t)},parseState:function(t,n,o,u){if(t&&t.length===2&&p(t[0])&&c(t[1])){var a=i(o),h=t[0];return s(f(r(n,"directions")),function(t){var n=t[0],r=t[1],i=h[r];!v(i)&&!e.isNull(i)&&(a[n]=h[r])}),h.order&&(a.order=l(n.directions)[h.order]*1),a}},parseRecords:function(e,t){return e&&e.length===2&&p(e[0])&&c(e[1])?e[1]:e},fetch:function(e){e=e||{};var t=this._checkState(this.state),s=this.mode;s=="infinite"&&!e.url&&(e.url=this.links[t.currentPage]);var u=e.data||{},a=m(e,"url")||m(this,"url")||"",l=a.indexOf("?");l!=-1&&(n(u,S(a.slice(l+1))),a=a.slice(0,l)),e.url=a,e.data=u;var c=this.mode=="client"?o(this.queryParams,"sortKey","order"):r(o(this.queryParams,d(k.queryParams)),"directions"),p,g,y,b,E=f(c),x=i(this);for(p=0;p<E.length;p++)g=E[p],y=g[0],b=g[1],b=h(b)?b.call(x):b,t[y]!=null&&b!=null&&(u[b]=t[y]);t.sortKey&&t.order?u[c.order]=this.queryParams.directions[t.order+""]:t.sortKey||delete u[c.order];var T=f(r(this.queryParams,d(k.queryParams)));for(p=0;p<T.length;p++)g=T[p],b=g[1],b=h(b)?b.call(x):b,b!=null&&(u[g[0]]=b);if(s!="server"){var N=this,C=this.fullCollection,L=e.success;return e.success=function(t,r,i){i=i||{},v(e.silent)?delete i.silent:i.silent=e.silent;var o=t.models;s=="client"?C.reset(o,i):(C.add(o,n({at:C.length},n(i,{parse:!1}))),N.trigger("reset",N,i)),L&&L(t,r,i)},w.fetch.call(this,n({},e,{silent:!0}))}return w.fetch.call(this,e)},_makeComparator:function(e,t,n){var r=this.state;e=e||r.sortKey,t=t||r.order;if(!e||!t)return;return n||(n=function(e,t){return e.get(t)}),function(r,i){var s=n(r,e),o=n(i,e),u;return t===1&&(u=s,s=o,o=u),s===o?0:s<o?-1:1}},setSorting:function(e,t,r){var i=this.state;i.sortKey=e,i.order=t=t||i.order;var s=this.fullCollection,o=!1,u=!1;e||(o=u=!0);var a=this.mode;r=n({side:a=="client"?a:"server",full:!0},r);var f=this._makeComparator(e,t,r.sortValue),l=r.full,c=r.side;return c=="client"?l?(s&&(s.comparator=f),o=!0):(this.comparator=f,u=!0):c=="server"&&!l&&(this.comparator=f),o&&(this.comparator=null),u&&s&&(s.comparator=null),this}}),k=C.prototype;return C}),define("app/collections/auditMessages",["backbone","backbone-pageable"],function(e){"use strict";var t=e.PageableCollection.extend({url:"audits",mode:"client"});return t}),define("bower_components/requirejs-text/text!app/templates/auditTable.html",[],function(){return'<div class="grid" style="height: 800px;"></div>\r\n<div class="paginator"></div>'}),function(e){define("jquery.event.drag",["jquery"],function(){return function(){(function(e){e.fn.drag=function(t,n,r){var i=typeof t=="string"?t:"",s=e.isFunction(t)?t:e.isFunction(n)?n:null;return i.indexOf("drag")!==0&&(i="drag"+i),r=(t==s?n:r)||{},s?this.bind(i,r,s):this.trigger(i)};var t=e.event,n=t.special,r=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,r.datakey),i=t.data||{};n.related+=1,e.each(r.defaults,function(e,t){i[e]!==undefined&&(n[e]=i[e])})},remove:function(){e.data(this,r.datakey).related-=1},setup:function(){if(e.data(this,r.datakey))return;var n=e.extend({related:0},r.defaults);e.data(this,r.datakey,n),t.add(this,"touchstart mousedown",r.init,n),this.attachEvent&&this.attachEvent("ondragstart",r.dontstart)},teardown:function(){var n=e.data(this,r.datakey)||{};if(n.related)return;e.removeData(this,r.datakey),t.remove(this,"touchstart mousedown",r.init),r.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",r.dontstart)},init:function(i){if(r.touched)return;var s=i.data,o;if(i.which!=0&&s.which>0&&i.which!=s.which)return;if(e(i.target).is(s.not))return;if(s.handle&&!e(i.target).closest(s.handle,i.currentTarget).length)return;r.touched=i.type=="touchstart"?this:null,s.propagates=1,s.mousedown=this,s.interactions=[r.interaction(this,s)],s.target=i.target,s.pageX=i.pageX,s.pageY=i.pageY,s.dragging=null,o=r.hijack(i,"draginit",s);if(!s.propagates)return;o=r.flatten(o),o&&o.length&&(s.interactions=[],e.each(o,function(){s.interactions.push(r.interaction(this,s))})),s.propagates=s.interactions.length,s.drop!==!1&&n.drop&&n.drop.handler(i,s),r.textselect(!1),r.touched?t.add(r.touched,"touchmove touchend",r.handler,s):t.add(document,"mousemove mouseup",r.handler,s);if(!r.touched||s.live)return!1},interaction:function(t,n){var i=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new r.callback,droppable:[],offset:i}},handler:function(i){var s=i.data;switch(i.type){case!s.dragging&&"touchmove":i.preventDefault();case!s.dragging&&"mousemove":if(Math.pow(i.pageX-s.pageX,2)+Math.pow(i.pageY-s.pageY,2)<Math.pow(s.distance,2))break;i.target=s.target,r.hijack(i,"dragstart",s),s.propagates&&(s.dragging=!0);case"touchmove":i.preventDefault();case"mousemove":if(s.dragging){r.hijack(i,"drag",s);if(s.propagates){s.drop!==!1&&n.drop&&n.drop.handler(i,s);break}i.type="mouseup"};case"touchend":case"mouseup":default:r.touched?t.remove(r.touched,"touchmove touchend",r.handler):t.remove(document,"mousemove mouseup",r.handler),s.dragging&&(s.drop!==!1&&n.drop&&n.drop.handler(i,s),r.hijack(i,"dragend",s)),r.textselect(!0),s.click===!1&&s.dragging&&e.data(s.mousedown,"suppress.click",(new Date).getTime()+5),s.dragging=r.touched=!1}},hijack:function(n,i,s,o,u){if(!s)return;var a={event:n.originalEvent,type:n.type},f=i.indexOf("drop")?"drag":"drop",l,c=o||0,h,p,d,v=isNaN(o)?s.interactions.length:o;n.type=i,n.originalEvent=null,s.results=[];do if(h=s.interactions[c]){if(i!=="dragend"&&h.cancelled)continue;d=r.properties(n,s,h),h.results=[],e(u||h[f]||s.droppable).each(function(o,u){d.target=u,n.isPropagationStopped=function(){return!1},l=u?t.dispatch.call(u,n,d):null,l===!1?(f=="drag"&&(h.cancelled=!0,s.propagates-=1),i=="drop"&&(h[f][o]=null)):i=="dropinit"&&h.droppable.push(r.element(l)||u),i=="dragstart"&&(h.proxy=e(r.element(l)||h.drag)[0]),h.results.push(l),delete n.result;if(i!=="dropinit")return l}),s.results[c]=r.flatten(h.results),i=="dropinit"&&(h.droppable=r.flatten(h.droppable)),i=="dragstart"&&!h.cancelled&&d.update()}while(++c<v);return n.type=a.type,n.originalEvent=a.event,r.flatten(s.results)},properties:function(e,t,n){var i=n.callback;return i.drag=n.drag,i.proxy=n.proxy||n.drag,i.startX=t.pageX,i.startY=t.pageY,i.deltaX=e.pageX-t.pageX,i.deltaY=e.pageY-t.pageY,i.originalX=n.offset.left,i.originalY=n.offset.top,i.offsetX=i.originalX+i.deltaX,i.offsetY=i.originalY+i.deltaY,i.drop=r.flatten((n.drop||[]).slice()),i.available=r.flatten((n.droppable||[]).slice()),i},element:function(e){if(e&&(e.jquery||e.nodeType==1))return e},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?r.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",r.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};r.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,function(e){n.drop.locate(this,e)})}};var i=t.dispatch;t.dispatch=function(t){if(e.data(this,"suppress."+t.type)-(new Date).getTime()>0){e.removeData(this,"suppress."+t.type);return}return i.apply(this,arguments)};var s=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var r=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;r&&e.each(s.props,function(e,n){t[n]=r[n]})}return t}};n.draginit=n.dragstart=n.dragend=r})(jQuery)}.apply(e,arguments)})}(this),function(e){define("slick.core",["jquery"],function(){return function(){(function(e){function t(){var e=!1,t=!1;this.stopPropagation=function(){e=!0},this.isPropagationStopped=function(){return e},this.stopImmediatePropagation=function(){t=!0},this.isImmediatePropagationStopped=function(){return t}}function n(){var e=[];this.subscribe=function(t){e.push(t)},this.unsubscribe=function(t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},this.notify=function(n,r,i){r=r||new t,i=i||this;var s;for(var o=0;o<e.length&&!r.isPropagationStopped()&&!r.isImmediatePropagationStopped();o++)s=e[o].call(i,r,n);return s}}function r(){var e=[];this.subscribe=function(t,n){return e.push({event:t,handler:n}),t.subscribe(n),this},this.unsubscribe=function(t,n){var r=e.length;while(r--)if(e[r].event===t&&e[r].handler===n){e.splice(r,1),t.unsubscribe(n);return}return this},this.unsubscribeAll=function(){var t=e.length;while(t--)e[t].event.unsubscribe(e[t].handler);return e=[],this}}function i(e,t,n,r){n===undefined&&r===undefined&&(n=e,r=t),this.fromRow=Math.min(e,n),this.fromCell=Math.min(t,r),this.toRow=Math.max(e,n),this.toCell=Math.max(t,r),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(e,t){return e>=this.fromRow&&e<=this.toRow&&t>=this.fromCell&&t<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function s(){this.__nonDataRow=!0}function o(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}function u(){this.__groupTotals=!0,this.group=null}function a(){var e=null;this.isActive=function(t){return t?e===t:e!==null},this.activate=function(t){if(t===e)return;if(e!==null)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!t.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!t.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";e=t},this.deactivate=function(t){if(e!==t)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";e=null},this.commitCurrentEdit=function(){return e?e.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){return e?e.cancelCurrentEdit():!0}}e.extend(!0,window,{Slick:{Event:n,EventData:t,EventHandler:r,Range:i,NonDataRow:s,Group:o,GroupTotals:u,EditorLock:a,GlobalEditorLock:new a}}),o.prototype=new s,o.prototype.equals=function(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed},u.prototype=new s})(jQuery)}.apply(e,arguments)})}(this),function(root){define("slickgrid",["jquery","jquery.event.drag","slick.core"],function(){return function(){if(typeof jQuery=="undefined")throw"SlickGrid requires jquery module to be loaded";if(!jQuery.fn.drag)throw"SlickGrid requires jquery.event.drag module to be loaded";if(typeof Slick=="undefined")throw"slick.core.js not loaded";return function($){function SlickGrid(container,data,columns,options){function init(){$container=$(container);if($container.length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,columnsById={};for(var e=0;e<columns.length;e++){var t=columns[e]=$.extend({},columnDefaults,columns[e]);columnsById[t.id]=e,t.minWidth&&t.width<t.minWidth&&(t.width=t.minWidth),t.maxWidth&&t.width>t.maxWidth&&(t.width=t.maxWidth)}if(options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller),$headers.width(getHeadersWidth()),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),$canvas=$("<div class='grid-canvas' />").appendTo($viewport),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,viewportW=parseFloat($.css($container[0],"width",!0)),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.bind("selectstart.ui",function(e){return $(e.target).is("input,textarea")}),updateColumnCaches(),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.bind("resize.slickgrid",resizeCanvas),$viewport.bind("scroll",handleScroll),$headerScroller.bind("contextmenu",handleHeaderContextMenu).bind("click",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave),$headerRowScroller.bind("scroll",handleHeaderRowScroll),$focusSink.add($focusSink2).bind("keydown",handleKeyDown),$canvas.bind("keydown",handleKeyDown).bind("click",handleClick).bind("dblclick",handleDblClick).bind("contextmenu",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",{distance:3},handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave))}function registerPlugin(e){plugins.unshift(e),e.init(self)}function unregisterPlugin(e){for(var t=plugins.length;t>=0;t--)if(plugins[t]===e){plugins[t].destroy&&plugins[t].destroy(),plugins.splice(t,1);break}}function setSelectionModel(e){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=e,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var e=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t}function getHeadersWidth(){var e=0;for(var t=0,n=columns.length;t<n;t++){var r=columns[t].width;e+=r}return e+=scrollbarDimensions.width,Math.max(e,viewportW)+1e3}function getCanvasWidth(){var e=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,t=0,n=columns.length;while(n--)t+=columns[n].width;return options.fullWidthRows?Math.max(t,e):t}function updateCanvasWidth(e){var t=canvasWidth;canvasWidth=getCanvasWidth(),canvasWidth!=t&&($canvas.width(canvasWidth),$headerRow.width(canvasWidth),$headers.width(getHeadersWidth()),viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width),$headerRowSpacer.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),(canvasWidth!=t||e)&&applyColumnWidths()}function disableSelection(e){e&&e.jquery&&e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){var e=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=$("<div style='display:none' />").appendTo(document.body);for(;;){var r=e*2;n.css("height",r);if(r>t||n.height()!==r)break;e=r}return n.remove(),e}function bindAncestorScrollEvents(){var e=$canvas[0];while((e=e.parentNode)!=document.body&&e!=null)if(e==$viewport[0]||e.scrollWidth!=e.clientWidth||e.scrollHeight!=e.clientHeight){var t=$(e);$boundAncestors?$boundAncestors=$boundAncestors.add(t):$boundAncestors=t,t.bind("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){if(!$boundAncestors)return;$boundAncestors.unbind("scroll."+uid),$boundAncestors=null}function updateColumnHeader(e,t,n){if(!initialized)return;var r=getColumnIndex(e);if(r==null)return;var i=columns[r],s=$headers.children().eq(r);s&&(t!==undefined&&(columns[r].name=t),n!==undefined&&(columns[r].toolTip=n),trigger(self.onBeforeHeaderCellDestroy,{node:s[0],column:i}),s.attr("title",n||"").children().eq(0).html(t),trigger(self.onHeaderCellRendered,{node:s[0],column:i}))}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(e){var t=getColumnIndex(e),n=$headerRow.children().eq(t);return n&&n[0]}function createColumnHeaders(){function e(){$(this).addClass("ui-state-hover")}function t(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var e=$(this).data("column");e&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:e})}),$headers.empty(),$headers.width(getHeadersWidth()),$headerRow.find(".slick-headerrow-column").each(function(){var e=$(this).data("column");e&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:e})}),$headerRow.empty();for(var n=0;n<columns.length;n++){var r=columns[n],i=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+r.name+"</span>").width(r.width-headerColumnWidthDiff).attr("id",""+uid+r.id).attr("title",r.toolTip||"").data("column",r).addClass(r.headerCssClass||"").appendTo($headers);(options.enableColumnReorder||r.sortable)&&i.on("mouseenter",e).on("mouseleave",t),r.sortable&&(i.addClass("slick-header-sortable"),i.append("<span class='slick-sort-indicator' />")),trigger(self.onHeaderCellRendered,{node:i[0],column:r});if(options.showHeaderRow){var s=$("<div class='ui-state-default slick-headerrow-column l"+n+" r"+n+"'></div>").data("column",r).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{node:s[0],column:r})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(e){e.metaKey=e.metaKey||e.ctrlKey;if($(e.target).hasClass("slick-resizable-handle"))return;var t=$(e.target).closest(".slick-header-column");if(!t.length)return;var n=t.data("column");if(n.sortable){if(!getEditorLock().commitCurrentEdit())return;var r=null,i=0;for(;i<sortColumns.length;i++)if(sortColumns[i].columnId==n.id){r=sortColumns[i],r.sortAsc=!r.sortAsc;break}if(e.metaKey&&options.multiColumnSort)r&&sortColumns.splice(i,1);else{if(!e.shiftKey&&!e.metaKey||!options.multiColumnSort)sortColumns=[];r?sortColumns.length==0&&sortColumns.push(r):(r={columnId:n.id,sortAsc:n.defaultSortAsc},sortColumns.push(r))}setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(e){return{sortCol:columns[getColumnIndex(e.columnId)],sortAsc:e.sortAsc}})},e):trigger(self.onSort,{multiColumnSort:!1,sortCol:n,sortAsc:r.sortAsc},e)}})}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy"),$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,start:function(e,t){$(t.helper).addClass("slick-header-column-active")},beforeStop:function(e,t){$(t.helper).removeClass("slick-header-column-active")},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var t=$headers.sortable("toArray"),n=[];for(var r=0;r<t.length;r++)n.push(columns[getColumnIndex(t[r].replace(uid,""))]);setColumns(n),trigger(self.onColumnsReordered,{}),e.stopPropagation(),setupColumnResize()}})}function setupColumnResize(){var e,t,n,r,i,s,o,u,a;i=$headers.children(),i.find(".slick-resizable-handle").remove(),i.each(function(e,t){columns[e].resizable&&(u===undefined&&(u=e),a=e)});if(u===undefined)return;i.each(function(f,l){if(f<u||options.forceFitColumns&&f>=a)return;e=$(l),$("<div class='slick-resizable-handle' />").appendTo(l).bind("dragstart",function(e,u){if(!getEditorLock().commitCurrentEdit())return!1;r=e.pageX,$(this).parent().addClass("slick-header-column-active");var a=null,l=null;i.each(function(e,t){columns[e].previousWidth=$(t).outerWidth()});if(options.forceFitColumns){a=0,l=0;for(t=f+1;t<i.length;t++)n=columns[t],n.resizable&&(l!==null&&(n.maxWidth?l+=n.maxWidth-n.previousWidth:l=null),a+=n.previousWidth-Math.max(n.minWidth||0,absoluteColumnMinWidth))}var h=0,p=0;for(t=0;t<=f;t++)n=columns[t],n.resizable&&(p!==null&&(n.maxWidth?p+=n.maxWidth-n.previousWidth:p=null),h+=n.previousWidth-Math.max(n.minWidth||0,absoluteColumnMinWidth));a===null&&(a=1e5),h===null&&(h=1e5),l===null&&(l=1e5),p===null&&(p=1e5),o=r+Math.min(a,p),s=r-Math.min(h,l)}).bind("drag",function(e,u){var a,l=Math.min(o,Math.max(s,e.pageX))-r,h;if(l<0){h=l;for(t=f;t>=0;t--)n=columns[t],n.resizable&&(a=Math.max(n.minWidth||0,absoluteColumnMinWidth),h&&n.previousWidth+h<a?(h+=n.previousWidth-a,n.width=a):(n.width=n.previousWidth+h,h=0));if(options.forceFitColumns){h=-l;for(t=f+1;t<i.length;t++)n=columns[t],n.resizable&&(h&&n.maxWidth&&n.maxWidth-n.previousWidth<h?(h-=n.maxWidth-n.previousWidth,n.width=n.maxWidth):(n.width=n.previousWidth+h,h=0))}}else{h=l;for(t=f;t>=0;t--)n=columns[t],n.resizable&&(h&&n.maxWidth&&n.maxWidth-n.previousWidth<h?(h-=n.maxWidth-n.previousWidth,n.width=n.maxWidth):(n.width=n.previousWidth+h,h=0));if(options.forceFitColumns){h=-l;for(t=f+1;t<i.length;t++)n=columns[t],n.resizable&&(a=Math.max(n.minWidth||0,absoluteColumnMinWidth),h&&n.previousWidth+h<a?(h+=n.previousWidth-a,n.width=a):(n.width=n.previousWidth+h,h=0))}}applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).bind("dragend",function(e,r){var s;$(this).parent().removeClass("slick-header-column-active");for(t=0;t<i.length;t++)n=columns[t],s=$(i[t]).outerWidth(),n.previousWidth!==s&&n.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{})})})}function getVBoxDelta(e){var t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],n=0;return $.each(t,function(t,r){n+=parseFloat(e.css(r))||0}),n}function measureCellPaddingAndBorder(){var e,t=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];e=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,$.each(t,function(t,n){headerColumnWidthDiff+=parseFloat(e.css(n))||0}),$.each(n,function(t,n){headerColumnHeightDiff+=parseFloat(e.css(n))||0}),e.remove();var r=$("<div class='slick-row' />").appendTo($canvas);e=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r),cellWidthDiff=cellHeightDiff=0,$.each(t,function(t,n){cellWidthDiff+=parseFloat(e.css(n))||0}),$.each(n,function(t,n){cellHeightDiff+=parseFloat(e.css(n))||0}),r.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var e=options.rowHeight-cellHeightDiff,t=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+e+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"];for(var n=0;n<columns.length;n++)t.push("."+uid+" .l"+n+" { }"),t.push("."+uid+" .r"+n+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=t.join(" "):$style[0].appendChild(document.createTextNode(t.join(" ")))}function getColumnCssRules(e){if(!stylesheet){var t=document.styleSheets;for(var n=0;n<t.length;n++)if((t[n].ownerNode||t[n].owningElement)==$style[0]){stylesheet=t[n];break}if(!stylesheet)throw new Error("Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];var r=stylesheet.cssRules||stylesheet.rules,i,s;for(var n=0;n<r.length;n++){var o=r[n].selectorText;if(i=/\.l\d+/.exec(o))s=parseInt(i[0].substr(2,i[0].length-2),10),columnCssRulesL[s]=r[n];else if(i=/\.r\d+/.exec(o))s=parseInt(i[0].substr(2,i[0].length-2),10),columnCssRulesR[s]=r[n]}}return{left:columnCssRulesL[e],right:columnCssRulesR[e]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});var e=plugins.length;while(e--)unregisterPlugin(plugins[e]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(e,t,n){return n=n||new Slick.EventData,t=t||{},t.grid=self,e.notify(t,n,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(e){return columnsById[e]}function autosizeColumns(){var e,t,n=[],r=0,i=0,s,o=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(e=0;e<columns.length;e++)t=columns[e],n.push(t.width),i+=t.width,t.resizable&&(r+=t.width-Math.max(t.minWidth,absoluteColumnMinWidth));s=i;while(i>o&&r){var u=(i-o)/r;for(e=0;e<columns.length&&i>o;e++){t=columns[e];var a=n[e];if(!t.resizable||a<=t.minWidth||a<=absoluteColumnMinWidth)continue;var f=Math.max(t.minWidth,absoluteColumnMinWidth),l=Math.floor(u*(a-f))||1;l=Math.min(l,a-f),i-=l,r-=l,n[e]-=l}if(s==i)break;s=i}s=i;while(i<o){var c=o/i;for(e=0;e<columns.length&&i<o;e++){t=columns[e];if(!t.resizable||t.maxWidth<=t.width)continue;var h=Math.min(Math.floor(c*t.width)-t.width,t.maxWidth-t.width||1e6)||1;i+=h,n[e]+=h}if(s==i)break;s=i}var p=!1;for(e=0;e<columns.length;e++)columns[e].rerenderOnResize&&columns[e].width!=n[e]&&(p=!0),columns[e].width=n[e];applyColumnHeaderWidths(),updateCanvasWidth(!0),p&&(invalidateAllRows(),render())}function applyColumnHeaderWidths(){if(!initialized)return;var e;for(var t=0,n=$headers.children(),r=n.length;t<r;t++)e=$(n[t]),e.width()!==columns[t].width-headerColumnWidthDiff&&e.width(columns[t].width-headerColumnWidthDiff);updateColumnCaches()}function applyColumnWidths(){var e=0,t,n;for(var r=0;r<columns.length;r++)t=columns[r].width,n=getColumnCssRules(r),n.left.style.left=e+"px",n.right.style.right=canvasWidth-e-t+"px",e+=columns[r].width}function setSortColumn(e,t){setSortColumns([{columnId:e,sortAsc:t}])}function setSortColumns(e){sortColumns=e;var t=$headers.children();t.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),$.each(sortColumns,function(e,n){n.sortAsc==null&&(n.sortAsc=!0);var r=getColumnIndex(n.columnId);r!=null&&t.eq(r).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(n.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(e,t){selectedRows=[];var n={};for(var r=0;r<t.length;r++)for(var i=t[r].fromRow;i<=t[r].toRow;i++){n[i]||(selectedRows.push(i),n[i]={});for(var s=t[r].fromCell;s<=t[r].toCell;s++)canCellBeSelected(i,s)&&(n[i][columns[s].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,n),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];var e=0;for(var t=0,n=columns.length;t<n;t++)columnPosLeft[t]=e,columnPosRight[t]=e+columns[t].width,e+=columns[t].width}function setColumns(e){columns=e,columnsById={};for(var t=0;t<columns.length;t++){var n=columns[t]=$.extend({},columnDefaults,columns[t]);columnsById[n.id]=t,n.minWidth&&n.width<n.minWidth&&(n.width=n.minWidth),n.maxWidth&&n.width>n.maxWidth&&(n.width=n.maxWidth)}updateColumnCaches(),initialized&&(invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeCanvas(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(e){if(!getEditorLock().commitCurrentEdit())return;makeActiveCellNormal(),options.enableAddRow!==e.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,e),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),render()}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1)}function setData(e,t){data=e,invalidateAllRows(),updateRowCount(),t&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataItem(e){return data.getItem?data.getItem(e):data[e]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(e){options.showTopPanel!=e&&(options.showTopPanel=e,e?$topPanelScroller.slideDown("fast",resizeCanvas):$topPanelScroller.slideUp("fast",resizeCanvas))}function setHeaderRowVisibility(e){options.showHeaderRow!=e&&(options.showHeaderRow=e,e?$headerRowScroller.slideDown("fast",resizeCanvas):$headerRowScroller.slideUp("fast",resizeCanvas))}function getContainerNode(){return $container.get(0)}function getRowTop(e){return options.rowHeight*e-offset}function getRowFromPosition(e){return Math.floor((e+offset)/options.rowHeight)}function scrollTo(e){e=Math.max(e,0),e=Math.min(e,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var t=offset;page=Math.min(n-1,Math.floor(e/ph)),offset=Math.round(page*cj);var r=e-offset;if(offset!=t){var i=getVisibleRange(r);cleanupRows(i),updateRowPositions()}prevScrollTop!=r&&(vScrollDir=prevScrollTop+t<r+offset?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=r,trigger(self.onViewportChanged,{}))}function defaultFormatter(e,t,n,r,i){return n==null?"":(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(e,t){var n=data.getItemMetadata&&data.getItemMetadata(e),r=n&&n.columns&&(n.columns[t.id]||n.columns[getColumnIndex(t.id)]);return r&&r.formatter||n&&n.formatter||t.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(t)||options.defaultFormatter}function getEditor(e,t){var n=columns[t],r=data.getItemMetadata&&data.getItemMetadata(e),i=r&&r.columns;return i&&i[n.id]&&i[n.id].editor!==undefined?i[n.id].editor:i&&i[t]&&i[t].editor!==undefined?i[t].editor:n.editor||options.editorFactory&&options.editorFactory.getEditor(n)}function getDataItemValueForColumn(e,t){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(e,t):e[t.field]}function appendRowHtml(e,t,n,r){var i=getDataItem(t),s=t<r&&!i,o="slick-row"+(s?" loading":"")+(t===activeRow?" active":"")+(t%2==1?" odd":" even"),u=data.getItemMetadata&&data.getItemMetadata(t);u&&u.cssClasses&&(o+=" "+u.cssClasses),e.push("<div class='ui-widget-content "+o+"' style='top:"+getRowTop(t)+"px'>");var a,f;for(var l=0,c=columns.length;l<c;l++){f=columns[l],a=1;if(u&&u.columns){var h=u.columns[f.id]||u.columns[l];a=h&&h.colspan||1,a==="*"&&(a=c-l)}if(columnPosRight[Math.min(c-1,l+a-1)]>n.leftPx){if(columnPosLeft[l]>n.rightPx)break;appendCellHtml(e,t,l,a,i)}a>1&&(l+=a-1)}e.push("</div>")}function appendCellHtml(e,t,n,r,i){var s=columns[n],o="slick-cell l"+n+" r"+Math.min(columns.length-1,n+r-1)+(s.cssClass?" "+s.cssClass:"");t===activeRow&&n===activeCell&&(o+=" active");for(var u in cellCssClasses)cellCssClasses[u][t]&&cellCssClasses[u][t][s.id]&&(o+=" "+cellCssClasses[u][t][s.id]);e.push("<div class='"+o+"'>");if(i){var a=getDataItemValueForColumn(i,s);e.push(getFormatter(t,s)(t,n,a,s,i))}e.push("</div>"),rowsCache[t].cellRenderQueue.push(n),rowsCache[t].cellColSpans[n]=r}function cleanupRows(e){for(var t in rowsCache)(t=parseInt(t,10))!==activeRow&&(t<e.top||t>e.bottom)&&removeRowFromCache(t)}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var e in rowsCache)removeRowFromCache(e)}function removeRowFromCache(e){var t=rowsCache[e];if(!t)return;$canvas[0].removeChild(t.rowNode),delete rowsCache[e],delete postProcessedRows[e],renderedRows--,counter_rows_removed++}function invalidateRows(e){var t,n;if(!e||!e.length)return;vScrollDir=0;for(t=0,n=e.length;t<n;t++)currentEditor&&activeRow===e[t]&&makeActiveCellNormal(),rowsCache[e[t]]&&removeRowFromCache(e[t])}function invalidateRow(e){invalidateRows([e])}function updateCell(e,t){var n=getCellNode(e,t);if(!n)return;var r=columns[t],i=getDataItem(e);currentEditor&&activeRow===e&&activeCell===t?currentEditor.loadValue(i):(n.innerHTML=i?getFormatter(e,r)(e,t,getDataItemValueForColumn(i,r),r,i):"",invalidatePostProcessingResults(e))}function updateRow(e){var t=rowsCache[e];if(!t)return;ensureCellNodesInRowsCache(e);var n=getDataItem(e);for(var r in t.cellNodesByColumnIdx){if(!t.cellNodesByColumnIdx.hasOwnProperty(r))continue;r|=0;var i=columns[r],s=t.cellNodesByColumnIdx[r];e===activeRow&&r===activeCell&&currentEditor?currentEditor.loadValue(n):n?s.innerHTML=getFormatter(e,i)(e,r,getDataItemValueForColumn(n,i),i,n):s.innerHTML=""}invalidatePostProcessingResults(e)}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){if(!initialized)return;options.autoHeight?viewportH=options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)):viewportH=getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),options.autoHeight||$viewport.height(viewportH),options.forceFitColumns&&autosizeColumns(),updateRowCount(),handleScroll(),render()}function updateRowCount(){var e=getDataLength();if(!initialized)return;numberOfRows=e+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var t=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&numberOfRows*options.rowHeight>viewportH;var r=options.enableAddRow?e:e-1;for(var i in rowsCache)i>=r&&removeRowFromCache(i);activeCellNode&&activeRow>r&&resetActiveCell();var s=h;th=Math.max(options.rowHeight*numberOfRows,viewportH-scrollbarDimensions.height),th<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==s&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var o=scrollTop+offset<=th-viewportH;th==0||scrollTop==0?page=offset=0:o?scrollTo(scrollTop+offset):scrollTo(th-viewportH),h!=s&&options.autoHeight&&resizeCanvas(),options.forceFitColumns&&t!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}function getVisibleRange(e,t){return e==null&&(e=scrollTop),t==null&&(t=scrollLeft),{top:getRowFromPosition(e),bottom:getRowFromPosition(e+viewportH)+1,leftPx:t,rightPx:t+viewportW}}function getRenderedRange(e,t){var n=getVisibleRange(e,t),r=Math.round(viewportH/options.rowHeight),i=3;return vScrollDir==-1?(n.top-=r,n.bottom+=i):vScrollDir==1?(n.top-=i,n.bottom+=r):(n.top-=i,n.bottom+=i),n.top=Math.max(0,n.top),n.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,n.bottom),n.leftPx-=viewportW,n.rightPx+=viewportW,n.leftPx=Math.max(0,n.leftPx),n.rightPx=Math.min(canvasWidth,n.rightPx),n}function ensureCellNodesInRowsCache(e){var t=rowsCache[e];if(t&&t.cellRenderQueue.length){var n=t.rowNode.lastChild;while(t.cellRenderQueue.length){var r=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[r]=n,n=n.previousSibling}}}function cleanUpCells(e,t){var n=0,r=rowsCache[t],i=[];for(var s in r.cellNodesByColumnIdx){if(!r.cellNodesByColumnIdx.hasOwnProperty(s))continue;s|=0;var o=r.cellColSpans[s];(columnPosLeft[s]>e.rightPx||columnPosRight[Math.min(columns.length-1,s+o-1)]<e.leftPx)&&(t!=activeRow||s!=activeCell)&&i.push(s)}var u;while((u=i.pop())!=null)r.rowNode.removeChild(r.cellNodesByColumnIdx[u]),delete r.cellColSpans[u],delete r.cellNodesByColumnIdx[u],postProcessedRows[t]&&delete postProcessedRows[t][u],n++}function cleanUpAndRenderCells(e){var t,n=[],r=[],i,s=0,o;for(var u=e.top,a=e.bottom;u<=a;u++){t=rowsCache[u];if(!t)continue;ensureCellNodesInRowsCache(u),cleanUpCells(e,u),i=0;var f=data.getItemMetadata&&data.getItemMetadata(u);f=f&&f.columns;var l=getDataItem(u);for(var c=0,h=columns.length;c<h;c++){if(columnPosLeft[c]>e.rightPx)break;if((o=t.cellColSpans[c])!=null){c+=o>1?o-1:0;continue}o=1;if(f){var p=f[columns[c].id]||f[c];o=p&&p.colspan||1,o==="*"&&(o=h-c)}columnPosRight[Math.min(h-1,c+o-1)]>e.leftPx&&(appendCellHtml(n,u,c,o,l),i++),c+=o>1?o-1:0}i&&(s+=i,r.push(u))}if(!n.length)return;var d=document.createElement("div");d.innerHTML=n.join("");var v,m;while((v=r.pop())!=null){t=rowsCache[v];var g;while((g=t.cellRenderQueue.pop())!=null)m=d.lastChild,t.rowNode.appendChild(m),t.cellNodesByColumnIdx[g]=m}}function renderRows(e){var t=$canvas[0],n=[],r=[],i=!1,s=getDataLength();for(var o=e.top,u=e.bottom;o<=u;o++){if(rowsCache[o])continue;renderedRows++,r.push(o),rowsCache[o]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(n,o,e,s),activeCellNode&&activeRow===o&&(i=!0),counter_rows_rendered++}if(!r.length)return;var a=document.createElement("div");a.innerHTML=n.join("");for(var o=0,u=r.length;o<u;o++)rowsCache[r[o]].rowNode=t.appendChild(a.firstChild);i&&(activeCellNode=getCellNode(activeRow,activeCell))}function startPostProcessing(){if(!options.enableAsyncPostRender)return;clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay)}function invalidatePostProcessingResults(e){delete postProcessedRows[e],postProcessFromRow=Math.min(postProcessFromRow,e),postProcessToRow=Math.max(postProcessToRow,e),startPostProcessing()}function updateRowPositions(){for(var e in rowsCache)rowsCache[e].rowNode.style.top=getRowTop(e)+"px"}function render(){if(!initialized)return;var e=getVisibleRange(),t=getRenderedRange();cleanupRows(t),lastRenderedScrollLeft!=scrollLeft&&cleanUpAndRenderCells(t),renderRows(t),postProcessFromRow=e.top,postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,e.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,h_render=null}function handleHeaderRowScroll(){var e=$headerRowScroller[0].scrollLeft;e!=$viewport[0].scrollLeft&&($viewport[0].scrollLeft=e)}function handleScroll(){scrollTop=$viewport[0].scrollTop,scrollLeft=$viewport[0].scrollLeft;var e=Math.abs(scrollTop-prevScrollTop),t=Math.abs(scrollLeft-prevScrollLeft);t&&(prevScrollLeft=scrollLeft,$headerScroller[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScroller[0].scrollLeft=scrollLeft);if(e){vScrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop;if(e<viewportH)scrollTo(scrollTop+offset);else{var r=offset;h==viewportH?page=0:page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),r!=offset&&invalidateAllRows()}}if(t||e){h_render&&clearTimeout(h_render);if(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20)options.forceSyncScrolling||Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW?render():h_render=setTimeout(render,50),trigger(self.onViewportChanged,{})}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var e=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,t=rowsCache[e];if(!t||e>=getDataLength())continue;postProcessedRows[e]||(postProcessedRows[e]={}),ensureCellNodesInRowsCache(e);for(var n in t.cellNodesByColumnIdx){if(!t.cellNodesByColumnIdx.hasOwnProperty(n))continue;n|=0;var r=columns[n];if(r.asyncPostRender&&!postProcessedRows[e][n]){var i=t.cellNodesByColumnIdx[n];i&&r.asyncPostRender(i,e,getDataItem(e),r),postProcessedRows[e][n]=!0}}h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}function updateCellCssStylesOnRenderedRows(e,t){var n,r,i,s;for(var o in rowsCache){s=t&&t[o],i=e&&e[o];if(s)for(r in s)if(!i||s[r]!=i[r])n=getCellNode(o,getColumnIndex(r)),n&&$(n).removeClass(s[r]);if(i)for(r in i)if(!s||s[r]!=i[r])n=getCellNode(o,getColumnIndex(r)),n&&$(n).addClass(i[r])}}function addCellCssStyles(e,t){if(cellCssClasses[e])throw"addCellCssStyles: cell CSS hash with key '"+e+"' already exists.";cellCssClasses[e]=t,updateCellCssStylesOnRenderedRows(t,null),trigger(self.onCellCssStylesChanged,{key:e,hash:t})}function removeCellCssStyles(e){if(!cellCssClasses[e])return;updateCellCssStylesOnRenderedRows(null,cellCssClasses[e]),delete cellCssClasses[e],trigger(self.onCellCssStylesChanged,{key:e,hash:null})}function setCellCssStyles(e,t){var n=cellCssClasses[e];cellCssClasses[e]=t,updateCellCssStylesOnRenderedRows(t,n),trigger(self.onCellCssStylesChanged,{key:e,hash:t})}function getCellCssStyles(e){return cellCssClasses[e]}function flashCell(e,t,n){n=n||100;if(rowsCache[e]){var r=$(getCellNode(e,t));function i(e){if(!e)return;setTimeout(function(){r.queue(function(){r.toggleClass(options.cellFlashingCssClass).dequeue(),i(e-1)})},n)}i(4)}}function handleDragInit(e,t){var n=getCellFromEvent(e);if(!n||!cellExists(n.row,n.cell))return!1;var r=trigger(self.onDragInit,t,e);return e.isImmediatePropagationStopped()?r:!1}function handleDragStart(e,t){var n=getCellFromEvent(e);if(!n||!cellExists(n.row,n.cell))return!1;var r=trigger(self.onDragStart,t,e);return e.isImmediatePropagationStopped()?r:!1}function handleDrag(e,t){return trigger(self.onDrag,t,e)}function handleDragEnd(e,t){trigger(self.onDragEnd,t,e)}function handleKeyDown(e){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},e);var t=e.isImmediatePropagationStopped();if(!t)if(!e.shiftKey&&!e.altKey&&!e.ctrlKey)if(e.which==27){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else e.which==37?t=navigateLeft():e.which==39?t=navigateRight():e.which==38?t=navigateUp():e.which==40?t=navigateDown():e.which==9?t=navigateNext():e.which==13&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable()),t=!0);else e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&(t=navigatePrev());if(t){e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(n){}}}function handleClick(e){currentEditor||e.target!=document.activeElement&&setFocus();var t=getCellFromEvent(e);if(!t||currentEditor!==null&&activeRow==t.row&&activeCell==t.cell)return;trigger(self.onClick,{row:t.row,cell:t.cell},e);if(e.isImmediatePropagationStopped())return;(activeCell!=t.cell||activeRow!=t.row)&&canCellBeActive(t.row,t.cell)&&(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit())&&(scrollRowIntoView(t.row,!1),setActiveCellInternal(getCellNode(t.row,t.cell),t.row===getDataLength()||options.autoEdit))}function handleContextMenu(e){var t=$(e.target).closest(".slick-cell",$canvas);if(t.length===0)return;if(activeCellNode===t[0]&&currentEditor!==null)return;trigger(self.onContextMenu,{},e)}function handleDblClick(e){var t=getCellFromEvent(e);if(!t||currentEditor!==null&&activeRow==t.row&&activeCell==t.cell)return;trigger(self.onDblClick,{row:t.row,cell:t.cell},e);if(e.isImmediatePropagationStopped())return;options.editable&&gotoCell(t.row,t.cell,!0)}function handleHeaderMouseEnter(e){trigger(self.onHeaderMouseEnter,{column:$(this).data("column")},e)}function handleHeaderMouseLeave(e){trigger(self.onHeaderMouseLeave,{column:$(this).data("column")},e)}function handleHeaderContextMenu(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns"),n=t&&t.data("column");trigger(self.onHeaderContextMenu,{column:n},e)}function handleHeaderClick(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns"),n=t&&t.data("column");n&&trigger(self.onHeaderClick,{column:n},e)}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(e,t){return!(e<0||e>=getDataLength()||t<0||t>=columns.length)}function getCellFromPoint(e,t){var n=getRowFromPosition(t),r=0,i=0;for(var s=0;s<columns.length&&i<e;s++)i+=columns[s].width,r++;return r<0&&(r=0),{row:n,cell:r-1}}function getCellFromNode(e){var t=/l\d+/.exec(e.className);if(!t)throw"getCellFromNode: cannot get cell - "+e.className;return parseInt(t[0].substr(1,t[0].length-1),10)}function getRowFromNode(e){for(var t in rowsCache)if(rowsCache[t].rowNode===e)return t|0;return null}function getCellFromEvent(e){var t=$(e.target).closest(".slick-cell",$canvas);if(!t.length)return null;var n=getRowFromNode(t[0].parentNode),r=getCellFromNode(t[0]);return n==null||r==null?null:{row:n,cell:r}}function getCellNodeBox(e,t){if(!cellExists(e,t))return null;var n=getRowTop(e),r=n+options.rowHeight-1,i=0;for(var s=0;s<t;s++)i+=columns[s].width;var o=i+columns[t].width;return{top:n,left:i,bottom:r,right:o}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){tabbingDirection==-1?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(e,t,n){scrollRowIntoView(e,n);var r=getColspan(e,t),i=columnPosLeft[t],s=columnPosRight[t+(r>1?r-1:0)],o=scrollLeft+viewportW;i<scrollLeft?($viewport.scrollLeft(i),handleScroll(),render()):s>o&&($viewport.scrollLeft(Math.min(i,s-$viewport[0].clientWidth)),handleScroll(),render())}function setActiveCellInternal(e,t){activeCellNode!==null&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).removeClass("active"));var n=activeCellNode!==e;activeCellNode=e,activeCellNode!=null?(activeRow=getRowFromNode(activeCellNode.parentNode),activeCell=activePosX=getCellFromNode(activeCellNode),$(activeCellNode).addClass("active"),$(rowsCache[activeRow].rowNode).addClass("active"),options.editable&&t&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay):makeActiveCellEditable())):activeRow=activeCell=null,n&&trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}else if(window.getSelection){var t=window.getSelection();t&&t.removeAllRanges&&t.removeAllRanges()}}function isCellPotentiallyEditable(e,t){return e<getDataLength()&&!getDataItem(e)?!1:columns[t].cannotTriggerInsert&&e>=getDataLength()?!1:getEditor(e,t)?!0:!1}function makeActiveCellNormal(){if(!currentEditor)return;trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null;if(activeCellNode){var e=getDataItem(activeRow);$(activeCellNode).removeClass("editable invalid");if(e){var t=columns[activeCell],n=getFormatter(activeRow,t);activeCellNode.innerHTML=n(activeRow,activeCell,getDataItemValueForColumn(e,t),t,e),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}function makeActiveCellEditable(e){if(!activeCellNode)return;if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell))return;var t=columns[activeCell],n=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:n,column:t})===!1){setFocus();return}getEditorLock().activate(editController),$(activeCellNode).addClass("editable"),e||(activeCellNode.innerHTML=""),currentEditor=new(e||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:t,item:n||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),n&&currentEditor.loadValue(n),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(e){var t={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:$(e).outerWidth(),height:$(e).outerHeight(),visible:!0};t.bottom=t.top+t.height,t.right=t.left+t.width;var n=e.offsetParent;while((e=e.parentNode)!=document.body)t.visible&&e.scrollHeight!=e.offsetHeight&&$(e).css("overflowY")!="visible"&&(t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight),t.visible&&e.scrollWidth!=e.offsetWidth&&$(e).css("overflowX")!="visible"&&(t.visible=t.right>e.scrollLeft&&t.left<e.scrollLeft+e.clientWidth),t.left-=e.scrollLeft,t.top-=e.scrollTop,e===n&&(t.left+=e.offsetLeft,t.top+=e.offsetTop,n=e.offsetParent),t.bottom=t.top+t.height,t.right=t.left+t.width;return t}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(!activeCellNode)return;trigger(self.onActiveCellPositionChanged,{});if(currentEditor){var e=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(e.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(e)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(e,t){var n=e*options.rowHeight,r=(e+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(e+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(t?n:r),render()):e*options.rowHeight<scrollTop+offset&&(scrollTo(t?r:n),render())}function scrollRowToTop(e){scrollTo(e*options.rowHeight),render()}function getColspan(e,t){var n=data.getItemMetadata&&data.getItemMetadata(e);if(!n||!n.columns)return 1;var r=n.columns[columns[t].id]||n.columns[t],i=r&&r.colspan;return i==="*"?i=columns.length-t:i=i||1,i}function findFirstFocusableCell(e){var t=0;while(t<columns.length){if(canCellBeActive(e,t))return t;t+=getColspan(e,t)}return null}function findLastFocusableCell(e){var t=0,n=null;while(t<columns.length)canCellBeActive(e,t)&&(n=t),t+=getColspan(e,t);return n}function gotoRight(e,t,n){if(t>=columns.length)return null;do t+=getColspan(e,t);while(t<columns.length&&!canCellBeActive(e,t));return t<columns.length?{row:e,cell:t,posX:t}:null}function gotoLeft(e,t,n){if(t<=0)return null;var r=findFirstFocusableCell(e);if(r===null||r>=t)return null;var i={row:e,cell:r,posX:r},s;for(;;){s=gotoRight(i.row,i.cell,i.posX);if(!s)return null;if(s.cell>=t)return i;i=s}}function gotoDown(e,t,n){var r;for(;;){if(++e>=getDataLength()+(options.enableAddRow?1:0))return null;r=t=0;while(t<=n)r=t,t+=getColspan(e,t);if(canCellBeActive(e,r))return{row:e,cell:r,posX:n}}}function gotoUp(e,t,n){var r;for(;;){if(--e<0)return null;r=t=0;while(t<=n)r=t,t+=getColspan(e,t);if(canCellBeActive(e,r))return{row:e,cell:r,posX:n}}}function gotoNext(e,t,n){if(e==null&&t==null){e=t=n=0;if(canCellBeActive(e,t))return{row:e,cell:t,posX:t}}var r=gotoRight(e,t,n);if(r)return r;var i=null;while(++e<getDataLength()+(options.enableAddRow?1:0)){i=findFirstFocusableCell(e);if(i!==null)return{row:e,cell:i,posX:i}}return null}function gotoPrev(e,t,n){if(e==null&&t==null){e=getDataLength()+(options.enableAddRow?1:0)-1,t=n=columns.length-1;if(canCellBeActive(e,t))return{row:e,cell:t,posX:t}}var r,i;while(!r){r=gotoLeft(e,t,n);if(r)break;if(--e<0)return null;t=0,i=findLastFocusableCell(e),i!==null&&(r={row:e,cell:i,posX:i})}return r}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigate(e){if(!options.enableCellNavigation)return!1;if(!activeCellNode&&e!="prev"&&e!="next")return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();var t={up:-1,down:1,left:-1,right:1,prev:-1,next:1};tabbingDirection=t[e];var n={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext},r=n[e],i=r(activeRow,activeCell,activePosX);if(i){var s=i.row==getDataLength();return scrollCellIntoView(i.row,i.cell,!s),setActiveCellInternal(getCellNode(i.row,i.cell),s||options.autoEdit),activePosX=i.posX,!0}return setActiveCellInternal(getCellNode(activeRow,activeCell),activeRow==getDataLength()||options.autoEdit),!1}function getCellNode(e,t){return rowsCache[e]?(ensureCellNodesInRowsCache(e),rowsCache[e].cellNodesByColumnIdx[t]):null}function setActiveCell(e,t){if(!initialized)return;if(e>getDataLength()||e<0||t>=columns.length||t<0)return;if(!options.enableCellNavigation)return;scrollCellIntoView(e,t,!1),setActiveCellInternal(getCellNode(e,t),!1)}function canCellBeActive(e,t){if(!options.enableCellNavigation||e>=getDataLength()+(options.enableAddRow?1:0)||e<0||t>=columns.length||t<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(e);if(n&&typeof n.focusable=="boolean")return n.focusable;var r=n&&n.columns;return r&&r[columns[t].id]&&typeof r[columns[t].id].focusable=="boolean"?r[columns[t].id].focusable:r&&r[t]&&typeof r[t].focusable=="boolean"?r[t].focusable:columns[t].focusable}function canCellBeSelected(e,t){if(e>=getDataLength()||e<0||t>=columns.length||t<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(e);if(n&&typeof n.selectable=="boolean")return n.selectable;var r=n&&n.columns&&(n.columns[columns[t].id]||n.columns[t]);return r&&typeof r.selectable=="boolean"?r.selectable:columns[t].selectable}function gotoCell(e,t,n){if(!initialized)return;if(!canCellBeActive(e,t))return;if(!getEditorLock().commitCurrentEdit())return;scrollCellIntoView(e,t,!1);var r=getCellNode(e,t);setActiveCellInternal(r,n||e===getDataLength()||options.autoEdit),currentEditor||setFocus()}function commitCurrentEdit(){var e=getDataItem(activeRow),t=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var n=currentEditor.validate();if(n.valid){if(activeRow<getDataLength()){var r={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue),updateRow(this.row)},undo:function(){this.editor.applyValue(e,this.prevSerializedValue),updateRow(this.row)}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(e,t,r)):(r.execute(),makeActiveCellNormal()),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:e})}else{var i={};currentEditor.applyValue(i,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:i,column:t})}return!getEditorLock().isActive()}return $(activeCellNode).removeClass("invalid"),$(activeCellNode).width(),$(activeCellNode).addClass("invalid"),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:n,row:activeRow,cell:activeCell,column:t}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(e){var t=[],n=columns.length-1;for(var r=0;r<e.length;r++)t.push(new Slick.Range(e[r],0,e[r],n));return t}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(e){if(!selectionModel)throw"Selection model is not set";selectionModel.setSelectedRanges(rowsToRanges(e))}var defaults={explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,fullWidthRows:!1,multiColumnSort:!1,defaultFormatter:defaultFormatter,forceSyncScrolling:!1},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2,$headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacer,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,absoluteColumnMinWidth,numberOfRows=0,tabbingDirection=1,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0;this.debug=function(){var e="";e+="\ncounter_rows_rendered:  "+counter_rows_rendered,e+="\ncounter_rows_removed:  "+counter_rows_removed,e+="\nrenderedRows:  "+renderedRows,e+="\nnumVisibleRows:  "+numVisibleRows,e+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,e+="\nn(umber of pages):  "+n,e+="\n(current) page:  "+page,e+="\npage height (ph):  "+ph,e+="\nvScrollDir:  "+vScrollDir,alert(e)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.1",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getContainerNode:getContainerNode,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,getCanvasNode:getCanvasNode,focus:setFocus,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,getTopPanel:getTopPanel,setTopPanelVisibility:setTopPanelVisibility,setHeaderRowVisibility:setHeaderRowVisibility,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions,maxSupportedCssHeight}(jQuery),root.Slick=Slick}.apply(root,arguments)})}(this),define("bower_components/requirejs-text/text!app/templates/messageBodyModal.html",[],function(){return'<div class="messageBodyModal modal fade" tabindex="-1" role="dialog" aria-hidden="true">\r\n    <div class="modal-dialog" style="width: 1100px">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Message Body</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <pre class="json body" style="width: 100%; height: 700px"></pre>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary closeModal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("app/views/messageBodyModal",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/messageBodyModal.html"],function(e,t,n,r){"use strict";var i=e.View.extend({events:{"click .closeModal":"_closeModal"},initialize:function(){t.bindAll(this)},render:function(){this.$el.html(r);var e=JSON.parse(this.model.get("Body")),t=JSON.stringify(e,undefined,2);return this.$el.find(".body").html(this._jsonSyntaxHighlight(t)),this.$el.find(".messageBodyModal").modal("show"),this.$el.find(".messageBodyModal").on("hidden.bs.modal",this.closeView),this},_closeModal:function(){this.$el.find(".messageBodyModal").modal("hide")},closeView:function(){this.close()},_jsonSyntaxHighlight:function(e){return typeof e!="string"&&(e=JSON.stringify(e,undefined,2)),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?/:$/.test(e)?t="key":t="string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})},onClose:function(){this.$el.find(".messageBodyModal").off("hidden.bs.modal",this.closeView),this.remove()}});return i}),define("app/views/auditTable",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/auditTable.html","backgrid","slickgrid","app/views/messageBodyModal"],function(e,t,n,r,i,s,o){"use strict";var u=e.View.extend({events:{"click .messageBody":"_showMessageBody"},initialize:function(){t.bindAll(this),this.columns=[{id:"TypeName",field:"TypeName",name:"Message Type"},{id:"TimeSent",name:"Time Sent",field:"TimeSent",formatter:function(e,t,n,r,i){return moment.utc(n).local().format("DD/MM/YYYY HH:mm:ss.SSS")},width:100},{id:"TimeProcessed",field:"TimeProcessed",name:"Processing Time",formatter:function(e,t,n,r,i){return moment.utc(moment.duration(moment.utc(n).diff(moment.utc(i.TimeReceived))).get("milliseconds")).format("HH:mm:ss.SSS")},width:75},{id:"SourceAddress",field:"SourceAddress",name:"Source Address"},{id:"DestinationAddress",field:"DestinationAddress",name:"Destination Address"},{id:"Body",field:"Body",name:"Body",width:20,formatter:function(e,t,n,r,i){return"<div style='width: 100%; text-align: center'><i class='fa fa-envelope-o messageBody' id-attr='"+i.Id+"' style='cursor: pointer; cursor: hand;'></i></div>"}},{id:"Route",field:"CorrelationId",name:"",width:40,formatter:function(e,t,n,r,i){return"<a href='#route/"+n+"' >Session</a>"}},{id:"Id",field:"Id",name:"",width:40,formatter:function(e,t,n,r,i){return"<a href='#audit/"+n+"' >Details</a>"}}]},render:function(){return this.$el.html(r),this.data=this.collection.toJSON(),this._renderGrid(),n(window).on("resize",this._resizeGrid),this},_renderGrid:function(){var e={enableColumnReorder:!1,defaultColumnWidth:150,forceFitColumns:!0};this.grid=new s.Grid(".grid",this.data,this.columns,e)},_showMessageBody:function(e){var t=n(e.currentTarget).attr("id-attr"),r=this.collection.findWhere({Id:t}),i=new o({model:r});n("body").append(i.render().$el)},removeMessages:function(e){for(var t=this.data.length-1;t>=0;t--){var n=this.data[t];if(!(moment.utc(n.TimeSent)<e))break;this.data.splice(t,1)}this.grid.updateRowCount(),this.grid.render()},refresh:function(){while(this.data.length>0)this.data.pop();this.grid.updateRowCount();var e=this.collection.toJSON();for(var t=0;t<e.length;t++)this.data.push(e[t]);this.grid.updateRowCount(),this.grid.render()},_resizeGrid:function(){this.grid&&this.grid.resizeCanvas()},addAudits:function(){this.refresh()},onClose:function(){n(window).off("resize",this._resizeGrid)}});return u}),define("bower_components/requirejs-text/text!app/templates/auditHistogram.html",[],function(){return'<div class="auditChart col-sm-12" style="height: 350px;  padding-top: 15px; padding-left: 0; padding-right: 0; margin-left: -15px;"></div>'}),function(e){define("highchartsMain",["jquery"],function(){return function(){return function(){function e(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e}function t(){var e,t=arguments,n,r={},i=function(e,t){var n,r;typeof e!="object"&&(e={});for(r in t)t.hasOwnProperty(r)&&(n=t[r],e[r]=n&&typeof n=="object"&&Object.prototype.toString.call(n)!=="[object Array]"&&r!=="renderTo"&&typeof n.nodeType!="number"?i(e[r]||{},n):t[r]);return e};t[0]===!0&&(r=t[1],t=Array.prototype.slice.call(t,2)),n=t.length;for(e=0;e<n;e++)r=i(r,t[e]);return r}function n(e,t){return parseInt(e,t||10)}function r(e){return typeof e=="string"}function i(e){return e&&typeof e=="object"}function s(e){return Object.prototype.toString.call(e)==="[object Array]"}function o(e){return typeof e=="number"}function u(e){return I.log(e)/I.LN10}function a(e){return I.pow(10,e)}function f(e,t){for(var n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}}function l(e){return e!==B&&e!==null}function c(e,t,n){var s,o;if(r(t))l(n)?e.setAttribute(t,n):e&&e.getAttribute&&(o=e.getAttribute(t));else if(l(t)&&i(t))for(s in t)e.setAttribute(s,t[s]);return o}function h(e){return s(e)?e:[e]}function p(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++)if(n=e[t],n!==B&&n!==null)return n}function d(t,n){Y&&!it&&n&&n.opacity!==B&&(n.filter="alpha(opacity="+n.opacity*100+")"),e(t.style,n)}function v(t,n,r,i,s){return t=j.createElement(t),n&&e(t,n),s&&d(t,{padding:0,border:St,margin:0}),r&&d(t,r),i&&i.appendChild(t),t}function m(t,n){var r=function(){return B};return r.prototype=new t,e(r.prototype,n),r}function g(e,t,r,i){var s=qt.numberFormat,o=ht.lang,u=+e||0,a=t===-1?(u.toString().split(".")[1]||"").length:isNaN(t=X(t))?2:t,f=r===void 0?o.decimalPoint:r,o=i===void 0?o.thousandsSep:i,l=u<0?"-":"",c=String(n(u=X(u).toFixed(a))),h=c.length>3?c.length%3:0;return s!==g?s(e,t,r,i):l+(h?c.substr(0,h)+o:"")+c.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?f+X(u-c).toFixed(a).slice(2):"")}function y(e,t){return Array((t||2)+1-String(e).length).join(0)+e}function b(e,t,n){var r=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),n.apply(this,e)}}function w(e,t){for(var n="{",r=!1,i,s,o,u,a,f=[];(n=e.indexOf(n))!==-1;){i=e.slice(0,n);if(r){s=i.split(":"),o=s.shift().split("."),a=o.length,i=t;for(u=0;u<a;u++)i=i[o[u]];s.length&&(s=s.join(":"),o=/\.([0-9])/,u=ht.lang,a=void 0,/f$/.test(s)?(a=(a=s.match(o))?a[1]:-1,i!==null&&(i=g(i,a,u.decimalPoint,s.indexOf(",")>-1?u.thousandsSep:""))):i=pt(s,i))}f.push(i),e=e.slice(n+1),n=(r=!r)?"}":"{"}return f.push(e),f.join("")}function E(e){return I.pow(10,R(I.log(e)/I.LN10))}function S(e,t,n,r){var i,n=p(n,1);i=e/n,t||(t=[1,2,2.5,5,10],r===!1&&(n===1?t=[1,2,5,10]:n<=.1&&(t=[1/n])));for(r=0;r<t.length;r++)if(e=t[r],i<=(t[r]+(t[r+1]||t[r]))/2)break;return e*=n,e}function x(e,t){var n=e.length,r,i;for(i=0;i<n;i++)e[i].ss_i=i;e.sort(function(e,n){return r=t(e,n),r===0?e.ss_i-n.ss_i:r});for(i=0;i<n;i++)delete e[i].ss_i}function T(e){for(var t=e.length,n=e[0];t--;)e[t]<n&&(n=e[t]);return n}function N(e){for(var t=e.length,n=e[0];t--;)e[t]>n&&(n=e[t]);return n}function C(e,t){for(var n in e)e[n]&&e[n]!==t&&e[n].destroy&&e[n].destroy(),delete e[n]}function k(e){ct||(ct=v(Et)),e&&ct.appendChild(e),ct.innerHTML=""}function L(e){return parseFloat(e.toPrecision(14))}function A(e,t){dt=p(e,t.animation)}function O(){var e=ht.global.useUTC,t=e?"getUTC":"get",n=e?"setUTC":"set";Nt=ht.global.Date||window.Date,kt=(e&&ht.global.timezoneOffset||0)*6e4,Ct=e?Nt.UTC:function(e,t,n,r,i,s){return(new Nt(e,t,p(n,1),p(r,0),p(i,0),p(s,0))).getTime()},Lt=t+"Minutes",At=t+"Hours",Ot=t+"Day",Mt=t+"Date",_t=t+"Month",Dt=t+"FullYear",Pt=n+"Minutes",Ht=n+"Hours",Bt=n+"Date",jt=n+"Month",Ft=n+"FullYear"}function M(){}function _(e,t,n,r){this.axis=e,this.pos=t,this.type=n||"",this.isNew=!0,!n&&!r&&this.addLabel()}function D(){this.init.apply(this,arguments)}function P(){this.init.apply(this,arguments)}function H(e,t,n,r,i){var s=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t,this.x=r,this.total=null,this.points={},this.stack=i,this.alignOptions={align:t.align||(s?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(s?"middle":n?"bottom":"top"),y:p(t.y,s?4:n?14:-6),x:p(t.x,s?n?-6:6:0)},this.textAlign=t.textAlign||(s?n?"right":"left":"center")}var B,j=document,F=window,I=Math,q=I.round,R=I.floor,U=I.ceil,z=I.max,W=I.min,X=I.abs,V=I.cos,$=I.sin,J=I.PI,K=J*2/360,Q=navigator.userAgent,G=F.opera,Y=/msie/i.test(Q)&&!G,Z=j.documentMode===8,et=/AppleWebKit/.test(Q),tt=/Firefox/.test(Q),nt=/(Mobile|Android|Windows Phone)/.test(Q),rt="http://www.w3.org/2000/svg",it=!!j.createElementNS&&!!j.createElementNS(rt,"svg").createSVGRect,st=tt&&parseInt(Q.split("Firefox/")[1],10)<4,ot=!it&&!Y&&!!j.createElement("canvas").getContext,ut,at,ft={},lt=0,ct,ht,pt,dt,vt,mt,gt,yt=function(){return B},bt=[],wt=0,Et="div",St="none",xt=/^[0-9]+$/,Tt="stroke-width",Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It={},qt;F.Highcharts?gt(16,!0):qt=F.Highcharts={},pt=function(t,n,r){if(!l(n)||isNaN(n))return"Invalid date";var t=p(t,"%Y-%m-%d %H:%M:%S"),i=new Nt(n-kt),s,o=i[At](),u=i[Ot](),a=i[Mt](),f=i[_t](),c=i[Dt](),h=ht.lang,d=h.weekdays,i=e({a:d[u].substr(0,3),A:d[u],d:y(a),e:a,b:h.shortMonths[f],B:h.months[f],m:y(f+1),y:c.toString().substr(2,2),Y:c,H:y(o),I:y(o%12||12),l:o%12||12,M:y(i[Lt]()),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:y(i.getSeconds()),L:y(q(n%1e3),3)},qt.dateFormats);for(s in i)for(;t.indexOf("%"+s)!==-1;)t=t.replace("%"+s,typeof i[s]=="function"?i[s](n):i[s]);return r?t.substr(0,1).toUpperCase()+t.substr(1):t},gt=function(e,t){var n="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw n;F.console&&console.log(n)},mt={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:26784e5,year:31556952e3},vt={init:function(e,t,n){var t=t||"",r=e.shift,i=t.indexOf("C")>-1,s=i?7:3,o,t=t.split(" "),n=[].concat(n),u,a,f=function(e){for(o=e.length;o--;)e[o]==="M"&&e.splice(o+1,0,e[o+1],e[o+2],e[o+1],e[o+2])};i&&(f(t),f(n)),e.isArea&&(u=t.splice(t.length-6,6),a=n.splice(n.length-6,6));if(r<=n.length/s&&t.length===n.length)for(;r--;)n=[].concat(n).splice(0,s).concat(n);e.shift=0;if(t.length)for(e=n.length;t.length<e;)r=[].concat(t).splice(t.length-s,s),i&&(r[s-6]=r[s-2],r[s-5]=r[s-1]),t=t.concat(r);return u&&(t=t.concat(u),n=n.concat(a)),[t,n]},step:function(e,t,n,r){var i=[],s=e.length;if(n===1)i=r;else if(s===t.length&&n<1)for(;s--;)r=parseFloat(e[s]),i[s]=isNaN(r)?e[s]:n*parseFloat(t[s]-r)+r;else i=t;return i}},function(t){F.HighchartsAdapter=F.HighchartsAdapter||t&&{init:function(e){var n=t.fx;t.extend(t.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}}),t.each(["cur","_default","width","height","opacity"],function(e,r){var i=n.step,s;r==="cur"?i=n.prototype:r==="_default"&&t.Tween&&(i=t.Tween.propHooks[r],r="set"),(s=i[r])&&(i[r]=function(t){var n,t=e?t:this;if(t.prop!=="align")return n=t.elem,n.attr?n.attr(t.prop,r==="cur"?B:t.now):s.apply(this,arguments)})}),b(t.cssHooks.opacity,"get",function(e,t,n){return t.attr?t.opacity||0:e.call(this,t,n)}),this.addAnimSetter("d",function(t){var n=t.elem,r;t.started||(r=e.init(n,n.d,n.toD),t.start=r[0],t.end=r[1],t.started=!0),n.attr("d",e.step(t.start,t.end,t.pos,n.toD))}),this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){var n,r=e.length;for(n=0;n<r;n++)if(t.call(e[n],e[n],n,e)===!1)return n},t.fn.highcharts=function(){var e="Chart",t=arguments,n,i;return this[0]&&(r(t[0])&&(e=t[0],t=Array.prototype.slice.call(t,1)),n=t[0],n!==B&&(n.chart=n.chart||{},n.chart.renderTo=this[0],new qt[e](n,t[1]),i=this),n===B&&(i=bt[c(this[0],"data-highcharts-chart")])),i}},addAnimSetter:function(e,n){t.Tween?t.Tween.propHooks[e]={set:n}:t.fx.step[e]=n},getScript:t.getScript,inArray:t.inArray,adapterRun:function(e,n){return t(e)[n]()},grep:t.grep,map:function(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n[r]=t.call(e[r],e[r],r,e);return n},offset:function(e){return t(e).offset()},addEvent:function(e,n,r){t(e).bind(n,r)},removeEvent:function(e,n,r){var i=j.removeEventListener?"removeEventListener":"detachEvent";j[i]&&e&&!e[i]&&(e[i]=function(){}),t(e).unbind(n,r)},fireEvent:function(n,r,i,s){var o=t.Event(r),u="detached"+r,a;!Y&&i&&(delete i.layerX,delete i.layerY,delete i.returnValue),e(o,i),n[r]&&(n[u]=n[r],n[r]=null),t.each(["preventDefault","stopPropagation"],function(e,t){var n=o[t];o[t]=function(){try{n.call(o)}catch(e){t==="preventDefault"&&(a=!0)}}}),t(n).trigger(o),n[u]&&(n[r]=n[u],n[u]=null),s&&!o.isDefaultPrevented()&&!a&&s(o)},washMouseEvent:function(e){var t=e.originalEvent||e;return t.pageX===B&&(t.pageX=e.pageX,t.pageY=e.pageY),t},animate:function(e,n,r){var i=t(e);e.style||(e.style={}),n.d&&(e.toD=n.d,n.d=1),i.stop(),n.opacity!==B&&e.attr&&(n.opacity+="px"),e.hasAnim=1,i.animate(n,r)},stop:function(e){e.hasAnim&&t(e).stop()}}}(F.jQuery);var Rt=F.HighchartsAdapter,Ut=Rt||{};Rt&&Rt.init.call(Rt,vt);var zt=Ut.adapterRun,Wt=Ut.getScript,Xt=Ut.inArray,Vt=Ut.each,$t=Ut.grep,Jt=Ut.offset,Kt=Ut.map,Qt=Ut.addEvent,Gt=Ut.removeEvent,Yt=Ut.fireEvent,Zt=Ut.washMouseEvent,en=Ut.animate,tn=Ut.stop,Ut={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};ht={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.0.4/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.0.4/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:t(Ut,{align:"center",enabled:!1,formatter:function(){return this.y===null?"":g(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:it,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:nt?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var nn=ht.plotOptions,Rt=nn.line;O();var rn=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,sn=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,on=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,un=function(e){var r=[],i,s;return function(e){e&&e.stops?s=Kt(e.stops,function(e){return un(e[1])}):(i=rn.exec(e))?r=[n(i[1]),n(i[2]),n(i[3]),parseFloat(i[4],10)]:(i=sn.exec(e))?r=[n(i[1],16),n(i[2],16),n(i[3],16),1]:(i=on.exec(e))&&(r=[n(i[1]),n(i[2]),n(i[3]),1])}(e),{get:function(n){var i;return s?(i=t(e),i.stops=[].concat(i.stops),Vt(s,function(e,t){i.stops[t]=[i.stops[t][0],e.get(n)]})):i=r&&!isNaN(r[0])?n==="rgb"?"rgb("+r[0]+","+r[1]+","+r[2]+")":n==="a"?r[3]:"rgba("+r.join(",")+")":e,i},brighten:function(e){if(s)Vt(s,function(t){t.brighten(e)});else if(o(e)&&e!==0){var t;for(t=0;t<3;t++)r[t]+=n(e*255),r[t]<0&&(r[t]=0),r[t]>255&&(r[t]=255)}return this},rgba:r,setOpacity:function(e){return r[3]=e,this}}};M.prototype={opacity:1,textProps:"fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow,HcTextStroke".split(","),init:function(e,t){this.element=t==="span"?v(t):j.createElementNS(rt,t),this.renderer=e},animate:function(e,n,r){return n=p(n,dt,!0),tn(this),n?(n=t(n,{}),r&&(n.complete=r),en(this,e,n)):(this.attr(e),r&&r()),this},colorGradient:function(e,n,r){var i=this.renderer,o,u,a,f,c,h,p,d,v,m,g=[];e.linearGradient?u="linearGradient":e.radialGradient&&(u="radialGradient");if(u){a=e[u],f=i.gradients,h=e.stops,v=r.radialReference,s(a)&&(e[u]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),u==="radialGradient"&&v&&!l(a.gradientUnits)&&(a=t(a,{cx:v[0]-v[2]/2+a.cx*v[2],cy:v[1]-v[2]/2+a.cy*v[2],r:a.r*v[2],gradientUnits:"userSpaceOnUse"}));for(m in a)m!=="id"&&g.push(m,a[m]);for(m in h)g.push(h[m]);g=g.join(","),f[g]?e=f[g].attr("id"):(a.id=e="highcharts-"+lt++,f[g]=c=i.createElement(u).attr(a).add(i.defs),c.stops=[],Vt(h,function(e){e[1].indexOf("rgba")===0?(o=un(e[1]),p=o.get("rgb"),d=o.get("a")):(p=e[1],d=1),e=i.createElement("stop").attr({offset:e[0],"stop-color":p,"stop-opacity":d}).add(c),c.stops.push(e)})),r.setAttribute(n,"url("+i.url+"#"+e+")")}},attr:function(e,t){var n,r,i=this.element,s,o=this,u;typeof e=="string"&&t!==B&&(n=e,e={},e[n]=t);if(typeof e=="string")o=(this[e+"Getter"]||this._defaultGetter).call(this,e,i);else{for(n in e)r=e[n],u=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(n)&&(s||(this.symbolAttr(e),s=!0),u=!0),this.rotation&&(n==="x"||n==="y")&&(this.doTransform=!0),u||(this[n+"Setter"]||this._defaultSetter).call(this,r,n,i),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,r);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return o},updateShadows:function(e,t){for(var n=this.shadows,r=n.length;r--;)n[r].setAttribute(e,e==="height"?z(t-(n[r].cutHeight||0),0):e==="d"?this.d:t)},addClass:function(e){var t=this.element,n=c(t,"class")||"";return n.indexOf(e)===-1&&c(t,"class",n+" "+e),this},symbolAttr:function(e){var t=this;Vt("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(n){t[n]=p(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":St)},crisp:function(e){var t,n={},r,i=e.strokeWidth||this.strokeWidth||0;r=q(i)%2/2,e.x=R(e.x||this.x||0)+r,e.y=R(e.y||this.y||0)+r,e.width=R((e.width||this.width||0)-2*r),e.height=R((e.height||this.height||0)-2*r),e.strokeWidth=i;for(t in e)this[t]!==e[t]&&(this[t]=n[t]=e[t]);return n},css:function(t){var r=this.styles,i={},s=this.element,o,u,a="";o=!r,t&&t.color&&(t.fill=t.color);if(r)for(u in t)t[u]!==r[u]&&(i[u]=t[u],o=!0);if(o){o=this.textWidth=t&&t.width&&s.nodeName.toLowerCase()==="text"&&n(t.width),r&&(t=e(r,i)),this.styles=t,o&&(ot||!it&&this.renderer.forExport)&&delete t.width;if(Y&&!it)d(this.element,t);else{r=function(e,t){return"-"+t.toLowerCase()};for(u in t)a+=u.replace(/([A-Z])/g,r)+":"+t[u]+";";c(s,"style",a)}o&&this.added&&this.renderer.buildText(this)}return this},on:function(e,t){var n=this,r=n.element;return at&&e==="click"?(r.ontouchstart=function(e){n.touchEventFired=Nt.now(),e.preventDefault(),t.call(r,e)},r.onclick=function(e){(Q.indexOf("Android")===-1||Nt.now()-(n.touchEventFired||0)>1100)&&t.call(r,e)}):r["on"+e]=t,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var e=this.translateX||0,t=this.translateY||0,n=this.scaleX,r=this.scaleY,i=this.inverted,s=this.rotation,o=this.element;i&&(e+=this.attr("width"),t+=this.attr("height")),e=["translate("+e+","+t+")"],i?e.push("rotate(90) scale(-1,1)"):s&&e.push("rotate("+s+" "+(o.getAttribute("x")||0)+" "+(o.getAttribute("y")||0)+")"),(l(n)||l(r))&&e.push("scale("+p(n,1)+" "+p(r,1)+")"),e.length&&o.setAttribute("transform",e.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,n){var i,s,o,u,a={};s=this.renderer,o=s.alignedObjects;if(e){if(this.alignOptions=e,this.alignByTranslate=t,!n||r(n))this.alignTo=i=n||"renderer",f(o,this),o.push(this),n=null}else e=this.alignOptions,t=this.alignByTranslate,i=this.alignTo;n=p(n,s[i],s),i=e.align,s=e.verticalAlign,o=(n.x||0)+(e.x||0),u=(n.y||0)+(e.y||0);if(i==="right"||i==="center")o+=(n.width-(e.width||0))/{right:1,center:2}[i];a[t?"translateX":"x"]=q(o);if(s==="bottom"||s==="middle")u+=(n.height-(e.height||0))/({bottom:1,middle:2}[s]||1);return a[t?"translateY":"y"]=q(u),this[this.placed?"animate":"attr"](a),this.placed=!0,this.alignAttr=a,this},getBBox:function(){var t=this.bBox,n=this.renderer,r,i,s=this.rotation;r=this.element;var o=this.styles,u=s*K;i=this.textStr;var a;if(i===""||xt.test(i))a="num."+i.toString().length+(o?"|"+o.fontSize+"|"+o.fontFamily:"");a&&(t=n.cache[a]);if(!t){if(r.namespaceURI===rt||n.forExport){try{t=r.getBBox?e({},r.getBBox()):{width:r.offsetWidth,height:r.offsetHeight}}catch(f){}if(!t||t.width<0)t={width:0,height:0}}else t=this.htmlGetBBox();n.isSVG&&(r=t.width,i=t.height,Y&&o&&o.fontSize==="11px"&&i.toPrecision(3)==="16.9"&&(t.height=i=14),s&&(t.width=X(i*$(u))+X(r*V(u)),t.height=X(i*V(u))+X(r*$(u)))),this.bBox=t,a&&(n.cache[a]=t)}return t},show:function(e){return e&&this.element.namespaceURI===rt?this.element.removeAttribute("visibility"):this.attr({visibility:e?"inherit":"visible"}),this},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.attr({y:-9999})}})},add:function(e){var t=this.renderer,r=e||t,i=r.element||t.box,s=this.element,o=this.zIndex,u,a;e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,this.textStr!==void 0&&t.buildText(this),o&&(r.handleZ=!0,o=n(o));if(r.handleZ){e=i.childNodes;for(u=0;u<e.length;u++)if(t=e[u],r=c(t,"zIndex"),t!==s&&(n(r)>o||!l(o)&&l(r))){i.insertBefore(s,t),a=!0;break}}return a||i.appendChild(s),this.added=!0,this.onAdd&&this.onAdd(),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e=this,t=e.element||{},n=e.shadows,r=e.renderer.isSVG&&t.nodeName==="SPAN"&&e.parentGroup,i,s;t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=t.point=null,tn(e),e.clipPath&&(e.clipPath=e.clipPath.destroy());if(e.stops){for(s=0;s<e.stops.length;s++)e.stops[s]=e.stops[s].destroy();e.stops=null}e.safeRemoveChild(t);for(n&&Vt(n,function(t){e.safeRemoveChild(t)});r&&r.div&&r.div.childNodes.length===0;)t=r.parentGroup,e.safeRemoveChild(r.div),delete r.div,r=t;e.alignTo&&f(e.renderer.alignedObjects,e);for(i in e)delete e[i];return null},shadow:function(e,t,n){var r=[],i,s,o=this.element,u,a,f,l;if(e){a=p(e.width,3),f=(e.opacity||.15)/a,l=this.parentInverted?"(-1,-1)":"("+p(e.offsetX,1)+", "+p(e.offsetY,1)+")";for(i=1;i<=a;i++)s=o.cloneNode(0),u=a*2+1-2*i,c(s,{isShadow:"true",stroke:e.color||"black","stroke-opacity":f*i,"stroke-width":u,transform:"translate"+l,fill:St}),n&&(c(s,"height",z(c(s,"height")-u,0)),s.cutHeight=u),t?t.element.appendChild(s):o.parentNode.insertBefore(s,o),r.push(s);this.shadows=r}return this},xGetter:function(e){return this.element.nodeName==="circle"&&(e={x:"cx",y:"cy"}[e]||e),this._defaultGetter(e)},_defaultGetter:function(e){return e=p(this[e],this.element?this.element.getAttribute(e):null,0),/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},dSetter:function(e,t,n){e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),n.setAttribute(t,e),this[t]=e},dashstyleSetter:function(e){var t;if(e=e&&e.toLowerCase()){e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(t=e.length;t--;)e[t]=n(e[t])*this["stroke-width"];e=e.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(e){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[e])},opacitySetter:function(e,t,n){this[t]=e,n.setAttribute(t,e)},titleSetter:function(e){var t=this.element.getElementsByTagName("title")[0];t||(t=j.createElementNS(rt,"title"),this.element.appendChild(t)),t.textContent=p(e,"").replace(/<[^>]*>/g,"")},textSetter:function(e){e!==this.textStr&&(delete this.bBox,this.textStr=e,this.added&&this.renderer.buildText(this))},fillSetter:function(e,t,n){typeof e=="string"?n.setAttribute(t,e):e&&this.colorGradient(e,t,n)},zIndexSetter:function(e,t,n){n.setAttribute(t,e),this[t]=e},_defaultSetter:function(e,t,n){n.setAttribute(t,e)}},M.prototype.yGetter=M.prototype.xGetter,M.prototype.translateXSetter=M.prototype.translateYSetter=M.prototype.rotationSetter=M.prototype.verticalAlignSetter=M.prototype.scaleXSetter=M.prototype.scaleYSetter=function(e,t){this[t]=e,this.doTransform=!0},M.prototype["stroke-widthSetter"]=M.prototype.strokeSetter=function(e,t,n){this[t]=e,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],M.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):t==="stroke-width"&&e===0&&this.hasStroke&&(n.removeAttribute("stroke"),this.hasStroke=!1)};var an=function(){this.init.apply(this,arguments)};an.prototype={Element:M,init:function(e,t,n,r,i){var s=location,o,r=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(r));o=r.element,e.appendChild(o),e.innerHTML.indexOf("xmlns")===-1&&c(o,"xmlns",rt),this.isSVG=!0,this.box=o,this.boxWrapper=r,this.alignedObjects=[],this.url=(tt||et)&&j.getElementsByTagName("base").length?s.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(j.createTextNode("Created with Highcharts 4.0.4")),this.defs=this.createElement("defs").add(),this.forExport=i,this.gradients={},this.cache={},this.setSize(t,n,!1);var u;tt&&e.getBoundingClientRect&&(this.subPixelFix=t=function(){d(e,{left:0,top:0}),u=e.getBoundingClientRect(),d(e,{left:U(u.left)-u.left+"px",top:U(u.top)-u.top+"px"})},t(),Qt(F,"resize",t))},getStyle:function(t){return this.style=e({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),C(this.gradients||{}),this.gradients=null,e&&(this.defs=e.destroy()),this.subPixelFix&&Gt(F,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){for(var t=e.element,r=this,i=r.forExport,s=p(e.textStr,"").toString(),o=s.indexOf("<")!==-1,u=t.childNodes,a,f,l=c(t,"x"),h=e.styles,v=e.textWidth,m=h&&h.lineHeight,g=h&&h.HcTextStroke,y=u.length,b=function(e){return m?n(m):r.fontMetrics(/(px|em)$/.test(e&&e.style.fontSize)?e.style.fontSize:h&&h.fontSize||r.style.fontSize||12,e).h};y--;)t.removeChild(u[y]);!o&&!g&&s.indexOf(" ")===-1?t.appendChild(j.createTextNode(s)):(a=/<.*style="([^"]+)".*>/,f=/<.*href="(http[^"]+)".*>/,v&&!e.added&&this.box.appendChild(t),s=o?s.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[s],s[s.length-1]===""&&s.pop(),Vt(s,function(n,s){var o,u=0,n=n.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");o=n.split("|||"),Vt(o,function(n){if(n!==""||o.length===1){var p={},m=j.createElementNS(rt,"tspan"),g;a.test(n)&&(g=n.match(a)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),c(m,"style",g)),f.test(n)&&!i&&(c(m,"onclick",'location.href="'+n.match(f)[1]+'"'),d(m,{cursor:"pointer"})),n=(n.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(n!==" "){m.appendChild(j.createTextNode(n)),u?p.dx=0:s&&l!==null&&(p.x=l),c(m,p),t.appendChild(m),!u&&s&&(!it&&i&&d(m,{display:"block"}),c(m,"dy",b(m)));if(v)for(var n=n.replace(/([^\^])-/g,"$1- ").split(" "),p=o.length>1||n.length>1&&h.whiteSpace!=="nowrap",y,w,E=h.HcHeight,S=[],x=b(m),T=1;p&&(n.length||S.length);)delete e.bBox,y=e.getBBox(),w=y.width,!it&&r.forExport&&(w=r.measureSpanWidth(m.firstChild.data,e.styles)),y=w>v,!y||n.length===1?(n=S,S=[],n.length&&(T++,E&&T*x>E?(n=["..."],e.attr("title",e.textStr)):(m=j.createElementNS(rt,"tspan"),c(m,{dy:x,x:l}),g&&c(m,"style",g),t.appendChild(m))),w>v&&(v=w)):(m.removeChild(m.firstChild),S.unshift(n.pop())),n.length&&m.appendChild(j.createTextNode(n.join(" ").replace(/- /g,"-")));u++}}})}))},button:function(n,r,i,s,o,u,a,f,l){var c=this.label(n,r,i,l,null,null,null,null,"button"),h=0,p,d,v,m,g,y,n={x1:0,y1:0,x2:0,y2:1},o=t({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:n,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},o);return v=o.style,delete o.style,u=t(o,{stroke:"#68A",fill:{linearGradient:n,stops:[[0,"#FFF"],[1,"#ACF"]]}},u),m=u.style,delete u.style,a=t(o,{stroke:"#68A",fill:{linearGradient:n,stops:[[0,"#9BD"],[1,"#CDF"]]}},a),g=a.style,delete a.style,f=t(o,{style:{color:"#CCC"}},f),y=f.style,delete f.style,Qt(c.element,Y?"mouseover":"mouseenter",function(){h!==3&&c.attr(u).css(m)}),Qt(c.element,Y?"mouseout":"mouseleave",function(){h!==3&&(p=[o,u,a][h],d=[v,m,g][h],c.attr(p).css(d))}),c.setState=function(e){(c.state=h=e)?e===2?c.attr(a).css(g):e===3&&c.attr(f).css(y):c.attr(o).css(v)},c.on("click",function(){h!==3&&s.call(c)}).attr(o).css(e({cursor:"default"},v))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=q(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=q(e[2])+t%2/2),e},path:function(t){var n={fill:St};return s(t)?n.d=t:i(t)&&e(n,t),this.createElement("path").attr(n)},circle:function(e,t,n){return e=i(e)?e:{x:e,y:t,r:n},t=this.createElement("circle"),t.xSetter=function(e){this.element.setAttribute("cx",e)},t.ySetter=function(e){this.element.setAttribute("cy",e)},t.attr(e)},arc:function(e,t,n,r,s,o){return i(e)&&(t=e.y,n=e.r,r=e.innerR,s=e.start,o=e.end,e=e.x),e=this.symbol("arc",e||0,t||0,n||0,n||0,{innerR:r||0,start:s||0,end:o||0}),e.r=n,e},rect:function(e,t,n,r,s,o){var s=i(e)?e.r:s,u=this.createElement("rect"),e=i(e)?e:e===B?{}:{x:e,y:t,width:z(n,0),height:z(r,0)};return o!==B&&(e.strokeWidth=o,e=u.crisp(e)),s&&(e.r=s),u.rSetter=function(e){c(this.element,{rx:e,ry:e})},u.attr(e)},setSize:function(e,t,n){var r=this.alignedObjects,i=r.length;this.width=e,this.height=t;for(this.boxWrapper[p(n,!0)?"animate":"attr"]({width:e,height:t});i--;)r[i].align()},g:function(e){var t=this.createElement("g");return l(e)?t.attr({"class":"highcharts-"+e}):t},image:function(t,n,r,i,s){var o={preserveAspectRatio:St};return arguments.length>1&&e(o,{x:n,y:r,width:i,height:s}),o=this.createElement("image").attr(o),o.element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):o.element.setAttribute("hc-svg-href",t),o},symbol:function(t,n,r,i,s,o){var u,a=this.symbols[t],a=a&&a(q(n),q(r),i,s,o),f=/^url\((.*?)\)$/,l,c;return a?(u=this.path(a),e(u,{symbolName:t,x:n,y:r,width:i,height:s}),o&&e(u,o)):f.test(t)&&(c=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(q((i-t[0])/2),q((s-t[1])/2)))},l=t.match(f)[1],t=ft[l]||o&&o.width&&o.height&&[o.width,o.height],u=this.image(l).attr({x:n,y:r}),u.isImg=!0,t?c(u,t):(u.attr({width:0,height:0}),v("img",{onload:function(){c(u,ft[l]=[this.width,this.height])},src:l}))),u},symbols:{circle:function(e,t,n,r){var i=.166*n;return["M",e+n/2,t,"C",e+n+i,t,e+n+i,t+r,e+n/2,t+r,"C",e-i,t+r,e-i,t,e+n/2,t,"Z"]},square:function(e,t,n,r){return["M",e,t,"L",e+n,t,e+n,t+r,e,t+r,"Z"]},triangle:function(e,t,n,r){return["M",e+n/2,t,"L",e+n,t+r,e,t+r,"Z"]},"triangle-down":function(e,t,n,r){return["M",e,t,"L",e+n,t,e+n/2,t+r,"Z"]},diamond:function(e,t,n,r){return["M",e+n/2,t,"L",e+n,t+r/2,e+n/2,t+r,e,t+r/2,"Z"]},arc:function(e,t,n,r,i){var s=i.start,n=i.r||n||r,o=i.end-.001,r=i.innerR,u=i.open,a=V(s),f=$(s),l=V(o),o=$(o),i=i.end-s<J?0:1;return["M",e+n*a,t+n*f,"A",n,n,0,i,1,e+n*l,t+n*o,u?"M":"L",e+r*l,t+r*o,"A",r,r,0,i,0,e+r*a,t+r*f,u?"":"Z"]},callout:function(e,t,n,r,i){var s=W(i&&i.r||0,n,r),o=s+6,u=i&&i.anchorX,a=i&&i.anchorY,i=q(i.strokeWidth||0)%2/2;return e+=i,t+=i,i=["M",e+s,t,"L",e+n-s,t,"C",e+n,t,e+n,t,e+n,t+s,"L",e+n,t+r-s,"C",e+n,t+r,e+n,t+r,e+n-s,t+r,"L",e+s,t+r,"C",e,t+r,e,t+r,e,t+r-s,"L",e,t+s,"C",e,t,e,t,e+s,t],u&&u>n&&a>t+o&&a<t+r-o?i.splice(13,3,"L",e+n,a-6,e+n+6,a,e+n,a+6,e+n,t+r-s):u&&u<0&&a>t+o&&a<t+r-o?i.splice(33,3,"L",e,a+6,e-6,a,e,a-6,e,t+s):a&&a>r&&u>e+o&&u<e+n-o?i.splice(23,3,"L",u+6,t+r,u,t+r+6,u-6,t+r,e+s,t+r):a&&a<0&&u>e+o&&u<e+n-o&&i.splice(3,3,"L",u-6,t,u,t-6,u+6,t,n-s,t),i}},clipRect:function(e,t,n,r){var i="highcharts-"+lt++,s=this.createElement("clipPath").attr({id:i}).add(this.defs),e=this.rect(e,t,n,r,0).add(s);return e.id=i,e.clipPath=s,e},text:function(e,t,n,r){var i=ot||!it&&this.forExport,s={};if(r&&!this.forExport)return this.html(e,t,n);s.x=Math.round(t||0),n&&(s.y=Math.round(n));if(e||e===0)s.text=e;return e=this.createElement("text").attr(s),i&&e.css({position:"absolute"}),r||(e.xSetter=function(e,t,n){var r=n.getElementsByTagName("tspan"),i,s=n.getAttribute(t),o;for(o=0;o<r.length;o++)i=r[o],i.getAttribute(t)===s&&i.setAttribute(t,e);n.setAttribute(t,e)}),e},fontMetrics:function(e,t){e=e||this.style.fontSize,t&&F.getComputedStyle&&(t=t.element||t,e=F.getComputedStyle(t,"").fontSize);var e=/px/.test(e)?n(e):/em/.test(e)?parseFloat(e)*12:12,r=e<24?e+4:q(e*1.2),i=q(r*.8);return{h:r,b:i,f:e}},label:function(n,r,i,s,o,u,a,f,c){function h(){var t,n;t=g.element.style,b=(x===void 0||T===void 0||m.styles.textAlign)&&g.textStr&&g.getBBox(),m.width=(x||b.width||0)+2*E+S,m.height=(T||b.height||0)+2*E,A=E+v.fontMetrics(t&&t.fontSize,g).b,O&&(y||(t=q(-w*E),n=f?-A:0,m.box=y=s?v.symbol(s,t,n,m.width,m.height,L):v.rect(t,n,m.width,m.height,0,L[Tt]),y.attr("fill",St).add(m)),y.isImg||y.attr(e({width:q(m.width),height:q(m.height)},L)),L=null)}function p(){var e=m.styles,e=e&&e.textAlign,t=S+E*(1-w),n;n=f?0:A,l(x)&&b&&(e==="center"||e==="right")&&(t+={center:.5,right:1}[e]*(x-b.width));if(t!==g.x||n!==g.y)g.attr("x",t),n!==B&&g.attr("y",n);g.x=t,g.y=n}function d(e,t){y?y.attr(e,t):L[e]=t}var v=this,m=v.g(c),g=v.text("",0,0,a).attr({zIndex:1}),y,b,w=0,E=3,S=0,x,T,N,C,k=0,L={},A,O;m.onAdd=function(){g.add(m),m.attr({text:n||n===0?n:"",x:r,y:i}),y&&l(o)&&m.attr({anchorX:o,anchorY:u})},m.widthSetter=function(e){x=e},m.heightSetter=function(e){T=e},m.paddingSetter=function(e){l(e)&&e!==E&&(E=e,p())},m.paddingLeftSetter=function(e){l(e)&&e!==S&&(S=e,p())},m.alignSetter=function(e){w={left:0,center:.5,right:1}[e]},m.textSetter=function(e){e!==B&&g.textSetter(e),h(),p()},m["stroke-widthSetter"]=function(e,t){e&&(O=!0),k=e%2/2,d(t,e)},m.strokeSetter=m.fillSetter=m.rSetter=function(e,t){t==="fill"&&e&&(O=!0),d(t,e)},m.anchorXSetter=function(e,t){o=e,d(t,e+k-N)},m.anchorYSetter=function(e,t){u=e,d(t,e-C)},m.xSetter=function(e){m.x=e,w&&(e-=w*((x||b.width)+E)),N=q(e),m.attr("translateX",N)},m.ySetter=function(e){C=m.y=q(e),m.attr("translateY",C)};var _=m.css;return e(m,{css:function(e){if(e){var n={},e=t(e);Vt(m.textProps,function(t){e[t]!==B&&(n[t]=e[t],delete e[t])}),g.css(n)}return _.call(m,e)},getBBox:function(){return{width:b.width+2*E,height:b.height+2*E,x:b.x-E,y:b.y-E}},shadow:function(e){return y&&y.shadow(e),m},destroy:function(){Gt(m.element,"mouseenter"),Gt(m.element,"mouseleave"),g&&(g=g.destroy()),y&&(y=y.destroy()),M.prototype.destroy.call(m),m=v=h=p=d=null}})}},ut=an,e(M.prototype,{htmlCss:function(t){var n=this.element;if(n=t&&n.tagName==="SPAN"&&t.width)delete t.width,this.textWidth=n,this.updateTransform();return this.styles=e(this.styles,t),d(this.element,t),this},htmlGetBBox:function(){var e=this.element,t=this.bBox;return t||(e.nodeName==="text"&&(e.style.position="absolute"),t=this.bBox={x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}),t},htmlUpdateTransform:function(){if(this.added){var e=this.renderer,t=this.element,r=this.translateX||0,i=this.translateY||0,s=this.x||0,o=this.y||0,u=this.textAlign||"left",a={left:0,center:.5,right:1}[u],f=this.shadows;d(t,{marginLeft:r,marginTop:i}),f&&Vt(f,function(e){d(e,{marginLeft:r+1,marginTop:i+1})}),this.inverted&&Vt(t.childNodes,function(n){e.invertChild(n,t)});if(t.tagName==="SPAN"){var c=this.rotation,h,v=n(this.textWidth),m=[c,u,t.innerHTML,this.textWidth].join(",");m!==this.cTT&&(h=e.fontMetrics(t.style.fontSize).b,l(c)&&this.setSpanRotation(c,a,h),f=p(this.elemWidth,t.offsetWidth),f>v&&/[ \-]/.test(t.textContent||t.innerText)&&(d(t,{width:v+"px",display:"block",whiteSpace:"normal"}),f=v),this.getSpanCorrection(f,h,a,c,u)),d(t,{left:s+(this.xCorr||0)+"px",top:o+(this.yCorr||0)+"px"}),et&&(h=t.offsetHeight),this.cTT=m}}else this.alignOnAdd=!0},setSpanRotation:function(e,t,n){var r={},i=Y?"-ms-transform":et?"-webkit-transform":tt?"MozTransform":G?"-o-transform":"";r[i]=r.transform="rotate("+e+"deg)",r[i+(tt?"Origin":"-origin")]=r.transformOrigin=t*100+"% "+n+"px",d(this.element,r)},getSpanCorrection:function(e,t,n){this.xCorr=-e*n,this.yCorr=-t}}),e(an.prototype,{html:function(t,n,r){var i=this.createElement("span"),s=i.element,o=i.renderer;return i.textSetter=function(e){e!==s.innerHTML&&delete this.bBox,s.innerHTML=this.textStr=e},i.xSetter=i.ySetter=i.alignSetter=i.rotationSetter=function(e,t){t==="align"&&(t="textAlign"),i[t]=e,i.htmlUpdateTransform()},i.attr({text:t,x:q(n),y:q(r)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),i.css=i.htmlCss,o.isSVG&&(i.add=function(t){var n,r=o.box.parentNode,u=[];if(this.parentGroup=t){if(n=t.div,!n){for(;t;)u.push(t),t=t.parentGroup;Vt(u.reverse(),function(t){var i;n=t.div=t.div||v(Et,{className:c(t.element,"class")},{position:"absolute",left:(t.translateX||0)+"px",top:(t.translateY||0)+"px"},n||r),i=n.style,e(t,{translateXSetter:function(e,n){i.left=e+"px",t[n]=e,t.doTransform=!0},translateYSetter:function(e,n){i.top=e+"px",t[n]=e,t.doTransform=!0},visibilitySetter:function(e,t){i[t]=e}})})}}else n=r;return n.appendChild(s),i.added=!0,i.alignOnAdd&&i.htmlUpdateTransform(),i}),i}});var fn;if(!it&&!ot){fn={init:function(e,t){var n=["<",t,' filled="f" stroked="f"'],r=["position: ","absolute",";"],i=t===Et;(t==="shape"||i)&&r.push("left:0;top:0;width:1px;height:1px;"),r.push("visibility: ",i?"hidden":"visible"),n.push(' style="',r.join(""),'"/>'),t&&(n=i||t==="span"||t==="img"?n.join(""):e.prepVML(n),this.element=v(n)),this.renderer=e},add:function(e){var t=this.renderer,n=this.element,r=t.box,r=e?e.element||e:r;return e&&e.inverted&&t.invertChild(n,r),r.appendChild(n),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:M.prototype.htmlUpdateTransform,setSpanRotation:function(){var e=this.rotation,t=V(e*K),n=$(e*K);d(this.element,{filter:e?["progid:DXImageTransform.Microsoft.Matrix(M11=",t,", M12=",-n,", M21=",n,", M22=",t,", sizingMethod='auto expand')"].join(""):St})},getSpanCorrection:function(e,t,n,r,i){var s=r?V(r*K):1,o=r?$(r*K):0,u=p(this.elemHeight,this.element.offsetHeight),a;this.xCorr=s<0&&-e,this.yCorr=o<0&&-u,a=s*o<0,this.xCorr+=o*t*(a?1-n:n),this.yCorr-=s*t*(r?a?n:1-n:1),i&&i!=="left"&&(this.xCorr-=e*n*(s<0?-1:1),r&&(this.yCorr-=u*n*(o<0?-1:1)),d(this.element,{textAlign:i}))},pathToVML:function(e){for(var t=e.length,n=[];t--;)if(o(e[t]))n[t]=q(e[t]*10)-5;else if(e[t]==="Z")n[t]="x";else if(n[t]=e[t],e.isArc&&(e[t]==="wa"||e[t]==="at"))n[t+5]===n[t+7]&&(n[t+7]+=e[t+7]>e[t+5]?1:-1),n[t+6]===n[t+8]&&(n[t+8]+=e[t+8]>e[t+6]?1:-1);return n.join(" ")||"x"},clip:function(e){var t=this,n;return e?(n=e.members,f(n,t),n.push(t),t.destroyClip=function(){f(n,t)},e=e.getCSS(t)):(t.destroyClip&&t.destroyClip(),e={clip:Z?"inherit":"rect(auto)"}),t.css(e)},css:M.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&k(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),M.prototype.destroy.apply(this)},on:function(e,t){return this.element["on"+e]=function(){var e=F.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var r,e=e.split(/[ ,]/);r=e.length;if(r===9||r===11)e[r-4]=e[r-2]=n(e[r-2])-10*t;return e.join(" ")},shadow:function(e,t,r){var i=[],s,o=this.element,u=this.renderer,a,f=o.style,l,c=o.path,h,d,m,g;c&&typeof c.value!="string"&&(c="x"),d=c;if(e){m=p(e.width,3),g=(e.opacity||.15)/m;for(s=1;s<=3;s++)h=m*2+1-2*s,r&&(d=this.cutOffPath(c.value,h+.5)),l=['<shape isShadow="true" strokeweight="',h,'" filled="false" path="',d,'" coordsize="10 10" style="',o.style.cssText,'" />'],a=v(u.prepVML(l),null,{left:n(f.left)+p(e.offsetX,1),top:n(f.top)+p(e.offsetY,1)}),r&&(a.cutOff=h+1),l=['<stroke color="',e.color||"black",'" opacity="',g*s,'"/>'],v(u.prepVML(l),null,null,a),t?t.element.appendChild(a):o.parentNode.insertBefore(a,o),i.push(a);this.shadows=i}return this},updateShadows:yt,setAttr:function(e,t){Z?this.element[e]=t:this.element.setAttribute(e,t)},classSetter:function(e){this.element.className=e},dashstyleSetter:function(e,t,n){(n.getElementsByTagName("stroke")[0]||v(this.renderer.prepVML(["<stroke/>"]),null,null,n))[t]=e||"solid",this[t]=e},dSetter:function(e,t,n){var r=this.shadows,e=e||[];this.d=e.join&&e.join(" "),n.path=e=this.pathToVML(e);if(r)for(n=r.length;n--;)r[n].path=r[n].cutOff?this.cutOffPath(e,r[n].cutOff):e;this.setAttr(t,e)},fillSetter:function(e,t,n){var r=n.nodeName;r==="SPAN"?n.style.color=e:r!=="IMG"&&(n.filled=e!==St,this.setAttr("fillcolor",this.renderer.color(e,n,t,this)))},opacitySetter:yt,rotationSetter:function(e,t,n){n=n.style,this[t]=n[t]=e,n.left=-q($(e*K)+1)+"px",n.top=q(V(e*K))+"px"},strokeSetter:function(e,t,n){this.setAttr("strokecolor",this.renderer.color(e,n,t))},"stroke-widthSetter":function(e,t,n){n.stroked=!!e,this[t]=e,o(e)&&(e+="px"),this.setAttr("strokeweight",e)},titleSetter:function(e,t){this.setAttr(t,e)},visibilitySetter:function(e,t,n){e==="inherit"&&(e="visible"),this.shadows&&Vt(this.shadows,function(n){n.style[t]=e}),n.nodeName==="DIV"&&(e=e==="hidden"?"-999em":0,Z||(n.style[t]=e?"visible":"hidden"),t="top"),n.style[t]=e},xSetter:function(e,t,n){this[t]=e,t==="x"?t="left":t==="y"&&(t="top"),this.updateClipping?(this[t]=e,this.updateClipping()):n.style[t]=e},zIndexSetter:function(e,t,n){n.style[t]=e}},qt.VMLElement=fn=m(M,fn),fn.prototype.ySetter=fn.prototype.widthSetter=fn.prototype.heightSetter=fn.prototype.xSetter;var ln={Element:fn,isIE8:Q.indexOf("MSIE 8.0")>-1,init:function(t,n,r,i){var s;this.alignedObjects=[],i=this.createElement(Et).css(e(this.getStyle(i),{position:"relative"})),s=i.element,t.appendChild(i.element),this.isVML=!0,this.box=s,this.boxWrapper=i,this.cache={},this.setSize(n,r,!1);if(!j.namespaces.hcv){j.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{j.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(o){j.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,n,r,s){var o=this.createElement(),u=i(t);return e(o,{members:[],left:(u?t.x:t)+1,top:(u?t.y:n)+1,width:(u?t.width:r)-1,height:(u?t.height:s)-1,getCSS:function(t){var n=t.element,r=n.nodeName,t=t.inverted,i=this.top-(r==="shape"?n.offsetTop:0),s=this.left,n=s+this.width,o=i+this.height,i={clip:"rect("+q(t?s:i)+"px,"+q(t?o:n)+"px,"+q(t?n:o)+"px,"+q(t?i:s)+"px)"};return!t&&Z&&r==="DIV"&&e(i,{width:n+"px",height:o+"px"}),i},updateClipping:function(){Vt(o.members,function(e){e.element&&e.css(o.getCSS(e))})}})},color:function(e,t,n,r){var i=this,s,o=/^rgba/,u,a,f=St;e&&e.linearGradient?a="gradient":e&&e.radialGradient&&(a="pattern");if(a){var l,c,h=e.linearGradient||e.radialGradient,p,d,m,g,y,b="",e=e.stops,w,E=[],S=function(){u=['<fill colors="'+E.join(",")+'" opacity="',m,'" o:opacity2="',d,'" type="',a,'" ',b,'focus="100%" method="any" />'],v(i.prepVML(u),null,null,t)};p=e[0],w=e[e.length-1],p[0]>0&&e.unshift([0,p[1]]),w[0]<1&&e.push([1,w[1]]),Vt(e,function(e,t){o.test(e[1])?(s=un(e[1]),l=s.get("rgb"),c=s.get("a")):(l=e[1],c=1),E.push(e[0]*100+"% "+l),t?(m=c,g=l):(d=c,y=l)});if(n==="fill")if(a==="gradient")n=h.x1||h[0]||0,e=h.y1||h[1]||0,p=h.x2||h[2]||0,h=h.y2||h[3]||0,b='angle="'+(90-I.atan((h-e)/(p-n))*180/J)+'"',S();else{var f=h.r,x=f*2,T=f*2,N=h.cx,C=h.cy,k=t.radialReference,L,f=function(){k&&(L=r.getBBox(),N+=(k[0]-L.x)/L.width-.5,C+=(k[1]-L.y)/L.height-.5,x*=k[2]/L.width,T*=k[2]/L.height),b='src="'+ht.global.VMLRadialGradientURL+'" size="'+x+","+T+'" origin="0.5,0.5" position="'+N+","+C+'" color2="'+y+'" ',S()};r.added?f():r.onAdd=f,f=g}else f=l}else o.test(e)&&t.tagName!=="IMG"?(s=un(e),u=["<",n,' opacity="',s.get("a"),'"/>'],v(this.prepVML(u),null,null,t),f=s.get("rgb")):(f=t.getElementsByTagName(n),f.length&&(f[0].opacity=1,f[0].type="solid"),f=e);return f},prepVML:function(e){var t=this.isIE8,e=e.join("");return t?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e=e.indexOf('style="')===-1?e.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):e.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):e=e.replace("<","<hcv:"),e},text:an.prototype.html,path:function(t){var n={coordsize:"10 10"};return s(t)?n.d=t:i(t)&&e(n,t),this.createElement("shape").attr(n)},circle:function(e,t,n){var r=this.symbol("circle");return i(e)&&(n=e.r,t=e.y,e=e.x),r.isCircle=!0,r.r=n,r.attr({x:e,y:t})},g:function(e){var t;return e&&(t={className:"highcharts-"+e,"class":"highcharts-"+e}),this.createElement(Et).attr(t)},image:function(e,t,n,r,i){var s=this.createElement("img").attr({src:e});return arguments.length>1&&s.attr({x:t,y:n,width:r,height:i}),s},createElement:function(e){return e==="rect"?this.symbol(e):an.prototype.createElement.call(this,e)},invertChild:function(e,t){var r=this,i=t.style,s=e.tagName==="IMG"&&e.style;d(e,{flip:"x",left:n(i.width)-(s?n(s.top):1),top:n(i.height)-(s?n(s.left):1),rotation:-90}),Vt(e.childNodes,function(t){r.invertChild(t,e)})},symbols:{arc:function(e,t,n,r,i){var s=i.start,o=i.end,u=i.r||n||r,n=i.innerR,r=V(s),a=$(s),f=V(o),l=$(o);return o-s===0?["x"]:(s=["wa",e-u,t-u,e+u,t+u,e+u*r,t+u*a,e+u*f,t+u*l],i.open&&!n&&s.push("e","M",e,t),s.push("at",e-n,t-n,e+n,t+n,e+n*f,t+n*l,e+n*r,t+n*a,"x","e"),s.isArc=!0,s)},circle:function(e,t,n,r,i){return i&&(n=r=2*i.r),i&&i.isCircle&&(e-=n/2,t-=r/2),["wa",e,t,e+n,t+r,e+n,t+r/2,e+n,t+r/2,"e"]},rect:function(e,t,n,r,i){return an.prototype.symbols[!l(i)||!i.r?"square":"callout"].call(0,e,t,n,r,i)}}};qt.VMLRenderer=fn=function(){this.init.apply(this,arguments)},fn.prototype=t(an.prototype,ln),ut=fn}an.prototype.measureSpanWidth=function(e,t){var n=j.createElement("span"),r;return r=j.createTextNode(e),n.appendChild(r),d(n,t),this.box.appendChild(n),r=n.offsetWidth,k(n),r};var cn;ot&&(qt.CanVGRenderer=fn=function(){rt="http://www.w3.org/1999/xhtml"},fn.prototype.symbols={},cn=function(){function e(){var e=t.length,n;for(n=0;n<e;n++)t[n]();t=[]}var t=[];return{push:function(n,r){t.length===0&&Wt(r,e),t.push(n)}}}(),ut=fn),_.prototype={addLabel:function(){var t=this.axis,n=t.options,r=t.chart,i=t.horiz,s=t.categories,u=t.names,f=this.pos,c=n.labels,h=c.rotation,d=t.tickPositions,i=i&&s&&!c.step&&!c.staggerLines&&!c.rotation&&r.plotWidth/d.length||!i&&(r.margin[3]||r.chartWidth*.33),v=f===d[0],m=f===d[d.length-1],g,u=s?p(s[f],u[f],f):f,s=this.label,y=d.info;t.isDatetimeAxis&&y&&(g=n.dateTimeLabelFormats[y.higherRanks[f]||y.unitName]),this.isFirst=v,this.isLast=m,n=t.labelFormatter.call({axis:t,chart:r,isFirst:v,isLast:m,dateTimeLabelFormat:g,value:t.isLog?L(a(u)):u}),f=i&&{width:z(1,q(i-2*(c.padding||10)))+"px"},l(s)?s&&s.attr({text:n}).css(f):(g={align:t.labelAlign},o(h)&&(g.rotation=h),i&&c.ellipsis&&(f.HcHeight=t.len/d.length),this.label=s=l(n)&&c.enabled?r.renderer.text(n,0,0,c.useHTML).attr(g).css(e(f,c.style)).add(t.labelGroup):null,t.tickBaseline=r.renderer.fontMetrics(c.style.fontSize,s).b,h&&t.side===2&&(t.tickBaseline*=V(h*K))),this.yOffset=s?p(c.y,t.tickBaseline+(t.side===2?8:-(s.getBBox().height/2))):0},getLabelSize:function(){var e=this.label,t=this.axis;return e?e.getBBox()[t.horiz?"height":"width"]:0},getLabelSides:function(){var e=this.label.getBBox(),t=this.axis,n=t.horiz,r=t.options.labels,e=n?e.width:e.height,t=n?r.x-e*{left:0,center:.5,right:1}[t.labelAlign]:0;return[t,n?e+t:e]},handleOverflow:function(e,t){var n=!0,r=this.axis,i=this.isFirst,s=this.isLast,o=r.horiz?t.x:t.y,u=r.reversed,a=r.tickPositions,f=this.getLabelSides(),l=f[0],f=f[1],c,h,p,d=this.label.line;c=d||0,h=r.labelEdge,p=r.justifyLabels&&(i||s),h[c]===B||o+l>h[c]?h[c]=o+f:p||(n=!1);if(p){c=(h=r.justifyToPlot)?r.pos:0,h=h?c+r.len:r.chart.chartWidth;do e+=i?1:-1,p=r.ticks[a[e]];while(a[e]&&(!p||!p.label||p.label.line!==d));r=p&&p.label.xy&&p.label.xy.x+p.getLabelSides()[i?0:1],i&&!u||s&&u?o+l<c&&(o=c-l,p&&o+f>r&&(n=!1)):o+f>h&&(o=h-f,p&&o+l<r&&(n=!1)),t.x=o}return n},getPosition:function(e,t,n,r){var i=this.axis,s=i.chart,o=r&&s.oldChartHeight||s.chartHeight;return{x:e?i.translate(t+n,null,null,r)+i.transB:i.left+i.offset+(i.opposite?(r&&s.oldChartWidth||s.chartWidth)-i.right-i.left:0),y:e?o-i.bottom+i.offset-(i.opposite?i.height:0):o-i.translate(t+n,null,null,r)-i.transB}},getLabelPosition:function(e,t,n,r,i,s,o,u){var a=this.axis,f=a.transA,l=a.reversed,c=a.staggerLines,e=e+i.x-(s&&r?s*f*(l?-1:1):0),t=t+this.yOffset-(s&&!r?s*f*(l?1:-1):0);return c&&(n.line=o/(u||1)%c,t+=n.line*(a.labelOffset/c)),{x:e,y:t}},getMarkPath:function(e,t,n,r,i,s){return s.crispLine(["M",e,t,"L",e+(i?0:-n),t+(i?n:0)],r)},render:function(e,t,n){var r=this.axis,i=r.options,s=r.chart.renderer,o=r.horiz,u=this.type,a=this.label,f=this.pos,l=i.labels,c=this.gridLine,h=u?u+"Grid":"grid",d=u?u+"Tick":"tick",v=i[h+"LineWidth"],m=i[h+"LineColor"],g=i[h+"LineDashStyle"],y=i[d+"Length"],h=i[d+"Width"]||0,b=i[d+"Color"],w=i[d+"Position"],d=this.mark,E=l.step,S=!0,x=r.tickmarkOffset,T=this.getPosition(o,f,x,t),N=T.x,T=T.y,C=o&&N===r.pos+r.len||!o&&T===r.pos?-1:1,n=p(n,1);this.isActive=!0,v&&(f=r.getPlotLinePath(f+x,v*C,t,!0),c===B&&(c={stroke:m,"stroke-width":v},g&&(c.dashstyle=g),u||(c.zIndex=1),t&&(c.opacity=0),this.gridLine=c=v?s.path(f).attr(c).add(r.gridGroup):null),!t&&c&&f&&c[this.isNew?"attr":"animate"]({d:f,opacity:n})),h&&y&&(w==="inside"&&(y=-y),r.opposite&&(y=-y),u=this.getMarkPath(N,T,y,h*C,o,s),d?d.animate({d:u,opacity:n}):this.mark=s.path(u).attr({stroke:b,"stroke-width":h,opacity:n}).add(r.axisGroup)),a&&!isNaN(N)&&(a.xy=T=this.getLabelPosition(N,T,a,o,l,x,e,E),this.isFirst&&!this.isLast&&!p(i.showFirstLabel,1)||this.isLast&&!this.isFirst&&!p(i.showLastLabel,1)?S=!1:!r.isRadial&&!l.step&&!l.rotation&&!t&&n!==0&&(S=this.handleOverflow(e,T)),E&&e%E&&(S=!1),S&&!isNaN(T.y)?(T.opacity=n,a[this.isNew?"attr":"animate"](T),this.isNew=!1):a.attr("y",-9999))},destroy:function(){C(this,this.axis)}},qt.PlotLineOrBand=function(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)},qt.PlotLineOrBand.prototype={render:function(){var e=this,n=e.axis,r=n.horiz,i=(n.pointRange||0)/2,s=e.options,o=s.label,a=e.label,f=s.width,c=s.to,h=s.from,p=l(h)&&l(c),d=s.value,v=s.dashStyle,m=e.svgElem,g=[],y,b=s.color,w=s.zIndex,E=s.events,S={},x=n.chart.renderer;n.isLog&&(h=u(h),c=u(c),d=u(d));if(f){if(g=n.getPlotLinePath(d,f),S={stroke:b,"stroke-width":f},v)S.dashstyle=v}else{if(!p)return;h=z(h,n.min-i),c=W(c,n.max+i),g=n.getPlotBandPath(h,c,s),b&&(S.fill=b),s.borderWidth&&(S.stroke=s.borderColor,S["stroke-width"]=s.borderWidth)}l(w)&&(S.zIndex=w);if(m){if(g)m.animate({d:g},null,m.onGetPath);else if(m.hide(),m.onGetPath=function(){m.show()},a)e.label=a=a.destroy()}else if(g&&g.length&&(e.svgElem=m=x.path(g).attr(S).add(),E))for(y in i=function(t){m.on(t,function(n){E[t].apply(e,[n])})},E)i(y);return o&&l(o.text)&&g&&g.length&&n.width>0&&n.height>0?(o=t({align:r&&p&&"center",x:r?!p&&4:10,verticalAlign:!r&&p&&"middle",y:r?p?16:10:p?6:-4,rotation:r&&!p&&90},o),a||(S={align:o.textAlign||o.align,rotation:o.rotation},l(w)&&(S.zIndex=w),e.label=a=x.text(o.text,0,0,o.useHTML).attr(S).css(o.style).add()),n=[g[1],g[4],p?g[6]:g[1]],p=[g[2],g[5],p?g[7]:g[2]],g=T(n),r=T(p),a.align(o,!1,{x:g,y:r,width:N(n)-g,height:N(p)-r}),a.show()):a&&a.hide(),e},destroy:function(){f(this.axis.plotLinesAndBands,this),delete this.axis,C(this)}},D.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Ut,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return g(this.total,-1)},style:Ut.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(e,t){var n=t.isX;this.horiz=e.inverted?!n:n,this.coll=(this.isXAxis=n)?"xAxis":"yAxis",this.opposite=t.opposite,this.side=t.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(t);var r=this.options,i=r.type;this.labelFormatter=r.labels.formatter||this.defaultLabelFormatter,this.userOptions=t,this.minPixelPadding=0,this.chart=e,this.reversed=r.reversed,this.zoomEnabled=r.zoomEnabled!==!1,this.categories=r.categories||i==="category",this.names=[],this.isLog=i==="logarithmic",this.isDatetimeAxis=i==="datetime",this.isLinked=l(r.linkedTo),this.tickmarkOffset=this.categories&&r.tickmarkPlacement==="between"&&p(r.tickInterval,1)===1?.5:0,this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=r.minRange||r.maxZoom,this.range=r.range,this.offset=r.offset||0,this.stacks={},this.oldStacks={},this.min=this.max=null,this.crosshair=p(r.crosshair,h(e.options.tooltip.crosshairs)[n?0:1],!1);var s,r=this.options.events;Xt(this,e.axes)===-1&&(n&&!this.isColorAxis?e.axes.splice(e.xAxis.length,0,this):e.axes.push(this),e[this.coll].push(this)),this.series=this.series||[],e.inverted&&n&&this.reversed===B&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(s in r)Qt(this,s,r[s]);this.isLog&&(this.val2lin=u,this.lin2val=a)},setOptions:function(e){this.options=t(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],t(ht[this.coll],e))},defaultLabelFormatter:function(){var e=this.axis,t=this.value,n=e.categories,r=this.dateTimeLabelFormat,i=ht.lang.numericSymbols,s=i&&i.length,o,u=e.options.labels.format,e=e.isLog?t:e.tickInterval;if(u)o=w(u,this);else if(n)o=t;else if(r)o=pt(r,t);else if(s&&e>=1e3)for(;s--&&o===B;)n=Math.pow(1e3,s+1),e>=n&&i[s]!==null&&(o=g(t/n,-1)+i[s]);return o===B&&(o=X(t)>=1e4?g(t,0):g(t,-1,B,"")),o},getSeriesExtremes:function(){var e=this,t=e.chart;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.ignoreMinPadding=e.ignoreMaxPadding=null,e.buildStacks&&e.buildStacks(),Vt(e.series,function(n){if(n.visible||!t.options.chart.ignoreHiddenSeries){var r;r=n.options.threshold;var i;e.hasVisibleSeries=!0,e.isLog&&r<=0&&(r=null);if(e.isXAxis){if(r=n.xData,r.length)e.dataMin=W(p(e.dataMin,r[0]),T(r)),e.dataMax=z(p(e.dataMax,r[0]),N(r))}else n.getExtremes(),i=n.dataMax,n=n.dataMin,l(n)&&l(i)&&(e.dataMin=W(p(e.dataMin,n),n),e.dataMax=z(p(e.dataMax,i),i)),l(r)&&(e.dataMin>=r?(e.dataMin=r,e.ignoreMinPadding=!0):e.dataMax<r&&(e.dataMax=r,e.ignoreMaxPadding=!0))}})},translate:function(e,t,n,r,i,s){var u=1,a=0,f=r?this.oldTransA:this.transA,r=r?this.oldMin:this.min,l=this.minPixelPadding,i=(this.options.ordinal||this.isLog&&i)&&this.lin2val;return f||(f=this.transA),n&&(u*=-1,a=this.len),this.reversed&&(u*=-1,a-=u*(this.sector||this.len)),t?(e=e*u+a,e-=l,e=e/f+r,i&&(e=this.lin2val(e))):(i&&(e=this.val2lin(e)),s==="between"&&(s=.5),e=u*(e-r)*f+a+u*l+(o(s)?f*s*this.pointRange:0)),e},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,n,r,i){var s=this.chart,o=this.left,u=this.top,a,f,l=n&&s.oldChartHeight||s.chartHeight,c=n&&s.oldChartWidth||s.chartWidth,h;a=this.transB,i=p(i,this.translate(e,null,null,n)),e=n=q(i+a),a=f=q(l-i-a);if(isNaN(i))h=!0;else if(this.horiz){if(a=u,f=l-this.bottom,e<o||e>o+this.width)h=!0}else if(e=o,n=c-this.right,a<u||a>u+this.height)h=!0;return h&&!r?null:s.renderer.crispLine(["M",e,a,"L",n,f],t||1)},getLinearTickPositions:function(e,t,n){var r,i=L(R(t/e)*e),s=L(U(n/e)*e),u=[];if(t===n&&o(t))return[t];for(t=i;t<=s;){u.push(t),t=L(t+e);if(t===r)break;r=t}return u},getMinorTickPositions:function(){var e=this.options,t=this.tickPositions,n=this.minorTickInterval,r=[],i;if(this.isLog){i=t.length;for(e=1;e<i;e++)r=r.concat(this.getLogTickPositions(n,t[e-1],t[e],!0))}else if(this.isDatetimeAxis&&e.minorTickInterval==="auto")r=r.concat(this.getTimeTicks(this.normalizeTimeTickInterval(n),this.min,this.max,e.startOfWeek)),r[0]<this.min&&r.shift();else for(t=this.min+(t[0]-this.min)%n;t<=this.max;t+=n)r.push(t);return r},adjustForMinRange:function(){var e=this.options,t=this.min,n=this.max,r,i=this.dataMax-this.dataMin>=this.minRange,s,o,u,a,f;this.isXAxis&&this.minRange===B&&!this.isLog&&(l(e.min)||l(e.max)?this.minRange=null:(Vt(this.series,function(e){a=e.xData;for(o=f=e.xIncrement?1:a.length-1;o>0;o--)if(u=a[o]-a[o-1],s===B||u<s)s=u}),this.minRange=W(s*5,this.dataMax-this.dataMin)));if(n-t<this.minRange){var c=this.minRange;r=(c-n+t)/2,r=[t-r,p(e.min,t-r)],i&&(r[2]=this.dataMin),t=N(r),n=[t+c,p(e.max,t+c)],i&&(n[2]=this.dataMax),n=T(n),n-t<c&&(r[0]=n-c,r[1]=p(e.min,n-c),t=N(r))}this.min=t,this.max=n},setAxisTranslation:function(e){var t=this,n=t.max-t.min,i=t.axisPointRange||0,s,o=0,u=0,a=t.linkedParent,f=!!t.categories,c=t.transA;if(t.isXAxis||f||i)a?(o=a.minPointOffset,u=a.pointRangePadding):Vt(t.series,function(e){var a=f?1:t.isXAxis?e.pointRange:t.axisPointRange||0,c=e.options.pointPlacement,h=e.closestPointRange;a>n&&(a=0),i=z(i,a),o=z(o,r(c)?0:a/2),u=z(u,c==="on"?0:a),!e.noSharedTooltip&&l(h)&&(s=l(s)?W(s,h):h)}),a=t.ordinalSlope&&s?t.ordinalSlope/s:1,t.minPointOffset=o*=a,t.pointRangePadding=u*=a,t.pointRange=W(i,n),t.closestPointRange=s;e&&(t.oldTransA=c),t.translationSlope=t.transA=c=t.len/(n+u||1),t.transB=t.horiz?t.left:t.bottom,t.minPixelPadding=c*o},setTickPositions:function(e){var t=this,n=t.chart,r=t.options,i=r.startOnTick,s=r.endOnTick,a=t.isLog,f=t.isDatetimeAxis,c=t.isXAxis,h=t.isLinked,d=t.options.tickPositioner,v=r.maxPadding,m=r.minPadding,g=r.tickInterval,y=r.minTickInterval,b=r.tickPixelInterval,w,x=t.categories;h?(t.linkedParent=n[t.coll][r.linkedTo],n=t.linkedParent.getExtremes(),t.min=p(n.min,n.dataMin),t.max=p(n.max,n.dataMax),r.type!==t.linkedParent.options.type&&gt(11,1)):(t.min=p(t.userMin,r.min,t.dataMin),t.max=p(t.userMax,r.max,t.dataMax)),a&&(!e&&W(t.min,p(t.dataMin,t.min))<=0&&gt(10,1),t.min=L(u(t.min)),t.max=L(u(t.max))),t.range&&l(t.max)&&(t.userMin=t.min=z(t.min,t.max-t.range),t.userMax=t.max,t.range=null),t.beforePadding&&t.beforePadding(),t.adjustForMinRange(),!x&&!t.axisPointRange&&!t.usePercentage&&!h&&l(t.min)&&l(t.max)&&(n=t.max-t.min)&&(!l(r.min)&&!l(t.userMin)&&m&&(t.dataMin<0||!t.ignoreMinPadding)&&(t.min-=n*m),!l(r.max)&&!l(t.userMax)&&v&&(t.dataMax>0||!t.ignoreMaxPadding)&&(t.max+=n*v)),o(r.floor)&&(t.min=z(t.min,r.floor)),o(r.ceiling)&&(t.max=W(t.max,r.ceiling)),t.min===t.max||t.min===void 0||t.max===void 0?t.tickInterval=1:h&&!g&&b===t.linkedParent.options.tickPixelInterval?t.tickInterval=t.linkedParent.tickInterval:(t.tickInterval=p(g,x?1:(t.max-t.min)*b/z(t.len,b)),!l(g)&&t.len<b&&!this.isRadial&&!this.isLog&&!x&&i&&s&&(w=!0,t.tickInterval/=4)),c&&!e&&Vt(t.series,function(e){e.processData(t.min!==t.oldMin||t.max!==t.oldMax)}),t.setAxisTranslation(!0),t.beforeSetTickPositions&&t.beforeSetTickPositions(),t.postProcessTickInterval&&(t.tickInterval=t.postProcessTickInterval(t.tickInterval)),t.pointRange&&(t.tickInterval=z(t.pointRange,t.tickInterval)),!g&&t.tickInterval<y&&(t.tickInterval=y),!f&&!a&&!g&&(t.tickInterval=S(t.tickInterval,null,E(t.tickInterval),p(r.allowDecimals,!(t.tickInterval>1&&t.tickInterval<5&&t.max>1e3&&t.max<9999)))),t.minorTickInterval=r.minorTickInterval==="auto"&&t.tickInterval?t.tickInterval/5:r.minorTickInterval,t.tickPositions=e=r.tickPositions?[].concat(r.tickPositions):d&&d.apply(t,[t.min,t.max]),e||(!t.ordinalPositions&&(t.max-t.min)/t.tickInterval>z(2*t.len,200)&&gt(19,!0),e=f?t.getTimeTicks(t.normalizeTimeTickInterval(t.tickInterval,r.units),t.min,t.max,r.startOfWeek,t.ordinalPositions,t.closestPointRange,!0):a?t.getLogTickPositions(t.tickInterval,t.min,t.max):t.getLinearTickPositions(t.tickInterval,t.min,t.max),w&&e.splice(1,e.length-2),t.tickPositions=e),h||(r=e[0],a=e[e.length-1],f=t.minPointOffset||0,i?t.min=r:t.min-f>r&&e.shift(),s?t.max=a:t.max+f<a&&e.pop(),e.length===0&&l(r)&&e.push((a+r)/2),e.length===1&&(i=X(t.max)>1e13?1:.001,t.min-=i,t.max+=i))},setMaxTicks:function(){var e=this.chart,t=e.maxTicks||{},n=this.tickPositions,r=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&n&&n.length>(t[r]||0)&&this.options.alignTicks!==!1&&(t[r]=n.length),e.maxTicks=t},adjustTickAmount:function(){var e=this._maxTicksKey,t=this.tickPositions,n=this.chart.maxTicks;if(n&&n[e]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1&&this.min!==B){var r=this.tickAmount,i=t.length;this.tickAmount=e=n[e];if(i<e){for(;t.length<e;)t.push(L(t[t.length-1]+this.tickInterval));this.transA*=(i-1)/(e-1),this.max=t[t.length-1]}l(r)&&e!==r&&(this.isDirty=!0)}},setScale:function(){var e=this.stacks,t,n,r,i;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),i=this.len!==this.oldAxisLength,Vt(this.series,function(e){if(e.isDirtyData||e.isDirty||e.xAxis.isDirty)r=!0});if(i||r||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(t in e)for(n in e[t])e[t][n].total=null,e[t][n].cum=0;this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=i||this.min!==this.oldMin||this.max!==this.oldMax)}else if(!this.isXAxis){this.oldStacks&&(e=this.stacks=this.oldStacks);for(t in e)for(n in e[t])e[t][n].cum=e[t][n].total}this.setMaxTicks()},setExtremes:function(t,n,r,i,s){var o=this,u=o.chart,r=p(r,!0),s=e(s,{min:t,max:n});Yt(o,"setExtremes",s,function(){o.userMin=t,o.userMax=n,o.eventArgs=s,o.isDirtyExtremes=!0,r&&u.redraw(i)})},zoom:function(e,t){var n=this.dataMin,r=this.dataMax,i=this.options;return this.allowZoomOutside||(l(n)&&e<=W(n,p(i.min,n))&&(e=B),l(r)&&t>=z(r,p(i.max,r))&&(t=B)),this.displayBtn=e!==B||t!==B,this.setExtremes(e,t,!1,B,{trigger:"zoom"}),!0},setAxisSize:function(){var e=this.chart,t=this.options,n=t.offsetLeft||0,r=this.horiz,i=p(t.width,e.plotWidth-n+(t.offsetRight||0)),s=p(t.height,e.plotHeight),o=p(t.top,e.plotTop),t=p(t.left,e.plotLeft+n),n=/%$/;n.test(s)&&(s=parseInt(s,10)/100*e.plotHeight),n.test(o)&&(o=parseInt(o,10)/100*e.plotHeight+e.plotTop),this.left=t,this.top=o,this.width=i,this.height=s,this.bottom=e.chartHeight-s-o,this.right=e.chartWidth-i-t,this.len=z(r?i:s,0),this.pos=r?t:o},getExtremes:function(){var e=this.isLog;return{min:e?L(a(this.min)):this.min,max:e?L(a(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(e){var t=this.isLog,n=t?a(this.min):this.min,t=t?a(this.max):this.max;return n>e||e===null?e=n:t<e&&(e=t),this.translate(e,0,1,0,1)},autoLabelAlign:function(e){return e=(p(e,0)-this.side*90+720)%360,e>15&&e<165?"right":e>195&&e<345?"left":"center"},getOffset:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.tickPositions,s=e.ticks,o=e.horiz,u=e.side,a=t.inverted?[1,0,3,2][u]:u,f,c,h=0,d,v=0,m=r.title,g=r.labels,y=0,b=t.axisOffset,t=t.clipOffset,w=[-1,1,1,-1][u],E,S=1,x=p(g.maxStaggerLines,5),T,N,C,k,L;e.hasData=f=e.hasVisibleSeries||l(e.min)&&l(e.max)&&!!i,e.showAxis=c=f||p(r.showEmpty,!0),e.staggerLines=e.horiz&&g.staggerLines,e.axisGroup||(e.gridGroup=n.g("grid").attr({zIndex:r.gridZIndex||1}).add(),e.axisGroup=n.g("axis").attr({zIndex:r.zIndex||2}).add(),e.labelGroup=n.g("axis-labels").attr({zIndex:g.zIndex||7}).addClass("highcharts-"+e.coll.toLowerCase()+"-labels").add());if(f||e.isLinked){e.labelAlign=p(g.align||e.autoLabelAlign(g.rotation)),Vt(i,function(t){s[t]?s[t].addLabel():s[t]=new _(e,t)});if(e.horiz&&!e.staggerLines&&x&&!g.rotation){for(f=e.reversed?[].concat(i).reverse():i;S<x;){T=[],N=!1;for(E=0;E<f.length;E++)C=f[E],k=(k=s[C].label&&s[C].label.getBBox())?k.width:0,L=E%S,k&&(C=e.translate(C),T[L]!==B&&C<T[L]&&(N=!0),T[L]=C+k);if(!N)break;S++}S>1&&(e.staggerLines=S)}Vt(i,function(t){if(u===0||u===2||{1:"left",3:"right"}[u]===e.labelAlign)y=z(s[t].getLabelSize(),y)}),e.staggerLines&&(y*=e.staggerLines,e.labelOffset=y)}else for(E in s)s[E].destroy(),delete s[E];m&&m.text&&m.enabled!==!1&&(e.axisTitle||(e.axisTitle=n.text(m.text,0,0,m.useHTML).attr({zIndex:7,rotation:m.rotation||0,align:m.textAlign||{low:"left",middle:"center",high:"right"}[m.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(m.style).add(e.axisGroup),e.axisTitle.isNew=!0),c&&(h=e.axisTitle.getBBox()[o?"height":"width"],d=m.offset,v=l(d)?0:p(m.margin,o?5:10)),e.axisTitle[c?"show":"hide"]()),e.offset=w*p(r.offset,b[u]),n=u===2?e.tickBaseline:0,o=y+v+(y&&w*(o?p(g.y,e.tickBaseline+8):g.x)-n),e.axisTitleMargin=p(d,o),b[u]=z(b[u],e.axisTitleMargin+h+w*e.offset,o),t[a]=z(t[a],R(r.lineWidth/2)*2)},getLinePath:function(e){var t=this.chart,n=this.opposite,r=this.offset,i=this.horiz,s=this.left+(n?this.width:0)+r,r=t.chartHeight-this.bottom-(n?this.height:0)+r;return n&&(e*=-1),t.renderer.crispLine(["M",i?this.left:s,i?r:this.top,"L",i?t.chartWidth-this.right:s,i?r:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,t=this.left,r=this.top,i=this.len,s=this.options.title,o=e?t:r,u=this.opposite,a=this.offset,f=n(s.style.fontSize||12),i={low:o+(e?0:i),middle:o+i/2,high:o+(e?i:0)}[s.align],t=(e?r+this.height:t)+(e?1:-1)*(u?-1:1)*this.axisTitleMargin+(this.side===2?f:0);return{x:e?i:t+(u?this.width:0)+a+(s.x||0),y:e?t-(u?this.height:0)+a:i+(s.y||0)}},render:function(){var e=this,t=e.horiz,n=e.reversed,r=e.chart,i=r.renderer,s=e.options,o=e.isLog,u=e.isLinked,f=e.tickPositions,c,h=e.axisTitle,p=e.ticks,d=e.minorTicks,v=e.alternateBands,m=s.stackLabels,g=s.alternateGridColor,y=e.tickmarkOffset,b=s.lineWidth,w=r.hasRendered&&l(e.oldMin)&&!isNaN(e.oldMin),E=e.hasData,S=e.showAxis,x,T=s.labels.overflow,N=e.justifyLabels=t&&T!==!1,C;e.labelEdge.length=0,e.justifyToPlot=T==="justify",Vt([p,d,v],function(e){for(var t in e)e[t].isActive=!1});if(E||u)if(e.minorTickInterval&&!e.categories&&Vt(e.getMinorTickPositions(),function(t){d[t]||(d[t]=new _(e,t,"minor")),w&&d[t].isNew&&d[t].render(null,!0),d[t].render(null,!1,1)}),f.length&&(c=f.slice(),(t&&n||!t&&!n)&&c.reverse(),N&&(c=c.slice(1).concat([c[0]])),Vt(c,function(t,n){N&&(n=n===c.length-1?0:n+1);if(!u||t>=e.min&&t<=e.max)p[t]||(p[t]=new _(e,t)),w&&p[t].isNew&&p[t].render(n,!0,.1),p[t].render(n)}),y&&e.min===0&&(p[-1]||(p[-1]=new _(e,-1,null,!0)),p[-1].render(-1))),g&&Vt(f,function(t,n){n%2===0&&t<e.max&&(v[t]||(v[t]=new qt.PlotLineOrBand(e)),x=t+y,C=f[n+1]!==B?f[n+1]+y:e.max,v[t].options={from:o?a(x):x,to:o?a(C):C,color:g},v[t].render(),v[t].isActive=!0)}),!e._addedPlotLB)Vt((s.plotLines||[]).concat(s.plotBands||[]),function(t){e.addPlotBandOrLine(t)}),e._addedPlotLB=!0;Vt([p,d,v],function(e){var t,n,i=[],s=dt?dt.duration||500:0,o=function(){for(n=i.length;n--;)e[i[n]]&&!e[i[n]].isActive&&(e[i[n]].destroy(),delete e[i[n]])};for(t in e)e[t].isActive||(e[t].render(t,!1,0),e[t].isActive=!1,i.push(t));e===v||!r.hasRendered||!s?o():s&&setTimeout(o,s)}),b&&(t=e.getLinePath(b),e.axisLine?e.axisLine.animate({d:t}):e.axisLine=i.path(t).attr({stroke:s.lineColor,"stroke-width":b,zIndex:7}).add(e.axisGroup),e.axisLine[S?"show":"hide"]()),h&&S&&(h[h.isNew?"attr":"animate"](e.getTitlePosition()),h.isNew=!1),m&&m.enabled&&e.renderStackTotals(),e.isDirty=!1},redraw:function(){this.render(),Vt(this.plotLinesAndBands,function(e){e.render()}),Vt(this.series,function(e){e.isDirty=!0})},destroy:function(e){var t=this,n=t.stacks,r,i=t.plotLinesAndBands;e||Gt(t);for(r in n)C(n[r]),n[r]=null;Vt([t.ticks,t.minorTicks,t.alternateBands],function(e){C(e)});for(e=i.length;e--;)i[e].destroy();Vt("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(e){t[e]&&(t[e]=t[e].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(e,t){if(this.crosshair)if((l(t)||!p(this.crosshair.snap,!0))===!1)this.hideCrosshair();else{var n,r=this.crosshair,i=r.animation;p(r.snap,!0)?l(t)&&(n=this.chart.inverted!=this.horiz?t.plotX:this.len-t.plotY):n=this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos,n=this.isRadial?this.getPlotLinePath(this.isXAxis?t.x:p(t.stackY,t.y)):this.getPlotLinePath(null,null,null,null,n),n===null?this.hideCrosshair():this.cross?this.cross.attr({visibility:"visible"})[i?"animate":"attr"]({d:n},i):(i={"stroke-width":r.width||1,stroke:r.color||"#C0C0C0",zIndex:r.zIndex||2},r.dashStyle&&(i.dashstyle=r.dashStyle),this.cross=this.chart.renderer.path(n).attr(i).add())}},hideCrosshair:function(){this.cross&&this.cross.hide()}},e(D.prototype,{getPlotBandPath:function(e,t){var n=this.getPlotLinePath(t),r=this.getPlotLinePath(e);return r&&n?r.push(n[4],n[5],n[1],n[2]):r=null,r},addPlotBand:function(e){return this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){return this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(e,t){var n=(new qt.PlotLineOrBand(this,e)).render(),r=this.userOptions;return n&&(t&&(r[t]=r[t]||[],r[t].push(e)),this.plotLinesAndBands.push(n)),n},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,n=this.options,r=this.userOptions,i=t.length;i--;)t[i].id===e&&t[i].destroy();Vt([n.plotLines||[],r.plotLines||[],n.plotBands||[],r.plotBands||[]],function(t){for(i=t.length;i--;)t[i].id===e&&f(t,t[i])})}}),D.prototype.getTimeTicks=function(t,n,r,i){var s=[],o={},u=ht.global.useUTC,a,f=new Nt(n-kt),c=t.unitRange,h=t.count;if(l(n)){c>=mt.second&&(f.setMilliseconds(0),f.setSeconds(c>=mt.minute?0:h*R(f.getSeconds()/h))),c>=mt.minute&&f[Pt](c>=mt.hour?0:h*R(f[Lt]()/h)),c>=mt.hour&&f[Ht](c>=mt.day?0:h*R(f[At]()/h)),c>=mt.day&&f[Bt](c>=mt.month?1:h*R(f[Mt]()/h)),c>=mt.month&&(f[jt](c>=mt.year?0:h*R(f[_t]()/h)),a=f[Dt]()),c>=mt.year&&(a-=a%h,f[Ft](a)),c===mt.week&&f[Bt](f[Mt]()-f[Ot]()+p(i,1)),n=1,kt&&(f=new Nt(f.getTime()+kt)),a=f[Dt]();for(var i=f.getTime(),d=f[_t](),v=f[Mt](),m=(mt.day+(u?kt:f.getTimezoneOffset()*6e4))%mt.day;i<r;)s.push(i),c===mt.year?i=Ct(a+n*h,0):c===mt.month?i=Ct(a,d+n*h):!!u||c!==mt.day&&c!==mt.week?i+=c*h:i=Ct(a,d,v+n*h*(c===mt.day?1:7)),n++;s.push(i),Vt($t(s,function(e){return c<=mt.hour&&e%mt.day===m}),function(e){o[e]="day"})}return s.info=e(t,{higherRanks:o,totalRange:c*h}),s},D.prototype.normalizeTimeTickInterval=function(e,t){var n=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],r=n[n.length-1],i=mt[r[0]],s=r[1],o;for(o=0;o<n.length;o++)if(r=n[o],i=mt[r[0]],s=r[1],n[o+1]&&e<=(i*s[s.length-1]+mt[n[o+1][0]])/2)break;return i===mt.year&&e<5*i&&(s=[1,2,5]),n=S(e/i,s,r[0]==="year"?z(E(e/i),1):1),{unitRange:i,count:n,unitName:r[0]}},D.prototype.getLogTickPositions=function(e,t,n,r){var i=this.options,s=this.len,o=[];r||(this._minorAutoInterval=null);if(e>=.5)e=q(e),o=this.getLinearTickPositions(e,t,n);else if(e>=.08)for(var s=R(t),f,l,c,h,d,i=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];s<n+1&&!d;s++){l=i.length;for(f=0;f<l&&!d;f++)c=u(a(s)*i[f]),c>t&&(!r||h<=n)&&h!==B&&o.push(h),h>n&&(d=!0),h=c}else if(t=a(t),n=a(n),e=i[r?"minorTickInterval":"tickInterval"],e=p(e==="auto"?null:e,this._minorAutoInterval,(n-t)*(i.tickPixelInterval/(r?5:1))/((r?s/this.tickPositions.length:s)||1)),e=S(e,null,E(e)),o=Kt(this.getLinearTickPositions(e,t,n),u),!r)this._minorAutoInterval=e/5;return r||(this.tickInterval=e),o};var hn=qt.Tooltip=function(){this.init.apply(this,arguments)};hn.prototype={init:function(e,t){var r=t.borderWidth,i=t.style,s=n(i.padding);this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,t.shape||"callout",null,null,t.useHTML,null,"tooltip").attr({padding:s,fill:t.backgroundColor,"stroke-width":r,r:t.borderRadius,zIndex:8}).css(i).css({padding:0}).add().attr({y:-9999}),ot||this.label.shadow(t.shadow),this.shared=t.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,n,r,i){var s=this,o=s.now,u=s.options.animation!==!1&&!s.isHidden&&(X(t-o.x)>1||X(n-o.y)>1),a=s.followPointer||s.len>1;e(o,{x:u?(2*o.x+t)/3:t,y:u?(o.y+n)/2:n,anchorX:a?B:u?(2*o.anchorX+r)/3:r,anchorY:a?B:u?(o.anchorY+i)/2:i}),s.label.attr(o),u&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){s&&s.move(t,n,r,i)},32))},hide:function(e){var t=this,n;clearTimeout(this.hideTimer),this.isHidden||(n=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){t.label.fadeOut(),t.isHidden=!0},p(e,this.options.hideDelay,500)),n&&Vt(n,function(e){e.setState()}),this.chart.hoverPoints=null)},getAnchor:function(e,t){var n,r=this.chart,i=r.inverted,s=r.plotTop,o=0,u=0,a,e=h(e);return n=e[0].tooltipPos,this.followPointer&&t&&(t.chartX===B&&(t=r.pointer.normalize(t)),n=[t.chartX-r.plotLeft,t.chartY-s]),n||(Vt(e,function(e){a=e.series.yAxis,o+=e.plotX,u+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!i&&a?a.top-s:0)}),o/=e.length,u/=e.length,n=[i?r.plotWidth-u:o,this.shared&&!i&&e.length>1&&t?t.chartY-s:i?r.plotHeight-o:u]),Kt(n,q)},getPosition:function(e,t,n){var r=this.chart,i=this.distance,s={},o,u=["y",r.chartHeight,t,n.plotY+r.plotTop],a=["x",r.chartWidth,e,n.plotX+r.plotLeft],f=n.ttBelow||r.inverted&&!n.negative||!r.inverted&&n.negative,l=function(e,t,n,r){var o=n<r-i,t=r+i+n<t,n=r-i-n;r+=i;if(f&&t)s[e]=r;else if(!f&&o)s[e]=n;else if(o)s[e]=n;else{if(!t)return!1;s[e]=r}},c=function(e,t,n,r){if(r<i||r>t-i)return!1;s[e]=r<n/2?1:r>t-n/2?t-n-2:r-n/2},h=function(e){var t=u;u=a,a=t,o=e},p=function(){l.apply(0,u)!==!1?c.apply(0,a)===!1&&!o&&(h(!0),p()):o?s.x=s.y=0:(h(!0),p())};return(r.inverted||this.len>1)&&h(),p(),s},defaultFormatter:function(e){var t=this.points||h(this),n=t[0].series,r;return r=[e.tooltipHeaderFormatter(t[0])],Vt(t,function(e){n=e.series,r.push(n.tooltipFormatter&&n.tooltipFormatter(e)||e.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),r.push(e.options.footerFormat||""),r.join("")},refresh:function(e,t){var n=this.chart,r=this.label,i=this.options,s,o,u={},a,f=[];a=i.formatter||this.defaultFormatter;var u=n.hoverPoints,l,c=this.shared;clearTimeout(this.hideTimer),this.followPointer=h(e)[0].series.tooltipOptions.followPointer,o=this.getAnchor(e,t),s=o[0],o=o[1],c&&(!e.series||!e.series.noSharedTooltip)?(n.hoverPoints=e,u&&Vt(u,function(e){e.setState()}),Vt(e,function(e){e.setState("hover"),f.push(e.getLabelConfig())}),u={x:e[0].category,y:e[0].y},u.points=f,this.len=f.length,e=e[0]):u=e.getLabelConfig(),a=a.call(u,this),u=e.series,this.distance=p(u.tooltipOptions.distance,16),a===!1?this.hide():(this.isHidden&&(tn(r),r.attr("opacity",1).show()),r.attr({text:a}),l=i.borderColor||e.color||u.color||"#606060",r.attr({stroke:l}),this.updatePosition({plotX:s,plotY:o,negative:e.negative,ttBelow:e.ttBelow}),this.isHidden=!1),Yt(n,"tooltipRefresh",{text:a,x:s+n.plotLeft,y:o+n.plotTop,borderColor:l})},updatePosition:function(e){var t=this.chart,n=this.label,n=(this.options.positioner||this.getPosition).call(this,n.width,n.height,e);this.move(q(n.x),q(n.y),e.plotX+t.plotLeft,e.plotY+t.plotTop)},tooltipHeaderFormatter:function(e){var t=e.series,n=t.tooltipOptions,r=n.dateTimeLabelFormats,i=n.xDateFormat,s=t.xAxis,u=s&&s.options.type==="datetime"&&o(e.key),n=n.headerFormat,s=s&&s.closestPointRange,a;if(u&&!i){if(s){for(a in mt)if(mt[a]>=s||mt[a]<=mt.day&&e.key%mt[a]>0){i=r[a];break}}else i=r.day;i=i||r.year}return u&&i&&(n=n.replace("{point.key}","{point.key:"+i+"}")),w(n,{point:e,series:t})}};var pn;at=j.documentElement.ontouchstart!==B;var dn=qt.Pointer=function(e,t){this.init(e,t)};dn.prototype={init:function(e,t){var n=t.chart,r=n.events,i=ot?"":n.zoomType,n=e.inverted,s;this.options=t,this.chart=e,this.zoomX=s=/x/.test(i),this.zoomY=i=/y/.test(i),this.zoomHor=s&&!n||i&&n,this.zoomVert=i&&!n||s&&n,this.hasZoom=s||i,this.runChartClick=r&&!!r.click,this.pinchDown=[],this.lastValidTouch={},qt.Tooltip&&t.tooltip.enabled&&(e.tooltip=new hn(e,t.tooltip),this.followTouchMove=t.tooltip.followTouchMove),this.setDOMEvents()},normalize:function(t,n){var r,i,t=t||window.event,t=Zt(t);return t.target||(t.target=t.srcElement),i=t.touches?t.touches.length?t.touches.item(0):t.changedTouches[0]:t,n||(this.chartPosition=n=Jt(this.chart.container)),i.pageX===B?(r=z(t.x,t.clientX-n.left),i=t.y):(r=i.pageX-n.left,i=i.pageY-n.top),e(t,{chartX:q(r),chartY:q(i)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return Vt(this.chart.axes,function(n){t[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(e[n.horiz?"chartX":"chartY"])})}),t},getIndex:function(e){var t=this.chart;return t.inverted?t.plotHeight+t.plotTop-e.chartY:e.chartX-t.plotLeft},runPointActions:function(e){var t=this.chart,n=t.series,r=t.tooltip,i,s,o=t.hoverPoint,u=t.hoverSeries,a,f,l=t.chartWidth,c=this.getIndex(e);if(r&&this.options.tooltip.shared&&(!u||!u.noSharedTooltip)){s=[],a=n.length;for(f=0;f<a;f++)n[f].visible&&n[f].options.enableMouseTracking!==!1&&!n[f].noSharedTooltip&&n[f].singularTooltips!==!0&&n[f].tooltipPoints.length&&(i=n[f].tooltipPoints[c])&&i.series&&(i._dist=X(c-i.clientX),l=W(l,i._dist),s.push(i));for(a=s.length;a--;)s[a]._dist>l&&s.splice(a,1);s.length&&s[0].clientX!==this.hoverX&&(r.refresh(s,e),this.hoverX=s[0].clientX)}n=u&&u.tooltipOptions.followPointer,u&&u.tracker&&!n?(i=u.tooltipPoints[c])&&i!==o&&i.onMouseOver(e):r&&n&&!r.isHidden&&(u=r.getAnchor([{}],e),r.updatePosition({plotX:u[0],plotY:u[1]})),r&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(e){bt[pn]&&bt[pn].pointer.onDocumentMouseMove(e)},Qt(j,"mousemove",this._onDocumentMouseMove)),Vt(t.axes,function(t){t.drawCrosshair(e,p(i,o))})},reset:function(e,t){var n=this.chart,r=n.hoverSeries,i=n.hoverPoint,s=n.tooltip,o=s&&s.shared?n.hoverPoints:i;(e=e&&s&&o)&&h(o)[0].plotX===B&&(e=!1),e?(s.refresh(o),i&&i.setState(i.state,!0)):(i&&i.onMouseOut(),r&&r.onMouseOut(),s&&s.hide(t),this._onDocumentMouseMove&&(Gt(j,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),Vt(n.axes,function(e){e.hideCrosshair()}),this.hoverX=null)},scaleGroups:function(e,t){var n=this.chart,r;Vt(n.series,function(i){r=e||i.getPlotBox(),i.xAxis&&i.xAxis.zoomEnabled&&(i.group.attr(r),i.markerGroup&&(i.markerGroup.attr(r),i.markerGroup.clip(t?n.clipRect:null)),i.dataLabelsGroup&&i.dataLabelsGroup.attr(r))}),n.clipRect.attr(t||n.clipBox)},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,t.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var t=this.chart,n=t.options.chart,r=e.chartX,i=e.chartY,s=this.zoomHor,o=this.zoomVert,u=t.plotLeft,a=t.plotTop,f=t.plotWidth,l=t.plotHeight,c,h=this.mouseDownX,p=this.mouseDownY,d=n.panKey&&e[n.panKey+"Key"];r<u?r=u:r>u+f&&(r=u+f),i<a?i=a:i>a+l&&(i=a+l),this.hasDragged=Math.sqrt(Math.pow(h-r,2)+Math.pow(p-i,2)),this.hasDragged>10&&(c=t.isInsidePlot(h-u,p-a),t.hasCartesianSeries&&(this.zoomX||this.zoomY)&&c&&!d&&!this.selectionMarker&&(this.selectionMarker=t.renderer.rect(u,a,s?1:f,o?1:l,0).attr({fill:n.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),this.selectionMarker&&s&&(r-=h,this.selectionMarker.attr({width:X(r),x:(r>0?0:r)+h})),this.selectionMarker&&o&&(r=i-p,this.selectionMarker.attr({height:X(r),y:(r>0?0:r)+p})),c&&!this.selectionMarker&&n.panning&&t.pan(e,n.panning))},drop:function(t){var n=this.chart,r=this.hasPinched;if(this.selectionMarker){var i={xAxis:[],yAxis:[],originalEvent:t.originalEvent||t},s=this.selectionMarker,o=s.attr?s.attr("x"):s.x,u=s.attr?s.attr("y"):s.y,a=s.attr?s.attr("width"):s.width,f=s.attr?s.attr("height"):s.height,l;if(this.hasDragged||r)Vt(n.axes,function(e){if(e.zoomEnabled){var n=e.horiz,r=t.type==="touchend"?e.minPixelPadding:0,s=e.toValue((n?o:u)+r),n=e.toValue((n?o+a:u+f)-r);!isNaN(s)&&!isNaN(n)&&(i[e.coll].push({axis:e,min:W(s,n),max:z(s,n)}),l=!0)}}),l&&Yt(n,"selection",i,function(t){n.zoom(e(t,r?{animation:!1}:null))});this.selectionMarker=this.selectionMarker.destroy(),r&&this.scaleGroups()}n&&(d(n.container,{cursor:n._cursor}),n.cancelClick=this.hasDragged>10,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){bt[pn]&&bt[pn].pointer.drop(e)},onDocumentMouseMove:function(e){var t=this.chart,n=this.chartPosition,r=t.hoverSeries,e=this.normalize(e,n);n&&r&&!this.inClass(e.target,"highcharts-tracker")&&!t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&this.reset()},onContainerMouseLeave:function(){var e=bt[pn];e&&(e.pointer.reset(),e.pointer.chartPosition=null)},onContainerMouseMove:function(e){var t=this.chart;pn=t.index,e=this.normalize(e),e.returnValue=!1,t.mouseIsDown==="mousedown"&&this.drag(e),(this.inClass(e.target,"highcharts-tracker")||t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop))&&!t.openMenu&&this.runPointActions(e)},inClass:function(e,t){for(var n;e;){if(n=c(e,"class")){if(n.indexOf(t)!==-1)return!0;if(n.indexOf("highcharts-container")!==-1)return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries,n=(e=e.relatedTarget||e.toElement)&&e.point&&e.point.series;t&&!t.options.stickyTracking&&!this.inClass(e,"highcharts-tooltip")&&n!==t&&t.onMouseOut()},onContainerClick:function(t){var n=this.chart,r=n.hoverPoint,i=n.plotLeft,s=n.plotTop,t=this.normalize(t);t.cancelBubble=!0,n.cancelClick||(r&&this.inClass(t.target,"highcharts-tracker")?(Yt(r.series,"click",e(t,{point:r})),n.hoverPoint&&r.firePointEvent("click",t)):(e(t,this.getCoordinates(t)),n.isInsidePlot(t.chartX-i,t.chartY-s)&&Yt(n,"click",t)))},setDOMEvents:function(){var e=this,t=e.chart.container;t.onmousedown=function(t){e.onContainerMouseDown(t)},t.onmousemove=function(t){e.onContainerMouseMove(t)},t.onclick=function(t){e.onContainerClick(t)},Qt(t,"mouseleave",e.onContainerMouseLeave),wt===1&&Qt(j,"mouseup",e.onDocumentMouseUp),at&&(t.ontouchstart=function(t){e.onContainerTouchStart(t)},t.ontouchmove=function(t){e.onContainerTouchMove(t)},wt===1&&Qt(j,"touchend",e.onDocumentTouchEnd))},destroy:function(){var e;Gt(this.chart.container,"mouseleave",this.onContainerMouseLeave),wt||(Gt(j,"mouseup",this.onDocumentMouseUp),Gt(j,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(e in this)this[e]=null}},e(qt.Pointer.prototype,{pinchTranslate:function(e,t,n,r,i,s){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,e,t,n,r,i,s),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,e,t,n,r,i,s)},pinchTranslateDirection:function(e,t,n,r,i,s,o,u){var a=this.chart,f=e?"x":"y",l=e?"X":"Y",c="chart"+l,h=e?"width":"height",p=a["plot"+(e?"Left":"Top")],d,v,m=u||1,g=a.inverted,y=a.bounds[e?"h":"v"],b=t.length===1,w=t[0][c],E=n[0][c],S=!b&&t[1][c],x=!b&&n[1][c],T,n=function(){!b&&X(w-S)>20&&(m=u||X(E-x)/X(w-S)),v=(p-E)/m+w,d=a["plot"+(e?"Width":"Height")]/m};n(),t=v,t<y.min?(t=y.min,T=!0):t+d>y.max&&(t=y.max-d,T=!0),T?(E-=.8*(E-o[f][0]),b||(x-=.8*(x-o[f][1])),n()):o[f]=[E,x],g||(s[f]=v-p,s[h]=d),s=g?1/m:m,i[h]=d,i[f]=t,r[g?e?"scaleY":"scaleX":"scale"+l]=m,r["translate"+l]=s*p+(E-s*w)},pinch:function(t){var n=this,r=n.chart,i=n.pinchDown,s=n.followTouchMove,o=t.touches,u=o.length,a=n.lastValidTouch,f=n.hasZoom,l=n.selectionMarker,c={},h=u===1&&(n.inClass(t.target,"highcharts-tracker")&&r.runTrackerClick||n.runChartClick),d={};(f||s)&&!h&&t.preventDefault(),Kt(o,function(e){return n.normalize(e)}),t.type==="touchstart"?(Vt(o,function(e,t){i[t]={chartX:e.chartX,chartY:e.chartY}}),a.x=[i[0].chartX,i[1]&&i[1].chartX],a.y=[i[0].chartY,i[1]&&i[1].chartY],Vt(r.axes,function(e){if(e.zoomEnabled){var t=r.bounds[e.horiz?"h":"v"],n=e.minPixelPadding,i=e.toPixels(p(e.options.min,e.dataMin)),s=e.toPixels(p(e.options.max,e.dataMax)),o=W(i,s),i=z(i,s);t.min=W(e.pos,o-n),t.max=z(e.pos+e.len,i+n)}}),n.res=!0):i.length&&(l||(n.selectionMarker=l=e({destroy:yt},r.plotBox)),n.pinchTranslate(i,o,c,l,d,a),n.hasPinched=f,n.scaleGroups(c,d),!f&&s&&u===1?this.runPointActions(n.normalize(t)):n.res&&(n.res=!1,this.reset(!1,0)))},onContainerTouchStart:function(e){var t=this.chart;pn=t.index,e.touches.length===1?(e=this.normalize(e),t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)?(this.runPointActions(e),this.pinch(e)):this.reset()):e.touches.length===2&&this.pinch(e)},onContainerTouchMove:function(e){(e.touches.length===1||e.touches.length===2)&&this.pinch(e)},onDocumentTouchEnd:function(e){bt[pn]&&bt[pn].pointer.drop(e)}});if(F.PointerEvent||F.MSPointerEvent){var vn={},mn=!!F.PointerEvent,gn=function(){var e,t=[];t.item=function(e){return this[e]};for(e in vn)vn.hasOwnProperty(e)&&t.push({pageX:vn[e].pageX,pageY:vn[e].pageY,target:vn[e].target});return t},yn=function(e,t,n,r){e=e.originalEvent||e,(e.pointerType==="touch"||e.pointerType===e.MSPOINTER_TYPE_TOUCH)&&bt[pn]&&(r(e),r=bt[pn].pointer,r[t]({type:n,target:e.currentTarget,preventDefault:yt,touches:gn()}))};e(dn.prototype,{onContainerPointerDown:function(e){yn(e,"onContainerTouchStart","touchstart",function(e){vn[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(e){yn(e,"onContainerTouchMove","touchmove",function(e){vn[e.pointerId]={pageX:e.pageX,pageY:e.pageY},vn[e.pointerId].target||(vn[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(e){yn(e,"onContainerTouchEnd","touchend",function(e){delete vn[e.pointerId]})},batchMSEvents:function(e){e(this.chart.container,mn?"pointerdown":"MSPointerDown",this.onContainerPointerDown),e(this.chart.container,mn?"pointermove":"MSPointerMove",this.onContainerPointerMove),e(j,mn?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),b(dn.prototype,"init",function(e,t,n){e.call(this,t,n),(this.hasZoom||this.followTouchMove)&&d(t.container,{"-ms-touch-action":St,"touch-action":St})}),b(dn.prototype,"setDOMEvents",function(e){e.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(Qt)}),b(dn.prototype,"destroy",function(e){this.batchMSEvents(Gt),e.call(this)})}var bn=qt.Legend=function(e,t){this.init(e,t)};bn.prototype={init:function(e,n){var r=this,i=n.itemStyle,s=p(n.padding,8),o=n.itemMarginTop||0;this.options=n,n.enabled&&(r.itemStyle=i,r.itemHiddenStyle=t(i,n.itemHiddenStyle),r.itemMarginTop=o,r.padding=s,r.initialItemX=s,r.initialItemY=s-5,r.maxItemWidth=0,r.chart=e,r.itemHeight=0,r.lastLineHeight=0,r.symbolWidth=p(n.symbolWidth,16),r.pages=[],r.render(),Qt(r.chart,"endResize",function(){r.positionCheckboxes()}))},colorizeItem:function(e,t){var n=this.options,r=e.legendItem,i=e.legendLine,s=e.legendSymbol,o=this.itemHiddenStyle.color,n=t?n.itemStyle.color:o,u=t?e.legendColor||e.color||"#CCC":o,o=e.options&&e.options.marker,a={fill:u},f;r&&r.css({fill:n,color:n}),i&&i.attr({stroke:u});if(s){if(o&&s.isMarker)for(f in a.stroke=u,o=e.convertAttribs(o),o)r=o[f],r!==B&&(a[f]=r);s.attr(a)}},positionItem:function(e){var t=this.options,n=t.symbolPadding,t=!t.rtl,r=e._legendItemPos,i=r[0],r=r[1],s=e.checkbox;e.legendGroup&&e.legendGroup.translate(t?i:this.legendWidth-i-2*n-4,r),s&&(s.x=i,s.y=r)},destroyItem:function(e){var t=e.checkbox;Vt(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&(e[t]=e[t].destroy())}),t&&k(e.checkbox)},destroy:function(){var e=this.group,t=this.box;t&&(this.box=t.destroy()),e&&(this.group=e.destroy())},positionCheckboxes:function(e){var t=this.group.alignAttr,n,r=this.clipHeight||this.legendHeight;t&&(n=t.translateY,Vt(this.allItems,function(i){var s=i.checkbox,o;s&&(o=n+s.y+(e||0)+3,d(s,{left:t.translateX+i.checkboxOffset+s.x-20+"px",top:o+"px",display:o>n-6&&o<n+r-6?"":St}))}))},renderTitle:function(){var e=this.padding,t=this.options.title,n=0;t.text&&(this.title||(this.title=this.chart.renderer.label(t.text,e-3,e-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(t.style).add(this.group)),e=this.title.getBBox(),n=e.height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:n})),this.titleHeight=n},renderItem:function(e){var n=this.chart,r=n.renderer,i=this.options,s=i.layout==="horizontal",o=this.symbolWidth,u=i.symbolPadding,a=this.itemStyle,f=this.itemHiddenStyle,l=this.padding,c=s?p(i.itemDistance,20):0,h=!i.rtl,d=i.width,v=i.itemMarginBottom||0,m=this.itemMarginTop,g=this.initialItemX,y=e.legendItem,b=e.series&&e.series.drawLegendSymbol?e.series:e,E=b.options,E=this.createCheckboxForItem&&E&&E.showCheckbox,S=i.useHTML;y||(e.legendGroup=r.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),e.legendItem=y=r.text(i.labelFormat?w(i.labelFormat,e):i.labelFormatter.call(e),h?o+u:-u,this.baseline||0,S).css(t(e.visible?a:f)).attr({align:h?"left":"right",zIndex:2}).add(e.legendGroup),this.baseline||(this.baseline=r.fontMetrics(a.fontSize,y).f+3+m,y.attr("y",this.baseline)),b.drawLegendSymbol(this,e),this.setItemEvents&&this.setItemEvents(e,y,S,a,f),this.colorizeItem(e,e.visible),E&&this.createCheckboxForItem(e)),r=y.getBBox(),o=e.checkboxOffset=i.itemWidth||e.legendItemWidth||o+u+r.width+c+(E?20:0),this.itemHeight=u=q(e.legendItemHeight||r.height),s&&this.itemX-g+o>(d||n.chartWidth-2*l-g-i.x)&&(this.itemX=g,this.itemY+=m+this.lastLineHeight+v,this.lastLineHeight=0),this.maxItemWidth=z(this.maxItemWidth,o),this.lastItemY=m+this.itemY+v,this.lastLineHeight=z(u,this.lastLineHeight),e._legendItemPos=[this.itemX,this.itemY],s?this.itemX+=o:(this.itemY+=m+u+v,this.lastLineHeight=u),this.offsetWidth=d||z((s?this.itemX-g-c:o)+l,this.offsetWidth)},getAllItems:function(){var e=[];return Vt(this.chart.series,function(t){var n=t.options;p(n.showInLegend,l(n.linkedTo)?!1:B,!0)&&(e=e.concat(t.legendItems||(n.legendType==="point"?t.data:t)))}),e},render:function(){var t=this,n=t.chart,r=n.renderer,i=t.group,s,o,u,a,f=t.box,l=t.options,c=t.padding,h=l.borderWidth,p=l.backgroundColor;t.itemX=t.initialItemX,t.itemY=t.initialItemY,t.offsetWidth=0,t.lastItemY=0,i||(t.group=i=r.g("legend").attr({zIndex:7}).add(),t.contentGroup=r.g().attr({zIndex:1}).add(i),t.scrollGroup=r.g().add(t.contentGroup)),t.renderTitle(),s=t.getAllItems(),x(s,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),l.reversed&&s.reverse(),t.allItems=s,t.display=o=!!s.length,Vt(s,function(e){t.renderItem(e)}),u=l.width||t.offsetWidth,a=t.lastItemY+t.lastLineHeight+t.titleHeight,a=t.handleOverflow(a);if(h||p)u+=c,a+=c,f?u>0&&a>0&&(f[f.isNew?"attr":"animate"](f.crisp({width:u,height:a})),f.isNew=!1):(t.box=f=r.rect(0,0,u,a,l.borderRadius,h||0).attr({stroke:l.borderColor,"stroke-width":h||0,fill:p||St}).add(i).shadow(l.shadow),f.isNew=!0),f[o?"show":"hide"]();t.legendWidth=u,t.legendHeight=a,Vt(s,function(e){t.positionItem(e)}),o&&i.align(e({width:u,height:a},l),!0,"spacingBox"),n.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t=this,n=this.chart,r=n.renderer,i=this.options,s=i.y,s=n.spacingBox.height+(i.verticalAlign==="top"?-s:s)-this.padding,o=i.maxHeight,u,a=this.clipRect,f=i.navigation,l=p(f.animation,!0),c=f.arrowSize||12,h=this.nav,d=this.pages,v,m=this.allItems;return i.layout==="horizontal"&&(s/=2),o&&(s=W(s,o)),d.length=0,e>s&&!i.useHTML?(this.clipHeight=u=z(s-20-this.titleHeight-this.padding,0),this.currentPage=p(this.currentPage,1),this.fullHeight=e,Vt(m,function(e,t){var n=e._legendItemPos[1],r=q(e.legendItem.getBBox().height),i=d.length;if(!i||n-d[i-1]>u&&(v||n)!==d[i-1])d.push(v||n),i++;t===m.length-1&&n+r-d[i-1]>u&&d.push(n),n!==v&&(v=n)}),a||(a=t.clipRect=r.clipRect(0,this.padding,9999,0),t.contentGroup.clip(a)),a.attr({height:u}),h||(this.nav=h=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,c,c).on("click",function(){t.scroll(-1,l)}).add(h),this.pager=r.text("",15,10).css(f.style).add(h),this.down=r.symbol("triangle-down",0,0,c,c).on("click",function(){t.scroll(1,l)}).add(h)),t.scroll(0),e=s):h&&(a.attr({height:n.chartHeight}),h.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(e,t){var n=this.pages,r=n.length,i=this.currentPage+e,s=this.clipHeight,o=this.options.navigation,u=o.activeColor,o=o.inactiveColor,a=this.pager,f=this.padding;i>r&&(i=r),i>0&&(t!==B&&A(t,this.chart),this.nav.attr({translateX:f,translateY:s+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:i===1?o:u}).css({cursor:i===1?"default":"pointer"}),a.attr({text:i+"/"+r}),this.down.attr({x:18+this.pager.getBBox().width,fill:i===r?o:u}).css({cursor:i===r?"default":"pointer"}),n=-n[i-1]+this.initialItemY,this.scrollGroup.animate({translateY:n}),this.currentPage=i,this.positionCheckboxes(n))}},Ut=qt.LegendSymbolMixin={drawRectangle:function(e,t){var n=e.options.symbolHeight||12;t.legendSymbol=this.chart.renderer.rect(0,e.baseline-5-n/2,e.symbolWidth,n,e.options.symbolRadius||0).attr({zIndex:3}).add(t.legendGroup)},drawLineMarker:function(e){var t=this.options,n=t.marker,r;r=e.symbolWidth;var i=this.chart.renderer,s=this.legendGroup,e=e.baseline-q(i.fontMetrics(e.options.itemStyle.fontSize,this.legendItem).b*.3),o;t.lineWidth&&(o={"stroke-width":t.lineWidth},t.dashStyle&&(o.dashstyle=t.dashStyle),this.legendLine=i.path(["M",0,e,"L",r,e]).attr(o).add(s)),n&&n.enabled!==!1&&(t=n.radius,this.legendSymbol=r=i.symbol(this.symbol,r/2-t,e-t,2*t,2*t).add(s),r.isMarker=!0)}},(/Trident\/7\.0/.test(Q)||tt)&&b(bn.prototype,"positionItem",function(e,t){var n=this,r=function(){t._legendItemPos&&e.call(n,t)};r(),setTimeout(r)}),P.prototype={init:function(e,n){var r,i=e.series;e.series=null,r=t(ht,e),r.series=e.series=i,this.userOptions=e,i=r.chart,this.margin=this.splashArray("margin",i),this.spacing=this.splashArray("spacing",i);var s=i.events;this.bounds={h:{},v:{}},this.callback=n,this.isResizing=0,this.options=r,this.axes=[],this.series=[],this.hasCartesianSeries=i.showAxes;var o=this,u;o.index=bt.length,bt.push(o),wt++,i.reflow!==!1&&Qt(o,"load",function(){o.initReflow()});if(s)for(u in s)Qt(o,u,s[u]);o.xAxis=[],o.yAxis=[],o.animation=ot?!1:p(i.animation,!0),o.pointCount=o.colorCounter=o.symbolCounter=0,o.firstRender()},initSeries:function(e){var t=this.options.chart;return(t=It[e.type||t.type||t.defaultSeriesType])||gt(17,!0),t=new t,t.init(this,e),t},isInsidePlot:function(e,t,n){var r=n?t:e,e=n?e:t;return r>=0&&r<=this.plotWidth&&e>=0&&e<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&Vt(this.axes,function(e){e.adjustTickAmount()}),this.maxTicks=null},redraw:function(t){var n=this.axes,r=this.series,i=this.pointer,s=this.legend,o=this.isDirtyLegend,u,a,f=this.hasCartesianSeries,l=this.isDirtyBox,c=r.length,h=c,p=this.renderer,d=p.isHidden(),v=[];A(t,this),d&&this.cloneRenderTo();for(this.layOutTitles();h--;)if(t=r[h],t.options.stacking&&(u=!0,t.isDirty)){a=!0;break}if(a)for(h=c;h--;)if(t=r[h],t.options.stacking)t.isDirty=!0;Vt(r,function(e){e.isDirty&&e.options.legendType==="point"&&(o=!0)}),o&&s.options.enabled&&(s.render(),this.isDirtyLegend=!1),u&&this.getStacks(),f&&(this.isResizing||(this.maxTicks=null,Vt(n,function(e){e.setScale()})),this.adjustTickAmounts()),this.getMargins(),f&&(Vt(n,function(e){e.isDirty&&(l=!0)}),Vt(n,function(t){t.isDirtyExtremes&&(t.isDirtyExtremes=!1,v.push(function(){Yt(t,"afterSetExtremes",e(t.eventArgs,t.getExtremes())),delete t.eventArgs})),(l||u)&&t.redraw()})),l&&this.drawChartBox(),Vt(r,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),i&&i.reset(!0),p.draw(),Yt(this,"redraw"),d&&this.cloneRenderTo(!0),Vt(v,function(e){e.call()})},get:function(e){var t=this.axes,n=this.series,r,i;for(r=0;r<t.length;r++)if(t[r].options.id===e)return t[r];for(r=0;r<n.length;r++)if(n[r].options.id===e)return n[r];for(r=0;r<n.length;r++){i=n[r].points||[];for(t=0;t<i.length;t++)if(i[t].id===e)return i[t]}return null},getAxes:function(){var e=this,t=this.options,n=t.xAxis=h(t.xAxis||{}),t=t.yAxis=h(t.yAxis||{});Vt(n,function(e,t){e.index=t,e.isX=!0}),Vt(t,function(e,t){e.index=t}),n=n.concat(t),Vt(n,function(t){new D(e,t)}),e.adjustTickAmounts()},getSelectedPoints:function(){var e=[];return Vt(this.series,function(t){e=e.concat($t(t.points||[],function(e){return e.selected}))}),e},getSelectedSeries:function(){return $t(this.series,function(e){return e.selected})},getStacks:function(){var e=this;Vt(e.yAxis,function(e){e.stacks&&e.hasVisibleSeries&&(e.oldStacks=e.stacks)}),Vt(e.series,function(t){t.options.stacking&&(t.visible===!0||e.options.chart.ignoreHiddenSeries===!1)&&(t.stackKey=t.type+p(t.options.stack,""))})},setTitle:function(e,n,r){var i,s=this,o=s.options,u;u=o.title=t(o.title,e),i=o.subtitle=t(o.subtitle,n),o=i,Vt([["title",e,u],["subtitle",n,o]],function(e){var t=e[0],n=s[t],r=e[1],e=e[2];n&&r&&(s[t]=n=n.destroy()),e&&e.text&&!n&&(s[t]=s.renderer.text(e.text,0,0,e.useHTML).attr({align:e.align,"class":"highcharts-"+t,zIndex:e.zIndex||4}).css(e.style).add())}),s.layOutTitles(r)},layOutTitles:function(t){var n=0,r=this.title,i=this.subtitle,s=this.options,o=s.title,s=s.subtitle,u=this.renderer,a=this.spacingBox.width-44;r&&(r.css({width:(o.width||a)+"px"}).align(e({y:u.fontMetrics(o.style.fontSize,r).b-3},o),!1,"spacingBox"),!o.floating&&!o.verticalAlign)&&(n=r.getBBox().height),i&&(i.css({width:(s.width||a)+"px"}).align(e({y:n+(o.margin-13)+u.fontMetrics(o.style.fontSize,i).b},s),!1,"spacingBox"),!s.floating&&!s.verticalAlign&&(n=U(n+i.getBBox().height))),r=this.titleOffset!==n,this.titleOffset=n,!this.isDirtyBox&&r&&(this.isDirtyBox=r,this.hasRendered&&p(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var e=this.options.chart,t=e.width,e=e.height,n=this.renderToClone||this.renderTo;l(t)||(this.containerWidth=zt(n,"width")),l(e)||(this.containerHeight=zt(n,"height")),this.chartWidth=z(0,t||this.containerWidth||600),this.chartHeight=z(0,p(e,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(e){var t=this.renderToClone,n=this.container;e?t&&(this.renderTo.appendChild(n),k(t),delete this.renderToClone):(n&&n.parentNode===this.renderTo&&this.renderTo.removeChild(n),this.renderToClone=t=this.renderTo.cloneNode(0),d(t,{position:"absolute",top:"-9999px",display:"block"}),t.style.setProperty&&t.style.setProperty("display","block","important"),j.body.appendChild(t),n&&t.appendChild(n))},getContainer:function(){var t,i=this.options.chart,s,o,u;this.renderTo=t=i.renderTo,u="highcharts-"+lt++,r(t)&&(this.renderTo=t=j.getElementById(t)),t||gt(13,!0),s=n(c(t,"data-highcharts-chart")),!isNaN(s)&&bt[s]&&bt[s].hasRendered&&bt[s].destroy(),c(t,"data-highcharts-chart",this.index),t.innerHTML="",!i.skipClone&&!t.offsetWidth&&this.cloneRenderTo(),this.getChartSize(),s=this.chartWidth,o=this.chartHeight,this.container=t=v(Et,{className:"highcharts-container"+(i.className?" "+i.className:""),id:u},e({position:"relative",overflow:"hidden",width:s+"px",height:o+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},i.style),this.renderToClone||t),this._cursor=t.style.cursor,this.renderer=i.forExport?new an(t,s,o,i.style,!0):new ut(t,s,o,i.style),ot&&this.renderer.create(this,t,s,o)},getMargins:function(){var e=this.spacing,t,n=this.legend,r=this.margin,i=this.options.legend,s=p(i.margin,20),o=i.x,u=i.y,a=i.align,f=i.verticalAlign,c=this.titleOffset;this.resetMargins(),t=this.axisOffset,c&&!l(r[0])&&(this.plotTop=z(this.plotTop,c+this.options.title.margin+e[0])),n.display&&!i.floating&&(a==="right"?l(r[1])||(this.marginRight=z(this.marginRight,n.legendWidth-o+s+e[1])):a==="left"?l(r[3])||(this.plotLeft=z(this.plotLeft,n.legendWidth+o+s+e[3])):f==="top"?l(r[0])||(this.plotTop=z(this.plotTop,n.legendHeight+u+s+e[0])):f==="bottom"&&!l(r[2])&&(this.marginBottom=z(this.marginBottom,n.legendHeight-u+s+e[2]))),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),this.hasCartesianSeries&&Vt(this.axes,function(e){e.getOffset()}),l(r[3])||(this.plotLeft+=t[3]),l(r[0])||(this.plotTop+=t[0]),l(r[2])||(this.marginBottom+=t[2]),l(r[1])||(this.marginRight+=t[1]),this.setChartSize()},reflow:function(e){var t=this,n=t.options.chart,r=t.renderTo,i=n.width||zt(r,"width"),s=n.height||zt(r,"height"),n=e?e.target:F,r=function(){t.container&&(t.setSize(i,s,!1),t.hasUserSize=null)};if(!t.hasUserSize&&i&&s&&(n===F||n===j)){if(i!==t.containerWidth||s!==t.containerHeight)clearTimeout(t.reflowTimeout),e?t.reflowTimeout=setTimeout(r,100):r();t.containerWidth=i,t.containerHeight=s}},initReflow:function(){var e=this,t=function(t){e.reflow(t)};Qt(F,"resize",t),Qt(e,"destroy",function(){Gt(F,"resize",t)})},setSize:function(e,t,n){var r=this,i,s,o;r.isResizing+=1,o=function(){r&&Yt(r,"endResize",null,function(){r.isResizing-=1})},A(n,r),r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,l(e)&&(r.chartWidth=i=z(0,q(e)),r.hasUserSize=!!i),l(t)&&(r.chartHeight=s=z(0,q(t))),(dt?en:d)(r.container,{width:i+"px",height:s+"px"},dt),r.setChartSize(!0),r.renderer.setSize(i,s,n),r.maxTicks=null,Vt(r.axes,function(e){e.isDirty=!0,e.setScale()}),Vt(r.series,function(e){e.isDirty=!0}),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.layOutTitles(),r.getMargins(),r.redraw(n),r.oldChartHeight=null,Yt(r,"resize"),dt===!1?o():setTimeout(o,dt&&dt.duration||500)},setChartSize:function(e){var t=this.inverted,n=this.renderer,r=this.chartWidth,i=this.chartHeight,s=this.options.chart,o=this.spacing,u=this.clipOffset,a,f,l,c;this.plotLeft=a=q(this.plotLeft),this.plotTop=f=q(this.plotTop),this.plotWidth=l=z(0,q(r-a-this.marginRight)),this.plotHeight=c=z(0,q(i-f-this.marginBottom)),this.plotSizeX=t?c:l,this.plotSizeY=t?l:c,this.plotBorderWidth=s.plotBorderWidth||0,this.spacingBox=n.spacingBox={x:o[3],y:o[0],width:r-o[3]-o[1],height:i-o[0]-o[2]},this.plotBox=n.plotBox={x:a,y:f,width:l,height:c},r=2*R(this.plotBorderWidth/2),t=U(z(r,u[3])/2),n=U(z(r,u[0])/2),this.clipBox={x:t,y:n,width:R(this.plotSizeX-z(r,u[1])/2-t),height:z(0,R(this.plotSizeY-z(r,u[2])/2-n))},e||Vt(this.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this.spacing,t=this.margin;this.plotTop=p(t[0],e[0]),this.marginRight=p(t[1],e[1]),this.marginBottom=p(t[2],e[2]),this.plotLeft=p(t[3],e[3]),this.axisOffset=[0,0,0,0],this.clipOffset=[0,0,0,0]},drawChartBox:function(){var e=this.options.chart,t=this.renderer,n=this.chartWidth,r=this.chartHeight,i=this.chartBackground,s=this.plotBackground,o=this.plotBorder,u=this.plotBGImage,a=e.borderWidth||0,f=e.backgroundColor,l=e.plotBackgroundColor,c=e.plotBackgroundImage,h=e.plotBorderWidth||0,p,d=this.plotLeft,v=this.plotTop,m=this.plotWidth,g=this.plotHeight,y=this.plotBox,b=this.clipRect,w=this.clipBox;p=a+(e.shadow?8:0);if(a||f)i?i.animate(i.crisp({width:n-p,height:r-p})):(i={fill:f||St},a&&(i.stroke=e.borderColor,i["stroke-width"]=a),this.chartBackground=t.rect(p/2,p/2,n-p,r-p,e.borderRadius,a).attr(i).addClass("highcharts-background").add().shadow(e.shadow));l&&(s?s.animate(y):this.plotBackground=t.rect(d,v,m,g,0).attr({fill:l}).add().shadow(e.plotShadow)),c&&(u?u.animate(y):this.plotBGImage=t.image(c,d,v,m,g).add()),b?b.animate({width:w.width,height:w.height}):this.clipRect=t.clipRect(w),h&&(o?o.animate(o.crisp({x:d,y:v,width:m,height:g,strokeWidth:-h})):this.plotBorder=t.rect(d,v,m,g,0,-h).attr({stroke:e.plotBorderColor,"stroke-width":h,fill:St,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var e=this,t=e.options.chart,n,r=e.options.series,i,s;Vt(["inverted","angular","polar"],function(o){n=It[t.type||t.defaultSeriesType],s=e[o]||t[o]||n&&n.prototype[o];for(i=r&&r.length;!s&&i--;)(n=It[r[i].type])&&n.prototype[o]&&(s=!0);e[o]=s})},linkSeries:function(){var e=this,t=e.series;Vt(t,function(e){e.linkedSeries.length=0}),Vt(t,function(t){var n=t.options.linkedTo;r(n)&&(n=n===":previous"?e.series[t.index-1]:e.get(n))&&(n.linkedSeries.push(t),t.linkedParent=n)})},renderSeries:function(){Vt(this.series,function(e){e.translate(),e.setTooltipPoints&&e.setTooltipPoints(),e.render()})},renderLabels:function(){var t=this,r=t.options.labels;r.items&&Vt(r.items,function(i){var s=e(r.style,i.style),o=n(s.left)+t.plotLeft,u=n(s.top)+t.plotTop+12;delete s.left,delete s.top,t.renderer.text(i.html,o,u).attr({zIndex:2}).css(s).add()})},render:function(){var e=this.axes,t=this.renderer,n=this.options;this.setTitle(),this.legend=new bn(this,n.legend),this.getStacks(),Vt(e,function(e){e.setScale()}),this.getMargins(),this.maxTicks=null,Vt(e,function(e){e.setTickPositions(!0),e.setMaxTicks()}),this.adjustTickAmounts(),this.getMargins(),this.drawChartBox(),this.hasCartesianSeries&&Vt(e,function(e){e.render()}),this.seriesGroup||(this.seriesGroup=t.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.showCredits(n.credits),this.hasRendered=!0},showCredits:function(e){e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text,0,0).on("click",function(){e.href&&(location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position))},destroy:function(){var e=this,t=e.axes,n=e.series,r=e.container,i,s=r&&r.parentNode;Yt(e,"destroy"),bt[e.index]=B,wt--,e.renderTo.removeAttribute("data-highcharts-chart"),Gt(e);for(i=t.length;i--;)t[i]=t[i].destroy();for(i=n.length;i--;)n[i]=n[i].destroy();Vt("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(t){var n=e[t];n&&n.destroy&&(e[t]=n.destroy())}),r&&(r.innerHTML="",Gt(r),s&&k(r));for(i in e)delete e[i]},isReadyToRender:function(){var e=this;return!it&&F==F.top&&j.readyState!=="complete"||ot&&!F.canvg?(ot?cn.push(function(){e.firstRender()},e.options.global.canvasToolsURL):j.attachEvent("onreadystatechange",function(){j.detachEvent("onreadystatechange",e.firstRender),j.readyState==="complete"&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,n=e.callback;e.isReadyToRender()&&(e.getContainer(),Yt(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),Vt(t.series||[],function(t){e.initSeries(t)}),e.linkSeries(),Yt(e,"beforeRender"),qt.Pointer&&(e.pointer=new dn(e,t)),e.render(),e.renderer.draw(),n&&n.apply(e,[e]),Vt(e.callbacks,function(t){t.apply(e,[e])}),e.cloneRenderTo(!0),Yt(e,"load"))},splashArray:function(e,t){var n=t[e],n=i(n)?n:[n,n,n,n];return[p(t[e+"Top"],n[0]),p(t[e+"Right"],n[1]),p(t[e+"Bottom"],n[2]),p(t[e+"Left"],n[3])]}},P.prototype.callbacks=[],fn=qt.CenteredSeriesMixin={getCenter:function(){var e=this.options,t=this.chart,r=2*(e.slicedOffset||0),i,s=t.plotWidth-2*r,o=t.plotHeight-2*r,t=e.center,e=[p(t[0],"50%"),p(t[1],"50%"),e.size||"100%",e.innerSize||0],u=W(s,o),a;return Kt(e,function(e,t){return a=/%$/.test(e),i=t<2||t===2&&a,(a?[s,o,u,u][t]*n(e)/100:e)+(i?r:0)})}};var wn=function(){};wn.prototype={init:function(e,t,n){return this.series=e,this.applyOptions(t,n),this.pointAttr={},e.options.colorByPoint&&(t=e.options.colors||e.chart.options.colors,this.color=this.color||t[e.colorCounter++],e.colorCounter===t.length)&&(e.colorCounter=0),e.chart.pointCount++,this},applyOptions:function(t,n){var r=this.series,i=r.options.pointValKey||r.pointValKey,t=wn.prototype.optionsToObject.call(this,t);return e(this,t),this.options=this.options?e(this.options,t):t,i&&(this.y=this[i]),this.x===B&&r&&(this.x=n===B?r.autoIncrement():n),this},optionsToObject:function(e){var t={},n=this.series,r=n.pointArrayMap||["y"],i=r.length,o=0,u=0;if(typeof e=="number"||e===null)t[r[0]]=e;else if(s(e)){e.length>i&&(n=typeof e[0],n==="string"?t.name=e[0]:n==="number"&&(t.x=e[0]),o++);for(;u<i;)t[r[u++]]=e[o++]}else typeof e=="object"&&(t=e,e.dataLabels&&(n._hasPointLabels=!0),e.marker&&(n._hasPointMarkers=!0));return t},destroy:function(){var e=this.series.chart,t=e.hoverPoints,n;e.pointCount--,t&&(this.setState(),f(t,this),!t.length)&&(e.hoverPoints=null),this===e.hoverPoint&&this.onMouseOut();if(this.graphic||this.dataLabel)Gt(this),this.destroyElements();this.legendItem&&e.legend.destroyItem(this);for(n in this)this[n]=null},destroyElements:function(){for(var e="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),t,n=6;n--;)t=e[n],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(e){var t=this.series,n=t.tooltipOptions,r=p(n.valueDecimals,""),i=n.valuePrefix||"",s=n.valueSuffix||"";return Vt(t.pointArrayMap||["y"],function(t){t="{point."+t;if(i||s)e=e.replace(t+"}",i+t+"}"+s);e=e.replace(t+"}",t+":,."+r+"f}")}),w(e,{point:this,series:this.series})},firePointEvent:function(e,t,n){var r=this,i=this.series.options;(i.point.events[e]||r.options&&r.options.events&&r.options.events[e])&&this.importEvents(),e==="click"&&i.allowPointSelect&&(n=function(e){r.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),Yt(this,e,t,n)}};var En=function(){};En.prototype={isCartesian:!0,type:"line",pointClass:wn,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(t,n){var r=this,i,s,o=t.series,u=function(e,t){return p(e.options.index,e._i)-p(t.options.index,t._i)};r.chart=t,r.options=n=r.setOptions(n),r.linkedSeries=[],r.bindAxes(),e(r,{name:n.name,state:"",pointAttr:{},visible:n.visible!==!1,selected:n.selected===!0}),ot&&(n.animation=!1),s=n.events;for(i in s)Qt(r,i,s[i]);if(s&&s.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect)t.runTrackerClick=!0;r.getColor(),r.getSymbol(),Vt(r.parallelArrays,function(e){r[e+"Data"]=[]}),r.setData(n.data,!1),r.isCartesian&&(t.hasCartesianSeries=!0),o.push(r),r._i=o.length-1,x(o,u),this.yAxis&&x(this.yAxis.series,u),Vt(o,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)})},bindAxes:function(){var e=this,t=e.options,n=e.chart,r;Vt(e.axisTypes||[],function(i){Vt(n[i],function(n){r=n.options;if(t[i]===r.index||t[i]!==B&&t[i]===r.id||t[i]===B&&r.index===0)n.series.push(e),e[i]=n,n.isDirty=!0}),!e[i]&&e.optionalAxis!==i&&gt(18,!0)})},updateParallelArrays:function(e,t){var n=e.series,r=arguments;Vt(n.parallelArrays,typeof t=="number"?function(r){var i=r==="y"&&n.toYData?n.toYData(e):e[r];n[r+"Data"][t]=i}:function(e){Array.prototype[t].apply(n[e+"Data"],Array.prototype.slice.call(r,2))})},autoIncrement:function(){var e=this.options,t=this.xIncrement,t=p(t,e.pointStart,0);return this.pointInterval=p(this.pointInterval,e.pointInterval,1),this.xIncrement=t+this.pointInterval,t},getSegments:function(){var e=-1,t=[],n,r=this.points,i=r.length;if(i)if(this.options.connectNulls){for(n=i;n--;)r[n].y===null&&r.splice(n,1);r.length&&(t=[r])}else Vt(r,function(n,s){n.y===null?(s>e+1&&t.push(r.slice(e+1,s)),e=s):s===i-1&&t.push(r.slice(e+1,s+1))});this.segments=t},setOptions:function(e){var n=this.chart,r=n.options.plotOptions,n=n.userOptions||{},i=n.plotOptions||{},s=r[this.type];return this.userOptions=e,r=t(s,r.series,e),this.tooltipOptions=t(ht.tooltip,ht.plotOptions[this.type].tooltip,n.tooltip,i.series&&i.series.tooltip,i[this.type]&&i[this.type].tooltip,e.tooltip),s.marker===null&&delete r.marker,r},getCyclic:function(e,t,n){var r=this.userOptions,i="_"+e+"Index",s=e+"Counter";t||(l(r[i])?t=r[i]:(r[i]=t=this.chart[s]%n.length,this.chart[s]+=1),t=n[t]),this[e]=t},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||nn[this.type].color,this.chart.options.colors)},getSymbol:function(){var e=this.options.marker;this.getCyclic("symbol",e.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(e.radius=0)},drawLegendSymbol:Ut.drawLineMarker,setData:function(e,t,n,i){var u=this,a=u.points,f=a&&a.length||0,l,c=u.options,h=u.chart,d=null,v=u.xAxis,m=v&&!!v.categories,g=u.tooltipPoints,y=c.turboThreshold,b=this.xData,w=this.yData,E=(l=u.pointArrayMap)&&l.length,e=e||[];l=e.length,t=p(t,!0);if(i!==!1&&l&&f===l&&!u.cropped&&!u.hasGroupedData)Vt(e,function(e,t){a[t].update(e,!1,null,!1)});else{u.xIncrement=null,u.pointRange=m?1:c.pointRange,u.colorCounter=0,Vt(this.parallelArrays,function(e){u[e+"Data"].length=0});if(y&&l>y){for(n=0;d===null&&n<l;)d=e[n],n++;if(o(d)){m=p(c.pointStart,0),c=p(c.pointInterval,1);for(n=0;n<l;n++)b[n]=m,w[n]=e[n],m+=c;u.xIncrement=m}else if(s(d))if(E)for(n=0;n<l;n++)c=e[n],b[n]=c[0],w[n]=c.slice(1,E+1);else for(n=0;n<l;n++)c=e[n],b[n]=c[0],w[n]=c[1];else gt(12)}else for(n=0;n<l;n++)e[n]!==B&&(c={series:u},u.pointClass.prototype.applyOptions.apply(c,[e[n]]),u.updateParallelArrays(c,n),m&&c.name)&&(v.names[c.x]=c.name);r(w[0])&&gt(14,!0),u.data=[],u.options.data=e;for(n=f;n--;)a[n]&&a[n].destroy&&a[n].destroy();g&&(g.length=0),v&&(v.minRange=v.userMinRange),u.isDirty=u.isDirtyData=h.isDirtyBox=!0,n=!1}t&&h.redraw(n)},processData:function(e){var t=this.xData,n=this.yData,r=t.length,i;i=0;var s,o,u=this.xAxis,a,f=this.options;a=f.cropThreshold;var l=0,c=this.isCartesian,h,p;if(c&&!this.isDirty&&!u.isDirty&&!this.yAxis.isDirty&&!e)return!1;u&&(h=u.getExtremes(),p=h.min,h=h.max);if(c&&this.sorted&&(!a||r>a||this.forceCrop))if(t[r-1]<p||t[0]>h)t=[],n=[];else if(t[0]<p||t[r-1]>h)i=this.cropData(this.xData,this.yData,p,h),t=i.xData,n=i.yData,i=i.start,s=!0,l=t.length;for(a=t.length-1;a>=0;a--)r=t[a]-t[a-1],!s&&t[a]>p&&t[a]<h&&l++,r>0&&(o===B||r<o)?o=r:r<0&&this.requireSorting&&gt(15);this.cropped=s,this.cropStart=i,this.processedXData=t,this.processedYData=n,this.activePointCount=l,f.pointRange===null&&(this.pointRange=o||1),this.closestPointRange=o},cropData:function(e,t,n,r){var i=e.length,s=0,o=i,u=p(this.cropShoulder,1),a;for(a=0;a<i;a++)if(e[a]>=n){s=z(0,a-u);break}for(;a<i;a++)if(e[a]>r){o=a+u;break}return{xData:e.slice(s,o),yData:t.slice(s,o),start:s,end:o}},generatePoints:function(){var e=this.options.data,t=this.data,n,r=this.processedXData,i=this.processedYData,s=this.pointClass,o=r.length,u=this.cropStart||0,a,f=this.hasGroupedData,l,c=[],p;!t&&!f&&(t=[],t.length=e.length,t=this.data=t);for(p=0;p<o;p++)a=u+p,f?c[p]=(new s).init(this,[r[p]].concat(h(i[p]))):(t[a]?l=t[a]:e[a]!==B&&(t[a]=l=(new s).init(this,e[a],r[p])),c[p]=l),c[p].index=a;if(t&&(o!==(n=t.length)||f))for(p=0;p<n;p++)if(p===u&&!f&&(p+=o),t[p])t[p].destroyElements(),t[p].plotX=B;this.data=t,this.points=c},getExtremes:function(e){var t=this.yAxis,n=this.processedXData,r,i=[],s=0;r=this.xAxis.getExtremes();var o=r.min,u=r.max,a,f,l,c,e=e||this.stackedYData||this.processedYData;r=e.length;for(c=0;c<r;c++)if(f=n[c],l=e[c],a=l!==null&&l!==B&&(!t.isLog||l.length||l>0),f=this.getExtremesFromAll||this.cropped||(n[c+1]||f)>=o&&(n[c-1]||f)<=u,a&&f)if(a=l.length)for(;a--;)l[a]!==null&&(i[s++]=l[a]);else i[s++]=l;this.dataMin=p(void 0,T(i)),this.dataMax=p(void 0,N(i))},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var e=this.options,t=e.stacking,n=this.xAxis,r=n.categories,i=this.yAxis,s=this.points,u=s.length,a=!!this.modifyValue,f=e.pointPlacement,c=f==="between"||o(f),h=e.threshold,e=0;e<u;e++){var d=s[e],v=d.x,m=d.y,g=d.low,y=t&&i.stacks[(this.negStacks&&m<h?"-":"")+this.stackKey];i.isLog&&m<=0&&(d.y=m=null,gt(10)),d.plotX=n.translate(v,0,0,0,1,f,this.type==="flags"),t&&this.visible&&y&&y[v]&&(y=y[v],m=y.points[this.index+","+e],g=m[0],m=m[1],g===0&&(g=p(h,i.min)),i.isLog&&g<=0&&(g=null),d.total=d.stackTotal=y.total,d.percentage=y.total&&d.y/y.total*100,d.stackY=m,y.setOffset(this.pointXOffset||0,this.barW||0)),d.yBottom=l(g)?i.translate(g,0,1,0,1):null,a&&(m=this.modifyValue(m,d)),d.plotY=typeof m=="number"&&m!==Infinity?i.translate(m,0,1,0,1):B,d.clientX=c?n.translate(v,0,0,0,1):d.plotX,d.negative=d.y<(h||0),d.category=r&&r[d.x]!==B?r[d.x]:d.x}this.getSegments()},animate:function(t){var n=this.chart,r=n.renderer,s;s=this.options.animation;var o=this.clipBox||n.clipBox,u=n.inverted,a;s&&!i(s)&&(s=nn[this.type].animation),a=["_sharedClip",s.duration,s.easing,o.height].join(","),t?(t=n[a],s=n[a+"m"],t||(n[a]=t=r.clipRect(e(o,{width:0})),n[a+"m"]=s=r.clipRect(-99,u?-n.plotLeft:-n.plotTop,99,u?n.chartWidth:n.chartHeight)),this.group.clip(t),this.markerGroup.clip(s),this.sharedClipKey=a):((t=n[a])&&t.animate({width:n.plotSizeX},s),n[a+"m"]&&n[a+"m"].animate({width:n.plotSizeX+99},s),this.animate=null)},afterAnimate:function(){var e=this.chart,t=this.sharedClipKey,n=this.group,r=this.clipBox;n&&this.options.clip!==!1&&((!t||!r)&&n.clip(r?e.renderer.clipRect(r):e.clipRect),this.markerGroup.clip()),Yt(this,"afterAnimate"),setTimeout(function(){t&&e[t]&&(r||(e[t]=e[t].destroy()),e[t+"m"]&&(e[t+"m"]=e[t+"m"].destroy()))},100)},drawPoints:function(){var t,n=this.points,r=this.chart,i,s,o,u,a,f,l,c,h=this.options.marker,d=this.pointAttr[""],v,m,g,y=this.markerGroup,b=p(h.enabled,!this.requireSorting||this.activePointCount<.5*this.xAxis.len/h.radius);if(h.enabled!==!1||this._hasPointMarkers)for(o=n.length;o--;)(u=n[o],i=R(u.plotX),s=u.plotY,c=u.graphic,v=u.marker||{},m=!!u.marker,t=b&&v.enabled===B||v.enabled,g=r.isInsidePlot(q(i),s,r.inverted),t&&s!==B&&!isNaN(s)&&u.y!==null)?(t=u.pointAttr[u.selected?"select":""]||d,a=t.r,f=p(v.symbol,this.symbol),l=f.indexOf("url")===0,c)?c[g?"show":"hide"](!0).animate(e({x:i-a,y:s-a},c.symbolName?{width:2*a,height:2*a}:{})):g&&(a>0||l)&&(u.graphic=r.renderer.symbol(f,i-a,s-a,2*a,2*a,m?v:h).attr(t).add(y)):c&&(u.graphic=c.destroy())},convertAttribs:function(e,t,n,r){var i=this.pointAttrToOptions,s,o,u={},e=e||{},t=t||{},n=n||{},r=r||{};for(s in i)o=i[s],u[s]=p(e[o],t[s],n[s],r[s]);return u},getAttribs:function(){var t=this,n=t.options,r=nn[t.type].marker?n.marker:n,i=r.states,s=i.hover,o,u=t.color;o={stroke:u,fill:u};var a=t.points||[],f,c=[],h,p=t.pointAttrToOptions;h=t.hasPointSpecificOptions;var d=n.negativeColor,v=r.lineColor,m=r.fillColor;f=n.turboThreshold;var g;n.marker?(s.radius=s.radius||r.radius+s.radiusPlus,s.lineWidth=s.lineWidth||r.lineWidth+s.lineWidthPlus):s.color=s.color||un(s.color||u).brighten(s.brightness).get(),c[""]=t.convertAttribs(r,o),Vt(["hover","select"],function(e){c[e]=t.convertAttribs(i[e],c[""])}),t.pointAttr=c,u=a.length;if(!f||u<f||h)for(;u--;){f=a[u],(r=f.options&&f.options.marker||f.options)&&r.enabled===!1&&(r.radius=0),f.negative&&d&&(f.color=f.fillColor=d),h=n.colorByPoint||f.color;if(f.options)for(g in p)l(r[p[g]])&&(h=!0);h?(r=r||{},h=[],i=r.states||{},o=i.hover=i.hover||{},n.marker||(o.color=o.color||!f.options.color&&s.color||un(f.color).brighten(o.brightness||s.brightness).get()),o={color:f.color},m||(o.fillColor=f.color),v||(o.lineColor=f.color),h[""]=t.convertAttribs(e(o,r),c[""]),h.hover=t.convertAttribs(i.hover,c.hover,h[""]),h.select=t.convertAttribs(i.select,c.select,h[""])):h=c,f.pointAttr=h}},destroy:function(){var e=this,t=e.chart,n=/AppleWebKit\/533/.test(Q),r,i,s=e.data||[],o,u,a;Yt(e,"destroy"),Gt(e),Vt(e.axisTypes||[],function(t){if(a=e[t])f(a.series,e),a.isDirty=a.forceRedraw=!0}),e.legendItem&&e.chart.legend.destroyItem(e);for(i=s.length;i--;)(o=s[i])&&o.destroy&&o.destroy();e.points=null,clearTimeout(e.animationTimeout),Vt("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(t){e[t]&&(r=n&&t==="group"?"hide":"destroy",e[t][r]())}),t.hoverSeries===e&&(t.hoverSeries=null),f(t.series,e);for(u in e)delete e[u]},getSegmentPath:function(e){var t=this,n=[],r=t.options.step;return Vt(e,function(i,s){var o=i.plotX,u=i.plotY,a;t.getPointSpline?n.push.apply(n,t.getPointSpline(e,i,s)):(n.push(s?"L":"M"),r&&s&&(a=e[s-1],r==="right"?n.push(a.plotX,u):r==="center"?n.push((a.plotX+o)/2,a.plotY,(a.plotX+o)/2,u):n.push(o,a.plotY)),n.push(i.plotX,i.plotY))}),n},getGraphPath:function(){var e=this,t=[],n,r=[];return Vt(e.segments,function(i){n=e.getSegmentPath(i),i.length>1?t=t.concat(n):r.push(i[0])}),e.singlePoints=r,e.graphPath=t},drawGraph:function(){var e=this,t=this.options,n=[["graph",t.lineColor||this.color]],r=t.lineWidth,i=t.dashStyle,s=t.linecap!=="square",o=this.getGraphPath(),u=t.negativeColor;u&&n.push(["graphNeg",u]),Vt(n,function(n,u){var a=n[0],f=e[a];f?(tn(f),f.animate({d:o})):r&&o.length&&(f={stroke:n[1],"stroke-width":r,fill:St,zIndex:1},i?f.dashstyle=i:s&&(f["stroke-linecap"]=f["stroke-linejoin"]="round"),e[a]=e.chart.renderer.path(o).attr(f).add(e.group).shadow(!u&&t.shadow))})},clipNeg:function(){var e=this.options,t=this.chart,n=t.renderer,r=e.negativeColor||e.negativeFillColor,i,s=this.graph,o=this.area,u=this.posClip,a=this.negClip;i=t.chartWidth;var f=t.chartHeight,l=z(i,f),c=this.yAxis;r&&(s||o)&&(r=q(c.toPixels(e.threshold||0,!0)),r<0&&(l-=r),e={x:0,y:0,width:l,height:r},l={x:0,y:r,width:l,height:l},t.inverted&&(e.height=l.y=t.plotWidth-r,n.isVML&&(e={x:t.plotWidth-r-t.plotLeft,y:0,width:i,height:f},l={x:r+t.plotLeft-i,y:0,width:t.plotLeft+r,height:i})),c.reversed?(t=l,i=e):(t=e,i=l),u?(u.animate(t),a.animate(i)):(this.posClip=u=n.clipRect(t),this.negClip=a=n.clipRect(i),s&&this.graphNeg&&(s.clip(u),this.graphNeg.clip(a)),o&&(o.clip(u),this.areaNeg.clip(a))))},invertGroups:function(){function e(){var e={width:t.yAxis.len,height:t.xAxis.len};Vt(["group","markerGroup"],function(n){t[n]&&t[n].attr(e).invert()})}var t=this,n=t.chart;t.xAxis&&(Qt(n,"resize",e),Qt(t,"destroy",function(){Gt(n,"resize",e)}),e(),t.invertGroups=e)},plotGroup:function(e,t,n,r,i){var s=this[e],o=!s;return o&&(this[e]=s=this.chart.renderer.g(t).attr({visibility:n,zIndex:r||.1}).add(i)),s[o?"attr":"animate"](this.getPlotBox()),s},getPlotBox:function(){var e=this.chart,t=this.xAxis,n=this.yAxis;return e.inverted&&(t=n,n=this.xAxis),{translateX:t?t.left:e.plotLeft,translateY:n?n.top:e.plotTop,scaleX:1,scaleY:1}},render:function(){var e=this,t=e.chart,n,r=e.options,i=(n=r.animation)&&!!e.animate&&t.renderer.isSVG&&p(n.duration,500)||0,s=e.visible?"visible":"hidden",o=r.zIndex,u=e.hasRendered,a=t.seriesGroup;n=e.plotGroup("group","series",s,o,a),e.markerGroup=e.plotGroup("markerGroup","markers",s,o,a),i&&e.animate(!0),e.getAttribs(),n.inverted=e.isCartesian?t.inverted:!1,e.drawGraph&&(e.drawGraph(),e.clipNeg()),Vt(e.points,function(e){e.redraw&&e.redraw()}),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),t.inverted&&e.invertGroups(),r.clip!==!1&&!e.sharedClipKey&&!u&&n.clip(t.clipRect),i&&e.animate(),u||(i?e.animationTimeout=setTimeout(function(){e.afterAnimate()},i):e.afterAnimate()),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var e=this.chart,t=this.isDirtyData,n=this.group,r=this.xAxis,i=this.yAxis;n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:p(r&&r.left,e.plotLeft),translateY:p(i&&i.top,e.plotTop)})),this.translate(),this.setTooltipPoints&&this.setTooltipPoints(!0),this.render(),t&&Yt(this,"updatedData")}},H.prototype={destroy:function(){C(this,this.axis)},render:function(e){var t=this.options,n=t.format,n=n?w(n,this):t.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,null,null,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:"hidden"}).add(e)},setOffset:function(e,t){var n=this.axis,r=n.chart,i=r.inverted,s=this.isNegative,o=n.translate(n.usePercentage?100:this.total,0,0,0,1),n=n.translate(0),n=X(o-n),u=r.xAxis[0].translate(this.x)+e,a=r.plotHeight,s={x:i?s?o:o-n:u,y:i?a-u-t:s?a-o-n:a-o,width:i?n:t,height:i?t:n};if(i=this.label)i.align(this.alignOptions,null,s),s=i.alignAttr,i[this.options.crop===!1||r.isInsidePlot(s.x,s.y)?"show":"hide"](!0)}},D.prototype.buildStacks=function(){var e=this.series,t=p(this.options.reversedStacks,!0),n=e.length;if(!this.isXAxis){for(this.usePercentage=!1;n--;)e[t?n:e.length-n-1].setStackedPoints();if(this.usePercentage)for(n=0;n<e.length;n++)e[n].setPercentStacks()}},D.prototype.renderStackTotals=function(){var e=this.chart,t=e.renderer,n=this.stacks,r,i,s=this.stackTotalGroup;s||(this.stackTotalGroup=s=t.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),s.translate(e.plotLeft,e.plotTop);for(r in n)for(i in e=n[r],e)e[i].render(s)},En.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var e=this.processedXData,t=this.processedYData,n=[],r=t.length,i=this.options,s=i.threshold,o=i.stack,i=i.stacking,u=this.stackKey,a="-"+u,f=this.negStacks,l=this.yAxis,c=l.stacks,h=l.oldStacks,p,d,v,m,g,y;for(m=0;m<r;m++)g=e[m],y=t[m],v=this.index+","+m,d=(p=f&&y<s)?a:u,c[d]||(c[d]={}),c[d][g]||(h[d]&&h[d][g]?(c[d][g]=h[d][g],c[d][g].total=null):c[d][g]=new H(l,l.options.stackLabels,p,g,o)),d=c[d][g],d.points[v]=[d.cum||0],i==="percent"?(p=p?u:a,f&&c[p]&&c[p][g]?(p=c[p][g],d.total=p.total=z(p.total,d.total)+X(y)||0):d.total=L(d.total+(X(y)||0))):d.total=L(d.total+(y||0)),d.cum=(d.cum||0)+(y||0),d.points[v].push(d.cum),n[m]=d.cum;i==="percent"&&(l.usePercentage=!0),this.stackedYData=n,l.oldStacks={}}},En.prototype.setPercentStacks=function(){var e=this,t=e.stackKey,n=e.yAxis.stacks,r=e.processedXData;Vt([t,"-"+t],function(t){var i;for(var s=r.length,o,u;s--;)if(o=r[s],i=(u=n[t]&&n[t][o])&&u.points[e.index+","+s],o=i)u=u.total?100/u.total:0,o[0]=L(o[0]*u),o[1]=L(o[1]*u),e.stackedYData[s]=o[1]})},e(P.prototype,{addSeries:function(e,t,n){var r,i=this;return e&&(t=p(t,!0),Yt(i,"addSeries",{options:e},function(){r=i.initSeries(e),i.isDirtyLegend=!0,i.linkSeries(),t&&i.redraw(n)})),r},addAxis:function(e,n,r,i){var s=n?"xAxis":"yAxis",o=this.options;new D(this,t(e,{index:this[s].length,isX:n})),o[s]=h(o[s]||{}),o[s].push(e),p(r,!0)&&this.redraw(i)},showLoading:function(t){var n=this,r=n.options,i=n.loadingDiv,s=r.loading,o=function(){i&&d(i,{left:n.plotLeft+"px",top:n.plotTop+"px",width:n.plotWidth+"px",height:n.plotHeight+"px"})};i||(n.loadingDiv=i=v(Et,{className:"highcharts-loading"},e(s.style,{zIndex:10,display:St}),n.container),n.loadingSpan=v("span",null,s.labelStyle,i),Qt(n,"redraw",o)),n.loadingSpan.innerHTML=t||r.lang.loading,n.loadingShown||(d(i,{opacity:0,display:""}),en(i,{opacity:s.style.opacity},{duration:s.showDuration||0}),n.loadingShown=!0),o()},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&en(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){d(t,{display:St})}}),this.loadingShown=!1}}),e(wn.prototype,{update:function(e,t,n,r){function o(){u.applyOptions(e),i(e)&&!s(e)&&(u.redraw=function(){f&&(e&&e.marker&&e.marker.symbol?u.graphic=f.destroy():f.attr(u.pointAttr[u.state||""])),e&&e.dataLabels&&u.dataLabel&&(u.dataLabel=u.dataLabel.destroy()),u.redraw=null}),l=u.index,a.updateParallelArrays(u,l),h.data[l]=u.options,a.isDirty=a.isDirtyData=!0,!a.fixedBox&&a.hasCartesianSeries&&(c.isDirtyBox=!0),h.legendType==="point"&&c.legend.destroyItem(u),t&&c.redraw(n)}var u=this,a=u.series,f=u.graphic,l,c=a.chart,h=a.options,t=p(t,!0);r===!1?o():u.firePointEvent("update",{options:e},o)},remove:function(e,t){var n=this,r=n.series,i=r.points,s=r.chart,o,u=r.data;A(t,s),e=p(e,!0),n.firePointEvent("remove",null,function(){o=Xt(n,u),u.length===i.length&&i.splice(o,1),u.splice(o,1),r.options.data.splice(o,1),r.updateParallelArrays(n,"splice",o,1),n.destroy(),r.isDirty=!0,r.isDirtyData=!0,e&&s.redraw()})}}),e(En.prototype,{addPoint:function(e,t,n,r){var i=this.options,s=this.data,o=this.graph,u=this.area,a=this.chart,f=this.xAxis&&this.xAxis.names,l=o&&o.shift||0,c=i.data,h,d=this.xData;A(r,a),n&&Vt([o,u,this.graphNeg,this.areaNeg],function(e){e&&(e.shift=l+1)}),u&&(u.isArea=!0),t=p(t,!0),r={series:this},this.pointClass.prototype.applyOptions.apply(r,[e]),o=r.x,u=d.length;if(this.requireSorting&&o<d[u-1])for(h=!0;u&&d[u-1]>o;)u--;this.updateParallelArrays(r,"splice",u,0,0),this.updateParallelArrays(r,u),f&&r.name&&(f[o]=r.name),c.splice(u,0,e),h&&(this.data.splice(u,0,null),this.processData()),i.legendType==="point"&&this.generatePoints(),n&&(s[0]&&s[0].remove?s[0].remove(!1):(s.shift(),this.updateParallelArrays(r,"shift"),c.shift())),this.isDirtyData=this.isDirty=!0,t&&(this.getAttribs(),a.redraw())},remove:function(e,t){var n=this,r=n.chart,e=p(e,!0);n.isRemoving||(n.isRemoving=!0,Yt(n,"remove",null,function(){n.destroy(),r.isDirtyLegend=r.isDirtyBox=!0,r.linkSeries(),e&&r.redraw(t)})),n.isRemoving=!1},update:function(n,r){var i=this,s=this.chart,o=this.userOptions,u=this.type,a=It[u].prototype,f=["group","markerGroup","dataLabelsGroup"],l;Vt(f,function(e){f[e]=i[e],delete i[e]}),n=t(o,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},n),this.remove(!1);for(l in a)a.hasOwnProperty(l)&&(this[l]=B);e(this,It[n.type||u].prototype),Vt(f,function(e){i[e]=f[e]}),this.init(s,n),s.linkSeries(),p(r,!0)&&s.redraw(!1)}}),e(D.prototype,{update:function(n,r){var i=this.chart,n=i.options[this.coll][this.options.index]=t(this.userOptions,n);this.destroy(!0),this._addedPlotLB=B,this.init(i,e(n,{events:B})),i.isDirtyBox=!0,p(r,!0)&&i.redraw()},remove:function(e){for(var t=this.chart,n=this.coll,r=this.series,i=r.length;i--;)r[i]&&r[i].remove(!1);f(t.axes,this),f(t[n],this),t.options[n].splice(this.options.index,1),Vt(t[n],function(e,t){e.options.index=t}),this.destroy(),t.isDirtyBox=!0,p(e,!0)&&t.redraw()},setTitle:function(e,t){this.update({title:e},t)},setCategories:function(e,t){this.update({categories:e},t)}}),ln=m(En),It.line=ln,nn.area=t(Rt,{threshold:0});var Sn=m(En,{type:"area",getSegments:function(){var e=this,t=[],n=[],r=[],i=this.xAxis,s=this.yAxis,o=s.stacks[this.stackKey],u={},a,f,l=this.points,c=this.options.connectNulls,h,p;if(this.options.stacking&&!this.cropped){for(h=0;h<l.length;h++)u[l[h].x]=l[h];for(p in o)o[p].total!==null&&r.push(+p);r.sort(function(e,t){return e-t}),Vt(r,function(t){var r=0,l;if(!c||u[t]&&u[t].y!==null)if(u[t])n.push(u[t]);else{for(h=e.index;h<=s.series.length;h++)if(l=o[t].points[h+","+t]){r=l[1];break}a=i.translate(t),f=s.toPixels(r,!0),n.push({y:null,plotX:a,clientX:a,plotY:f,yBottom:f,onMouseOver:yt})}}),n.length&&t.push(n)}else En.prototype.getSegments.call(this),t=this.segments;this.segments=t},getSegmentPath:function(e){var t=En.prototype.getSegmentPath.call(this,e),n=[].concat(t),r,i=this.options;r=t.length;var s=this.yAxis.getThreshold(i.threshold),o;r===3&&n.push("L",t[1],t[2]);if(i.stacking&&!this.closedStacks)for(r=e.length-1;r>=0;r--)o=p(e[r].yBottom,s),r<e.length-1&&i.step&&n.push(e[r+1].plotX,o),n.push(e[r].plotX,o);else this.closeSegment(n,e,s);return this.areaPath=this.areaPath.concat(n),t},closeSegment:function(e,t,n){e.push("L",t[t.length-1].plotX,n,"L",t[0].plotX,n)},drawGraph:function(){this.areaPath=[],En.prototype.drawGraph.apply(this);var e=this,t=this.areaPath,n=this.options,r=n.negativeColor,i=n.negativeFillColor,s=[["area",this.color,n.fillColor]];(r||i)&&s.push(["areaNeg",r,i]),Vt(s,function(r){var i=r[0],s=e[i];s?s.animate({d:t}):e[i]=e.chart.renderer.path(t).attr({fill:p(r[2],un(r[1]).setOpacity(p(n.fillOpacity,.75)).get()),zIndex:0}).add(e.group)})},drawLegendSymbol:Ut.drawRectangle});It.area=Sn,nn.spline=t(Rt),ln=m(En,{type:"spline",getPointSpline:function(e,t,n){var r=t.plotX,i=t.plotY,s=e[n-1],o=e[n+1],u,a,f,l;if(s&&o){e=s.plotY,f=o.plotX;var o=o.plotY,c;u=(1.5*r+s.plotX)/2.5,a=(1.5*i+e)/2.5,f=(1.5*r+f)/2.5,l=(1.5*i+o)/2.5,c=(l-a)*(f-r)/(f-u)+i-l,a+=c,l+=c,a>e&&a>i?(a=z(e,i),l=2*i-a):a<e&&a<i&&(a=W(e,i),l=2*i-a),l>o&&l>i?(l=z(o,i),a=2*i-l):l<o&&l<i&&(l=W(o,i),a=2*i-l),t.rightContX=f,t.rightContY=l}return n?(t=["C",s.rightContX||s.plotX,s.rightContY||s.plotY,u||r,a||i,r,i],s.rightContX=s.rightContY=null):t=["M",r,i],t}}),It.spline=ln,nn.areaspline=t(nn.area),Sn=Sn.prototype,ln=m(ln,{type:"areaspline",closedStacks:!0,getSegmentPath:Sn.getSegmentPath,closeSegment:Sn.closeSegment,drawGraph:Sn.drawGraph,drawLegendSymbol:Ut.drawRectangle}),It.areaspline=ln,nn.column=t(Rt,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0}),ln=m(En,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){En.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&Vt(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var e=this,t=e.options,n=e.xAxis,r=e.yAxis,i=n.reversed,s,o={},u,a=0;t.grouping===!1?a=1:Vt(e.chart.series,function(t){var n=t.options,i=t.yAxis;t.type===e.type&&t.visible&&r.len===i.len&&r.pos===i.pos&&(n.stacking?(s=t.stackKey,o[s]===B&&(o[s]=a++),u=o[s]):n.grouping!==!1&&(u=a++),t.columnIndex=u)});var n=W(X(n.transA)*(n.ordinalSlope||t.pointRange||n.closestPointRange||n.tickInterval||1),n.len),f=n*t.groupPadding,c=(n-2*f)/a,h=t.pointWidth,t=l(h)?(c-h)/2:c*t.pointPadding,h=p(h,c-2*t);return e.columnMetrics={width:h,offset:t+(f+((i?a-(e.columnIndex||0):e.columnIndex)||0)*c-n/2)*(i?-1:1)}},translate:function(){var e=this,t=e.chart,n=e.options,r=e.borderWidth=p(n.borderWidth,e.activePointCount>.5*e.xAxis.len?0:1),i=e.yAxis,s=e.translatedThreshold=i.getThreshold(n.threshold),o=p(n.minPointLength,5),u=e.getColumnMetrics(),a=u.width,f=e.barW=z(a,1+2*r),l=e.pointXOffset=u.offset,c=-(r%2?.5:0),h=r%2?.5:1;t.renderer.isVML&&t.inverted&&(h+=1),n.pointPadding&&(f=U(f)),En.prototype.translate.apply(e),Vt(e.points,function(n){var r=p(n.yBottom,s),u=W(z(-999-r,n.plotY),i.len+999+r),d=n.plotX+l,v=f,m=W(u,r),g;g=z(u,r)-m,X(g)<o&&o&&(g=o,m=q(X(m-s)>o?r-o:s-(i.translate(n.y,0,1,0,1)<=s?o:0))),n.barX=d,n.pointWidth=a,n.tooltipPos=t.inverted?[i.len-u,e.xAxis.len-d-v/2]:[d+v/2,u+i.pos-t.plotTop],v=q(d+v)+c,d=q(d)+c,v-=d,r=X(m)<.5,g=q(m+g)+h,m=q(m)+h,g-=m,r&&(m-=1,g+=1),n.shapeType="rect",n.shapeArgs={x:d,y:m,width:v,height:g}})},getSymbol:yt,drawLegendSymbol:Ut.drawRectangle,drawGraph:yt,drawPoints:function(){var e=this,n=this.chart,r=e.options,i=n.renderer,s=r.animationLimit||250,o,u;Vt(e.points,function(a){var f=a.plotY,c=a.graphic;f!==B&&!isNaN(f)&&a.y!==null?(o=a.shapeArgs,f=l(e.borderWidth)?{"stroke-width":e.borderWidth}:{},u=a.pointAttr[a.selected?"select":""]||e.pointAttr[""],c?(tn(c),c.attr(f)[n.pointCount<s?"animate":"attr"](t(o))):a.graphic=i[a.shapeType](o).attr(u).attr(f).add(e.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius)):c&&(a.graphic=c.destroy())})},animate:function(e){var t=this.yAxis,n=this.options,r=this.chart.inverted,i={};it&&(e?(i.scaleY=.001,e=W(t.pos+t.len,z(t.pos,t.toPixels(n.threshold))),r?i.translateX=e-t.len:i.translateY=e,this.group.attr(i)):(i.scaleY=1,i[r?"translateX":"translateY"]=t.pos,this.group.animate(i,this.options.animation),this.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&Vt(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),En.prototype.remove.apply(e,arguments)}}),It.column=ln,nn.bar=t(nn.column),Sn=m(ln,{type:"bar",inverted:!0}),It.bar=Sn,nn.scatter=t(Rt,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1}),Sn=m(En,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&En.prototype.drawGraph.call(this)}}),It.scatter=Sn,nn.pie=t(Rt,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}}),Rt={type:"pie",isCartesian:!1,pointClass:m(wn,{init:function(){wn.prototype.init.apply(this,arguments);var t=this,n;return t.y<0&&(t.y=null),e(t,{visible:t.visible!==!1,name:p(t.name,"Slice")}),n=function(e){t.slice(e.type==="select")},Qt(t,"select",n),Qt(t,"unselect",n),t},setVisible:function(e){var t=this,n=t.series,r=n.chart;t.visible=t.options.visible=e=e===B?!t.visible:e,n.options.data[Xt(t,n.data)]=t.options,Vt(["graphic","dataLabel","connector","shadowGroup"],function(n){t[n]&&t[n][e?"show":"hide"](!0)}),t.legendItem&&r.legend.colorizeItem(t,e),!n.isDirty&&n.options.ignoreHiddenPoint&&(n.isDirty=!0,r.redraw())},slice:function(e,t,n){var r=this.series;A(n,r.chart),p(t,!0),this.sliced=this.options.sliced=e=l(e)?e:!this.sliced,r.options.data[Xt(this,r.data)]=this.options,e=e?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(e),this.shadowGroup&&this.shadowGroup.animate(e)},haloPath:function(e){var t=this.shapeArgs,n=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(n.plotLeft+t.x,n.plotTop+t.y,t.r+e,t.r+e,{innerR:this.shapeArgs.r,start:t.start,end:t.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:yt,animate:function(e){var t=this,n=t.points,r=t.startAngleRad;e||(Vt(n,function(e){var n=e.graphic,e=e.shapeArgs;n&&(n.attr({r:t.center[3]/2,start:r,end:r}),n.animate({r:e.r,start:e.start,end:e.end},t.options.animation))}),t.animate=null)},setData:function(e,t,n,r){En.prototype.setData.call(this,e,!1,n,r),this.processData(),this.generatePoints(),p(t,!0)&&this.chart.redraw(n)},generatePoints:function(){var e,t=0,n,r,i,s=this.options.ignoreHiddenPoint;En.prototype.generatePoints.call(this),n=this.points,r=n.length;for(e=0;e<r;e++)i=n[e],t+=s&&!i.visible?0:i.y;this.total=t;for(e=0;e<r;e++)i=n[e],i.percentage=t>0?i.y/t*100:0,i.total=t},translate:function(e){this.generatePoints();var t=0,n=this.options,r=n.slicedOffset,i=r+n.borderWidth,s,o,u,a=n.startAngle||0,f=this.startAngleRad=J/180*(a-90),a=(this.endAngleRad=J/180*(p(n.endAngle,a+360)-90))-f,l=this.points,c=n.dataLabels.distance,n=n.ignoreHiddenPoint,h,d=l.length,v;e||(this.center=e=this.getCenter()),this.getX=function(t,n){return u=I.asin(W((t-e[1])/(e[2]/2+c),1)),e[0]+(n?-1:1)*V(u)*(e[2]/2+c)};for(h=0;h<d;h++){v=l[h],s=f+t*a;if(!n||v.visible)t+=v.percentage/100;o=f+t*a,v.shapeType="arc",v.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:q(s*1e3)/1e3,end:q(o*1e3)/1e3},u=(o+s)/2,u>1.5*J?u-=2*J:u<-J/2&&(u+=2*J),v.slicedTranslation={translateX:q(V(u)*r),translateY:q($(u)*r)},s=V(u)*e[2]/2,o=$(u)*e[2]/2,v.tooltipPos=[e[0]+s*.7,e[1]+o*.7],v.half=u<-J/2||u>J/2?1:0,v.angle=u,i=W(i,c/2),v.labelPos=[e[0]+s+V(u)*c,e[1]+o+$(u)*c,e[0]+s+V(u)*i,e[1]+o+$(u)*i,e[0]+s,e[1]+o,c<0?"center":v.half?"right":"left",u]}},drawGraph:null,drawPoints:function(){var t=this,n=t.chart.renderer,r,i,s=t.options.shadow,o,u;s&&!t.shadowGroup&&(t.shadowGroup=n.g("shadow").add(t.group)),Vt(t.points,function(a){i=a.graphic,u=a.shapeArgs,o=a.shadowGroup,s&&!o&&(o=a.shadowGroup=n.g("shadow").add(t.shadowGroup)),r=a.sliced?a.slicedTranslation:{translateX:0,translateY:0},o&&o.attr(r),i?i.animate(e(u,r)):a.graphic=i=n[a.shapeType](u).setRadialReference(t.center).attr(a.pointAttr[a.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(r).add(t.group).shadow(s,o),a.visible!==void 0&&a.setVisible(a.visible)})},sortByAngle:function(e,t){e.sort(function(e,n){return e.angle!==void 0&&(n.angle-e.angle)*t})},drawLegendSymbol:Ut.drawRectangle,getCenter:fn.getCenter,getSymbol:yt},Rt=m(En,Rt),It.pie=Rt,En.prototype.drawDataLabels=function(){var n=this,r=n.options,i=r.cursor,s=r.dataLabels,o=n.points,u,a,f=n.hasRendered||0,c,h;if(s.enabled||n._hasPointLabels)n.dlProcessOptions&&n.dlProcessOptions(s),h=n.plotGroup("dataLabelsGroup","data-labels",s.defer?"hidden":"visible",s.zIndex||6),p(s.defer,!0)&&(h.attr({opacity:+f}),f||Qt(n,"afterAnimate",function(){n.visible&&h.show(),h[r.animation?"animate":"attr"]({opacity:1},{duration:200})})),a=s,Vt(o,function(r){var o,f=r.dataLabel,d,v,m=r.connector,g=!0;u=r.options&&r.options.dataLabels,o=p(u&&u.enabled,a.enabled);if(f&&!o)r.dataLabel=f.destroy();else if(o){s=t(a,u),o=s.rotation,d=r.getLabelConfig(),c=s.format?w(s.format,d):s.formatter.call(d,s),s.style.color=p(s.color,s.style.color,n.color,"black");if(f){if(l(c))f.attr({text:c}),g=!1;else if(r.dataLabel=f=f.destroy(),m)r.connector=m.destroy()}else if(l(c)){f={fill:s.backgroundColor,stroke:s.borderColor,"stroke-width":s.borderWidth,r:s.borderRadius||0,rotation:o,padding:s.padding,zIndex:1};for(v in f)f[v]===B&&delete f[v];f=r.dataLabel=n.chart.renderer[o?"text":"label"](c,0,-999,null,null,null,s.useHTML).attr(f).css(e(s.style,i&&{cursor:i})).add(h).shadow(s.shadow)}f&&n.alignDataLabel(r,f,s,null,g)}})},En.prototype.alignDataLabel=function(t,n,r,i,s){var o=this.chart,u=o.inverted,a=p(t.plotX,-999),f=p(t.plotY,-999),l=n.getBBox();if(t=this.visible&&(t.series.forceDL||o.isInsidePlot(a,q(f),u)||i&&o.isInsidePlot(a,u?i.x+1:i.y+i.height-1,u)))i=e({x:u?o.plotWidth-f:a,y:q(u?o.plotHeight-a:f),width:0,height:0},i),e(r,{width:l.width,height:l.height}),r.rotation?n[s?"attr":"animate"]({x:i.x+r.x+i.width/2,y:i.y+r.y+i.height/2}).attr({align:r.align}):(n.align(r,null,i),u=n.alignAttr,p(r.overflow,"justify")==="justify"?this.justifyDataLabel(n,r,u,l,i,s):p(r.crop,!0)&&(t=o.isInsidePlot(u.x,u.y)&&o.isInsidePlot(u.x+l.width,u.y+l.height)));t||(n.attr({y:-999}),n.placed=!1)},En.prototype.justifyDataLabel=function(e,t,n,r,i,s){var o=this.chart,u=t.align,a=t.verticalAlign,f,l;f=n.x,f<0&&(u==="right"?t.align="left":t.x=-f,l=!0),f=n.x+r.width,f>o.plotWidth&&(u==="left"?t.align="right":t.x=o.plotWidth-f,l=!0),f=n.y,f<0&&(a==="bottom"?t.verticalAlign="top":t.y=-f,l=!0),f=n.y+r.height,f>o.plotHeight&&(a==="top"?t.verticalAlign="bottom":t.y=o.plotHeight-f,l=!0),l&&(e.placed=!s,e.align(t,null,i))},It.pie&&(It.pie.prototype.drawDataLabels=function(){var e=this,t=e.data,n,r=e.chart,i=e.options.dataLabels,s=p(i.connectorPadding,10),o=p(i.connectorWidth,1),u=r.plotWidth,a=r.plotHeight,f,l,c=p(i.softConnector,!0),h=i.distance,d=e.center,v=d[2]/2,m=d[1],g=h>0,y,b,w,E=[[],[]],S,x,T,C,k,L=[0,0,0,0],A=function(e,t){return t.y-e.y};if(e.visible&&(i.enabled||e._hasPointLabels)){En.prototype.drawDataLabels.apply(e),Vt(t,function(e){e.dataLabel&&e.visible&&E[e.half].push(e)});for(C=2;C--;){var O=[],M=[],_=E[C],D=_.length,P;if(D){e.sortByAngle(_,C-.5);for(k=t=0;!t&&_[k];)t=_[k]&&_[k].dataLabel&&(_[k].dataLabel.getBBox().height||21),k++;if(h>0){b=W(m+v+h,r.plotHeight);for(k=z(0,m-v-h);k<=b;k+=t)O.push(k);b=O.length;if(D>b){n=[].concat(_),n.sort(A);for(k=D;k--;)n[k].rank=k;for(k=D;k--;)_[k].rank>=b&&_.splice(k,1);D=_.length}for(k=0;k<D;k++){n=_[k],w=n.labelPos,n=9999;var H,B;for(B=0;B<b;B++)H=X(O[B]-w[1]),H<n&&(n=H,P=B);if(P<k&&O[k]!==null)P=k;else for(b<D-k+P&&O[k]!==null&&(P=b-D+k);O[P]===null;)P++;M.push({i:P,y:O[P]}),O[P]=null}M.sort(A)}for(k=0;k<D;k++){n=_[k],w=n.labelPos,y=n.dataLabel,T=n.visible===!1?"hidden":"visible",n=w[1];if(h>0){if(b=M.pop(),P=b.i,x=b.y,n>x&&O[P+1]!==null||n<x&&O[P-1]!==null)x=W(z(0,n),r.plotHeight)}else x=n;S=i.justify?d[0]+(C?-1:1)*(v+h):e.getX(x===m-v-h||x===m+v+h?n:x,C),y._attr={visibility:T,align:w[6]},y._pos={x:S+i.x+({left:s,right:-s}[w[6]]||0),y:x+i.y-10},y.connX=S,y.connY=x,this.options.size===null&&(b=y.width,S-b<s?L[3]=z(q(b-S+s),L[3]):S+b>u-s&&(L[1]=z(q(S+b-u+s),L[1])),x-t/2<0?L[0]=z(q(-x+t/2),L[0]):x+t/2>a&&(L[2]=z(q(x+t/2-a),L[2])))}}}if(N(L)===0||this.verifyDataLabelOverflow(L))this.placeDataLabels(),g&&o&&Vt(this.points,function(t){f=t.connector,w=t.labelPos,(y=t.dataLabel)&&y._pos?(T=y._attr.visibility,S=y.connX,x=y.connY,l=c?["M",S+(w[6]==="left"?5:-5),x,"C",S,x,2*w[2]-w[4],2*w[3]-w[5],w[2],w[3],"L",w[4],w[5]]:["M",S+(w[6]==="left"?5:-5),x,"L",w[2],w[3],"L",w[4],w[5]],f?(f.animate({d:l}),f.attr("visibility",T)):t.connector=f=e.chart.renderer.path(l).attr({"stroke-width":o,stroke:i.connectorColor||t.color||"#606060",visibility:T}).add(e.dataLabelsGroup)):f&&(t.connector=f.destroy())})}},It.pie.prototype.placeDataLabels=function(){Vt(this.points,function(e){var e=e.dataLabel,t;e&&((t=e._pos)?(e.attr(e._attr),e[e.moved?"animate":"attr"](t),e.moved=!0):e&&e.attr({y:-999}))})},It.pie.prototype.alignDataLabel=yt,It.pie.prototype.verifyDataLabelOverflow=function(e){var t=this.center,n=this.options,r=n.center,i=n=n.minSize||80,s;return r[0]!==null?i=z(t[2]-z(e[1],e[3]),n):(i=z(t[2]-e[1]-e[3],n),t[0]+=(e[3]-e[1])/2),r[1]!==null?i=z(W(i,t[2]-z(e[0],e[2])),n):(i=z(W(i,t[2]-e[0]-e[2]),n),t[1]+=(e[0]-e[2])/2),i<t[2]?(t[2]=i,this.translate(t),Vt(this.points,function(e){e.dataLabel&&(e.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):s=!0,s}),It.column&&(It.column.prototype.alignDataLabel=function(e,n,r,i,s){var o=this.chart,u=o.inverted,a=e.dlBox||e.shapeArgs,f=e.below||e.plotY>p(this.translatedThreshold,o.plotSizeY),l=p(r.inside,!!this.options.stacking);a&&(i=t(a),u&&(i={x:o.plotWidth-i.y-i.height,y:o.plotHeight-i.x-i.width,width:i.height,height:i.width}),!l)&&(u?(i.x+=f?0:i.width,i.width=0):(i.y+=f?i.height:0,i.height=0)),r.align=p(r.align,!u||l?"center":f?"right":"left"),r.verticalAlign=p(r.verticalAlign,u||l?"middle":f?"top":"bottom"),En.prototype.alignDataLabel.call(this,e,n,r,i,s)}),Rt=qt.TrackerMixin={drawTrackerPoint:function(){var e=this,t=e.chart,n=t.pointer,r=e.options.cursor,i=r&&{cursor:r},s=function(n){var r=n.target,i;t.hoverSeries!==e&&e.onMouseOver();for(;r&&!i;)i=r.point,r=r.parentNode;i!==B&&i!==t.hoverPoint&&i.onMouseOver(n)};Vt(e.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.element.point=e)}),e._hasTracking||(Vt(e.trackerGroups,function(t){e[t]&&(e[t].addClass("highcharts-tracker").on("mouseover",s).on("mouseout",function(e){n.onTrackerMouseOut(e)}).css(i),at)&&e[t].on("touchstart",s)}),e._hasTracking=!0)},drawTrackerGraph:function(){var e=this,t=e.options,n=t.trackByArea,r=[].concat(n?e.areaPath:e.graphPath),i=r.length,s=e.chart,o=s.pointer,u=s.renderer,a=s.options.tooltip.snap,f=e.tracker,l=t.cursor,c=l&&{cursor:l},l=e.singlePoints,h,p=function(){s.hoverSeries!==e&&e.onMouseOver()},d="rgba(192,192,192,"+(it?1e-4:.002)+")";if(i&&!n)for(h=i+1;h--;)r[h]==="M"&&r.splice(h+1,0,r[h+1]-a,r[h+2],"L"),(h&&r[h]==="M"||h===i)&&r.splice(h,0,"L",r[h-2]+a,r[h-1]);for(h=0;h<l.length;h++)i=l[h],r.push("M",i.plotX-a,i.plotY,"L",i.plotX+a,i.plotY);f?f.attr({d:r}):(e.tracker=u.path(r).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:d,fill:n?d:St,"stroke-width":t.lineWidth+(n?0:2*a),zIndex:2}).add(e.group),Vt([e.tracker,e.markerGroup],function(e){e.addClass("highcharts-tracker").on("mouseover",p).on("mouseout",function(e){o.onTrackerMouseOut(e)}).css(c),at&&e.on("touchstart",p)}))}},It.column&&(ln.prototype.drawTracker=Rt.drawTrackerPoint),It.pie&&(It.pie.prototype.drawTracker=Rt.drawTrackerPoint),It.scatter&&(Sn.prototype.drawTracker=Rt.drawTrackerPoint),e(bn.prototype,{setItemEvents:function(e,t,n,r,i){var s=this;(n?t:e.legendGroup).on("mouseover",function(){e.setState("hover"),t.css(s.options.itemHoverStyle)}).on("mouseout",function(){t.css(e.visible?r:i),e.setState()}).on("click",function(t){var n=function(){e.setVisible()},t={browserEvent:t};e.firePointEvent?e.firePointEvent("legendItemClick",t,n):Yt(e,"legendItemClick",t,n)})},createCheckboxForItem:function(e){e.checkbox=v("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container),Qt(e.checkbox,"click",function(t){Yt(e,"checkboxClick",{checked:t.target.checked},function(){e.select()})})}}),ht.legend.itemStyle.cursor="pointer",e(P.prototype,{showResetZoom:function(){var e=this,t=ht.lang,n=e.options.chart.resetZoomButton,r=n.theme,i=r.states,s=n.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},r,i&&i.hover).attr({align:n.position.align,title:t.resetZoomTitle}).add().align(n.position,!1,s)},zoomOut:function(){var e=this;Yt(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var t,n=this.pointer,r=!1,s;!e||e.resetSelection?Vt(this.axes,function(e){t=e.zoom()}):Vt(e.xAxis.concat(e.yAxis),function(e){var i=e.axis,s=i.isXAxis;if(n[s?"zoomX":"zoomY"]||n[s?"pinchX":"pinchY"])t=i.zoom(e.min,e.max),i.displayBtn&&(r=!0)}),s=this.resetZoomButton,r&&!s?this.showResetZoom():!r&&i(s)&&(this.resetZoomButton=s.destroy()),t&&this.redraw(p(this.options.chart.animation,e&&e.animation,this.pointCount<100))},pan:function(e,t){var n=this,r=n.hoverPoints,i;r&&Vt(r,function(e){e.setState()}),Vt(t==="xy"?[1,0]:[1],function(t){var r=e[t?"chartX":"chartY"],s=n[t?"xAxis":"yAxis"][0],o=n[t?"mouseDownX":"mouseDownY"],u=(s.pointRange||0)/2,a=s.getExtremes(),f=s.toValue(o-r,!0)+u,o=s.toValue(o+n[t?"plotWidth":"plotHeight"]-r,!0)-u;s.series.length&&f>W(a.dataMin,a.min)&&o<z(a.dataMax,a.max)&&(s.setExtremes(f,o,!1,!1,{trigger:"pan"}),i=!0),n[t?"mouseDownX":"mouseDownY"]=r}),i&&n.redraw(!1),d(n.container,{cursor:"move"})}}),e(wn.prototype,{select:function(e,t){var n=this,r=n.series,i=r.chart,e=p(e,!n.selected);n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=n.options.selected=e,r.options.data[Xt(n,r.data)]=n.options,n.setState(e&&"select"),t||Vt(i.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=e.options.selected=!1,r.options.data[Xt(e,r.data)]=e.options,e.setState(""),e.firePointEvent("unselect"))})})},onMouseOver:function(e){var t=this.series,n=t.chart,r=n.tooltip,i=n.hoverPoint;i&&i!==this&&i.onMouseOut(),this.firePointEvent("mouseOver"),r&&(!r.shared||t.noSharedTooltip)&&r.refresh(this,e),this.setState("hover"),n.hoverPoint=this},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;this.firePointEvent("mouseOut");if(!t||Xt(this,t)===-1)this.setState(),e.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var e=t(this.series.options.point,this.options).events,n;this.events=e;for(n in e)Qt(this,n,e[n]);this.hasImportedEvents=!0}},setState:function(n,r){var i=this.plotX,s=this.plotY,o=this.series,u=o.options.states,a=nn[o.type].marker&&o.options.marker,f=a&&!a.enabled,l=a&&a.states[n],c=l&&l.enabled===!1,h=o.stateMarkerGraphic,p=this.marker||{},d=o.chart,v=o.halo,m,n=n||"";m=this.pointAttr[n]||o.pointAttr[n],n===this.state&&!r||this.selected&&n!=="select"||u[n]&&u[n].enabled===!1||n&&(c||f&&l.enabled===!1)||n&&p.states&&p.states[n]&&p.states[n].enabled===!1||(this.graphic?(a=a&&this.graphic.symbolName&&m.r,this.graphic.attr(t(m,a?{x:i-a,y:s-a,width:2*a,height:2*a}:{})),h&&h.hide()):(n&&l&&((a=l.radius,p=p.symbol||o.symbol,h&&h.currentSymbol!==p&&(h=h.destroy()),h)?h[r?"animate":"attr"]({x:i-a,y:s-a}):p&&(o.stateMarkerGraphic=h=d.renderer.symbol(p,i-a,s-a,2*a,2*a).attr(m).add(o.markerGroup),h.currentSymbol=p)),h&&h[n&&d.isInsidePlot(i,s,d.inverted)?"show":"hide"]()),(i=u[n]&&u[n].halo)&&i.size?(v||(o.halo=v=d.renderer.path().add(o.seriesGroup)),v.attr(e({fill:un(this.color||o.color).setOpacity(i.opacity).get()},i.attributes))[r?"animate":"attr"]({d:this.haloPath(i.size)})):v&&v.attr({d:[]}),this.state=n)},haloPath:function(e){var t=this.series,n=t.chart,r=t.getPlotBox(),i=n.inverted;return n.renderer.symbols.circle(r.translateX+(i?t.yAxis.len-this.plotY:this.plotX)-e,r.translateY+(i?t.xAxis.len-this.plotX:this.plotY)-e,e*2,e*2)}}),e(En.prototype,{onMouseOver:function(){var e=this.chart,t=e.hoverSeries;t&&t!==this&&t.onMouseOut(),this.options.events.mouseOver&&Yt(this,"mouseOver"),this.setState("hover"),e.hoverSeries=this},onMouseOut:function(){var e=this.options,t=this.chart,n=t.tooltip,r=t.hoverPoint;r&&r.onMouseOut(),this&&e.events.mouseOut&&Yt(this,"mouseOut"),n&&!e.stickyTracking&&(!n.shared||this.noSharedTooltip)&&n.hide(),this.setState(),t.hoverSeries=null},setState:function(e){var t=this.options,n=this.graph,r=this.graphNeg,i=t.states,t=t.lineWidth,e=e||"";this.state!==e&&(this.state=e,i[e]&&i[e].enabled===!1||(e&&(t=i[e].lineWidth||t+(i[e].lineWidthPlus||0)),n&&!n.dashstyle&&(e={"stroke-width":t},n.attr(e),r&&r.attr(e))))},setVisible:function(e,t){var n=this,r=n.chart,i=n.legendItem,s,o=r.options.chart.ignoreHiddenSeries,u=n.visible;s=(n.visible=e=n.userOptions.visible=e===B?!u:e)?"show":"hide",Vt(["group","dataLabelsGroup","markerGroup","tracker"],function(e){n[e]&&n[e][s]()}),r.hoverSeries===n&&n.onMouseOut(),i&&r.legend.colorizeItem(n,e),n.isDirty=!0,n.options.stacking&&Vt(r.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),Vt(n.linkedSeries,function(t){t.setVisible(e,!1)}),o&&(r.isDirtyBox=!0),t!==!1&&r.redraw(),Yt(n,s)},setTooltipPoints:function(e){var t=[],n,r,i=this.xAxis,s=i&&i.getExtremes(),o=i?i.tooltipLen||i.len:this.chart.plotSizeX,u,a,f=[];if(this.options.enableMouseTracking!==!1&&!this.singularTooltips){e&&(this.tooltipPoints=null),Vt(this.segments||this.points,function(e){t=t.concat(e)}),i&&i.reversed&&(t=t.reverse()),this.orderTooltipPoints&&this.orderTooltipPoints(t),e=t.length;for(a=0;a<e;a++)if(i=t[a],n=i.x,n>=s.min&&n<=s.max){u=t[a+1],n=r===B?0:r+1;for(r=t[a+1]?W(z(0,R((i.clientX+(u?u.wrappedClientX||u.clientX:o))/2)),o):o;n>=0&&n<=r;)f[n++]=i}this.tooltipPoints=f}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){this.selected=e=e===B?!this.selected:e,this.checkbox&&(this.checkbox.checked=e),Yt(this,e?"select":"unselect")},drawTracker:Rt.drawTrackerGraph}),e(qt,{Axis:D,Chart:P,Color:un,Point:wn,Tick:_,Renderer:ut,Series:En,SVGElement:M,SVGRenderer:an,arrayMin:T,arrayMax:N,charts:bt,dateFormat:pt,format:w,pathAnim:vt,getOptions:function(){return ht},hasBidiBug:st,isTouchDevice:nt,numberFormat:g,seriesTypes:It,setOptions:function(e){return ht=t(!0,ht,e),O(),ht},addEvent:Qt,removeEvent:Gt,createElement:v,discardElement:k,css:d,each:Vt,extend:e,map:Kt,merge:t,pick:p,splat:h,extendClass:m,pInt:n,wrap:b,svg:it,canvas:ot,vml:!it&&!ot,product:"Highcharts",version:"4.0.4"})}(),e.Highcharts=Highcharts}.apply(e,arguments)})}(this),function(e){define("highcharts",["jquery","highchartsMain"],function(){return function(){return Highcharts.createElement("link",{href:"http://fonts.googleapis.com/css?family=Dosis:400,600",rel:"stylesheet",type:"text/css"},null,document.getElementsByTagName("head")[0]),Highcharts.theme={colors:["#7cb5ec","#f7a35c","#90ee7e","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:null,style:{fontFamily:"Dosis, sans-serif"}},title:{style:{fontSize:"16px",fontWeight:"bold",textTransform:"uppercase"}},tooltip:{borderWidth:0,backgroundColor:"rgba(219,219,216,0.8)",shadow:!1},legend:{itemStyle:{fontWeight:"bold",fontSize:"13px"}},xAxis:{gridLineWidth:1,labels:{style:{fontSize:"12px"}}},yAxis:{minorTickInterval:"auto",title:{style:{textTransform:"uppercase"}},labels:{style:{fontSize:"12px"}}},plotOptions:{candlestick:{lineColor:"#404048"}},background2:"#F0F0EA"},Highcharts.setOptions(Highcharts.theme),e.Highcharts=Highcharts}.apply(e,arguments)})}(this),define("app/views/auditHistogram",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/auditHistogram.html","highcharts"],function(e,t,n,r){"use strict";var i=e.View.extend({initialize:function(){t.bindAll(this)},render:function(){return this.$el.html(r),this._renderGraph(),this},_buildModel:function(){this.x=[];var e=this;t.each(this.collection.fullCollection.last(this.collection.fullCollection.length).reverse(),function(t){e.x.push(moment.utc(t.get("TimeSent")).unix()*1e3)})},refresh:function(){this._renderGraph()},_renderGraph:function(){this._buildModel(),this.chart=this.$el.find(".auditChart").highcharts({title:{text:""},chart:{type:"histogram",animation:!1},series:[{data:this.x}],xAxis:{type:"datetime",max:moment.utc(this.collection.to).unix()*1e3,min:moment.utc(this.collection.from).unix()*1e3},legend:{enabled:!1},loading:{showDuration:0,hideDuration:0}})},onClose:function(){this.collection.off("change",this._renderGraph),this.collection.off("remove",this._renderGraph),this.collection.off("add",this._renderGraph),this.collection.off("reset",this._renderGraph)}});return i}),define("app/views/auditMessages",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/auditMessages.html","app/collections/auditMessages","app/views/auditTable","app/views/auditHistogram","app/helpers/timer"],function(e,t,n,r,i,s,o,u){"use strict";var a=e.View.extend({el:".mainContent",events:{"change .from":"_fetchAudits","change .to":"_fetchAudits","change .timeRange":"_setRange"},initialize:function(){t.bindAll(this),this.tags=[],this.from=moment.utc().subtract(15,"minutes").format(),this.to=moment.utc().format(),this.timer=new u(this._updateCollection,2e3)},render:function(){this.$el.html(r),this.$el.find(".dateRange").hide(),this.$el.find(".date").datetimepicker({autoclose:!0,format:"DD/MM/YYYY HH:mm:ss"}),this.$el.find(".from").val(moment.utc(this.from).format("DD/MM/YYYY HH:mm:ss")),this.$el.find(".to").val(moment.utc(this.to).format("DD/MM/YYYY HH:mm:ss")),this.collection=new i,this.collection.from=this.from,this.collection.to=this.to,this.collection.fetch({success:this._renderViews,data:{from:this.from,to:this.to,tags:this.tags}});var e=this;return this.$el.find(".tags").select2({multiple:!0,allowClear:!0,query:function(e){n.ajax({url:"/tags",data:{query:e.term},success:function(t){var n=[];for(var r=0;r<t.length;r++)n.push({id:t[r],text:t[r]});e.callback({results:n})}})}}).on("select2-selecting",function(t,n){e.tags.push(t.object.id),e._filterAuditMessages()}).on("select2-removed",function(t,r){var i;n.each(e.tags,function(e,n){n===t.val&&(i=e)}),e.tags.splice(i,1),e._filterAuditMessages()}),this},_filterAuditMessages:function(){var e=this;this.collection.from=this.from,this.collection.to=this.to,this.collection.fetch({data:{from:this.from,to:this.to,tags:this.tags.join()},reset:!0,success:function(){e.auditTableView.refresh(),e.auditHistogramView.refresh()}})},_renderViews:function(){this.auditHistogramView=new o({collection:this.collection}),this.$el.find(".auditHistogram").html(this.auditHistogramView.$el),this.renderView(this.auditHistogramView),this.auditTableView=new s({collection:this.collection.fullCollection}),this.$el.find(".auditTable").html(this.auditTableView.$el),this.renderView(this.auditTableView),e.Hubs.AuditHub.on("audits",this._addAudits),this.timer.start()},_setRange:function(){e.Hubs.AuditHub.off("audits",this._addAudits),this.$el.find(".dateRange").hide();var t=this._getFromTime(),n=moment.utc();this.from=t.format(),this.to=n.format();var r=this.$el.find(".timeRange").val();r!=="Custom Range"?e.Hubs.AuditHub.on("audits",this._addAudits):this.$el.find(".dateRange").show(),this.$el.find(".from").val(t.format("DD/MM/YYYY HH:mm:ss")),this.$el.find(".to").val(n.format("DD/MM/YYYY HH:mm:ss"));var i=this;this.collection.from=this.from,this.collection.to=this.to,this.collection.fetch({data:{from:this.from,to:this.to,tags:this.tags.join()},reset:!0,success:function(){i.auditHistogramView.refresh(),i.auditTableView.refresh()}})},_fetchAudits:function(){e.Hubs.AuditHub.off("audits",this._addAudits);var t=moment.utc(this.$el.find(".from").val(),"DD/MM/YYYY HH:mm:ss"),n=moment.utc(this.$el.find(".to").val(),"DD/MM/YYYY HH:mm:ss");this.from=t.format(),this.to=n.format();var r=this;this.collection.from=this.from,this.collection.to=this.to,this.collection.fetch({data:{from:this.from,to:this.to,tags:this.tags.join()},reset:!0,success:function(){r.auditHistogramView.refresh(),r.auditTableView.refresh()}})},_addAudits:function(t){var n=this._getFromTime(),r=moment.utc();this.from=n.format(),this.to=r.format(),this.collection.from=this.from,this.collection.to=this.to;for(var i=0;i<t.length;i++)this.collection.fullCollection.add(new e.Model(t[i]),{at:0});this.auditTableView.addAudits(t),this.auditHistogramView.refresh()},_updateCollection:function(){var e=this._getFromTime(),t=moment.utc();this.from=e.format(),this.to=t.format(),this.collection.from=this.from,this.collection.to=this.to,this.auditTableView.removeMessages(e);for(var n=this.collection.fullCollection.length-1;n>=0;n--){var r=this.collection.fullCollection.at(n);if(!(moment.utc(r.get("TimeSent"))<e))break;this.collection.fullCollection.remove(r)}this.auditHistogramView.refresh()},_getFromTime:function(){var e,t=this.$el.find(".timeRange").val();switch(t){case"Last 5m":e=moment.utc().subtract(5,"minutes");break;case"Last 15m":e=moment.utc().subtract(15,"minutes");break;case"Last 30m":e=moment.utc().subtract(30,"minutes");break;case"Last 1h":e=moment.utc().subtract(60,"minutes");break;case"Last 2h":e=moment.utc().subtract(120,"minutes");break;case"Last 4h":e=moment.utc().subtract(240,"minutes");break;case"Last 6h":e=moment.utc().subtract(360,"minutes");break;case"Last 12h":e=moment.utc().subtract(720,"minutes");break;case"Last 24h":e=moment.utc().subtract(1440,"minutes");break;case"Last 2d":e=moment.utc().subtract(2880,"minutes");break;case"Last 7d":e=moment.utc().subtract(10080,"minutes");break;case"Last 14d":e=moment.utc().subtract(20160,"minutes");break;case"Last 30d":e=moment.utc().subtract(43200,"minutes");break;case"Custom Range":e=moment.utc(this.$el.find(".from").val(),"DD/MM/YYYY HH:mm:ss");break;default:e=moment.utc().subtract(5,"minutes")}return e},onClose:function(){e.Hubs.AuditHub.off("audits",this._addAudits),this.timer.stop()}});return a}),define("bower_components/requirejs-text/text!app/templates/errorMessages.html",[],function(){return'<div class="content-frame">\r\n    <div class="content-frame-top">\r\n        <div class="page-title">\r\n            <h2><span class="fa fa-exclamation-circle"></span> Error Messages</h2>\r\n        </div>\r\n    </div>\r\n    <div class="page-content-wrap">\r\n        <div class="panel panel-default">\r\n            <div class="panel-body">\r\n                <div class="row">\r\n                    <div class="col-md-1 ">\r\n                        <label class="control-label dateRange" style="padding-top: 5px;">From: </label>\r\n                    </div>\r\n                    <div class="col-md-3 ">\r\n                        <div class="dateRange">\r\n                            <div datepicker="" class="input-group date" style="width: 100%">\r\n                                <input class="form-control from" type="text" value="" style="width: 100%">\r\n                                <span class="input-group-addon" style="width: 50px"><i class="glyphicon glyphicon-calendar"></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-1 ">\r\n                        <label class="control-label dateRange" style="padding-top: 5px;">To: </label>\r\n                    </div>\r\n                    <div class="col-md-3 ">\r\n                        <div class="dateRange">\r\n                            <div datepicker="" class="input-group date" style="width: 100%">\r\n                                <input id="startDateTime" class="form-control to" type="text" value="" style="width: 100%">\r\n                                <span class="input-group-addon" style="width: 50px"><i class="glyphicon glyphicon-calendar"></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2">\r\n                        <select class="form-control timeRange">\r\n                            <option>Last 5m</option>\r\n                            <option selected>Last 15m</option>\r\n                            <option>Last 30m</option>\r\n                            <option>Last 1h</option>\r\n                            <option>Last 2h</option>\r\n                            <option>Last 4h</option>\r\n                            <option>Last 6h</option>\r\n                            <option>Last 12h</option>\r\n                            <option>Last 24h</option>\r\n                            <option>Last 2d</option>\r\n                            <option>Last 7d</option>\r\n                            <option>Last 14d</option>\r\n                            <option>Last 30d</option>\r\n                            <option>Custom Range</option>\r\n                        </select>\r\n                    </div>\r\n                    <div class="col-md-2">\r\n                        <input type="text" class="form-control tags" style="float: right; width: 100%;" placeholder="Filter by tags">\r\n                    </div>\r\n                </div>\r\n                <div class="row errorHistogram">\r\n\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-md-12">\r\n                        <div class=" pull-right" style="padding-right: 25px; padding-bottom: 10px;">\r\n                            <div class="form-group">\r\n                                <button type="submit" class="btn btn-primary retryAll"><i class="fa fa-refresh"></i> Retry All Errors</button>\r\n                                <button type="submit" class="btn btn-primary retrySelected"><i class="fa fa-refresh"></i> Retry Selected Errors</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-12 errorTable"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>'}),define("app/models/error",["backbone"],function(e){"use strict";var t=e.Model.extend({idAttribute:"Id",urlRoot:"error",retry:function(t){$.ajax({type:"POST",url:"errors/retry",success:t.success,error:t.error,data:JSON.stringify((new e.Collection(this.attributes)).toJSON()),traditional:!0,dataType:"json",contentType:"application/json"})}});return t}),define("app/collections/errorMessages",["backbone","jquery","app/models/error","backbone-pageable"],function(e,t,n){"use strict";var r=e.PageableCollection.extend({url:"errors",mode:"client",model:n,retry:function(e){t.ajax({type:"POST",url:this.url+"/retry",success:e.success,error:e.error,data:JSON.stringify(this.fullCollection.toJSON()),traditional:!0,dataType:"json",contentType:"application/json"})}});return r}),define("bower_components/requirejs-text/text!app/templates/exceptionModal.html",[],function(){return'<div class="exceptionModal modal fade" tabindex="-1" role="dialog" aria-hidden="true">\r\n    <div class="modal-dialog" style="width: 1100px">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Exception</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <pre class="exception json" style="width: 100%; height: 700px"></pre>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-default closeModal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("app/views/exceptionModal",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/exceptionModal.html"],function(e,t,n,r){"use strict";var i=e.View.extend({events:{"click .closeModal":"_closeModal"},initialize:function(){t.bindAll(this)},render:function(){this.$el.html(r);var e=JSON.stringify(this.model.get("Exception"),undefined,2);return this.$el.find(".exception").html(this._jsonSyntaxHighlight(e)),this.$el.find(".exceptionModal").modal("show"),this.$el.find(".exceptionModal").on("hidden.bs.modal",this.closeView),this},_closeModal:function(){this.$el.find(".exceptionModal").modal("hide")},_jsonSyntaxHighlight:function(e){return typeof e!="string"&&(e=JSON.stringify(e,undefined,2)),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?/:$/.test(e)?t="key":t="string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})},closeView:function(){this.close()},onClose:function(){this.$el.find(".exceptionModal").off("hidden.bs.modal",this.closeView),this.remove()}});return i}),define("app/views/errorTable",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/auditTable.html","backgrid","slickgrid","app/views/messageBodyModal","app/views/exceptionModal"],function(e,t,n,r,i,s,o,u){"use strict";var a=e.View.extend({events:{"click .messageBody":"_showMessageBody","click .exceptionBody":"_showException"},columns:function(){return[{id:"TypeName",field:"TypeName",name:"Message Type"},{id:"TimeSent",name:"Time Sent",field:"TimeSent",formatter:function(e,t,n,r,i){return moment.utc(n).local().format("DD/MM/YYYY HH:mm:ss.SSS")},width:100},{id:"SourceAddress",field:"SourceAddress",name:"Source Address"},{id:"DestinationAddress",field:"DestinationAddress",name:"Destination Address"},{id:"ExceptionType",field:"Exception",name:"Exception Type",formatter:function(e,t,n,r,i){return n.ExceptionType}},{id:"Exception",field:"Exception",name:"Error",width:20,formatter:function(e,t,n,r,i){return"<div style='width: 100%; text-align: center'><i class='fa fa-exclamation-circle exceptionBody' id-attr='"+i.Id+"' style='cursor: pointer; cursor: hand;'></i></div>"}},{id:"Body",field:"Body",name:"Body",width:20,formatter:function(e,t,n,r,i){return"<div style='width: 100%; text-align: center'><i class='fa fa-envelope-o messageBody' id-attr='"+i.Id+"' style='cursor: pointer; cursor: hand;'></i></div>"}},{id:"Route",field:"CorrelationId",name:"",width:40,formatter:function(e,t,n,r,i){return"<a href='#route/"+n+"' >Session</a>"}},{id:"Id",field:"Id",name:"",width:40,formatter:function(e,t,n,r,i){return"<a href='#error/"+n+"' >Details</a>"}}]},initialize:function(e){t.bindAll(this),this.onRetryComplete=e.onRetryComplete},render:function(){return this.$el.html(r),this.data=this.collection.fullCollection.toJSON(),this._renderGrid(),n(window).on("resize",this._resizeGrid),this},_renderGrid:function(){var e={enableColumnReorder:!1,defaultColumnWidth:150,forceFitColumns:!0},t=new s.CheckboxSelectColumn({cssClass:"slick-cell-checkboxsel"}),n=this.columns();n.unshift(t.getColumnDefinition()),this.grid=new s.Grid(".grid",this.data,n,e),this.grid.setSelectionModel(new s.RowSelectionModel({selectActiveRow:!1})),this.grid.registerPlugin(t)},_showMessageBody:function(e){var t=n(e.currentTarget).attr("id-attr"),r=this.collection.fullCollection.findWhere({Id:t}),i=new o({model:r});n("body").append(i.render().$el)},_showException:function(e){var t=n(e.currentTarget).attr("id-attr"),r=this.collection.fullCollection.findWhere({Id:t}),i=new u({model:r});n("body").append(i.render().$el)},getSelected:function(){var e=this.grid.getData(),t=this.grid.getSelectedRows(),n=[];for(var r=0;r<t.length;r++)n.push(e[t[r]]);return n},removeMessages:function(e){var t=!1;for(var n=this.data.length-1;n>=0;n--){var r=this.data[n];if(!(moment.utc(r.TimeSent)<e))break;t=!0,this.data.splice(n,1)}t&&(this.grid.setSelectedRows([]),this.grid.updateRowCount(),this.grid.render())},refresh:function(){while(this.data.length>0)this.data.pop();this.grid.updateRowCount();var e=this.collection.fullCollection.toJSON();for(var t=0;t<e.length;t++)this.data.push(e[t]);this.grid.setSelectedRows([]),this.grid.updateRowCount(),this.grid.render()},addErrors:function(){this.refresh()},_resizeGrid:function(){this.grid&&this.grid.resizeCanvas()},onClose:function(){n(window).off("resize",this._resizeGrid)}});return a}),define("bower_components/requirejs-text/text!app/templates/errorHistogram.html",[],function(){return'<div class="errorChart col-sm-12" style="height: 350px;  padding-top: 15px; padding-right: 15px; margin-left: -15px; padding-left: 15px;"></div>'}),define("app/views/errorHistogram",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/errorHistogram.html","highcharts"],function(e,t,n,r){"use strict";var i=e.View.extend({initialize:function(){t.bindAll(this),this.collection.on("change",this._renderGraph),this.collection.on("reset",this._renderGraph),this.collection.on("remove",this._renderGraph),this.collection.on("add",this._renderGraph)},render:function(){return this.$el.html(r),this._renderGraph(),this},_buildModel:function(){this.x=[];var e=this;t.each(this.collection.fullCollection.last(this.collection.fullCollection.length).reverse(),function(t){e.x.push(moment.utc(t.get("TimeSent")).unix()*1e3)})},_renderGraph:function(){this._buildModel(),this.chart=this.$el.find(".errorChart").highcharts({title:{text:""},chart:{type:"histogram",animation:!1},series:[{data:this.x}],xAxis:{type:"datetime",max:moment.utc(this.collection.to).unix()*1e3,min:moment.utc(this.collection.from).unix()*1e3},legend:{enabled:!1},loading:{showDuration:0,hideDuration:0}})},refresh:function(){this._renderGraph()},onClose:function(){this.collection.off("change",this._renderGraph),this.collection.off("remove",this._renderGraph),this.collection.off("add",this._renderGraph),this.collection.off("reset",this._renderGraph)}});return i}),define("bower_components/requirejs-text/text!app/templates/errorRetryModal.html",[],function(){return'<div class="errorRetryModal modal fade" tabindex="-1" role="dialog" aria-hidden="true">\r\n    <div class="modal-dialog" style="width: 40%">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Retry Errors</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <p>Are you sure you want to retry these messages?</p>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-danger confirm">Yes</button>\r\n                <button type="button" class="btn btn-default closeModal">No</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("app/views/errorRetryModal",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/errorRetryModal.html","toastr"],function(e,t,n,r,i){"use strict";var s=e.View.extend({events:{"click .closeModal":"_closeModal","click .confirm":"_retry"},initialize:function(e){this.onComplete=e.onComplete,t.bindAll(this)},render:function(){return this.$el.html(r),this.$el.find(".errorRetryModal").modal("show"),this.$el.find(".errorRetryModal").on("hidden.bs.modal",this.closeView),this},_closeModal:function(){this.$el.find(".errorRetryModal").modal("hide")},closeView:function(){this.close()},_retry:function(){var e=this,t={success:function(){i.success("Successfully retried messages"),e._closeModal(),e.onComplete()},error:function(){i.success("Error retrying messages"),e._closeModal()}};this.collection?this.collection.retry(t):this.model.retry(t)},onClose:function(){this.$el.find(".errorRetryModal").off("hidden.bs.modal",this.closeView),this.remove()}});return s}),define("app/views/errorMessages",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/errorMessages.html","app/collections/errorMessages","app/views/errorTable","app/views/errorHistogram","app/helpers/timer","toastr","app/views/errorRetryModal"],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l=e.View.extend({el:".mainContent",events:{"change .from":"_fetchErrors","change .to":"_fetchErrors","change .timeRange":"_setRange","click .retryAll":"_retryAllMessages","click .retrySelected":"_retrySelectedMessages"},initialize:function(){t.bindAll(this),this.tags=[],this.from=moment.utc().subtract(15,"minutes").format(),this.to=moment.utc().format(),this.timer=new u(this._updateCollection,2e3)},render:function(){this.$el.html(r),this.$el.find(".dateRange").hide(),this.$el.find(".date").datetimepicker({autoclose:!0,format:"DD/MM/YYYY HH:mm:ss"}),this.$el.find(".from").val(moment.utc(this.from).format("DD/MM/YYYY HH:mm:ss")),this.$el.find(".to").val(moment.utc(this.to).format("DD/MM/YYYY HH:mm:ss")),this.collection=new i,this.collection.from=this.from,this.collection.to=this.to,this.collection.fetch({success:this._renderViews,data:{from:this.from,to:this.to,tags:this.tags}});var e=this;return this.$el.find(".tags").select2({multiple:!0,allowClear:!0,query:function(e){n.ajax({url:"/tags",data:{query:e.term},success:function(t){var n=[];for(var r=0;r<t.length;r++)n.push({id:t[r],text:t[r]});e.callback({results:n})}})}}).on("select2-selecting",function(t,n){e.tags.push(t.object.id),e._filterErrorMessages()}).on("select2-removed",function(t,r){var i;n.each(e.tags,function(e,n){n===t.val&&(i=e)}),e.tags.splice(i,1),e._filterErrorMessages()}),this},_filterErrorMessages:function(){var e=this;this.collection.from=this.from,this.collection.to=this.to,this.collection.fetch({data:{from:this.from,to:this.to,tags:this.tags.join()},reset:!0,success:function(){e.errorTableView.refresh(),e.errorHistogramView.refresh()}})},_renderViews:function(){this.errorHistogramView=new o({collection:this.collection}),this.$el.find(".errorHistogram").html(this.errorHistogramView.$el),this.renderView(this.errorHistogramView),this.errorTableView=new s({collection:this.collection,onRetryComplete:this._filterErrorMessages}),this.$el.find(".errorTable").html(this.errorTableView.$el),this.renderView(this.errorTableView),e.Hubs.ErrorHub.on("errors",this._addErrors),this.timer.start()},_setRange:function(){e.Hubs.ErrorHub.off("errors",this._addErrors),this.$el.find(".dateRange").hide();var t=this._getFromTime(),n=moment.utc();this.from=t.format(),this.to=n.format();var r=this.$el.find(".timeRange").val();r!=="Custom Range"?e.Hubs.ErrorHub.on("errors",this._addErrors):this.$el.find(".dateRange").show(),this.$el.find(".from").val(t.format("DD/MM/YYYY HH:mm:ss")),this.$el.find(".to").val(n.format("DD/MM/YYYY HH:mm:ss"));var i=this;this.collection.from=this.from,this.collection.to=this.to,this.collection.fetch({data:{from:this.from,to:this.to,tags:this.tags.join()},reset:!0,success:function(){i.errorTableView.refresh(),i.errorHistogramView.refresh()}})},_fetchErrors:function(){e.Hubs.ErrorHub.off("errors",this._addErrors);var t=moment.utc(this.$el.find(".from").val(),"DD/MM/YYYY HH:mm:ss"),n=moment.utc(this.$el.find(".to").val(),"DD/MM/YYYY HH:mm:ss");this.from=t.format(),this.to=n.format();var r=this;this.collection.from=this.from,this.collection.to=this.to,this.collection.fetch({data:{from:this.from,to:this.to,tags:this.tags.join()},reset:!0,success:function(){r.errorTableView.refresh(),r.errorHistogramView.refresh()}})},_addErrors:function(t){var n=this._getFromTime(),r=moment.utc();this.from=n.format(),this.to=r.format(),this.collection.from=this.from,this.collection.to=this.to;for(var i=0;i<t.length;i++)this.collection.fullCollection.add(new e.Model(t[i]),{at:0});this.errorTableView.addErrors(t),this.errorHistogramView.refresh()},_updateCollection:function(){var e=this._getFromTime(),t=moment.utc();this.from=e.format(),this.to=t.format(),this.collection.from=this.from,this.collection.to=this.to,this.errorTableView.removeMessages(e);for(var n=this.collection.fullCollection.length-1;n>=0;n--){var r=this.collection.fullCollection.at(n);if(!(moment.utc(r.get("TimeSent"))<e))break;this.collection.fullCollection.remove(r)}},_getFromTime:function(){var e,t=this.$el.find(".timeRange").val();switch(t){case"Last 5m":e=moment.utc().subtract(5,"minutes");break;case"Last 15m":e=moment.utc().subtract(15,"minutes");break;case"Last 30m":e=moment.utc().subtract(30,"minutes");break;case"Last 1h":e=moment.utc().subtract(60,"minutes");break;case"Last 2h":e=moment.utc().subtract(120,"minutes");break;case"Last 4h":e=moment.utc().subtract(240,"minutes");break;case"Last 6h":e=moment.utc().subtract(360,"minutes");break;case"Last 12h":e=moment.utc().subtract(720,"minutes");break;case"Last 24h":e=moment.utc().subtract(1440,"minutes");break;case"Last 2d":e=moment.utc().subtract(2880,"minutes");break;case"Last 7d":e=moment.utc().subtract(10080,"minutes");break;case"Last 14d":e=moment.utc().subtract(20160,"minutes");break;case"Last 30d":e=moment.utc().subtract(43200,"minutes");break;case"Custom Range":e=moment.utc(this.$el.find(".from").val(),"DD/MM/YYYY HH:mm:ss");break;default:e=moment.utc().subtract(5,"minutes")}return e},_retryAllMessages:function(){var e=new f({collection:this.collection,onComplete:this._filterErrorMessages});n("body").append(e.render().$el)},_retrySelectedMessages:function(){var e=this.errorTableView.getSelected(),t=new f({collection:new i(e),onComplete:this._filterErrorMessages});n("body").append(t.render().$el)},onClose:function(){e.Hubs.ErrorHub.off("errors",this._addErrors),this.timer.stop()}});return l}),define("bower_components/requirejs-text/text!app/templates/endpointDetails.html",[],function(){return'<div class="content-frame">\r\n    <div class="content-frame-top">\r\n        <div class="page-title">\r\n            <h2><span class="fa fa-list"></span>\r\n                <%= header %>\r\n            </h2>\r\n        </div>\r\n    </div>\r\n    <div class="page-content-wrap">\r\n        <div class="panel panel-default">\r\n            <div class="panel-body">\r\n                <div class="row">\r\n                    <div class="col-md-1 ">\r\n                        <label class="control-label dateRange" style="padding-top: 5px;">From: </label>\r\n                    </div>\r\n                    <div class="col-md-4 ">\r\n                        <div class="dateRange">\r\n                            <div datepicker="" class="input-group date" style="width: 100%">\r\n                                <input class="form-control from" type="text" value="" style="width: 100%">\r\n                                <span class="input-group-addon" style="width: 50px"><i class="glyphicon glyphicon-calendar"></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-1 ">\r\n                        <label class="control-label dateRange" style="padding-top: 5px;">To: </label>\r\n                    </div>\r\n                    <div class="col-md-4 ">\r\n                        <div class="dateRange">\r\n                            <div datepicker="" class="input-group date" style="width: 100%">\r\n                                <input id="startDateTime" class="form-control to" type="text" value="" style="width: 100%">\r\n                                <span class="input-group-addon" style="width: 50px"><i class="glyphicon glyphicon-calendar"></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2">\r\n                        <select class="form-control timeRange">\r\n                            <option>Last 5m</option>\r\n                            <option>Last 15m</option>\r\n                            <option>Last 30m</option>\r\n                            <option selected>Last 1h</option>\r\n                            <option>Last 2h</option>\r\n                            <option>Last 4h</option>\r\n                            <option>Last 6h</option>\r\n                            <option>Last 12h</option>\r\n                            <option>Last 24h</option>\r\n                            <option>Last 2d</option>\r\n                            <option>Last 7d</option>\r\n                            <option>Last 14d</option>\r\n                            <option>Last 30d</option>\r\n                            <option>Custom Range</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-12 serviceGraph"></div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-6 serviceDetails well "></div>\r\n                    <div class="col-sm-6 serviceTable"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("bower_components/requirejs-text/text!app/templates/serviceTable.html",[],function(){return'<div class="grid"></div>\r\n<div class="paginator"></div>'}),define("app/views/serviceTable",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/serviceTable.html","backgrid"],function(e,t,n,r,i){"use strict";var s=e.View.extend({columns:[{Label:"Timestamp",name:"Timestamp",cell:"string",editable:!1,formatter:t.extend({},i.CellFormatter.prototype,{fromRaw:function(e){return moment.utc(e).local().format("DD/MM/YYYY HH:mm:ss")}})},{name:"LatestMemory",label:"Memory (mb)",cell:"number",editable:!1,decimals:2,formatter:t.extend({},i.CellFormatter.prototype,{fromRaw:function(e){return(e/Math.pow(1024,2)).toFixed(2)}})},{name:"LatestCpu",label:"Latest CPU",cell:"percent",editable:!1,decimals:2}],initialize:function(){t.bindAll(this)},render:function(){return this.$el.html(r),this._renderGrid(),this},_renderGrid:function(){this.grid=new i.Grid({columns:this.columns,collection:this.collection}),this.$el.find(".grid").html(this.grid.render().$el);var e=new i.Extension.Paginator({collection:this.collection});this.$el.find(".paginator").html(e.render().$el),this.$el.find(".backgrid").addClass("table-hover"),this.$el.find(".backgrid").addClass("table-bordered")},refresh:function(){this.grid.remove(),this._renderGrid()}});return s}),define("bower_components/requirejs-text/text!app/templates/serviceGraph.html",[],function(){return'<div class="serviceGraph col-sm-12" style="height: 350px;  padding-top: 15px; padding-left: 0; padding-right: 0; margin-left: -15px;"></div>'}),define("app/views/serviceGraph",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/serviceGraph.html","highcharts"],function(e,t,n,r){"use strict";var i=e.View.extend({initialize:function(){t.bindAll(this),this.collection.on("change",this._renderGraph),this.collection.on("reset",this._renderGraph)},render:function(){return this.$el.html(r),this._renderGraph(),this},refresh:function(){this._renderGraph()},_buildModel:function(){this.memoryPoints=[],this.cpuPoints=[];var e=this;t.each(this.collection.last(this.collection.length).reverse(),function(t){var n=moment.utc(t.get("Timestamp")).unix()*1e3;e.memoryPoints.push([n,t.get("LatestMemory")/Math.pow(1024,2)]),e.cpuPoints.push([n,t.get("LatestCpu")])})},_renderGraph:function(){this._buildModel(),this.cpuSeries=null,this.memorySeries=null;var e=this;this.chart=this.$el.find(".serviceGraph").highcharts({plotOptions:{series:{marker:{enabled:!1}}},chart:{events:{load:function(){e.cpuSeries=this.series[0],e.memorySeries=this.series[1]}}},tooltip:{valueDecimals:2},credits:{enabled:!1},title:{text:""},xAxis:{type:"datetime"},yAxis:[{title:{text:"CPU (%)"}},{title:{text:"Memory (MB)"},opposite:!0}],series:[{name:"CPU",data:this.cpuPoints,yAxis:0,color:"#7CB5EC"},{name:"Memory",data:this.memoryPoints,yAxis:1,color:"#FF6600"}]})},addHeartbeats:function(e){for(var t=0;t<e.length;t++){var n=moment.utc(e[t].Timestamp).unix()*1e3;this.cpuSeries.addPoint([n,e[t].LatestCpu],!0,!0),this.memorySeries.addPoint([n,e[t].LatestMemory/Math.pow(1024,2)],!0,!0)}},onClose:function(){this.collection.off("change",this._renderGraph),this.collection.off("reset",this._renderGraph)}});return i}),define("bower_components/requirejs-text/text!app/templates/serviceDetails.html",[],function(){return'<form role="form">\r\n    <div class="form-group">\r\n        <label>Name</label>\r\n        <input type="text" class="form-control name" readonly>\r\n    </div>\r\n    <div class="form-group">\r\n        <label>Location</label>\r\n        <input type="text" class="form-control location" readonly />\r\n    </div>\r\n    <div class="form-group">\r\n        <label>Consumer Type</label>\r\n        <input type="text" class="form-control consumerType" readonly>\r\n    </div>\r\n    <div class="form-group">\r\n        <label>Language</label>\r\n        <input type="text" class="form-control language" readonly>\r\n    </div>\r\n    <div>\r\n        <label>Messages In</label>\r\n    </div>\r\n    <div class="inGrid" style="background-color: white">\r\n    </div>\r\n    <div class="inPaginator">\r\n    </div>\r\n    <div>\r\n        <label>Messages Out</label>\r\n    </div>\r\n    <div class="outGrid" style="background-color: white">\r\n    </div>\r\n    <div class="outPaginator">\r\n    </div>\r\n    <div class="form-group">\r\n        <label>Tags</label>\r\n        <input type="text" class="form-control tags">\r\n    </div>\r\n    <button type="submit" class="btn btn-primary saveServiceDetails">Save</button>\r\n    <button type="submit" class="btn btn-danger deleteService" style="float: right">Delete</button>\r\n</form>'}),define("app/collections/messageTypes",["backbone","backbone-pageable"],function(e){"use strict";var t=e.PageableCollection.extend({mode:"client",state:{pageSize:5}});return t}),define("bower_components/requirejs-text/text!app/templates/deleteServiceModal.html",[],function(){return'<div class="deleteServiceModal modal fade" tabindex="-1" role="dialog" aria-hidden="true">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">Delete Service</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <label>Are you sure you want to delete this service?</label>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary yesDeleteModal">Yes</button>\r\n                <button type="button" class="btn btn-default noDeleteModal">No</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("app/views/deleteServiceModal",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/deleteServiceModal.html"],function(e,t,n,r){"use strict";var i=e.View.extend({events:{"click .yesDeleteModal":"_delete","click .noDeleteModal":"_closeModal"},initialize:function(){t.bindAll(this)},render:function(){return this.$el.html(r),this.$el.find(".deleteServiceModal").modal("show"),this.$el.find(".deleteServiceModal").on("hidden.bs.modal",this.closeView),this},_delete:function(){var e=this;this.model.destroy({success:function(){e.$el.find(".deleteServiceModal").off("hidden.bs.modal",e.closeView),e.$el.find(".deleteServiceModal").on("hidden.bs.modal",e._deleted),e.$el.find(".deleteServiceModal").modal("hide")}})},_closeModal:function(){this.$el.find(".deleteServiceModal").modal("hide")},_deleted:function(){window.location="#",this.$el.find(".deleteServiceModal").off("hidden.bs.modal",this._deleted),this.close()},closeView:function(){this.close()},onClose:function(){this.$el.find(".deleteServiceModal").off("hidden.bs.modal",this.closeView),this.remove()}});return i}),function(e){define("select2",["jquery"],function(){return function(){(function(e){typeof e.fn.each2=="undefined"&&e.extend(e.fn,{each2:function(t){var n=e([0]),r=-1,i=this.length;while(++r<i&&(n.context=n[0]=this[r])&&t.call(n[0],r,n)!==!1);return this}})})(jQuery),function(e,t){"use strict";function p(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function d(e){function t(e){return h[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function v(e,t){var n=0,r=t.length;for(;n<r;n+=1)if(g(e,t[n]))return n;return-1}function m(){var t=e(c);t.appendTo(document.body);var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function g(e,n){return e===n?!0:e===t||n===t?!1:e===null||n===null?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function y(e,t,n){var r,i,s;if(e===null||e.length<1)return[];r=e.split(t);for(i=0,s=r.length;i<s;i+=1)r[i]=n(r[i]);return r}function b(e){return e.outerWidth(!1)-e.width()}function w(n){var r="keyup-change-value";n.on("keydown",function(){e.data(n,r)===t&&e.data(n,r,n.val())}),n.on("keyup",function(){var i=e.data(n,r);i!==t&&n.val()!==i&&(e.removeData(n,r),n.trigger("keyup-change"))})}function E(n){n.on("mousemove",function(n){var r=u;(r===t||r.x!==n.pageX||r.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function S(e,n,r){r=r||t;var i;return function(){var t=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,t)},e)}}function x(e,t){var n=S(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){v(e.target,t.get())>=0&&n(e)})}function T(e){if(e[0]===document.activeElement)return;window.setTimeout(function(){var t=e[0],n=e.val().length,r;e.focus();var i=t.offsetWidth>0||t.offsetHeight>0;i&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(n,n):t.createTextRange&&(r=t.createTextRange(),r.collapse(!1),r.select()))},0)}function N(t){t=e(t)[0];var n=0,r=0;if("selectionStart"in t)n=t.selectionStart,r=t.selectionEnd-n;else if("selection"in document){t.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),n=i.text.length-r}return{offset:n,length:r}}function C(e){e.preventDefault(),e.stopPropagation()}function k(e){e.preventDefault(),e.stopImmediatePropagation()}function L(t){if(!o){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);o=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),o.attr("class","select2-sizer"),e(document.body).append(o)}return o.text(t.val()),o.width()}function A(t,n,r){var i,s=[],o;i=e.trim(t.attr("class")),i&&(i=""+i,e(i.split(/\s+/)).each2(function(){this.indexOf("select2-")===0&&s.push(this)})),i=e.trim(n.attr("class")),i&&(i=""+i,e(i.split(/\s+/)).each2(function(){this.indexOf("select2-")!==0&&(o=r(this),o&&s.push(o))})),t.attr("class",s.join(" "))}function O(e,t,n,r){var i=d(e.toUpperCase()).indexOf(d(t.toUpperCase())),s=t.length;if(i<0){n.push(r(e));return}n.push(r(e.substring(0,i))),n.push("<span class='select2-match'>"),n.push(r(e.substring(i,i+s))),n.push("</span>"),n.push(r(e.substring(i+s,e.length)))}function M(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(n){var r,i=null,s=n.quietMillis||100,o=n.url,u=this;return function(a){window.clearTimeout(r),r=window.setTimeout(function(){var r=n.data,s=o,f=n.transport||e.fn.select2.ajaxDefaults.transport,l={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},c=e.extend({},e.fn.select2.ajaxDefaults.params,l);r=r?r.call(u,a.term,a.page,a.context):null,s=typeof s=="function"?s.call(u,a.term,a.page,a.context):s,i&&typeof i.abort=="function"&&i.abort(),n.params&&(e.isFunction(n.params)?e.extend(c,n.params.call(u)):e.extend(c,n.params)),e.extend(c,{url:s,dataType:n.dataType,data:r,success:function(e){var t=n.results(e,a.page,a);a.callback(t)},error:function(e,t,n){var r={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};a.callback(r)}}),i=f.call(u,c)},s)}}function D(t){var n=t,r,i,s=function(e){return""+e.text};e.isArray(n)&&(i=n,n={results:i}),e.isFunction(n)===!1&&(i=n,n=function(){return i});var o=n();return o.text&&(s=o.text,e.isFunction(s)||(r=o.text,s=function(e){return e[r]})),function(t){var r=t.term,i={results:[]},o;if(r===""){t.callback(n());return}o=function(n,i){var u,a;n=n[0];if(n.children){u={};for(a in n)n.hasOwnProperty(a)&&(u[a]=n[a]);u.children=[],e(n.children).each2(function(e,t){o(t,u.children)}),(u.children.length||t.matcher(r,s(u),n))&&i.push(u)}else t.matcher(r,s(n),n)&&i.push(n)},e(n().results).each2(function(e,t){o(t,i.results)}),t.callback(i)}}function P(n){var r=e.isFunction(n);return function(i){var s=i.term,o={results:[]},u=r?n(i):n;e.isArray(u)&&(e(u).each(function(){var e=this.text!==t,n=e?this.text:this;(s===""||i.matcher(s,n))&&o.results.push(e?this:{id:this,text:this})}),i.callback(o))}}function H(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if(typeof t=="string")return!0;throw new Error(n+" must be a string, function, or falsy value")}function B(t,n){if(e.isFunction(t)){var r=Array.prototype.slice.call(arguments,2);return t.apply(n,r)}return t}function j(t){var n=0;return e.each(t,function(e,t){t.children?n+=j(t.children):n++}),n}function F(e,n,r,i){var s=e,o=!1,u,a,f,l,c;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return t;for(;;){a=-1;for(f=0,l=i.tokenSeparators.length;f<l;f++){c=i.tokenSeparators[f],a=e.indexOf(c);if(a>=0)break}if(a<0)break;u=e.substring(0,a),e=e.substring(a+c.length);if(u.length>0){u=i.createSearchChoice.call(this,u,n);if(u!==t&&u!==null&&i.id(u)!==t&&i.id(u)!==null){o=!1;for(f=0,l=n.length;f<l;f++)if(g(i.id(u),i.id(n[f]))){o=!0;break}o||r(u)}}}if(s!==e)return e}function I(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function q(t,n){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=e.extend(r.prototype,n),r}if(window.Select2!==t)return;var n,r,i,s,o,u={x:0,y:0},a,f,l={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case l.LEFT:case l.RIGHT:case l.UP:case l.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case l.SHIFT:case l.CTRL:case l.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&e<=123}},c="<div class='select2-measure-scrollbar'></div>",h={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};a=e(document),s=function(){var e=1;return function(){return e++}}(),n=q(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var r,i,o=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&n.element.data("select2")!==null&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),this.liveRegion.length==0&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+s()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e(document.body),A(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(B(n.containerCss,this.opts.element)),this.container.addClass(B(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",C),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),A(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(B(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",C),this.results=r=this.container.find(o),this.search=i=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",C),E(this.results),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),x(80,this.results),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&r.mousewheel(function(e,t,n,i){var s=r.scrollTop();i>0&&s-i<=0?(r.scrollTop(0),C(e)):i<0&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),C(e))}),w(i),i.on("keyup-change input paste",this.bind(this.updateResults)),i.on("focus",function(){i.addClass("select2-focused")}),i.on("blur",function(){i.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.lastSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),n.maximumInputLength!==null&&this.search.attr("maxlength",n.maximumInputLength);var u=n.element.prop("disabled");u===t&&(u=!1),this.enable(!u);var a=n.element.prop("readonly");a===t&&(a=!1),this.readonly(a),f=f||m(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),r=this;this.close(),e.length&&e[0].detachEvent&&r._sync&&e.each(function(){r._sync&&this.detachEvent("onpropertychange",r._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeData("select2").off(".select2"),e.is("input[type='hidden']")?e.css("display",""):(e.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())),I.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){if(e.is("option"))return{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:g(e.attr("locked"),"locked")||g(e.data("locked"),!0)};if(e.is("optgroup"))return{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}},prepareOpts:function(n){var r,i,o,u,a=this;r=n.element,r.get(0).tagName.toLowerCase()==="select"&&(this.select=i=n.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n.debug=n.debug||e.fn.select2.defaults.debug,n.debug&&console&&console.warn&&(n.id!=null&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),n.text!=null&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),n.sortResults!=null&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),n.selectOnBlur!=null&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),n.ajax!=null&&n.ajax.results!=null&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),n.formatNoResults!=null&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),n.formatSearching!=null&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),n.formatInputTooShort!=null&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),n.formatInputTooLong!=null&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),n.formatLoading!=null&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),n.formatSelectionTooBig!=null&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),n.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0."));if(n.element.data("tags")!=null){var f=n.element.data("tags");e.isArray(f)||(f=[]),n.element.data("select2Tags",f)}n.sorter!=null&&(n.sortResults=n.sorter),n.selectOnClose!=null&&(n.selectOnBlur=n.selectOnClose),n.ajax!=null&&e.isFunction(n.ajax.processResults)&&(n.ajax.results=n.ajax.processResults);if(n.language!=null){var l=n.language;e.isFunction(l.noMatches)&&(n.formatNoMatches=l.noMatches),e.isFunction(l.searching)&&(n.formatSearching=l.searching),e.isFunction(l.inputTooShort)&&(n.formatInputTooShort=l.inputTooShort),e.isFunction(l.inputTooLong)&&(n.formatInputTooLong=l.inputTooLong),e.isFunction(l.loadingMore)&&(n.formatLoading=l.loadingMore),e.isFunction(l.maximumSelected)&&(n.formatSelectionTooBig=l.maximumSelected)}n=e.extend({},{populateResults:function(r,i,o){var u,f=this.opts.id,l=this.liveRegion;u=function(r,i,c){var h,p,d,v,m,g,y,b,w,E;r=n.sortResults(r,i,o);var S=[];for(h=0,p=r.length;h<p;h+=1)d=r[h],m=d.disabled===!0,v=!m&&f(d)!==t,g=d.children&&d.children.length>0,y=e("<li></li>"),y.addClass("select2-results-dept-"+c),y.addClass("select2-result"),y.addClass(v?"select2-result-selectable":"select2-result-unselectable"),m&&y.addClass("select2-disabled"),g&&y.addClass("select2-result-with-children"),y.addClass(a.opts.formatResultCssClass(d)),y.attr("role","presentation"),b=e(document.createElement("div")),b.addClass("select2-result-label"),b.attr("id","select2-result-label-"+s()),b.attr("role","option"),E=n.formatResult(d,b,o,a.opts.escapeMarkup),E!==t&&(b.html(E),y.append(b)),g&&(w=e("<ul></ul>"),w.addClass("select2-result-sub"),u(d.children,w,c+1),y.append(w)),y.data("select2-data",d),S.push(y[0]);i.append(S),l.text(n.formatMatches(r.length))},u(i,r,0)}},e.fn.select2.defaults,n),typeof n.id!="function"&&(o=n.id,n.id=function(e){return e[o]});if(e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}i?(n.query=this.bind(function(e){var n={results:[],more:!1},i=e.term,s,o,u;u=function(t,n){var r;t.is("option")?e.matcher(i,t.text(),t)&&n.push(a.optionToData(t)):t.is("optgroup")&&(r=a.optionToData(t),t.children().each2(function(e,t){u(t,r.children)}),r.children.length>0&&n.push(r))},s=r.children(),this.getPlaceholder()!==t&&s.length>0&&(o=this.getPlaceholderOption(),o&&(s=s.not(o))),s.each2(function(e,t){u(t,n.results)}),e.callback(n)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?(u=n.element.data("ajax-url"),u&&u.length>0&&(n.ajax.url=u),n.query=_.call(n.element,n.ajax)):"data"in n?n.query=D(n.data):"tags"in n&&(n.query=P(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,r){var i=[];e(y(t.val(),n.separator,n.transformVal)).each(function(){var t={id:this,text:this},r=n.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){if(g(this.id,t.id))return t=this,!1}),i.push(t)}),r(i)})));if(typeof n.query!="function")throw"query function not defined for Select2 "+n.element.attr("id");if(n.createSearchChoicePosition==="top")n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if(n.createSearchChoicePosition==="bottom")n.createSearchChoicePosition=function(e,t){e.push(t)};else if(typeof n.createSearchChoicePosition!="function")throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n=this.opts.element,r,i=this;n.on("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=n.prop("disabled");e===t&&(e=!1),this.enable(!e);var r=n.prop("readonly");r===t&&(r=!1),this.readonly(r),this.container&&(A(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(B(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(A(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(B(this.opts.dropdownCssClass,this.opts.element)))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",i._sync)}),r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,r!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new r(function(t){e.each(t,i._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0);if(this._enabled===e)return;this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface()},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1);if(this._readonly===e)return;this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface()},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t=this.dropdown,n=this.container,r=n.offset(),i=n.outerHeight(!1),s=n.outerWidth(!1),o=t.outerHeight(!1),u=e(window),a=u.width(),l=u.height(),c=u.scrollLeft()+a,h=u.scrollTop()+l,p=r.top+i,d=r.left,v=p+o<=h,m=r.top-o>=u.scrollTop(),g=t.outerWidth(!1),y=function(){return d+g<=c},b=function(){return r.left+c+n.outerWidth(!1)>g},w=t.hasClass("select2-drop-above"),E,S,x,T,N;w?(S=!0,!m&&v&&(x=!0,S=!1)):(S=!1,!v&&m&&(x=!0,S=!0)),x&&(t.hide(),r=this.container.offset(),i=this.container.outerHeight(!1),s=this.container.outerWidth(!1),o=t.outerHeight(!1),c=u.scrollLeft()+a,h=u.scrollTop()+l,p=r.top+i,d=r.left,g=t.outerWidth(!1),t.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(N=e(".select2-results",t)[0],t.addClass("select2-drop-auto-width"),t.css("width",""),g=t.outerWidth(!1)+(N.scrollHeight===N.clientHeight?0:f.width),g>s?s=g:g=s,o=t.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),this.body.css("position")!=="static"&&(E=this.body.offset(),p-=E.top,d-=E.left),!y()&&b()&&(d=r.left+this.container.outerWidth(!1)-g),T={left:d,width:s},S?(this.container.addClass("select2-drop-above"),t.addClass("select2-drop-above"),o=t.outerHeight(!1),T.top=r.top-o,T.bottom="auto"):(T.top=p,T.bottom="auto",this.container.removeClass("select2-drop-above"),t.removeClass("select2-drop-above")),T=e.extend(T,B(this.opts.dropdownCss,this.opts.element)),t.css(T)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),a.on("mousemove.select2Event",function(e){u.x=e.pageX,u.y=e.pageY}),!0):!1},opening:function(){var t=this.containerEventName,n="scroll."+t,r="resize."+t,i="orientationchange."+t,s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),s=e("#select2-drop-mask"),s.length===0&&(s=e(document.createElement("div")),s.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),s.hide(),s.appendTo(this.body),s.on("mousedown touchstart click",function(t){p(s);var n=e("#select2-drop"),r;n.length>0&&(r=n.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==s[0]&&this.dropdown.before(s),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),s.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+n+" "+i,function(e){o.opened()&&o.positionDropdown()})})},close:function(){if(!this.opened())return;var t=this.containerEventName,n="scroll."+t,r="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(r).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),a.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(e.Event("select2-close"))},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(this.search.val()!=="")return!1;var e=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return e!==t?(this.search.val(e),this.search.select(),!0):!1},getMaximumSelectionSize:function(){return B(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t=this.results,n,r,i,s,o,u,a,f;r=this.highlight();if(r<0)return;if(r==0){t.scrollTop(0);return}n=this.findHighlightableChoices().find(".select2-result-label"),i=e(n[r]),f=(i.offset()||{}).top||0,s=f+i.outerHeight(!0),r===n.length-1&&(a=t.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=t.offset().top+t.outerHeight(!1),s>o&&t.scrollTop(t.scrollTop()+(s-o)),u=f-t.offset().top,u<0&&i.css("display")!="none"&&t.scrollTop(t.scrollTop()+u)},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){var n=this.findHighlightableChoices(),r=this.highlight();while(r>-1&&r<n.length){r+=t;var i=e(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(t){var n=this.findHighlightableChoices(),r,i;if(arguments.length===0)return v(n.filter(".select2-highlighted")[0],n.get());t>=n.length&&(t=n.length-1),t<0&&(t=0),this.removeHighlight(),r=e(n[t]),r.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",r.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(r.text()),i=r.data("select2-data"),i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else n.length==0&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n,r=this.resultsPage+1,i=this,s=this.search.val(),o=this.context;if(t.length===0)return;n=t.offset().top-e.offset().top-e.height(),n<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:r,context:o,matcher:this.opts.matcher,callback:this.bind(function(n){if(!i.opened())return;i.opts.populateResults.call(this,e,n.results,{term:s,page:r,context:o}),i.postprocessResults(n,!1,!1),n.more===!0?(t.detach().appendTo(e).html(i.opts.escapeMarkup(B(i.opts.formatLoadMore,i.opts.element,r+1))),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):t.remove(),i.positionDropdown(),i.resultsPage=r,i.context=n.context,this.opts.element.trigger({type:"select2-loaded",items:n})})}))},tokenize:function(){},updateResults:function(n){function h(){r.removeClass("select2-active"),u.positionDropdown(),i.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?u.liveRegion.text(i.text()):u.liveRegion.text(u.opts.formatMatches(i.find('.select2-result-selectable:not(".select2-selected")').length))}function p(e){i.html(e),h()}var r=this.search,i=this.results,s=this.opts,o,u=this,a,f=r.val(),l=e.data(this.container,"select2-last-term"),c;if(n!==!0&&l&&g(f,l))return;e.data(this.container,"select2-last-term",f);if(n!==!0&&(this.showSearchInput===!1||!this.opened()))return;c=++this.queryCount;var d=this.getMaximumSelectionSize();if(d>=1){o=this.data();if(e.isArray(o)&&o.length>=d&&H(s.formatSelectionTooBig,"formatSelectionTooBig")){p("<li class='select2-selection-limit'>"+B(s.formatSelectionTooBig,s.element,d)+"</li>");return}}if(r.val().length<s.minimumInputLength){H(s.formatInputTooShort,"formatInputTooShort")?p("<li class='select2-no-results'>"+B(s.formatInputTooShort,s.element,r.val(),s.minimumInputLength)+"</li>"):p(""),n&&this.showSearch&&this.showSearch(!0);return}if(s.maximumInputLength&&r.val().length>s.maximumInputLength){H(s.formatInputTooLong,"formatInputTooLong")?p("<li class='select2-no-results'>"+B(s.formatInputTooLong,s.element,r.val(),s.maximumInputLength)+"</li>"):p("");return}s.formatSearching&&this.findHighlightableChoices().length===0&&p("<li class='select2-searching'>"+B(s.formatSearching,s.element)+"</li>"),r.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&a!=null&&r.val(a),this.resultsPage=1,s.query({element:s.element,term:r.val(),page:this.resultsPage,context:null,matcher:s.matcher,callback:this.bind(function(o){var a;if(c!=this.queryCount)return;if(!this.opened()){this.search.removeClass("select2-active");return}if(o.hasError!==t&&H(s.formatAjaxError,"formatAjaxError")){p("<li class='select2-ajax-error'>"+B(s.formatAjaxError,s.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");return}this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&r.val()!==""&&(a=this.opts.createSearchChoice.call(u,r.val(),o.results),a!==t&&a!==null&&u.id(a)!==t&&u.id(a)!==null&&e(o.results).filter(function(){return g(u.id(this),u.id(a))}).length===0&&this.opts.createSearchChoicePosition(o.results,a));if(o.results.length===0&&H(s.formatNoMatches,"formatNoMatches")){p("<li class='select2-no-results'>"+B(s.formatNoMatches,s.element,r.val())+"</li>"),this.showSearch&&this.showSearch(r.val());return}i.empty(),u.opts.populateResults.call(this,i,o.results,{term:r.val(),page:this.resultsPage,context:null}),o.more===!0&&H(s.formatLoadMore,"formatLoadMore")&&(i.append("<li class='select2-more-results'>"+s.escapeMarkup(B(s.formatLoadMore,s.element,this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),h(),this.opts.element.trigger({type:"select2-loaded",items:o})})})},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){T(this.search)},selectHighlighted:function(e){if(this._touchMoved){this.clearTouchMoved();return}var t=this.highlight(),n=this.results.find(".select2-highlighted"),r=n.closest(".select2-result").data("select2-data");r?(this.highlight(t),this.onSelect(r,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return this.opts.placeholderOption==="first"&&n||typeof this.opts.placeholderOption=="function"&&this.opts.placeholderOption(this.select);if(e.trim(n.text())===""&&n.val()==="")return n}},initContainerWidth:function(){function t(){var t,n,r,i,s,o;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){t=this.opts.element.attr("style");if(typeof t=="string"){n=t.split(";");for(i=0,s=n.length;i<s;i+=1){o=n[i].replace(/\s/g,""),r=o.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(r!==null&&r.length>=1)return r[1]}}return this.opts.width==="resolve"?(t=this.opts.element.css("width"),t.indexOf("%")>0?t:this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=t.call(this);n!==null&&this.container.css("width",n)}}),r=q(n,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,n,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),t=this.search.get(0),t.createTextRange?(n=t.createTextRange(),n.collapse(!1),n.select()):t.setSelectionRange&&(r=this.search.val().length,t.setSelectionRange(r,r))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"selection","focusser")},initContainer:function(){var t,n=this.container,r=this.dropdown,i=s(),o;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+i),this.focusser.attr("aria-labelledby","select2-chosen-"+i),this.results.attr("id","select2-results-"+i),this.search.attr("aria-owns","select2-results-"+i),this.focusser.attr("id","s2id_autogen"+i),o=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(o.text()).attr("for",this.focusser.attr("id"));var u=this.opts.element.attr("title");this.opts.element.attr("title",u||o.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(229==e.keyCode)return;if(e.which===l.PAGE_UP||e.which===l.PAGE_DOWN){C(e);return}switch(e.which){case l.UP:case l.DOWN:this.moveHighlight(e.which===l.UP?-1:1),C(e);return;case l.ENTER:this.selectHighlighted(),C(e);return;case l.TAB:this.selectHighlighted({noFocus:!0});return;case l.ESC:this.cancel(e),C(e);return}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&this.results.length>1&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===l.TAB||l.isControl(e)||l.isFunctionKey(e)||e.which===l.ESC)return;if(this.opts.openOnEnter===!1&&e.which===l.ENTER){C(e);return}if(e.which==l.DOWN||e.which==l.UP||e.which==l.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;this.open(),C(e);return}if(e.which==l.DELETE||e.which==l.BACKSPACE){this.opts.allowClear&&this.clear(),C(e);return}})),w(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){e.stopPropagation();if(this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){if(!this.isInterfaceEnabled())return;this.clear(),k(e),this.close(),this.selection&&this.selection.focus()})),t.on("mousedown touchstart",this.bind(function(n){p(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),C(n)})),r.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){C(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var r=e.Event("select2-clearing");this.opts.element.trigger(r);if(r.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){var e;if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&e!==null&&(n.updateSelection(e),n.close(),n.setPlaceholder(),n.lastSearchTerm=n.search.val())})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||this.opts.element.val()===""||this.opts.element.val()===t||this.opts.element.val()===null},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(e,t){var r=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=n.val(),s=null;t.query({matcher:function(e,n,r){var o=g(i,t.id(r));return o&&(s=r),o},callback:e.isFunction(r)?function(){r(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var r=0,i=this,s=!0;this.findHighlightableChoices().each2(function(e,t){if(g(i.id(t.data("select2-data")),i.opts.element.val()))return r=e,!1}),n!==!1&&(t===!0&&r>=0?this.highlight(r):this.highlight(0));if(t===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(j(e.results)>=o)}},showSearch:function(t){if(this.showSearchInput===t)return;this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t)},onSelect:function(e,t){if(!this.triggerSelect(e))return;var n=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.close(),(!t||!t.noFocus)&&this.opts.shouldFocusInput(this)&&this.focusser.focus(),g(n,this.id(e))||this.triggerChange({added:e,removed:r})},updateSelection:function(e){var n=this.selection.find(".select2-chosen"),r,i;this.selection.data("select2-data",e),n.empty(),e!==null&&(r=this.opts.formatSelection(e,n,this.opts.escapeMarkup)),r!==t&&n.append(r),i=this.opts.formatSelectionCssClass(e,n),i!==t&&n.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,r=null,i=this,s=this.data();if(arguments.length===0)return this.opts.element.val();e=arguments[0],arguments.length>1&&(n=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.'));if(this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return r=i.optionToData(t),!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange({added:r,removed:s});else{if(!e&&e!==0){this.clear(n);return}if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),n&&i.triggerChange({added:e,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,r=!1;if(arguments.length===0)return n=this.selection.data("select2-data"),n==t&&(n=null),n;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),arguments.length>1&&(r=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),r&&this.triggerChange({added:e,removed:n})):this.clear(r)}}),i=q(n,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(e,t){var r=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){r.push(n.optionToData(t))}),t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=y(n.val(),t.separator,t.transformVal),s=[];t.query({matcher:function(n,r,o){var u=e.grep(i,function(e){return g(e,t.id(o))}).length;return u&&s.push(o),u},callback:e.isFunction(r)?function(){var e=[];for(var n=0;n<i.length;n++){var o=i[n];for(var u=0;u<s.length;u++){var a=s[u];if(g(o,t.id(a))){e.push(a),s.splice(u,1);break}}}r(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");if(!t.length||!e||e[0]!=t[0])t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"searchContainer","selection")},initContainer:function(){var t=".select2-choices",n;this.searchContainer=this.container.find(".select2-search-field"),this.selection=n=this.container.find(t);var r=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(t){r.search[0].focus(),r.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+s()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){if(this.search.attr("placeholder")&&this.search.val().length==0)return;if(!this.isInterfaceEnabled())return;this.opened()||this.open()})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;++this.keydowns;var t=n.find(".select2-search-choice-focus"),r=t.prev(".select2-search-choice:not(.select2-locked)"),i=t.next(".select2-search-choice:not(.select2-locked)"),s=N(this.search);if(!(!t.length||e.which!=l.LEFT&&e.which!=l.RIGHT&&e.which!=l.BACKSPACE&&e.which!=l.DELETE&&e.which!=l.ENTER)){var o=t;e.which==l.LEFT&&r.length?o=r:e.which==l.RIGHT?o=i.length?i:null:e.which===l.BACKSPACE?this.unselect(t.first())&&(this.search.width(10),o=r.length?r:i):e.which==l.DELETE?this.unselect(t.first())&&(this.search.width(10),o=i.length?i:null):e.which==l.ENTER&&(o=null),this.selectChoice(o),C(e),(!o||!o.length)&&this.open();return}if((e.which===l.BACKSPACE&&this.keydowns==1||e.which==l.LEFT)&&s.offset==0&&!s.length){this.selectChoice(n.find(".select2-search-choice:not(.select2-locked)").last()),C(e);return}this.selectChoice(null);if(this.opened())switch(e.which){case l.UP:case l.DOWN:this.moveHighlight(e.which===l.UP?-1:1),C(e);return;case l.ENTER:this.selectHighlighted(),C(e);return;case l.TAB:this.selectHighlighted({noFocus:!0}),this.close();return;case l.ESC:this.cancel(e),C(e);return}if(e.which===l.TAB||l.isControl(e)||l.isFunctionKey(e)||e.which===l.BACKSPACE||e.which===l.ESC)return;if(e.which===l.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===l.PAGE_UP||e.which===l.PAGE_DOWN)&&C(e),e.which===l.ENTER&&C(e)})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",t,this.bind(function(t){if(!this.isInterfaceEnabled())return;if(e(t.target).closest(".select2-search-choice").length>0)return;this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()})),this.container.on("focus",t,this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder()})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var e;this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||this.opts.element.val()!==""){var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&e!==null&&(n.updateSelection(e),n.close(),n.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n={},r=[],i=this;e(t).each(function(){i.id(this)in n||(n[i.id(this)]=0,r.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(r),i.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),e!=null&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){if(!this.triggerSelect(e)||e.text==="")return;this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),(!t||!t.noFocus)&&this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var n=this.getVal(),r=this;e(t).each(function(){n.push(r.createChoice(this))}),this.setVal(n)},createChoice:function(n){var r=!n.locked,i=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),o=r?i:s,u=this.id(n),a,f;return a=this.opts.formatSelection(n,o.find("div"),this.opts.escapeMarkup),a!=t&&o.find("div").replaceWith(e("<div></div>").html(a)),f=this.opts.formatSelectionCssClass(n,o.find("div")),f!=t&&o.addClass(f),r&&o.find(".select2-search-choice-close").on("mousedown",C).on("click dblclick",this.bind(function(t){if(!this.isInterfaceEnabled())return;this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),C(t),this.close(),this.focusSearch()})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active")})),o.data("select2-data",n),o.insertBefore(this.searchContainer),u},unselect:function(t){var n=this.getVal(),r,i;t=t.closest(".select2-search-choice");if(t.length===0)throw"Invalid argument: "+t+". Must be .select2-search-choice";r=t.data("select2-data");if(!r)return;var s=e.Event("select2-removing");s.val=this.id(r),s.choice=r,this.opts.element.trigger(s);if(s.isDefaultPrevented())return!1;while((i=v(this.id(r),n))>=0)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(r),choice:r}),this.triggerChange({removed:r}),!0},postprocessResults:function(e,t,n){var r=this.getVal(),i=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),o=this;i.each2(function(e,t){var n=o.id(t.data("select2-data"));v(n,r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(e,t){!t.is(".select2-result-selectable")&&t.find(".select2-result-selectable:not(.select2-selected)").length===0&&t.addClass("select2-selected")}),this.highlight()==-1&&n!==!1&&this.opts.closeOnSelect===!0&&o.highlight(0),!this.opts.createSearchChoice&&!i.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&this.results.find(".select2-no-results").length===0)&&H(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+B(o.opts.formatNoMatches,o.opts.element,o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-b(this.search)},resizeSearch:function(){var e,t,n,r,i,s=b(this.search);e=L(this.search)+10,t=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(t-r)-s,i<e&&(i=n-s),i<40&&(i=n-s),i<=0&&(i=e),this.search.width(Math.floor(i))},getVal:function(){var e;return this.select?(e=this.select.val(),e===null?[]:e):(e=this.opts.element.val(),y(e,this.opts.separator,this.opts.transformVal))},setVal:function(t){if(this.select)this.select.val(t);else{var n=[],r={};e(t).each(function(){this in r||(n.push(this),r[this]=0)}),this.opts.element.val(n.length===0?"":n.join(this.opts.separator))}},buildChangeDetails:function(e,t){var t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var r=0;r<e.length;r++)if(g(this.opts.id(t[n]),this.opts.id(e[r]))){t.splice(n,1),n--,e.splice(r,1);break}return{added:t,removed:e}},val:function(n,r){var i,s=this;if(arguments.length===0)return this.getVal();i=this.data(),i.length||(i=[]);if(!n&&n!==0){this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),r&&this.triggerChange({added:this.data(),removed:i});return}this.setVal(n);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,s.id);s.setVal(n),s.updateSelection(t),s.clearSearch(),r&&s.triggerChange(s.buildChangeDetails(i,s.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var r=this,i,s;if(arguments.length===0)return this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();s=this.data(),t||(t=[]),i=e.map(t,function(e){return r.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(s,this.data()))}}),e.fn.select2=function(){var n=Array.prototype.slice.call(arguments,0),r,i,s,o,u,a=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],f=["opened","isFocused","container","dropdown"],l=["val","data"],c={search:"externalSearch"};return this.each(function(){if(n.length===0||typeof n[0]=="object")r=n.length===0?{}:e.extend({},n[0]),r.element=e(this),r.element.get(0).tagName.toLowerCase()==="select"?u=r.element.prop("multiple"):(u=r.multiple||!1,"tags"in r&&(r.multiple=u=!0)),i=u?new window.Select2["class"].multi:new window.Select2["class"].single,i.init(r);else{if(typeof n[0]!="string")throw"Invalid arguments to select2 plugin: "+n;if(v(n[0],a)<0)throw"Unknown method: "+n[0];o=t,i=e(this).data("select2");if(i===t)return;s=n[0],s==="container"?o=i.container:s==="dropdown"?o=i.dropdown:(c[s]&&(s=c[s]),o=i[s].apply(i,n.slice(1)));if(v(n[0],f)>=0||v(n[0],l)>=0&&n.length==1)return!1}}),o===t?this:o},e.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var i=[];return O(this.text(e),n.term,i,r),i.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,n,r){return e?r(this.text(e)):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return d(""+t).toUpperCase().indexOf(d(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:F,escapeMarkup:M,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t?e.opts.minimumResultsForSearch<0?!1:!0:!0}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return e===1?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(n==1?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(n==1?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(e==1?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:_,local:D,tags:P},util:{debounce:S,markMatch:O,escapeMarkup:M,stripDiacritics:d},"class":{"abstract":n,single:r,multi:i}}}(jQuery)}.apply(e,arguments)})}(this),define("app/views/serviceDetails",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/serviceDetails.html","backgrid","app/collections/messageTypes","toastr","app/views/deleteServiceModal","select2"],function(e,t,n,r,i,s,o,u){"use strict";var a=e.View.extend({events:{"click .saveServiceDetails":"_saveDetails","click .deleteService":"_showDeleteModal"},columns:[{name:"Name",label:"",cell:"string",headerClassName:"hidden",editable:!1}],bindings:{".name":"Name",".location":"InstanceLocation",".consumerType":"ConsumerType",".language":"Language"},initialize:function(){t.bindAll(this)},render:function(){this.$el.html(r),this.stickit(),this.inMessagesCollection=new s,this.outMessagesCollection=new s;if(this.model.get("In")!==null&&this.model.get("In")!==undefined){var t=this.model.get("In");for(var o=0;o<t.length;o++)this.inMessagesCollection.add(new e.Model({Name:t[o]}))}if(this.model.get("Out")!==null&&this.model.get("Out")!==undefined){var u=this.model.get("Out");for(var a=0;a<u.length;a++)this.outMessagesCollection.add(new e.Model({Name:u[a]}))}this.inGrid=new i.Grid({columns:this.columns,collection:this.inMessagesCollection}),this.$el.find(".inGrid").html(this.inGrid.render().$el);var f=new i.Extension.Paginator({collection:this.inMessagesCollection});this.$el.find(".inPaginator").html(f.render().$el),this.outGrid=new i.Grid({columns:this.columns,collection:this.outMessagesCollection}),this.$el.find(".outGrid").html(this.outGrid.render().$el);var l=new i.Extension.Paginator({collection:this.outMessagesCollection});this.$el.find(".outPaginator").html(l.render().$el),this.$el.find(".backgrid").addClass("table-hover"),this.$el.find(".backgrid").addClass("table-bordered");var c=this;return this.$el.find(".tags").select2({multiple:!0,createSearchChoice:function(e,t){if(n(t).filter(function(){return this.text.localeCompare(e)===0}).length===0)return{id:e,text:e}},allowClear:!0,query:function(e){n.ajax({url:"/tags",data:{query:e.term},success:function(t){var n=[];for(var r=0;r<t.length;r++)n.push({id:t[r],text:t[r]});e.callback({results:n})}})},initSelection:function(e,t){if(!c.model.get("Tags")){c.model.set("Tags",[]);return}var n=c.model.get("Tags"),r=[];for(var i=0;i<n.length;i++)r.push({id:n[i],text:n[i]});t(r)}}).on("select2-selecting",function(e,t){c.model.get("Tags").push(e.object.id)}).on("select2-removed",function(e,t){var r;n.each(c.model.get("Tags"),function(t,n){n===e.val&&(r=t)}),c.model.get("Tags").splice(r,1)}).select2("val",[]),this},_saveDetails:function(e){e.preventDefault(),this.model.save(null,{success:function(){o.success("Saved Service Tags")}})},_showDeleteModal:function(e){e.preventDefault();var t=new u({model:this.model});n("body").append(t.render().$el)},onClose:function(){this.unstickit()}});return a}),define("app/views/endpointDetails",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/endpointDetails.html","app/views/serviceTable","app/views/serviceGraph","app/views/serviceDetails","select2"],function(e,t,n,r,i,s,o){"use strict";var u=e.View.extend({el:".mainContent",events:{"change .from":"_fetchHeartbeats","change .to":"_fetchHeartbeats","change .timeRange":"_setRange"},initialize:function(){t.bindAll(this),this.tags=[],e.Hubs.HeartbeatHub.on("heartbeats",this._addHeartbeats)},render:function(){return this.$el.html(t.template(r,{header:this.model.get("Name")+" ("+this.model.get("InstanceLocation")+")"})),this.$el.find(".date").datetimepicker({autoclose:!0,format:"DD/MM/YYYY HH:mm:ss"}),this.$el.find(".from").val(moment.utc(this.model.get("From")).format("DD/MM/YYYY HH:mm:ss")),this.$el.find(".to").val(moment.utc(this.model.get("To")).format("DD/MM/YYYY HH:mm:ss")),this.serviceTable=new i({collection:this.collection,model:this.model}),this.renderView(this.serviceTable),this.$el.find(".serviceTable").html(this.serviceTable.$el),this.serviceGraph=new s({collection:this.collection.fullCollection,model:this.model}),this.$el.find(".serviceGraph").html(this.serviceGraph.$el),this.renderView(this.serviceGraph),this.details=new o({model:this.model}),this.renderView(this.details),this.$el.find(".serviceDetails").html(this.details.$el),this.$el.find(".dateRange").hide(),this},_fetchHeartbeats:function(){this.model.set("From",moment.utc(this.$el.find(".from").val(),"DD/MM/YYYY HH:mm:ss").format()),this.model.set("To",moment.utc(this.$el.find(".to").val(),"DD/MM/YYYY HH:mm:ss").format()),this.collection.fetch({data:{name:this.model.get("Name"),location:this.model.get("InstanceLocation"),from:this.model.get("From"),to:this.model.get("To")},reset:!0})},_setRange:function(t){e.Hubs.HeartbeatHub.off("heartbeats",this._addHeartbeats);var r=n(t.currentTarget).val(),i=moment.utc(this.$el.find(".from").val(),"DD/MM/YYYY HH:mm:ss").format();this.$el.find(".dateRange").hide();switch(r){case"Last 5m":i=moment.utc().subtract(5,"minutes").format();break;case"Last 15m":i=moment.utc().subtract(15,"minutes").format();break;case"Last 30m":i=moment.utc().subtract(30,"minutes").format();break;case"Last 1h":i=moment.utc().subtract(60,"minutes").format();break;case"Last 2h":i=moment.utc().subtract(120,"minutes").format();break;case"Last 4h":i=moment.utc().subtract(240,"minutes").format();break;case"Last 6h":i=moment.utc().subtract(360,"minutes").format();break;case"Last 12h":i=moment.utc().subtract(720,"minutes").format();break;case"Last 24h":i=moment.utc().subtract(1440,"minutes").format();break;case"Last 2d":i=moment.utc().subtract(2880,"minutes").format();break;case"Last 7d":i=moment.utc().subtract(10080,"minutes").format();break;case"Last 14d":i=moment.utc().subtract(20160,"minutes").format();break;case"Last 30d":i=moment.utc().subtract(43200,"minutes").format();break;case"Custom Range":this.$el.find(".dateRange").show();break;default:}this.model.set("From",i),this.model.set("To",moment.utc().format()),r!=="Custom Range"&&e.Hubs.HeartbeatHub.on("heartbeats",this._addHeartbeats),this.$el.find(".from").val(moment.utc(this.model.get("From")).format("DD/MM/YYYY HH:mm:ss")),this.$el.find(".to").val(moment.utc(this.model.get("To")).format("DD/MM/YYYY HH:mm:ss")),this.collection.fetch({data:{name:this.model.get("Name"),location:this.model.get("InstanceLocation"),from:this.model.get("From"),to:this.model.get("To")},reset:!0})},_addHeartbeats:function(t){var n=[];for(var r=0;r<t.length;r++)t[r].Name===this.model.get("Name")&&t[r].Location===this.model.get("InstanceLocation")&&(this.collection.add(new e.Model(t[r]),{at:0}),n.push(t[r]));this.serviceGraph.addHeartbeats(n)},onClose:function(){e.Hubs.HeartbeatHub.off("heartbeats",this._addHeartbeats)}});return u}),define("bower_components/requirejs-text/text!app/templates/auditMessageDetails.html",[],function(){return'<div class="content-frame">\r\n    <div class="content-frame-top">\r\n        <div class="page-title">\r\n            <h2><span class="fa fa-list"></span> Audit Details</h2>\r\n        </div>\r\n    </div>\r\n    <div class="page-content-wrap">\r\n\r\n        <div class="panel panel-default">\r\n            <div class="panel-body">\r\n                <form role="form">\r\n                    <div class="form-group">\r\n                        <label>Type Name</label>\r\n                        <input type="text" class="form-control TypeName" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Full Type Name</label>\r\n                        <input type="text" class="form-control FullTypeName" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Message Type</label>\r\n                        <input type="text" class="form-control MessageType" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Consumer Type</label>\r\n                        <input type="text" class="form-control ConsumerType" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Language</label>\r\n                        <input type="text" class="form-control Language" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Source Machine</label>\r\n                        <input type="text" class="form-control SourceMachine" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Source Address</label>\r\n                        <input type="text" class="form-control SourceAddress" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Destination Machine</label>\r\n                        <input type="text" class="form-control DestinationMachine" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Destination Address</label>\r\n                        <input type="text" class="form-control DestinationAddress" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Time Sent</label>\r\n                        <input type="text" class="form-control TimeSent" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Time Received</label>\r\n                        <input type="text" class="form-control TimeReceived" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Time Processed</label>\r\n                        <input type="text" class="form-control TimeProcessed" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Processing Time</label>\r\n                        <input type="text" class="form-control ProcessingTime" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Body</label>\r\n                        <pre class="Body json" style="width: 100%;"></pre>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>'}),define("app/views/auditMessageDetails",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/auditMessageDetails.html","moment"],function(e,t,n,r,i){"use strict";var s=e.View.extend({el:".mainContent",bindings:{".TypeName":"TypeName",".FullTypeName":"FullTypeName",".MessageType":"MessageType",".ConsumerType":"ConsumerType",".Language":"Language",".SourceMachine":"SourceMachine",".SourceAddress":"SourceAddress",".DestinationMachine":"DestinationMachine",".DestinationAddress":"DestinationAddress",".TimeSent":{observe:"TimeSent",onGet:function(e){return i.utc(e).format("DD/MM/YYYY HH:mm:ss.SSS")}},".TimeReceived":{observe:"TimeReceived",onGet:function(e){return i.utc(e).format("DD/MM/YYYY HH:mm:ss.SSS")}},".TimeProcessed":{observe:"TimeProcessed",onGet:function(e){return i.utc(e).format("DD/MM/YYYY HH:mm:ss.SSS")}},".ProcessingTime":{observe:["TimeReceived","TimeProcessed"],onGet:function(e){return i.utc(i.duration(i.utc(e[0]).diff(i.utc(e[1]))).get("milliseconds")).format("HH:mm:ss.SSS")}}},initialize:function(){t.bindAll(this)},_jsonSyntaxHighlight:function(e){return typeof e!="string"&&(e=JSON.stringify(e,undefined,2)),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?/:$/.test(e)?t="key":t="string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})},render:function(){this.$el.html(r),this.stickit();var e=JSON.parse(this.model.get("Body")),t=JSON.stringify(e,undefined,2);return this.$el.find(".Body").html(this._jsonSyntaxHighlight(t)),this},onClose:function(){this.unstickit()}});return s}),define("bower_components/requirejs-text/text!app/templates/errorMessageDetails.html",[],function(){return'<div class="content-frame">\r\n    <div class="content-frame-top">\r\n        <div class="page-title">\r\n            <h2><span class="fa fa-list"></span> Error Details</h2>\r\n        </div>\r\n    </div>\r\n    <div class="page-content-wrap">\r\n\r\n        <div class="panel panel-default">\r\n            <div class="panel-body">\r\n                <form role="form">\r\n                    <div class="form-group">\r\n                        <label>Type Name</label>\r\n                        <input type="text" class="form-control TypeName" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Full Type Name</label>\r\n                        <input type="text" class="form-control FullTypeName" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Message Type</label>\r\n                        <input type="text" class="form-control MessageType" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Consumer Type</label>\r\n                        <input type="text" class="form-control ConsumerType" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Language</label>\r\n                        <input type="text" class="form-control Language" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Source Machine</label>\r\n                        <input type="text" class="form-control SourceMachine" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Source Address</label>\r\n                        <input type="text" class="form-control SourceAddress" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Destination Machine</label>\r\n                        <input type="text" class="form-control DestinationMachine" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Destination Address</label>\r\n                        <input type="text" class="form-control DestinationAddress" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Time Sent</label>\r\n                        <input type="text" class="form-control TimeSent" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Time Received</label>\r\n                        <input type="text" class="form-control TimeReceived" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Time Processed</label>\r\n                        <input type="text" class="form-control TimeProcessed" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Processing Time</label>\r\n                        <input type="text" class="form-control ProcessingTime" readonly>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Exception</label>\r\n                        <pre class="Exception json" style="width: 100%;"></pre>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label>Body</label>\r\n                        <pre class="Body json" style="width: 100%;"></pre>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>'}),define("app/views/errorMessageDetails",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/errorMessageDetails.html","moment"],function(e,t,n,r,i){"use strict";var s=e.View.extend({el:".mainContent",bindings:{".TypeName":"TypeName",".FullTypeName":"FullTypeName",".MessageType":"MessageType",".ConsumerType":"ConsumerType",".Language":"Language",".SourceMachine":"SourceMachine",".SourceAddress":"SourceAddress",".DestinationMachine":"DestinationMachine",".DestinationAddress":"DestinationAddress",".TimeSent":{observe:"TimeSent",onGet:function(e){return i.utc(e).format("DD/MM/YYYY HH:mm:ss.SSS")}},".TimeReceived":{observe:"TimeReceived",onGet:function(e){return i.utc(e).format("DD/MM/YYYY HH:mm:ss.SSS")}},".TimeProcessed":{observe:"TimeProcessed",onGet:function(e){return i.utc(e).format("DD/MM/YYYY HH:mm:ss.SSS")}},".ProcessingTime":{observe:["TimeReceived","TimeProcessed"],onGet:function(e){return i.utc(i.duration(i.utc(e[0]).diff(i.utc(e[1]))).get("milliseconds")).format("HH:mm:ss.SSS")}}},initialize:function(){t.bindAll(this)},render:function(){this.$el.html(r),this.stickit();var e=JSON.parse(this.model.get("Body")),t=JSON.stringify(e,undefined,2);return this.$el.find(".Body").html(this._jsonSyntaxHighlight(t)),t=JSON.stringify(this.model.get("Exception"),undefined,2),this.$el.find(".Exception").html(this._jsonSyntaxHighlight(t)),this},_jsonSyntaxHighlight:function(e){return typeof e!="string"&&(e=JSON.stringify(e,undefined,2)),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?/:$/.test(e)?t="key":t="string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})},onClose:function(){this.unstickit()}});return s}),define("bower_components/requirejs-text/text!app/templates/navigation.html",[],function(){return'<div style="position: relative; top: 0px; left: 0px;">\r\n</div>\r\n\r\n<ul class="x-navigation">\r\n    <li class=" rLogo" style="background-color: #E34724">\r\n        <a href="#endpoints" style="font-size: 17px; font-weight: bold;text-align: center;">ServiceConnect.Monitor</a>\r\n    </li>\r\n    <li class="active">\r\n        <a href="#endpoints"><span class="fa fa fa-share-alt"></span><span class="xn-text">Endpoints</span></a>\r\n    </li>\r\n    <li>\r\n        <a href="#audit"><i class="fa fa-envelope"></i><span class="xn-text">Audit Messages</span></a>\r\n    </li>\r\n    <li class="errors">\r\n        <a href="#error"><i class="fa fa-exclamation-circle"></i><span class="xn-text">Error Messages</span><span class="error-icon fa fa-warning" style="float: right; color: red; margin-right: 0; margin-top: 5px; display: none;"></span></a>\r\n    </li>\r\n    <li>\r\n        <a href="#settings"><i class="fa fa-cog"></i><span class="xn-text">Settings</span></a>\r\n    </li>\r\n</ul>'}),define("app/views/navigation",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/navigation.html"],function(e,t,n,r){"use strict";var i=e.View.extend({el:".navigation",events:{"click li > a":"_setActive"},initialize:function(){t.bindAll(this),e.Hubs.ErrorHub.on("errors",this._addErrorIcon)},render:function(){return this.$el.html(r),this},_setActive:function(e){this.$el.find(".active").removeClass("active"),n(e.currentTarget).parent().addClass("active"),n(e.currentTarget).parent().hasClass("errors")&&this.$el.find(".error-icon").hide()},setActive:function(e){this.$el.find(".navigationItems").removeClass("active");try{this.$el.find("."+e).addClass("active")}catch(t){}},_addErrorIcon:function(){if(!this.$el.find(".active").hasClass("errors")){var e=this.$el.find(".error-icon");e.fadeIn(100).delay(100).fadeOut(100).fadeIn(100).delay(100).fadeOut(100).fadeIn(100).delay(100).fadeOut(100).fadeIn(100).delay(100).fadeOut(100).fadeIn(100)}},onClose:function(){e.Hubs.ErrorHub.off("errors",this._addErrorIcon)}});return i}),define("bower_components/requirejs-text/text!app/templates/settings.html",[],function(){return'<div class="content-frame">\r\n    <div class="content-frame-top">\r\n        <div class="page-title">\r\n            <h2><span class="fa fa-cog"></span> Settings</h2>\r\n        </div>\r\n    </div>\r\n    <div class="page-content-wrap">\r\n\r\n        <div class="panel panel-default">\r\n            <div class="panel-body">\r\n                <form role="form">\r\n                    <div class="row padded-bottom">\r\n                        <div class="col-md-12">\r\n                            <h3 style="margin-bottom: 0;">Message Forwarding</h3>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row padded-bottom">\r\n                        <div class="col-md-12">\r\n                            <div class="form-group">\r\n                                <div class="checkbox">\r\n                                    <label>\r\n                                        <input type="checkbox" class=" ForwardErrors"> Forward error messages?\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="form-group ForwardErrorQueueContainer" style="display: none;">\r\n                                <label>Forward Error Queue</label>\r\n                                <input type="text" class="form-control ForwardErrorQueue" />\r\n                            </div>\r\n                            <div class="form-group">\r\n                                <div class="checkbox">\r\n                                    <label>\r\n                                        <input type="checkbox" class=" ForwardAudit"> Forward audit messages?\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="form-group ForwardAuditQueueContainer" style="display: none;">\r\n                                <label>Forward Audit Queue</label>\r\n                                <input type="text" class="form-control ForwardAuditQueue" />\r\n                            </div>\r\n                            <div class="form-group">\r\n                                <div class="checkbox ">\r\n                                    <label>\r\n                                        <input type="checkbox" class=" ForwardHeartbeats"> Forward heartbeat messages?\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="form-group ForwardHeartbeatQueueContainer" style="display: none;">\r\n                                <label>Forward Heartbeat Queue</label>\r\n                                <input type="text" class="form-control ForwardHeartbeatQueue" />\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div class="row padded-bottom">\r\n                        <div class="col-md-12">\r\n                            <h3 style="margin-bottom: 0;">Environments</h3>\r\n                            <button type="submit" class="btn btn-primary addEnvironment pull-right">Add Environment</button>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row padded-bottom">\r\n                        <div class="col-md-12">\r\n                            <div class="grid" style="background-color: white; width: 100%;">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row padded-top">\r\n                        <div class="col-md-12">\r\n                            <h3>Expiry</h3>\r\n                            <p>Leave input empty to keep forever.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row  padded-bottom">\r\n                        <div class="col-md-3">\r\n                            <div class="form-group">\r\n                                <div class="row" style="margin-right: -10px; margin-left: -10px;">\r\n                                    <div class="col-md-12">\r\n                                        <label>Audits</label>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row" style="margin-right: -10px; margin-left: -10px;">\r\n                                    <div class="col-md-6">\r\n                                        <input type="number" min="1" class="form-control auditExpiry" />\r\n                                    </div>\r\n                                    <div class="col-md-6" style="line-height: 2.5;">\r\n                                        days\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="form-group">\r\n                                <div class="row" style="margin-right: -10px; margin-left: -10px;">\r\n                                    <div class="col-md-12">\r\n                                        <label>Errors</label>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row" style="margin-right: -10px; margin-left: -10px;">\r\n                                    <div class="col-md-6">\r\n                                        <input type="number" min="1" class="form-control errorExpiry" />\r\n                                    </div>\r\n                                    <div class="col-md-6" style="line-height: 2.5;">\r\n                                        days\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="form-group">\r\n                                <div class="row" style="margin-right: -10px; margin-left: -10px;">\r\n                                    <div class="col-md-12">\r\n                                        <label>Heartbeats</label>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row" style="margin-right: -10px; margin-left: -10px;">\r\n                                    <div class="col-md-6">\r\n                                        <input type="number" min="1" class="form-control heartbeatExpiry" />\r\n                                    </div>\r\n                                    <div class="col-md-6" style="line-height: 2.5;">\r\n                                        days\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row padded-bottom">\r\n                        <div class="col-md-12">\r\n                            <div class="form-group">\r\n                                <button type="submit" class="btn btn-primary saveSettings">Save</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>'}),define("app/views/settings",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/settings.html","backgrid","toastr"],function(e,t,n,r,i,s){"use strict";var o=e.View.extend({el:".mainContent",events:{"click .saveSettings":"_saveSettings","click .addEnvironment":"_addEnvironment","click .removeEnvironment":"_removeEnvironment"},columns:[{name:"Server",cell:"string"},{name:"Username",cell:"string"},{name:"Password",cell:"string"},{name:"SslEnabled",cell:"boolean"},{name:"CertBase64",cell:"string"},{name:"CertPassword",cell:"string"},{name:"ErrorQueue",cell:"string"},{name:"AuditQueue",cell:"string"},{name:"HeartbeatQueue",cell:"string"},{label:"",name:"id",cell:"html",editable:!1,formatter:t.extend({},i.CellFormatter.prototype,{fromRaw:function(e,t){return"<a href='javascript:void(0)' class='removeEnvironment' cid='"+t.cid+"' >Remove</a>"}})}],bindings:{".ForwardErrors":{observe:"ForwardErrors",onGet:function(e){return e?n(".ForwardErrorQueueContainer").show():n(".ForwardErrorQueueContainer").hide(),e},onSet:function(e){return e?n(".ForwardErrorQueueContainer").show():n(".ForwardErrorQueueContainer").hide(),e}},".ForwardErrorQueue":"ForwardErrorQueue",".ForwardAudit":{observe:"ForwardAudit",onGet:function(e){return e?n(".ForwardAuditQueueContainer").show():n(".ForwardAuditQueueContainer").hide(),e},onSet:function(e){return e?n(".ForwardAuditQueueContainer").show():n(".ForwardAuditQueueContainer").hide(),e}},".ForwardAuditQueue":"ForwardAuditQueue",".ForwardHeartbeats":{observe:"ForwardHeartbeats",onGet:function(e){return e?n(".ForwardHeartbeatQueueContainer").show():n(".ForwardHeartbeatQueueContainer").hide(),e},onSet:function(e){return e?n(".ForwardHeartbeatQueueContainer").show():n(".ForwardHeartbeatQueueContainer").hide(),e}},".auditExpiry":"KeepAuditsFor",".errorExpiry":"KeepErrorsFor",".heartbeatExpiry":"KeepHeartbeatsFor"},initialize:function(){t.bindAll(this)},render:function(){return this.$el.html(r),this.grid=new i.Grid({columns:this.columns,collection:this.model.get("Environments")}),this.$el.find(".grid").html(this.grid.render().$el),this.$el.find(".backgrid").addClass("table-hover"),this.$el.find(".backgrid").addClass("table-bordered"),this.stickit(),this},_saveSettings:function(e){e.preventDefault(),this.model.save(null,{success:function(){s.success("Saved settings")},errors:function(){s.success("Failed to save settings")}})},_addEnvironment:function(t){t.preventDefault(),this.model.get("Environments").add(new e.Model({ErrorQueue:"errors",AuditQueue:"audit",HeartbeatQueue:"heartbeat",Username:"guest",Password:"guest"}))},_removeEnvironment:function(e){e.preventDefault();var t=n(e.currentTarget).attr("cid");this.model.get("Environments").remove(t)},onClose:function(){this.unstickit()}});return o}),define("bower_components/requirejs-text/text!app/templates/route.html",[],function(){return'<div class="content-frame">\r\n    <div class="content-frame-top">\r\n        <div class="page-title">\r\n            <h2><span class="fa fa-random"></span> Route</h2>\r\n        </div>\r\n    </div>\r\n    <div class="page-content-wrap">\r\n        <div class="panel panel-default">\r\n            <div class="panel-body">\r\n                <div class="row">\r\n                    <div class="col-sm-12 endpointGraph"></div>\r\n                </div>\r\n                <div class="row">\r\n                    <div id="slider"></div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-12 routeTable"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("app/views/route",["backbone","underscore","jquery","bower_components/requirejs-text/text!app/templates/route.html","app/collections/auditMessages","app/collections/errorMessages","app/views/auditTable","app/views/endpointGraph","backbone-pageable"],function(e,t,n,r,i,s,o,u){"use strict";var a=e.View.extend({el:".mainContent",initialize:function(e){t.bindAll(this),this.options=e},render:function(){this.$el.html(r),this.auditCollection=new i,this.errorCollection=new s;var t=this.auditCollection.fetch({data:{correlationId:this.options.correlationId}}),o=this.errorCollection.fetch({data:{correlationId:this.options.correlationId}}),u=this;return n.when(t,o).done(function(){u.collection=new e.PageableCollection(u.auditCollection.fullCollection.toJSON()),u.collection.add(u.errorCollection.fullCollection.toJSON()),u._renderViews()}),this},_renderViews:function(){var t=new e.Collection,n=new e.Collection;this.collection.each(function(t){var r=n.findWhere({Out:t.get("SourceAddress"),In:t.get("DestinationAddress"),Type:t.get("TypeName")});r?r.set({Count:r.get("Count")+1}):n.add(new e.Model({Out:t.get("SourceAddress"),In:t.get("DestinationAddress"),Type:t.get("TypeName"),Count:1}))}),this.collection.each(function(n){var r=t.findWhere({Name:n.get("SourceAddress")});r||t.add(new e.Model({Name:n.get("SourceAddress")}));var i=t.findWhere({Name:n.get("DestinationAddress")});i||t.add(new e.Model({Name:n.get("DestinationAddress")}))}),this.endpointGraphView=new u({serviceMessagesCollection:n,endpointCollection:t}),this.$el.find(".endpointGraph").html(this.endpointGraphView.$el),this.renderView(this.endpointGraphView),this.auditTableView=new o({collection:this.collection});for(var r=0;r<this.auditTableView.columns.length;r++)if(this.auditTableView.columns[r].id==="Route"){this.auditTableView.columns.splice(r,1);break}this.$el.find(".routeTable").html(this.auditTableView.$el),this.renderView(this.auditTableView)}});return a}),define("app/collections/heartbeats",["backbone","backbone-pageable"],function(e){"use strict";var t=e.PageableCollection.extend({url:"heartbeats",mode:"client"});return t}),define("app/models/endpoint",["backbone"],function(e){"use strict";var t=e.Model.extend({idAttribute:"Id",urlRoot:"service"});return t}),define("app/models/audit",["backbone"],function(e){"use strict";var t=e.Model.extend({idAttribute:"Id",urlRoot:"audit"});return t}),define("app/models/settings",["backbone"],function(e){"use strict";var t=e.Model.extend({url:"settings",initialize:function(){_.bindAll(this),this.attributes.Environments instanceof e.Collection||(this.attributes.Environments=new e.Collection(this.attributes.Environments))},parse:function(t){return t&&(t.Environments=new e.Collection(t.Environments)),t},toJSON:function(){var e=_.clone(this.attributes);return $.each(e,function(t,n){n!==null&&n!==undefined&&_(n.toJSON).isFunction()&&(e[t]=n.toJSON())}),e}});return t}),define("app/routers/main",["backbone","app/views/endpoints","app/views/auditMessages","app/views/errorMessages","app/views/endpointDetails","app/views/auditMessageDetails","app/views/errorMessageDetails","app/views/navigation","app/views/settings","app/views/route","app/collections/heartbeats","app/models/endpoint","app/models/audit","app/models/error","app/models/settings","moment"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){"use strict";var m=e.Router.extend({routes:{"":"endpoints","endpoints(/)":"endpoints","endpoint/:name/:location":"endpointDetails","audit(/)":"audits","audit/:id":"auditDetails","error(/)":"errors","error/:id":"errorDetails","settings(/)":"settings","route/:id":"messageRoute"},before:function(e){this.navigation||(this.navigation=new u,this.navigation.render()),e===""&&(e="endpoints"),this.navigation.setActive(e),this.closeViews()},endpoints:function(){var e=new t;this.renderView(e)},audits:function(){var e=new n;this.renderView(e)},errors:function(){var e=new r;this.renderView(e)},endpointDetails:function(e,t){var n=this,r=new l,s=new c,o=s.fetch({data:{name:e,location:t}}),u=r.fetch({data:{name:e,location:t,from:v.utc().subtract(1,"hours").format(),to:v.utc().format()}});$.when(o,u).done(function(){s.set({From:v.utc().subtract(1,"hours").format(),To:v.utc().format()});var e=new i({collection:r,model:s});n.renderView(e)})},auditDetails:function(e){var t=this,n=new h({Id:e});n.fetch({success:function(){var e=new s({model:n});t.renderView(e)}})},errorDetails:function(e){var t=this,n=new p({Id:e});n.fetch({success:function(){var e=new o({model:n});t.renderView(e)}})},settings:function(){var e=this,t=new d;t.fetch({success:function(){var n=new a({model:t});e.renderView(n)}})},messageRoute:function(e){var t=new f({correlationId:e});this.renderView(t)}});return m}),function(e){define("bootstrap",["jquery"],function(){return function(){if(typeof jQuery=="undefined")throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||t[0]==1&&t[1]==9&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t();if(!e.support.transition)return;e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}})}(jQuery),+function(e){"use strict";function r(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})}var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function o(){s.detach().trigger("closed.bs.alert").remove()}var r=e(this),i=r.attr("data-target");i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=e(i==="#"?[]:i);t&&t.preventDefault(),s.length||(s=r.closest(".alert")),s.trigger(t=e.Event("close.bs.alert"));if(t.isDefaultPrevented())return;s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o()};var i=e.fn.alert;e.fn.alert=r,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),s=typeof n=="object"&&n;i||r.data("bs.button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})}var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};t.VERSION="3.3.7",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",s.resetText==null&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](s[t]==null?this.options[t]:s[t]),t=="loadingText"?(this.isLoading=!0,r.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");n.prop("type")=="radio"?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):n.prop("type")=="checkbox"&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=n,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=e(t.target).closest(".btn");n.call(r,"toggle"),e(t.target).is('input[type="radio"], input[type="checkbox"]')||(t.preventDefault(),r.is("input,button")?r.trigger("focus"):r.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("bs.carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})}var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};t.VERSION="3.3.7",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r=e=="prev"&&n===0||e=="next"&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i=e=="prev"?-1:1,s=(n+i)%this.$items.length;return this.$items.eq(s)},t.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(e>this.$items.length-1||e<0)return;return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(this.sliding)return;return this.slide("next")},t.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")},t.prototype.slide=function(n,r){var i=this.$element.find(".item.active"),s=r||this.getItemForDirection(n,i),o=this.interval,u=n=="next"?"left":"right",a=this;if(s.hasClass("active"))return this.sliding=!1;var f=s[0],l=e.Event("slide.bs.carousel",{relatedTarget:f,direction:u});this.$element.trigger(l);if(l.isDefaultPrevented())return;this.sliding=!0,o&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=e(this.$indicators.children()[this.getItemIndex(s)]);c&&c.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:f,direction:u});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(n),s[0].offsetWidth,i.addClass(u),s.addClass(u),i.one("bsTransitionEnd",function(){s.removeClass([n,u].join(" ")).addClass("active"),i.removeClass(["active",u].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(h)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(h)),o&&this.cycle(),this};var r=e.fn.carousel;e.fn.carousel=n,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(t){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(!s.hasClass("carousel"))return;var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),n.call(s,o),u&&s.data("bs.carousel").to(u),t.preventDefault()};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function n(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function r(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n);!i&&s.toggle&&/show|hide/.test(n)&&(s.toggle=!1),i||r.data("bs.collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],'+'[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};t.VERSION="3.3.7",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var n,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(i&&i.length){n=i.data("bs.collapse");if(n&&n.transitioning)return}var s=e.Event("show.bs.collapse");this.$element.trigger(s);if(s.isDefaultPrevented())return;i&&i.length&&(r.call(i,"hide"),n||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return u.call(this);var a=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[o](this.$element[0][a])},t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var n=e.Event("hide.bs.collapse");this.$element.trigger(n);if(n.isDefaultPrevented())return;var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return i.call(this);this.$element[r](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(t.TRANSITION_DURATION)},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,r){var i=e(r);this.addAriaAndCollapsedClass(n(i),i)},this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=r,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var i=e(this);i.attr("data-target")||t.preventDefault();var s=n(i),o=s.data("bs.collapse"),u=o?"toggle":i.data();r.call(s,u)})}(jQuery),+function(e){"use strict";function i(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function s(r){if(r&&r.which===3)return;e(t).remove(),e(n).each(function(){var t=e(this),n=i(t),s={relatedTarget:this};if(!n.hasClass("open"))return;if(r&&r.type=="click"&&/input|textarea/i.test(r.target.tagName)&&e.contains(n[0],r.target))return;n.trigger(r=e.Event("hide.bs.dropdown",s));if(r.isDefaultPrevented())return;t.attr("aria-expanded","false"),n.removeClass("open").trigger(e.Event("hidden.bs.dropdown",s))})}function o(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),typeof t=="string"&&i[t].call(n)})}var t=".dropdown-backdrop",n='[data-toggle="dropdown"]',r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.7",r.prototype.toggle=function(t){var n=e(this);if(n.is(".disabled, :disabled"))return;var r=i(n),o=r.hasClass("open");s();if(!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",s);var u={relatedTarget:this};r.trigger(t=e.Event("show.bs.dropdown",u));if(t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger(e.Event("shown.bs.dropdown",u))}return!1},r.prototype.keydown=function(t){if(!/(38|40|27|32)/.test(t.which)||/input|textarea/i.test(t.target.tagName))return;var r=e(this);t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;var s=i(r),o=s.hasClass("open");if(!o&&t.which!=27||o&&t.which==27)return t.which==27&&s.find(n).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",a=s.find(".dropdown-menu"+u);if(!a.length)return;var f=a.index(t.target);t.which==38&&f>0&&f--,t.which==40&&f<a.length-1&&f++,~f||(f=0),a.eq(f).trigger("focus")};var u=e.fn.dropdown;e.fn.dropdown=o,e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),+function(e){"use strict";function n(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),typeof n=="object"&&n);s||i.data("bs.modal",s=new t(this,o)),typeof n=="string"?s[n](r):o.show&&s.show(r)})}var t=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.VERSION="3.3.7",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var r=this,i=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(i);if(this.isShown||i.isDefaultPrevented())return;this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:n});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)})},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n);if(!this.isShown||n.isDefaultPrevented())return;this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal()},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length&&this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=!1;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!n)return;s?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):o()}else n&&n()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&t.preventDefault(),s.one("show.bs.modal",function(e){if(e.isDefaultPrevented())return;s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),n.call(s,o,this)})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s=typeof n=="object"&&n;if(!i&&/destroy|hide/.test(n))return;i||r.data("bs.tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};t.VERSION="3.3.7",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1};if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");var i=this.options.trigger.split(" ");for(var s=i.length;s--;){var o=i[s];if(o=="click")this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if(o!="manual"){var u=o=="hover"?"mouseenter":"focusin",a=o=="hover"?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState[t.type=="focusin"?"focus":"hover"]=!0);if(n.tip().hasClass("in")||n.hoverState=="in"){n.hoverState="in";return}clearTimeout(n.timeout),n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState[t.type=="focusout"?"focus":"hover"]=!1);if(n.isInStateTrue())return;clearTimeout(n.timeout),n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var i=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var u=typeof this.options.placement=="function"?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,f=a.test(u);f&&(u=u.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),c=s[0].offsetWidth,h=s[0].offsetHeight;if(f){var p=u,d=this.getPosition(this.$viewport);u=u=="bottom"&&l.bottom+h>d.bottom?"top":u=="top"&&l.top-h<d.top?"bottom":u=="right"&&l.right+c>d.width?"left":u=="left"&&l.left-c<d.left?"right":u,s.removeClass(p).addClass(u)}var v=this.getCalculatedOffset(u,l,c,h);this.applyPlacement(v,u);var m=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,e=="out"&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(t.TRANSITION_DURATION):m()}},t.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top+=o,t.left+=u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var a=r[0].offsetWidth,f=r[0].offsetHeight;n=="top"&&f!=s&&(t.top=t.top+s-f);var l=this.getViewportAdjustedDelta(n,t,a,f);l.left?t.left+=l.left:t.top+=l.top;var c=/top|bottom/.test(n),h=c?l.left*2-i+a:l.top*2-s+f,p=c?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(h,r[0][p],c)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){function o(){r.hoverState!="in"&&i.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),n&&n()}var r=this,i=e(this.$tip),s=e.Event("hide.bs."+this.type);this.$element.trigger(s);if(s.isDefaultPrevented())return;return i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r=n.tagName=="BODY",i=n.getBoundingClientRect();i.width==null&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=window.SVGElement&&n instanceof window.SVGElement,o=r?{top:0,left:0}:s?null:t.offset(),u={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},a=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,u,a,o)},t.prototype.getCalculatedOffset=function(e,t,n,r){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-n/2}:e=="top"?{top:t.top-r,left:t.left+t.width/2-n/2}:e=="left"?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.right&&(i.left=o.left+o.width-l)}return i},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},t.prototype.getUID=function(e){do e+=~~(Math.random()*1e6);while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip){this.$tip=e(this.options.template);if(this.$tip.length!=1)throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var r=e.fn.tooltip;e.fn.tooltip=n,e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s=typeof n=="object"&&n;if(!i&&/destroy|hide/.test(n))return;i||r.data("bs.popover",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.7",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?typeof n=="string"?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=n,e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(n).is(document.body)?e(window):e(n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s=typeof n=="object"&&n;i||r.data("bs.scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.getScrollHeight(),n=this.options.offset+t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;this.scrollHeight!=t&&this.refresh();if(e>=n)return s!=(o=i[i.length-1])&&this.activate(o);if(s&&e<r[0])return this.activeTarget=null,this.clear();for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(r[o+1]===undefined||e<r[o+1])&&this.activate(i[o])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),typeof n=="string"&&i[n]()})}var t=function(t){this.element=e(t)};t.VERSION="3.3.7",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;var i=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});i.trigger(s),t.trigger(o);if(o.isDefaultPrevented()||s.isDefaultPrevented())return;var u=e(r);this.activate(t.closest("li"),n),this.activate(u,u.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})},t.prototype.activate=function(n,r,i){function u(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var s=r.find("> .active"),o=i&&e.support.transition&&(s.length&&s.hasClass("fade")||!!r.find("> .fade").length);s.length&&o?s.one("bsTransitionEnd",u).emulateTransitionEnd(t.TRANSITION_DURATION):u(),s.removeClass("in")};var r=e.fn.tab;e.fn.tab=n,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(t){t.preventDefault(),n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){"use strict";function n(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s=typeof n=="object"&&n;i||r.data("bs.affix",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};t.VERSION="3.3.7",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(n!=null&&this.affixed=="top")return i<n?"top":!1;if(this.affixed=="bottom")return n!=null?i+this.unpin<=s.top?!1:"bottom":i+o<=e-r?!1:"bottom";var u=this.affixed==null,a=u?i:s.top,f=u?o:t;return n!=null&&i<=n?"top":r!=null&&a+f>=e-r?"bottom":!1},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var n=this.$element.height(),r=this.options.offset,i=r.top,s=r.bottom,o=Math.max(e(document).height(),e(document.body).height());typeof r!="object"&&(s=i=r),typeof i=="function"&&(i=r.top(this.$element)),typeof s=="function"&&(s=r.bottom(this.$element));var u=this.getState(o,n,i,s);if(this.affixed!=u){this.unpin!=null&&this.$element.css("top","");var a="affix"+(u?"-"+u:""),f=e.Event(a+".bs.affix");this.$element.trigger(f);if(f.isDefaultPrevented())return;this.affixed=u,this.unpin=u=="bottom"?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}u=="bottom"&&this.$element.offset({top:o-n-s})};var r=e.fn.affix;e.fn.affix=n,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),r=t.data();r.offset=r.offset||{},r.offsetBottom!=null&&(r.offset.bottom=r.offsetBottom),r.offsetTop!=null&&(r.offset.top=r.offsetTop),n.call(t,r)})})}(jQuery)}.apply(e,arguments)})}(this),function(e){if(typeof exports=="object"&&typeof require=="function")module.exports=e(require("underscore"),require("backbone"));else if(typeof define=="function"&&define.amd)define("backbone.paginator",["underscore","backbone"],e);else if(typeof _!="undefined"&&typeof Backbone!="undefined"){var t=Backbone.PageableCollection,n=e(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=t,n}}}(function(e,t){"use strict";function w(t,n){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+n+"` must be a finite integer");return t}function E(e){var t,n,r,i,s={},o=decodeURIComponent,u=e.split("&");for(var a=0,f=u.length;a<f;a++){var l=u[a];t=l.split("="),n=t[0],r=t[1],r==null&&(r=!0),n=o(n),r=o(r),i=s[n],c(i)?i.push(r):i?s[n]=[i,r]:s[n]=r}return s}function S(e,t,n){var r=e._events[t];if(r&&r.length){var i=r[r.length-1],s=i.callback;i.callback=function(){try{s.apply(this,arguments),n()}catch(e){throw e}finally{i.callback=s}}}else n()}var n=e.extend,r=e.omit,i=e.clone,s=e.each,o=e.pick,u=e.contains,a=e.isEmpty,f=e.pairs,l=e.invert,c=e.isArray,h=e.isFunction,p=e.isObject,d=e.keys,v=e.isUndefined,m=Math.ceil,g=Math.floor,y=Math.max,b=t.Collection.prototype,x=/[\s'"]/g,T=/[<>\s'"]/g,N=t.PageableCollection=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(e,t){b.constructor.apply(this,arguments),t=t||{};var r=this.mode=t.mode||this.mode||C.mode,s=n({},C.queryParams,this.queryParams,t.queryParams||{});s.directions=n({},C.queryParams.directions,this.queryParams.directions,s.directions),this.queryParams=s;var o=this.state=n({},C.state,this.state,t.state);o.currentPage=o.currentPage==null?o.firstPage:o.currentPage,c(e)||(e=e?[e]:[]),e=e.slice(),r!="server"&&o.totalRecords==null&&!a(e)&&(o.totalRecords=e.length),this.switchMode(r,n({fetch:!1,resetState:!1,models:e},t));var u=t.comparator;o.sortKey&&!u&&this.setSorting(o.sortKey,o.order,t);if(r!="server"){var f=this.fullCollection;u&&t.full&&(this.comparator=null,f.comparator=u),t.full&&f.sort(),a(e)||(this.reset(e,n({silent:!0},t)),this.getPage(o.currentPage),e.splice.apply(e,[0,e.length].concat(this.models)))}this._initState=i(this.state)},_makeFullCollection:function(e,n){var r=["url","model","sync","comparator"],i=this.constructor.prototype,s,o,u,a={};for(s=0,o=r.length;s<o;s++)u=r[s],v(i[u])||(a[u]=i[u]);var f=new(t.Collection.extend(a))(e,n);for(s=0,o=r.length;s<o;s++)u=r[s],this[u]!==i[u]&&(f[u]=this[u]);return f},_makeCollectionEventHandler:function(e,t){return function(o,u,a,f){var l=e._handlers;s(d(l),function(n){var r=l[n];e.off(n,r),t.off(n,r)});var c=i(e.state),h=c.firstPage,p=h===0?c.currentPage:c.currentPage-1,g=c.pageSize,y=p*g,b=y+g;if(o=="add"){var w,E,x,T,f=f||{};if(a==t)E=t.indexOf(u),E>=y&&E<b&&(T=e,w=x=E-y);else{w=e.indexOf(u),E=y+w,T=t;var x=v(f.at)?E:f.at+y}f.onRemove||(++c.totalRecords,delete f.onRemove),e.state=e._checkState(c);if(T){T.add(u,n({},f,{at:x}));var N=w>=g?u:!v(f.at)&&x<b&&e.length>g?e.at(g):null;N&&S(a,o,function(){e.remove(N,{onAdd:!0})})}f.silent||e.trigger("pageable:state:change",e.state)}if(o=="remove"){if(!f.onAdd){if(!--c.totalRecords)c.totalRecords=null,c.totalPages=null;else{var C=c.totalPages=m(c.totalRecords/g);c.lastPage=h===0?C-1:C||h,c.currentPage>C&&(c.currentPage=c.lastPage)}e.state=e._checkState(c);var k,L=f.index;a==e?((k=t.at(b))?S(e,o,function(){e.push(k,{onRemove:!0})}):!e.length&&c.totalRecords&&e.reset(t.models.slice(y-g,b-g),n({},f,{parse:!1})),t.remove(u)):L>=y&&L<b&&((k=t.at(b-1))&&S(e,o,function(){e.push(k,{onRemove:!0})}),e.remove(u),!e.length&&c.totalRecords&&e.reset(t.models.slice(y-g,b-g),n({},f,{parse:!1})))}else delete f.onAdd;f.silent||e.trigger("pageable:state:change",e.state)}if(o=="reset"){f=a,a=u;if(a==e&&f.from==null&&f.to==null){var A=t.models.slice(0,y),O=t.models.slice(y+e.models.length);t.reset(A.concat(e.models).concat(O),f)}else a==t&&((c.totalRecords=t.models.length)||(c.totalRecords=null,c.totalPages=null),e.mode=="client"&&(h=c.lastPage=c.currentPage=c.firstPage,p=h===0?c.currentPage:c.currentPage-1,y=p*g,b=y+g),e.state=e._checkState(c),e.reset(t.models.slice(y,b),n({},f,{parse:!1})));f.silent||e.trigger("pageable:state:change",e.state)}o=="sort"&&(f=a,a=u,a===t&&e.reset(t.models.slice(y,b),n({},f,{parse:!1}))),s(d(l),function(n){var r=l[n];s([e,t],function(e){e.on(n,r);var t=e._events[n]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode,n=this.links,r=e.totalRecords,i=e.pageSize,s=e.currentPage,o=e.firstPage,u=e.totalPages;if(r!=null&&i!=null&&s!=null&&o!=null&&(t=="infinite"?n:!0)){r=w(r,"totalRecords"),i=w(i,"pageSize"),s=w(s,"currentPage"),o=w(o,"firstPage");if(i<1)throw new RangeError("`pageSize` must be >= 1");u=e.totalPages=m(r/i);if(o<0||o>1)throw new RangeError("`firstPage must be 0 or 1`");e.lastPage=o===0?y(0,u-1):u||o;if(t=="infinite"){if(!n[s+""])throw new RangeError("No link found for page "+s)}else if(s<o||u>0&&(o?s>u:s>=u))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(o?"<":"<=")+" totalPages if "+o+"-based. Got "+s+".")}return e},setPageSize:function(e,t){e=w(e,"pageSize"),t=t||{first:!1};var i=this.state,s=m(i.totalRecords/e),o=s?y(i.firstPage,g(s*i.currentPage/i.totalPages)):i.firstPage;return i=this.state=this._checkState(n({},i,{pageSize:e,currentPage:t.first?i.firstPage:o,totalPages:s})),this.getPage(i.currentPage,r(t,["first"]))},switchMode:function(t,o){if(!u(["server","client","infinite"],t))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');o=o||{fetch:!0,resetState:!0};var a=this.state=o.resetState?i(this._initState):this._checkState(n({},this.state));this.mode=t;var f=this,l=this.fullCollection,c=this._handlers=this._handlers||{},h;if(t!="server"&&!l){l=this._makeFullCollection(o.models||[],o),l.pageableCollection=this,this.fullCollection=l;var p=this._makeCollectionEventHandler(this,l);s(["add","remove","reset","sort"],function(t){c[t]=h=e.bind(p,{},t),f.on(t,h),l.on(t,h)}),l.comparator=this._fullComparator}else t=="server"&&l&&(s(d(c),function(e){h=c[e],f.off(e,h),l.off(e,h)}),delete this._handlers,this._fullComparator=l.comparator,delete this.fullCollection);if(t=="infinite"){var v=this.links={},g=a.firstPage,b=m(a.totalRecords/a.pageSize),w=g===0?y(0,b-1):b||g;for(var E=a.firstPage;E<=w;E++)v[E]=this.url}else this.links&&delete this.links;return o.silent||this.trigger("pageable:state:change",a),o.fetch?this.fetch(r(o,"fetch","resetState")):this},hasPreviousPage:function(){var e=this.state,t=e.currentPage;return this.mode!="infinite"?t>e.firstPage:!!this.links[t-1]},hasNextPage:function(){var e=this.state,t=this.state.currentPage;return this.mode!="infinite"?t<e.lastPage:!!this.links[t+1]},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var i=this.mode,s=this.fullCollection;t=t||{fetch:!1};var o=this.state,u=o.firstPage,f=o.currentPage,l=o.lastPage,c=o.pageSize,h=e;switch(e){case"first":h=u;break;case"prev":h=f-1;break;case"next":h=f+1;break;case"last":h=l;break;default:h=w(e,"index")}this.state=this._checkState(n({},o,{currentPage:h})),t.silent||this.trigger("pageable:state:change",this.state),t.from=f,t.to=h;var p=(u===0?h:h-1)*c,d=s&&s.length?s.models.slice(p,p+c):[];return(i=="client"||i=="infinite"&&!a(d))&&!t.fetch?(this.reset(d,r(t,"fetch")),this):(i=="infinite"&&(t.url=this.links[h]),this.fetch(r(t,"fetch")))},getPageByOffset:function(e,t){if(e<0)throw new RangeError("`offset must be > 0`");e=w(e);var n=g(e/this.state.pageSize);return this.state.firstPage!==0&&n++,n>this.state.lastPage&&(n=this.state.lastPage),this.getPage(n,t)},sync:function(e,r,i){var s=this;if(s.mode=="infinite"){var o=i.success,u=s.state.currentPage;i.success=function(e,t,r){var a=s.links,f=s.parseLinks(e,n({xhr:r},i));f.first&&(a[s.state.firstPage]=f.first),f.prev&&(a[u-1]=f.prev),f.next&&(a[u+1]=f.next),o&&o(e,t,r)}}return(b.sync||t.sync).call(s,e,r,i)},parseLinks:function(e,t){var n={},r=t.xhr.getResponseHeader("Link");if(r){var i=["first","prev","next"];s(r.split(","),function(e){var t=e.split(";"),r=t[0].replace(T,""),o=t.slice(1);s(o,function(e){var t=e.split("="),s=t[0].replace(x,""),o=t[1].replace(x,"");s=="rel"&&u(i,o)&&(n[o]=r)})})}return n},parse:function(e,t){var r=this.parseState(e,i(this.queryParams),i(this.state),t);return r&&(this.state=this._checkState(n({},this.state,r))),this.parseRecords(e,t)},parseState:function(t,n,o,u){if(t&&t.length===2&&p(t[0])&&c(t[1])){var a=i(o),h=t[0];return s(f(r(n,"directions")),function(t){var n=t[0],r=t[1],i=h[r];!v(i)&&!e.isNull(i)&&(a[n]=h[r])}),h.order&&(a.order=l(n.directions)[h.order]*1),a}},parseRecords:function(e,t){return e&&e.length===2&&p(e[0])&&c(e[1])?e[1]:e},fetch:function(t){t=t||{};var i=this._checkState(this.state),s=this.mode;s=="infinite"&&!t.url&&(t.url=this.links[i.currentPage]);var u=t.data||{},a=t.url||this.url||"";h(a)&&(a=a.call(this));var l=a.indexOf("?");l!=-1&&(n(u,E(a.slice(l+1))),a=a.slice(0,l)),t.url=a,t.data=u;var p=this.mode=="client"?o(this.queryParams,"sortKey","order"):r(o(this.queryParams,d(C.queryParams)),"directions"),m=e.clone(this);e.each(p,function(t,n){t=h(t)?t.call(m):t,i[n]!=null&&t!=null&&e.isUndefined(u[t])&&(u[t]=i[n])},this);var g;if(i.sortKey&&i.order){var y=h(p.order)?p.order.call(m):p.order;if(!c(i.order))u[y]=this.queryParams.directions[i.order+""];else{u[y]=[];for(g=0;g<i.order.length;g+=1)u[y].push(this.queryParams.directions[i.order[g]])}}else i.sortKey||delete u[p.order];var w=f(r(this.queryParams,d(C.queryParams))),S,x;for(g=0;g<w.length;g++)S=w[g],x=S[1],x=h(x)?x.call(m):x,x!=null&&(u[S[0]]=x);if(s!="server"){var T=this,N=this.fullCollection,k=t.success;return t.success=function(e,r,i){i=i||{},v(t.silent)?delete i.silent:i.silent=t.silent;var o=e.models;s=="client"?N.reset(o,i):(N.add(o,n({at:N.length},n(i,{parse:!1}))),T.trigger("reset",T,i)),k&&k(e,r,i)},b.fetch.call(this,n({},t,{silent:!0}))}return b.fetch.call(this,t)},_makeComparator:function(e,t,n){var r=this.state;e=e||r.sortKey,t=t||r.order;if(!e||!t)return;return n||(n=function(e,t){return e.get(t)}),function(r,i){var s=n(r,e),o=n(i,e),u;return t===1&&(u=s,s=o,o=u),s===o?0:s<o?-1:1}},setSorting:function(e,t,r){var i=this.state;i.sortKey=e,i.order=t=t||i.order;var s=this.fullCollection,o=!1,u=!1;e||(o=u=!0);var a=this.mode;r=n({side:a=="client"?a:"server",full:!0},r);var f=this._makeComparator(e,t,r.sortValue),l=r.full,c=r.side;return c=="client"?l?(s&&(s.comparator=f),o=!0):(this.comparator=f,u=!0):c=="server"&&!l&&(this.comparator=f),o&&(this.comparator=null),u&&s&&(s.comparator=null),this}}),C=N.prototype;return N}),function(e,t){typeof exports=="object"?module.exports=t(require("underscore"),require("backbone"),require("backgrid"),require("backbone.paginator")):typeof define=="function"&&define.amd?define("backgrid-paginator",["underscore","backbone","backgrid","backbone.paginator"],t):t(e._,e.Backbone,e.Backgrid)}(this,function(e,t,n){"use strict";var r=n.Extension.PageHandle=t.View.extend({tagName:"li",events:{"click a":"changePage"},title:function(e){return"Page "+e.label},isRewind:!1,isBack:!1,isForward:!1,isFastForward:!1,initialize:function(t){var n=this.collection,r=n.state,i=r.currentPage,s=r.firstPage,o=r.lastPage;e.extend(this,e.pick(t,["isRewind","isBack","isForward","isFastForward"]));var u;this.isRewind?u=s:this.isBack?u=Math.max(s,i-1):this.isForward?u=Math.min(o,i+1):this.isFastForward?u=o:(u=+t.pageIndex,u=s?u+1:u),this.pageIndex=u,this.label=(t.label||(s?u:u+1))+"";var a=t.title||this.title;this.title=e.isFunction(a)?a({label:this.label}):a},render:function(){this.$el.empty();var e=document.createElement("a");e.href="#",this.title&&(e.title=this.title),e.innerHTML=this.label,this.el.appendChild(e);var t=this.collection,n=t.state,r=n.currentPage,i=this.pageIndex;return this.isRewind&&r==n.firstPage||this.isBack&&!t.hasPreviousPage()||this.isForward&&!t.hasNextPage()||this.isFastForward&&(r==n.lastPage||n.totalPages<1)?this.$el.addClass("disabled"):!(this.isRewind||this.isBack||this.isForward||this.isFastForward)&&n.currentPage==i&&this.$el.addClass("active"),this.delegateEvents(),this},changePage:function(e){e.preventDefault();var t=this.$el,n=this.collection;return!t.hasClass("active")&&!t.hasClass("disabled")&&(this.isRewind?n.getFirstPage({reset:!0}):this.isBack?n.getPreviousPage({reset:!0}):this.isForward?n.getNextPage({reset:!0}):this.isFastForward?n.getLastPage({reset:!0}):n.getPage(this.pageIndex,{reset:!0})),this}}),i=n.Extension.Paginator=t.View.extend({className:"backgrid-paginator",windowSize:10,slideScale:.5,controls:{rewind:{label:"《",title:"First"},back:{label:"〈",title:"Previous"},forward:{label:"〉",title:"Next"},fastForward:{label:"》",title:"Last"}},renderIndexedPageHandles:!0,renderMultiplePagesOnly:!1,pageHandle:r,goBackFirstOnSort:!0,initialize:function(t){var n=this;n.controls=e.defaults(t.controls||{},n.controls,i.prototype.controls),e.extend(n,e.pick(t||{},"windowSize","pageHandle","slideScale","goBackFirstOnSort","renderIndexedPageHandles","renderMultiplePagesOnly"));var r=n.collection;n.listenTo(r,"add",n.render),n.listenTo(r,"remove",n.render),n.listenTo(r,"reset",n.render),n.listenTo(r,"backgrid:sorted",function(){n.goBackFirstOnSort&&r.state.currentPage!==r.state.firstPage&&r.getFirstPage({reset:!0})})},slideMaybe:function(e,t,n,r,i){return Math.round(n%r/r)},slideThisMuch:function(e,t,n,r,i){return~~(r*i)},_calculateWindow:function(){var e=this.collection,t=e.state,n=t.firstPage,r=+t.lastPage;r=Math.max(0,n?r-1:r);var i=Math.max(t.currentPage,t.firstPage);i=n?i-1:i;var s=this.windowSize,o=this.slideScale,u=Math.floor(i/s)*s;i<=r-this.slideThisMuch()&&(u+=this.slideMaybe(n,r,i,s,o)*this.slideThisMuch(n,r,i,s,o));var a=Math.min(r+1,u+s);return[u,a]},makeHandles:function(){var t=[],n=this.collection,r=this._calculateWindow(),i=r[0],s=r[1];if(this.renderIndexedPageHandles)for(var o=i;o<s;o++)t.push(new this.pageHandle({collection:n,pageIndex:o}));var u=this.controls;return e.each(["back","rewind","forward","fastForward"],function(e){var r=u[e];if(r){var i={collection:n,title:r.title,label:r.label};i["is"+e.slice(0,1).toUpperCase()+e.slice(1)]=!0;var s=new this.pageHandle(i);e=="rewind"||e=="back"?t.unshift(s):t.push(s)}},this),t},render:function(){this.$el.empty();var e=this.collection.state.totalPages;if(this.renderMultiplePagesOnly&&e<=1)return this;if(this.handles)for(var t=0,n=this.handles.length;t<n;t++)this.handles[t].remove();var r=this.handles=this.makeHandles(),i=document.createElement("ul");for(var t=0;t<r.length;t++)i.appendChild(r[t].render().el);return this.el.appendChild(i),this}})}),define("app/helpers/backbone.extensions",["backbone","underscore"],function(e,t){"use strict";return function(){var n=e.sync;e.sync=function(e,t,r){return r=r||{},r.crossDomain||(r.crossDomain=!0),r.xhrFields||(r.xhrFields={withCredentials:!0}),n(e,t,r)},e.View.prototype.close=function(e){if(e===undefined||e===null)e=this;e.undelegateEvents(),e.unbind(),e.onClose&&e.onClose(),e.model=null,e.collection=null,e.$el&&(e.$el.empty(),e.$el=null),e.view=null,e.activeViews&&e.closeViews()};var r=function(e,t){if(t===undefined||t===null)t=this;if(t.activeViews===undefined||t.activeViews===null)t.activeViews=[];t.activeViews.push(e),e.render()},i=function(e){if(e===undefined||e===null)e=this;if(e.activeViews)for(var t=0;t<e.activeViews.length;t++)e.activeViews[t].close();e.activeViews=[]};t.extend(e.Router.prototype,e.Events,{route:function(n,r,i){return t.isRegExp(n)||(n=this._routeToRegExp(n)),i||(i=this[r]),e.history.route(n,t.bind(function(s){var o=this._extractParameters(n,s);this.before&&t.isFunction(this.before)&&this.before(s),i&&i.apply(this,o),this.trigger.apply(this,["route:"+r].concat(o)),this.after&&t.isFunction(this.after)&&this.after(s),e.history.trigger("route",this,r,o)},this)),this}}),e.View.prototype.renderView=r,e.Router.prototype.renderView=r,e.View.prototype.closeViews=i,e.Router.prototype.closeViews=i}(),e}),define("app/helpers/underscore.extensions",["underscore"],function(e){"use strict";return e.bindAll=function(t){var n=Array.prototype.slice.call(arguments,1);return n.length===0&&(n=e.functions(t)),e.each(n,function(n){n!=="constructor"&&n!="initialize"&&(t[n]=e.bind(t[n],t))}),t},e}),define("app/helpers/backgrid.extensions",["backbone","underscore","backgrid"],function(e,t,n){"use strict";return n.cell_initialize_original=n.Cell.prototype.initialize,n.Cell.prototype.initialize=function(){n.cell_initialize_original.apply(this,arguments);var e=this.column.get("className");e&&this.$el.addClass(e),this.column.attributes.handler&&this.column.attributes.handler(this.model,this.$el)},n.headerCell_initialize_original=n.HeaderCell.prototype.initialize,n.HeaderCell.prototype.initialize=function(){n.headerCell_initialize_original.apply(this,arguments);var e=this.column.get("headerClassName");e&&this.$el.addClass(e)},n.HtmlCell=n.Cell.extend({className:"html-cell",render:function(){return this.$el.empty(),this.$el.html(this.formatter.fromRaw(this.model.get(this.column.get("name")),this.model)),this.delegateEvents(),this}}),e}),function(e,t){"use strict";if(typeof define=="function"&&define.amd)define("datetimepicker",["jquery","moment"],t);else if(typeof exports=="object")t(require("jquery"),require("moment"));else{if(!jQuery)throw new Error("bootstrap-datetimepicker requires jQuery to be loaded first");if(!moment)throw new Error("bootstrap-datetimepicker requires moment.js to be loaded first");t(e.jQuery,moment)}}(this,function(e,t){"use strict";if(typeof t=="undefined")throw new Error("momentjs is required");var n=0,r=function(r,i){var s=e.fn.datetimepicker.defaults,o={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},u=this,a=!1,f,l=function(){var a=!1,f,l;u.options=e.extend({},s,i),u.options.icons=e.extend({},o,u.options.icons),u.element=e(r),h();if(!u.options.pickTime&&!u.options.pickDate)throw new Error("Must choose at least one picker");u.id=n++,t.locale(u.options.language),u.date=t(),u.unset=!1,u.isInput=u.element.is("input"),u.component=!1,u.element.hasClass("input-group")&&(u.element.find(".datepickerbutton").size()===0?u.component=u.element.find('[class^="input-group-"]'):u.component=u.element.find(".datepickerbutton")),u.format=u.options.format,f=t().localeData(),u.format||(u.format=u.options.pickDate?f.longDateFormat("L"):"",u.options.pickDate&&u.options.pickTime&&(u.format+=" "),u.format+=u.options.pickTime?f.longDateFormat("LT"):"",u.options.useSeconds&&(f.longDateFormat("LT").indexOf(" A")!==-1?u.format=u.format.split(" A")[0]+":ss A":u.format+=":ss")),u.use24hours=u.format.toLowerCase().indexOf("a")<0&&u.format.indexOf("h")<0,u.component&&(a=u.component.find("span")),u.options.pickTime&&a&&a.addClass(u.options.icons.time),u.options.pickDate&&a&&(a.removeClass(u.options.icons.time),a.addClass(u.options.icons.date)),u.options.widgetParent=typeof u.options.widgetParent=="string"&&u.options.widgetParent||u.element.parents().filter(function(){return"scroll"===e(this).css("overflow-y")}).get(0)||"body",u.widget=e(U()).appendTo(u.options.widgetParent),u.minViewMode=u.options.minViewMode||0;if(typeof u.minViewMode=="string")switch(u.minViewMode){case"months":u.minViewMode=1;break;case"years":u.minViewMode=2;break;default:u.minViewMode=0}u.viewMode=u.options.viewMode||0;if(typeof u.viewMode=="string")switch(u.viewMode){case"months":u.viewMode=1;break;case"years":u.viewMode=2;break;default:u.viewMode=0}u.viewMode=Math.max(u.viewMode,u.minViewMode),u.options.disabledDates=q(u.options.disabledDates),u.options.enabledDates=q(u.options.enabledDates),u.startViewMode=u.viewMode,u.setMinDate(u.options.minDate),u.setMaxDate(u.options.maxDate),g(),y(),w(),E(),S(),m(),O(),c().prop("disabled")||M(),u.options.defaultDate!==""&&c().val()===""&&u.setValue(u.options.defaultDate),u.options.minuteStepping!==1&&(l=u.options.minuteStepping,u.date.minutes(Math.round(u.date.minutes()/l)*l%60).seconds(0))},c=function(){var e;if(u.isInput)return u.element;e=u.element.find(".datepickerinput");if(e.size()===0)e=u.element.find("input");else if(!e.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');return e},h=function(){var e;u.element.is("input")?e=u.element.data():e=u.element.find("input").data(),e.dateFormat!==undefined&&(u.options.format=e.dateFormat),e.datePickdate!==undefined&&(u.options.pickDate=e.datePickdate),e.datePicktime!==undefined&&(u.options.pickTime=e.datePicktime),e.dateUseminutes!==undefined&&(u.options.useMinutes=e.dateUseminutes),e.dateUseseconds!==undefined&&(u.options.useSeconds=e.dateUseseconds),e.dateUsecurrent!==undefined&&(u.options.useCurrent=e.dateUsecurrent),e.calendarWeeks!==undefined&&(u.options.calendarWeeks=e.calendarWeeks),e.dateMinutestepping!==undefined&&(u.options.minuteStepping=e.dateMinutestepping),e.dateMindate!==undefined&&(u.options.minDate=e.dateMindate),e.dateMaxdate!==undefined&&(u.options.maxDate=e.dateMaxdate),e.dateShowtoday!==undefined&&(u.options.showToday=e.dateShowtoday),e.dateCollapse!==undefined&&(u.options.collapse=e.dateCollapse),e.dateLanguage!==undefined&&(u.options.language=e.dateLanguage),e.dateDefaultdate!==undefined&&(u.options.defaultDate=e.dateDefaultdate),e.dateDisableddates!==undefined&&(u.options.disabledDates=e.dateDisableddates),e.dateEnableddates!==undefined&&(u.options.enabledDates=e.dateEnableddates),e.dateIcons!==undefined&&(u.options.icons=e.dateIcons),e.dateUsestrict!==undefined&&(u.options.useStrict=e.dateUsestrict),e.dateDirection!==undefined&&(u.options.direction=e.dateDirection),e.dateSidebyside!==undefined&&(u.options.sideBySide=e.dateSidebyside),e.dateDaysofweekdisabled!==undefined&&(u.options.daysOfWeekDisabled=e.dateDaysofweekdisabled)},p=function(){var t="absolute",n=u.component?u.component.offset():u.element.offset(),r=e(window),i;u.width=u.component?u.component.outerWidth():u.element.outerWidth(),n.top=n.top+u.element.outerHeight(),u.options.direction==="up"?i="top":u.options.direction==="bottom"?i="bottom":u.options.direction==="auto"&&(n.top+u.widget.height()>r.height()+r.scrollTop()&&u.widget.height()+u.element.outerHeight()<n.top?i="top":i="bottom"),i==="top"?(n.bottom=r.height()-n.top+u.element.outerHeight()+3,u.widget.addClass("top").removeClass("bottom")):(n.top+=1,u.widget.addClass("bottom").removeClass("top")),u.options.width!==undefined&&u.widget.width(u.options.width),u.options.orientation==="left"&&(u.widget.addClass("left-oriented"),n.left=n.left-u.widget.width()+20),H()&&(t="fixed",n.top-=r.scrollTop(),n.left-=r.scrollLeft()),r.width()<n.left+u.widget.outerWidth()?(n.right=r.width()-n.left-u.width,n.left="auto",u.widget.addClass("pull-right")):(n.right="auto",u.widget.removeClass("pull-right")),i==="top"?u.widget.css({position:t,bottom:n.bottom,top:"auto",left:n.left,right:n.right}):u.widget.css({position:t,top:n.top,bottom:"auto",left:n.left,right:n.right})},d=function(e,n){if(t(u.date).isSame(t(e))&&!a)return;a=!1,u.element.trigger({type:"dp.change",date:t(u.date),oldDate:t(e)}),n!=="change"&&u.element.change()},v=function(e){a=!0,u.element.trigger({type:"dp.error",date:t(e,u.format,u.options.useStrict)})},m=function(e){t.locale(u.options.language);var n=e;n||(n=c().val(),n&&(u.date=t(n,u.format,u.options.useStrict)),u.date||(u.date=t())),u.viewDate=t(u.date).startOf("month"),b(),x()},g=function(){t.locale(u.options.language);var n=e("<tr>"),r=t.weekdaysMin(),i;u.options.calendarWeeks===!0&&n.append('<th class="cw">#</th>');if(t().localeData()._week.dow===0)for(i=0;i<7;i++)n.append('<th class="dow">'+r[i]+"</th>");else for(i=1;i<8;i++)i===7?n.append('<th class="dow">'+r[0]+"</th>"):n.append('<th class="dow">'+r[i]+"</th>");u.widget.find(".datepicker-days thead").append(n)},y=function(){t.locale(u.options.language);var e="",n,r=t.monthsShort();for(n=0;n<12;n++)e+='<span class="month">'+r[n]+"</span>";u.widget.find(".datepicker-months td").append(e)},b=function(){if(!u.options.pickDate)return;t.locale(u.options.language);var n=u.viewDate.year(),r=u.viewDate.month(),i=u.options.minDate.year(),s=u.options.minDate.month(),o=u.options.maxDate.year(),a=u.options.maxDate.month(),f,l,c,h=[],p,d,v,m,g,y,b=t.months();u.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),u.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),u.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),u.widget.find(".datepicker-days th:eq(1)").text(b[r]+" "+n),l=t(u.viewDate,u.format,u.options.useStrict).subtract(1,"months"),m=l.daysInMonth(),l.date(m).startOf("week"),(n===i&&r<=s||n<i)&&u.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(n===o&&r>=a||n>o)&&u.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),c=t(l).add(42,"d");while(l.isBefore(c)){l.weekday()===t().startOf("week").weekday()&&(p=e("<tr>"),h.push(p),u.options.calendarWeeks===!0&&p.append('<td class="cw">'+l.week()+"</td>")),d="";if(l.year()<n||l.year()===n&&l.month()<r)d+=" old";else if(l.year()>n||l.year()===n&&l.month()>r)d+=" new";l.isSame(t({y:u.date.year(),M:u.date.month(),d:u.date.date()}))&&(d+=" active");if(F(l,"day")||!I(l))d+=" disabled";u.options.showToday===!0&&l.isSame(t(),"day")&&(d+=" today");if(u.options.daysOfWeekDisabled)for(v=0;v<u.options.daysOfWeekDisabled.length;v++)if(l.day()===u.options.daysOfWeekDisabled[v]){d+=" disabled";break}p.append('<td class="day'+d+'">'+l.date()+"</td>"),f=l.date(),l.add(1,"d"),f===l.date()&&l.add(1,"d")}u.widget.find(".datepicker-days tbody").empty().append(h),y=u.date.year(),b=u.widget.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active"),y===n&&b.eq(u.date.month()).addClass("active"),n-1<i&&u.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),n+1>o&&u.widget.find(".datepicker-months th:eq(2)").addClass("disabled");for(v=0;v<12;v++)n===i&&s>v||n<i?e(b[v]).addClass("disabled"):(n===o&&a<v||n>o)&&e(b[v]).addClass("disabled");h="",n=parseInt(n/10,10)*10,g=u.widget.find(".datepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).parents("table").find("td"),u.widget.find(".datepicker-years").find("th").removeClass("disabled"),i>n&&u.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),o<n+9&&u.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),n-=1;for(v=-1;v<11;v++)h+='<span class="year'+(v===-1||v===10?" old":"")+(y===n?" active":"")+(n<i||n>o?" disabled":"")+'">'+n+"</span>",n+=1;g.html(h)},w=function(){t.locale(u.options.language);var e=u.widget.find(".timepicker .timepicker-hours table"),n="",r,i,s;e.parent().hide();if(u.use24hours){r=0;for(i=0;i<6;i+=1){n+="<tr>";for(s=0;s<4;s+=1)n+='<td class="hour">'+R(r.toString())+"</td>",r++;n+="</tr>"}}else{r=1;for(i=0;i<3;i+=1){n+="<tr>";for(s=0;s<4;s+=1)n+='<td class="hour">'+R(r.toString())+"</td>",r++;n+="</tr>"}}e.html(n)},E=function(){var e=u.widget.find(".timepicker .timepicker-minutes table"),t="",n=0,r,i,s=u.options.minuteStepping;e.parent().hide(),s===1&&(s=5);for(r=0;r<Math.ceil(60/s/4);r++){t+="<tr>";for(i=0;i<4;i+=1)n<60?(t+='<td class="minute">'+R(n.toString())+"</td>",n+=s):t+="<td></td>";t+="</tr>"}e.html(t)},S=function(){var e=u.widget.find(".timepicker .timepicker-seconds table"),t="",n=0,r,i;e.parent().hide();for(r=0;r<3;r++){t+="<tr>";for(i=0;i<4;i+=1)t+='<td class="second">'+R(n.toString())+"</td>",n+=5;t+="</tr>"}e.html(t)},x=function(){if(!u.date)return;var e=u.widget.find(".timepicker span[data-time-component]"),t=u.date.hours(),n=u.date.format("A");u.use24hours||(t===0?t=12:t!==12&&(t%=12),u.widget.find(".timepicker [data-action=togglePeriod]").text(n)),e.filter("[data-time-component=hours]").text(R(t)),e.filter("[data-time-component=minutes]").text(R(u.date.minutes())),e.filter("[data-time-component=seconds]").text(R(u.date.second()))},T=function(n){n.stopPropagation(),n.preventDefault(),u.unset=!1;var r=e(n.target).closest("span, td, th"),i,s,o,a,f=t(u.date);if(r.length===1&&!r.is(".disabled"))switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"picker-switch":O(1);break;case"prev":case"next":o=z.modes[u.viewMode].navStep,r[0].className==="prev"&&(o*=-1),u.viewDate.add(o,z.modes[u.viewMode].navFnc),b()}break;case"span":r.is(".month")?(i=r.parent().find("span").index(r),u.viewDate.month(i)):(s=parseInt(r.text(),10)||0,u.viewDate.year(s)),u.viewMode===u.minViewMode&&(u.date=t({y:u.viewDate.year(),M:u.viewDate.month(),d:u.viewDate.date(),h:u.date.hours(),m:u.date.minutes(),s:u.date.seconds()}),B(),d(f,n.type)),O(-1),b();break;case"td":r.is(".day")&&(a=parseInt(r.text(),10)||1,i=u.viewDate.month(),s=u.viewDate.year(),r.is(".old")?i===0?(i=11,s-=1):i-=1:r.is(".new")&&(i===11?(i=0,s+=1):i+=1),u.date=t({y:s,M:i,d:a,h:u.date.hours(),m:u.date.minutes(),s:u.date.seconds()}),u.viewDate=t({y:s,M:i,d:Math.min(28,a)}),b(),B(),d(f,n.type))}},N={incrementHours:function(){j("add","hours",1)},incrementMinutes:function(){j("add","minutes",u.options.minuteStepping)},incrementSeconds:function(){j("add","seconds",1)},decrementHours:function(){j("subtract","hours",1)},decrementMinutes:function(){j("subtract","minutes",u.options.minuteStepping)},decrementSeconds:function(){j("subtract","seconds",1)},togglePeriod:function(){var e=u.date.hours();e>=12?e-=12:e+=12,u.date.hours(e)},showPicker:function(){u.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),u.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){u.widget.find(".timepicker .timepicker-picker").hide(),u.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){u.widget.find(".timepicker .timepicker-picker").hide(),u.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){u.widget.find(".timepicker .timepicker-picker").hide(),u.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=parseInt(e(t.target).text(),10);u.use24hours||(u.date.hours()>=12?n!==12&&(n+=12):n===12&&(n=0)),u.date.hours(n),N.showPicker.call(u)},selectMinute:function(t){u.date.minutes(parseInt(e(t.target).text(),10)),N.showPicker.call(u)},selectSecond:function(t){u.date.seconds(parseInt(e(t.target).text(),10)),N.showPicker.call(u)}},C=function(n){var r=t(u.date),i=e(n.currentTarget).data("action"),s=N[i].apply(u,arguments);return k(n),u.date||(u.date=t({y:1970})),B(),x(),d(r,n.type),s},k=function(e){e.stopPropagation(),e.preventDefault()},L=function(e){e.keyCode===27&&u.hide()},A=function(n){t.locale(u.options.language);var r=e(n.target),i=t(u.date),s=t(r.val(),u.format,u.options.useStrict);s.isValid()&&!F(s)&&I(s)?(m(),u.setValue(s),d(i,n.type),B()):(u.viewDate=i,u.unset=!0,d(i,n.type),v(s))},O=function(e){e&&(u.viewMode=Math.max(u.minViewMode,Math.min(2,u.viewMode+e))),u.widget.find(".datepicker > div").hide().filter(".datepicker-"+z.modes[u.viewMode].clsName).show()},M=function(){var t,n,r,i,s;u.widget.on("click",".datepicker *",e.proxy(T,this)),u.widget.on("click","[data-action]",e.proxy(C,this)),u.widget.on("mousedown",e.proxy(k,this)),u.element.on("keydown",e.proxy(L,this)),u.options.pickDate&&u.options.pickTime&&u.widget.on("click.togglePicker",".accordion-toggle",function(o){o.stopPropagation(),t=e(this),n=t.closest("ul"),r=n.find(".in"),i=n.find(".collapse:not(.in)");if(r&&r.length){s=r.data("collapse");if(s&&s.transitioning)return;r.collapse("hide"),i.collapse("show"),t.find("span").toggleClass(u.options.icons.time+" "+u.options.icons.date),u.component&&u.component.find("span").toggleClass(u.options.icons.time+" "+u.options.icons.date)}}),u.isInput?u.element.on({click:e.proxy(u.show,this),focus:e.proxy(u.show,this),change:e.proxy(A,this),blur:e.proxy(u.hide,this)}):(u.element.on({change:e.proxy(A,this)},"input"),u.component?(u.component.on("click",e.proxy(u.show,this)),u.component.on("mousedown",e.proxy(k,this))):u.element.on("click",e.proxy(u.show,this)))},_=function(){e(window).on("resize.datetimepicker"+u.id,e.proxy(p,this)),u.isInput||e(document).on("mousedown.datetimepicker"+u.id,e.proxy(u.hide,this))},D=function(){u.widget.off("click",".datepicker *",u.click),u.widget.off("click","[data-action]"),u.widget.off("mousedown",u.stopEvent),u.options.pickDate&&u.options.pickTime&&u.widget.off("click.togglePicker"),u.isInput?u.element.off({focus:u.show,change:A,click:u.show,blur:u.hide}):(u.element.off({change:A},"input"),u.component?(u.component.off("click",u.show),u.component.off("mousedown",u.stopEvent)):u.element.off("click",u.show))},P=function(){e(window).off("resize.datetimepicker"+u.id),u.isInput||e(document).off("mousedown.datetimepicker"+u.id)},H=function(){if(u.element){var t=u.element.parents(),n=!1,r;for(r=0;r<t.length;r++)if(e(t[r]).css("position")==="fixed"){n=!0;break}return n}return!1},B=function(){t.locale(u.options.language);var e="";u.unset||(e=t(u.date).format(u.format));var n=c().val();n!==e&&c().val(e).change(),u.element.data("date",e),u.options.pickTime||u.hide()},j=function(e,n,r){t.locale(u.options.language);var i;e==="add"?(i=t(u.date),i.hours()===23&&i.add(r,n),i.add(r,n)):i=t(u.date).subtract(r,n);if(F(t(i.subtract(r,n)))||F(i)){v(i.format(u.format));return}e==="add"?u.date.add(r,n):u.date.subtract(r,n),u.unset=!1},F=function(e,n){t.locale(u.options.language);var r=t(u.options.maxDate,u.format,u.options.useStrict),i=t(u.options.minDate,u.format,u.options.useStrict);return n&&(r=r.endOf(n),i=i.startOf(n)),e.isAfter(r)||e.isBefore(i)?!0:u.options.disabledDates===!1?!1:u.options.disabledDates[e.format("YYYY-MM-DD")]===!0},I=function(e){return t.locale(u.options.language),u.options.enabledDates===!1?!0:u.options.enabledDates[e.format("YYYY-MM-DD")]===!0},q=function(e){var n={},r=0,i;for(i=0;i<e.length;i++)t.isMoment(e[i])||e[i]instanceof Date?f=t(e[i]):f=t(e[i],u.format,u.options.useStrict),f.isValid()&&(n[f.format("YYYY-MM-DD")]=!0,r++);return r>0?n:!1},R=function(e){return e=e.toString(),e.length>=2?e:"0"+e},U=function(){var e='<thead><tr><th class="prev">&lsaquo;</th><th colspan="'+(u.options.calendarWeeks?"6":"5")+'" class="picker-switch"></th><th class="next">&rsaquo;</th>'+"</tr>"+"</thead>",t='<tbody><tr><td colspan="'+(u.options.calendarWeeks?"8":"7")+'"></td></tr></tbody>',n='<div class="datepicker-days"><table class="table-condensed">'+e+"<tbody></tbody></table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+e+t+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+e+t+"</table>"+"</div>",r="";return u.options.pickDate&&u.options.pickTime?(r='<div class="bootstrap-datetimepicker-widget'+(u.options.sideBySide?" timepicker-sbs":"")+(u.use24hours?" usetwentyfour":"")+' dropdown-menu" style="z-index:9999 !important;">',u.options.sideBySide?r+='<div class="row"><div class="col-sm-6 datepicker">'+n+"</div>"+'<div class="col-sm-6 timepicker">'+W.getTemplate()+"</div>"+"</div>":r+='<ul class="list-unstyled"><li'+(u.options.collapse?' class="collapse in"':"")+">"+'<div class="datepicker">'+n+"</div>"+"</li>"+'<li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+u.options.icons.time+'"></span></a></li>'+"<li"+(u.options.collapse?' class="collapse"':"")+">"+'<div class="timepicker">'+W.getTemplate()+"</div>"+"</li>"+"</ul>",r+="</div>",r):u.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+W.getTemplate()+"</div>"+"</div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+n+"</div>"+"</div>"},z={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}]},W={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};W.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+u.options.icons.up+'"></span></a></td>'+'<td class="separator"></td>'+"<td>"+(u.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+u.options.icons.up+'"></span></a>':"")+"</td>"+(u.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+u.options.icons.up+'"></span></a></td>':"")+(u.use24hours?"":'<td class="separator"></td>')+"</tr>"+"<tr>"+"<td>"+W.hourTemplate+"</td> "+'<td class="separator">:</td>'+"<td>"+(u.options.useMinutes?W.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(u.options.useSeconds?'<td class="separator">:</td><td>'+W.secondTemplate+"</td>":"")+(u.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+"</tr>"+"<tr>"+'<td><a href="#" class="btn" data-action="decrementHours"><span class="'+u.options.icons.down+'"></span></a></td>'+'<td class="separator"></td>'+"<td>"+(u.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+u.options.icons.down+'"></span></a>':"")+"</td>"+(u.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+u.options.icons.down+'"></span></a></td>':"")+(u.use24hours?"":'<td class="separator"></td>')+"</tr>"+"</table>"+"</div>"+'<div class="timepicker-hours" data-action="selectHour">'+'<table class="table-condensed"></table>'+"</div>"+'<div class="timepicker-minutes" data-action="selectMinute">'+'<table class="table-condensed"></table>'+"</div>"+(u.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},u.destroy=function(){D(),P(),u.widget.remove(),u.element.removeData("DateTimePicker"),u.component&&u.component.removeData("DateTimePicker")},u.show=function(e){if(c().prop("disabled"))return;if(u.options.useCurrent&&c().val()===""){if(u.options.minuteStepping!==1){var n=t(),r=u.options.minuteStepping;n.minutes(Math.round(n.minutes()/r)*r%60).seconds(0),u.setValue(n.format(u.format))}else u.setValue(t().format(u.format));d("",e.type)}if(e&&e.type==="click"&&u.isInput&&u.widget.hasClass("picker-open"))return;u.widget.hasClass("picker-open")?(u.widget.hide(),u.widget.removeClass("picker-open")):(u.widget.show(),u.widget.addClass("picker-open")),u.height=u.component?u.component.outerHeight():u.element.outerHeight(),p(),u.element.trigger({type:"dp.show",date:t(u.date)}),_(),e&&k(e)},u.disable=function(){var e=c();if(e.prop("disabled"))return;e.prop("disabled",!0),D()},u.enable=function(){var e=c();if(!e.prop("disabled"))return;e.prop("disabled",!1),M()},u.hide=function(){var e=u.widget.find(".collapse"),n,r;for(n=0;n<e.length;n++){r=e.eq(n).data("collapse");if(r&&r.transitioning)return}u.widget.hide(),u.widget.removeClass("picker-open"),u.viewMode=u.startViewMode,O(),u.element.trigger({type:"dp.hide",date:t(u.date)}),P()},u.setValue=function(e){t.locale(u.options.language),e?u.unset=!1:(u.unset=!0,B()),t.isMoment(e)?e=e.locale(u.options.language):e=e instanceof Date?t(e):t(e,u.format,u.options.useStrict),e.isValid()?(u.date=e,B(),u.viewDate=t({y:u.date.year(),M:u.date.month()}),b(),x()):v(e)},u.getDate=function(){return u.unset?null:t(u.date)},u.setDate=function(e){var n=t(u.date);e?u.setValue(e):u.setValue(null),d(n,"function")},u.setDisabledDates=function(e){u.options.disabledDates=q(e),u.viewDate&&m()},u.setEnabledDates=function(e){u.options.enabledDates=q(e),u.viewDate&&m()},u.setMaxDate=function(e){if(e===undefined)return;t.isMoment(e)||e instanceof Date?u.options.maxDate=t(e):u.options.maxDate=t(e,u.format,u.options.useStrict),u.viewDate&&m()},u.setMinDate=function(e){if(e===undefined)return;t.isMoment(e)||e instanceof Date?u.options.minDate=t(e):u.options.minDate=t(e,u.format,u.options.useStrict),u.viewDate&&m()},l()};e.fn.datetimepicker=function(t){return this.each(function(){var n=e(this),i=n.data("DateTimePicker");i||n.data("DateTimePicker",new r(this,t))})},e.fn.datetimepicker.defaults={format:!1,pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,calendarWeeks:!1,minuteStepping:1,minDate:t({y:1900}),maxDate:t().add(100,"y"),showToday:!0,collapse:!0,language:t.locale(),defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:[],widgetParent:!1}}),function(e){typeof define=="function"&&define.amd?define("backbone.stickit",["underscore","backbone","exports"],e):typeof exports=="object"?e(require("underscore"),require("backbone"),exports):e(_,Backbone,{})}(function(e,t,n){n._handlers=[],n.addHandler=function(t){t=e.map(e.flatten([t]),function(t){return e.extend({updateModel:!0,updateView:!0,updateMethod:"text"},t)}),this._handlers=this._handlers.concat(t)},n.ViewMixin={_modelBindings:null,unstickit:function(t,n){if(e.isObject(n)){e.each(e.keys(n),function(e){this.unstickit(t,e)},this);return}var r=[],i=[];e.each(this._modelBindings,function(e,s){if(t&&e.model!==t)return;if(n&&e.config.selector!=n)return;i.push(e.config._destroy),e.model.off(e.event,e.fn),r.push(e.model),delete this._modelBindings[s]},this),e.invoke(e.uniq(r),"trigger","stickit:unstuck",this.cid),e.each(e.uniq(i),function(e){e.call(this)},this),this._modelBindings=e.compact(this._modelBindings),this.$el.off(".stickit"+(t?"."+t.cid:""),n)},stickit:function(t,n){var r=t||this.model,i=n||e.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]),this.addBinding(r,i);var s=this.remove;s.stickitWrapped||(this.remove=function(){var e=this;return this.unstickit(),s&&(e=s.apply(this,arguments)),e}),this.remove.stickitWrapped=!0},addBinding:function(t,n,r){var s,d,v,m,g,y=t||this.model,b=".stickit."+y.cid,w=r||{},E=e.uniqueId();if(!e.isString(n)){var S=n;e.each(S,function(e,t){this.addBinding(y,t,S[t])},this);return}g=n,s=g===":el"?this.$el:this.$(g),this.unstickit(y,g);if(!s.length)return;e.isString(w)&&(w={observe:w}),e.isFunction(w.observe)&&(w.observe=w.observe.call(this)),m=l(s,w),m.selector=g,v=m.observe,m.bindId=E,m.view=this,d=e.extend({stickitChange:m},m.setOptions),m._destroy=function(){i(this,m.destroy,s,y,m)},c(this,s,m,y,v),h(this,s,m,y,v),v&&(e.each(m.events,function(t){var n=t+b,r=function(t){var n=m.getVal.call(this,s,t,m,e.rest(arguments));o(this,m.updateModel,n,t,m)&&a(y,v,n,d,this,m)};r=e.bind(r,this),g===":el"?this.$el.on(n,r):this.$el.on(n,g,r)},this),e.each(e.flatten([v]),function(e){u(y,this,"change:"+e,m,function(e,t,n){var r=n&&n.stickitChange&&n.stickitChange.bindId||null;r!==E&&p(this,s,m,f(e,v,m,this),e)})},this),p(this,s,m,f(y,v,m,this),y,!0)),i(this,m.initialize,s,y,m)}},e.extend(t.View.prototype,n.ViewMixin);var r=function(t,n){var r=(n||"").split("."),i=e.reduce(r,function(e,t){return e[t]},t);return i==null?t:i},i=function(t,n){if(n)return(e.isString(n)?r(t,n):n).apply(t,e.rest(arguments,2))},s=function(e){return e.find("option").not(function(){return!this.selected})},o=function(t,n){return e.isBoolean(n)?n:e.isFunction(n)||e.isString(n)?i.apply(this,arguments):!1},u=function(e,t,n,r,i){e.on(n,i,t),t._modelBindings.push({model:e,event:n,fn:i,config:r})},a=function(t,n,r,s,o,u){var a={};u.onSet&&(r=i(o,u.onSet,r,u)),u.set?i(o,u.set,n,r,s,u):(a[n]=r,e.isArray(n)&&e.isArray(r)&&(a=e.reduce(n,function(t,n,i){return t[n]=e.has(r,i)?r[i]:null,t},{})),t.set(a,s))},f=function(t,n,r,s){var o,u=function(e){return t[r.escape?"escape":"get"](e)},a=function(e){return e==null?"":e};return o=e.isArray(n)?e.map(n,u):u(n),r.onGet&&(o=i(s,r.onGet,o,r)),e.isArray(o)?e.map(o,a):a(o)},l=n.getConfiguration=function(t,r){var i=[{updateModel:!1,updateMethod:"text",update:function(e,t,n,r){e[r.updateMethod]&&e[r.updateMethod](t)},getVal:function(e,t,n){return e[n.updateMethod]()}}];i=i.concat(e.filter(n._handlers,function(e){return t.is(e.selector)})),i.push(r);var s=e.extend.apply(e,i);return s.visible&&!e.has(s,"updateView")?s.updateView=!1:e.has(s,"updateView")||(s.updateView=!0),s},c=function(t,n,r,i,s){var o=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","indeterminate","loop","multiple","open","readonly","required","scoped","selected"];e.each(r.attributes||[],function(a){var l="",c,h;a=e.clone(a),c=a.observe||(a.observe=s),h=function(){var r=e.indexOf(o,a.name,!0)>-1?"prop":"attr",s=f(i,c,a,t);a.name==="class"?(n.removeClass(l).addClass(s),l=s):n[r](a.name,s)},e.each(e.flatten([c]),function(e){u(i,t,"change:"+e,r,h)}),h()})},h=function(t,n,r,s,o){if(r.visible==null)return;var a=function(){var u=r.visible,a=r.visibleFn,l=f(s,o,r,t),c=!!l;if(e.isFunction(u)||e.isString(u))c=!!i(t,u,l,r);a?i(t,a,n,c,r):n.toggle(c)};e.each(e.flatten([o]),function(e){u(s,t,"change:"+e,r,a)}),a()},p=function(e,t,n,r,s,u){if(!o(e,n.updateView,r,n))return;i(e,n.update,t,r,s,n),u||i(e,n.afterUpdate,t,r,n)};return n.addHandler([{selector:'[contenteditable="true"]',updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(e,t){e.val(t)},getVal:function(e){return e.val()}},{selector:'input[type="radio"]',events:["change"],update:function(e,t){e.filter('[value="'+t+'"]').prop("checked",!0)},getVal:function(e){return e.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(n,r,i,s){if(n.length>1)r||(r=[]),n.each(function(n,i){var s=t.$(i),o=e.indexOf(r,s.val())>-1;s.prop("checked",o)});else{var o=e.isBoolean(r)?r:r===n.val();n.prop("checked",o)}},getVal:function(n){var r;if(n.length>1)r=e.reduce(n,function(e,n){var r=t.$(n);return r.prop("checked")&&e.push(r.val()),e},[]);else{r=n.prop("checked");var i=n.val();i!=="on"&&i!=null&&(r=r?n.val():null)}return r}},{selector:"select",events:["change"],update:function(n,s,o,u){var a,f=u.selectOptions,l=f&&f.collection||undefined,c=n.prop("multiple");if(!f){f={};var h=function(e){return e.map(function(){return{value:this.value,label:this.text}}).get()};n.find("optgroup").length?(l={opt_labels:[]},n.find("> option").length&&(l.opt_labels.push(undefined),e.each(n.find("> option"),function(e){l[undefined]=h(t.$(e))})),e.each(n.find("optgroup"),function(e){var n=t.$(e).attr("label");l.opt_labels.push(n),l[n]=h(t.$(e).find("option"))})):l=h(n.find("option"))}f.valuePath=f.valuePath||"value",f.labelPath=f.labelPath||"label";var p=function(n,i,s){e.each(n,function(n){var o=t.$("<option/>"),u=n,a=function(t,n){o.text(t),u=n,o.data("stickit_bind_val",u),!e.isArray(u)&&!e.isObject(u)&&o.val(u)};n==="__default__"?a(f.defaultOption.label,f.defaultOption.value):a(r(n,f.labelPath),r(n,f.valuePath)),!c&&u!=null&&s!=null&&u===s||e.isObject(s)&&e.isEqual(u,s)?o.prop("selected",!0):c&&e.isArray(s)&&e.each(s,function(t){e.isObject(t)&&(t=r(t,f.valuePath)),(t===u||e.isObject(t)&&e.isEqual(u,t))&&o.prop("selected",!0)}),i.append(o)})};n.find("*").remove();var d=function(e,t){var n=window;return t.indexOf("this.")===0&&(n=e),t=t.replace(/^[a-z]*\.(.+)$/,"$1"),r(n,t)};e.isString(l)?a=d(this,l):e.isFunction(l)?a=i(this,l,n,u):a=l,a instanceof t.Collection&&(a=a.toJSON()),f.defaultOption&&p(["__default__"],n);if(e.isArray(a))p(a,n,s);else if(a.opt_labels)e.each(a.opt_labels,function(e){var r=t.$("<optgroup/>").attr("label",e);p(a[e],r,s),n.append(r)});else{var v=[],m;for(var g in a)m={},m[f.valuePath]=g,m[f.labelPath]=a[g],v.push(m);p(e.sortBy(v,f.comparator||f.labelPath),n,s)}},getVal:function(e){var n;return e.prop("multiple")?n=t.$(s(e).map(function(){return t.$(this).data("stickit_bind_val")})).get():n=s(e).data("stickit_bind_val"),n}}]),t.Stickit=n,t.Stickit}),function(e){define("signalr",["jquery"],function(){return function(){return function(e,t,n){function m(t,n){if(e.isArray(t)){for(var r=t.length-1;r>=0;r--){var s=t[r];if(e.type(s)!=="string"||!i.transports[s])n.log("Invalid transport: "+s+", removing it from the transports list."),t.splice(r,1)}t.length===0&&(n.log("No transports remain within the specified transport array."),t=null)}else if(!i.transports[t]&&t!=="auto")n.log("Invalid transport: "+t.toString()+"."),t=null;else if(t==="auto"&&i._.ieVersion<=8)return["longPolling"];return t}function g(e){if(e==="http:")return 80;if(e==="https:")return 443}function y(e,t){return t.match(/:\d+$/)?t:t+":"+g(e)}function b(t,n){var r=this,i=[];r.tryBuffer=function(n){return t.state===e.signalR.connectionState.connecting?(i.push(n),!0):!1},r.drain=function(){if(t.state===e.signalR.connectionState.connected)while(i.length>0)n(i.shift())},r.clear=function(){i=[]}}var r={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if(typeof e!="function")throw new Error(r.nojQuery);var i,s,o=t.document.readyState==="complete",u=e(t),a="__Negotiate Aborted__",f={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},l={processData:!0,timeout:null,async:!0,global:!1,cache:!1},c=function(e,n){if(n===!1)return;var r;if(typeof t.console=="undefined")return;r="["+(new Date).toTimeString()+"] SignalR: "+e,t.console.debug?t.console.debug(r):t.console.log&&t.console.log(r)},h=function(t,n,r){return n===t.state?(t.state=r,e(t).triggerHandler(f.onStateChanged,[{oldState:n,newState:r}]),!0):!1},p=function(e){return e.state===i.connectionState.disconnected},d=function(e){return e._.keepAliveData.activated&&e.transport.supportsKeepAlive(e)},v=function(n){var r,s;n._.configuredStopReconnectingTimeout||(s=function(t){var n=i._.format(i.resources.reconnectTimeout,t.disconnectTimeout);t.log(n),e(t).triggerHandler(f.onError,[i._.error(n,"TimeoutException")]),t.stop(!1,!1)},n.reconnecting(function(){var e=this;e.state===i.connectionState.reconnecting&&(r=t.setTimeout(function(){s(e)},e.disconnectTimeout))}),n.stateChanged(function(e){e.oldState===i.connectionState.reconnecting&&t.clearTimeout(r)}),n._.configuredStopReconnectingTimeout=!0)};i=function(e,t,n){return new i.fn.init(e,t,n)},i._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var e,n;return t.navigator.appName==="Microsoft Internet Explorer"&&(n=/MSIE ([0-9]+\.[0-9]+)/.exec(t.navigator.userAgent),n&&(e=t.parseFloat(n[1]))),e}(),error:function(e,t,n){var r=new Error(e);return r.source=t,typeof n!="undefined"&&(r.context=n),r},transportError:function(e,t,r,i){var s=this.error(e,r,i);return s.transport=t?t.name:n,s},format:function(){var e=arguments[0];for(var t=0;t<arguments.length-1;t++)e=e.replace("{"+t+"}",arguments[t+1]);return e},firefoxMajorVersion:function(e){var t=e.match(/Firefox\/(\d+)/);return!t||!t.length||t.length<2?0:parseInt(t[1],10)},configurePingInterval:function(n){var r=n._.config,s=function(t){e(n).triggerHandler(f.onError,[t])};r&&!n._.pingIntervalId&&r.pingInterval&&(n._.pingIntervalId=t.setInterval(function(){i.transports._logic.pingServer(n).fail(s)},r.pingInterval))}},i.events=f,i.resources=r,i.ajaxDefaults=l,i.changeState=h,i.isDisconnecting=p,i.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},i.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'></script>.")}},u.load(function(){o=!0}),i.fn=i.prototype={init:function(t,n,r){var i=e(this);this.url=t,this.qs=n,this.lastError=null,this._={keepAliveData:{},connectingMessageBuffer:new b(this,function(e){i.triggerHandler(f.onReceived,[e])}),onFailedTimeoutHandle:null,lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0},typeof r=="boolean"&&(this.logging=r)},_parseResponse:function(e){var t=this;return e?typeof e=="string"?t.json.parse(e):e:e},_originalJson:t.JSON,json:t.JSON,isCrossDomain:function(n,r){var i;return n=e.trim(n),r=r||t.location,n.indexOf("http")!==0?!1:(i=t.document.createElement("a"),i.href=n,i.protocol+y(i.protocol,i.host)!==r.protocol+y(r.protocol,r.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:i.connectionState.disconnected,clientProtocol:"1.4",reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(n,s){var l=this,c={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},p,g=l._deferral||e.Deferred(),y=t.document.createElement("a");l.lastError=null,l._deferral=g;if(!l.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");e.type(n)==="function"?s=n:e.type(n)==="object"&&(e.extend(c,n),e.type(c.callback)==="function"&&(s=c.callback)),c.transport=m(c.transport,l);if(!c.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");l._.config=c;if(!o&&c.waitForPageLoad===!0)return l._.deferredStartHandler=function(){l.start(n,s)},u.bind("load",l._.deferredStartHandler),g.promise();if(l.state===i.connectionState.connecting)return g.promise();if(h(l,i.connectionState.disconnected,i.connectionState.connecting)===!1)return g.resolve(l),g.promise();v(l),y.href=l.url,!y.protocol||y.protocol===":"?(l.protocol=t.document.location.protocol,l.host=y.host||t.document.location.host):(l.protocol=y.protocol,l.host=y.host),l.baseUrl=l.protocol+"//"+l.host,l.wsProtocol=l.protocol==="https:"?"wss://":"ws://",c.transport==="auto"&&c.jsonp===!0&&(c.transport="longPolling"),l.url.indexOf("//")===0&&(l.url=t.location.protocol+l.url,l.log("Protocol relative URL detected, normalizing it to '"+l.url+"'.")),this.isCrossDomain(l.url)&&(l.log("Auto detected cross domain url."),c.transport==="auto"&&(c.transport=["webSockets","serverSentEvents","longPolling"]),typeof c.withCredentials=="undefined"&&(c.withCredentials=!0),c.jsonp||(c.jsonp=!e.support.cors,c.jsonp&&l.log("Using jsonp because this browser doesn't support CORS.")),l.contentType=i._.defaultContentType),l.withCredentials=c.withCredentials,l.ajaxDataType=c.jsonp?"jsonp":"text",e(l).bind(f.onStart,function(t,n){e.type(s)==="function"&&s.call(l),g.resolve(l)}),p=function(n,s){var o=i._.error(r.noTransportOnInit);s=s||0;if(s>=n.length){e(l).triggerHandler(f.onError,[o]),g.reject(o),l.stop();return}if(l.state===i.connectionState.disconnected)return;var a=n[s],c=i.transports[a],v=!1,m=function(){v||(v=!0,t.clearTimeout(l._.onFailedTimeoutHandle),c.stop(l),p(n,s+1))};l.transport=c;try{l._.onFailedTimeoutHandle=t.setTimeout(function(){l.log(c.name+" timed out when trying to connect."),m()},l._.totalTransportConnectTimeout),c.start(l,function(){var n=function(){var n=i._.firefoxMajorVersion(t.navigator.userAgent)>=11,r=!!l.withCredentials&&n;l.log("The start request succeeded. Transitioning to the connected state."),d(l)&&i.transports._logic.monitorKeepAlive(l),i.transports._logic.startHeartbeat(l),i._.configurePingInterval(l),h(l,i.connectionState.connecting,i.connectionState.connected)||l.log("WARNING! The connection was not in the connecting state."),l._.connectingMessageBuffer.drain(),e(l).triggerHandler(f.onStart),u.bind("unload",function(){l.log("Window unloading, stopping the connection."),l.stop(r)}),n&&u.bind("beforeunload",function(){t.setTimeout(function(){l.stop(r)},0)})};if(!v){v=!0,t.clearTimeout(l._.onFailedTimeoutHandle);if(l.state===i.connectionState.disconnected)return;l.log(c.name+" transport selected. Initiating start request."),i.transports._logic.ajaxStart(l,n)}},m)}catch(y){l.log(c.name+" transport threw '"+y.message+"' when attempting to start."),m()}};var b=l.url+"/negotiate",w=function(t,n){var s=i._.error(r.errorOnNegotiate,t,n._.negotiateRequest);e(n).triggerHandler(f.onError,s),g.reject(s),n.stop()};return e(l).triggerHandler(f.onStarting),b=i.transports._logic.prepareQueryString(l,b),l.log("Negotiating with '"+b+"'."),l._.negotiateRequest=i.transports._logic.ajax(l,{url:b,error:function(e,t){t!==a?w(e,l):g.reject(i._.error(r.stoppedWhileNegotiating,null,l._.negotiateRequest))},success:function(t){var n,s,o,u=[],a=[];try{n=l._parseResponse(t)}catch(h){w(i._.error(r.errorParsingNegotiateResponse,h),l);return}s=l._.keepAliveData,l.appRelativeUrl=n.Url,l.id=n.ConnectionId,l.token=n.ConnectionToken,l.webSocketServerUrl=n.WebSocketServerUrl,l._.pollTimeout=n.ConnectionTimeout*1e3+1e4,l.disconnectTimeout=n.DisconnectTimeout*1e3,l._.totalTransportConnectTimeout=l.transportConnectTimeout+n.TransportConnectTimeout*1e3,n.KeepAliveTimeout?(s.activated=!0,s.timeout=n.KeepAliveTimeout*1e3,s.timeoutWarning=s.timeout*l.keepAliveWarnAt,l._.beatInterval=(s.timeout-s.timeoutWarning)/3):s.activated=!1,l.reconnectWindow=l.disconnectTimeout+(s.timeout||0);if(!n.ProtocolVersion||n.ProtocolVersion!==l.clientProtocol){o=i._.error(i._.format(r.protocolIncompatible,l.clientProtocol,n.ProtocolVersion)),e(l).triggerHandler(f.onError,[o]),g.reject(o);return}e.each(i.transports,function(e){if(e.indexOf("_")===0||e==="webSockets"&&!n.TryWebSockets)return!0;a.push(e)}),e.isArray(c.transport)?e.each(c.transport,function(t,n){e.inArray(n,a)>=0&&u.push(n)}):c.transport==="auto"?u=a:e.inArray(c.transport,a)>=0&&u.push(c.transport),p(u)}}),g.promise()},starting:function(t){var n=this;return e(n).bind(f.onStarting,function(e,r){t.call(n)}),n},send:function(e){var t=this;if(t.state===i.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(t.state===i.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return t.transport.send(t,e),t},received:function(t){var n=this;return e(n).bind(f.onReceived,function(e,r){t.call(n,r)}),n},stateChanged:function(t){var n=this;return e(n).bind(f.onStateChanged,function(e,r){t.call(n,r)}),n},error:function(t){var n=this;return e(n).bind(f.onError,function(e,r,i){n.lastError=r,t.call(n,r,i)}),n},disconnected:function(t){var n=this;return e(n).bind(f.onDisconnect,function(e,r){t.call(n)}),n},connectionSlow:function(t){var n=this;return e(n).bind(f.onConnectionSlow,function(e,r){t.call(n)}),n},reconnecting:function(t){var n=this;return e(n).bind(f.onReconnecting,function(e,r){t.call(n)}),n},reconnected:function(t){var n=this;return e(n).bind(f.onReconnect,function(e,r){t.call(n)}),n},stop:function(n,s){var l=this,c=l._deferral;l._.deferredStartHandler&&u.unbind("load",l._.deferredStartHandler),delete l._.config,delete l._.deferredStartHandler;if(!o&&(!l._.config||l._.config.waitForPageLoad===!0)){l.log("Stopping connection prior to negotiate."),c&&c.reject(i._.error(r.stoppedWhileLoading));return}if(l.state===i.connectionState.disconnected)return;return l.log("Stopping connection."),h(l,l.state,i.connectionState.disconnected),t.clearTimeout(l._.beatHandle),t.clearTimeout(l._.onFailedTimeoutHandle),t.clearInterval(l._.pingIntervalId),l.transport&&(l.transport.stop(l),s!==!1&&l.transport.abort(l,n),d(l)&&i.transports._logic.stopMonitoringKeepAlive(l),l.transport=null),l._.negotiateRequest&&(l._.negotiateRequest.abort(a),delete l._.negotiateRequest),i.transports._logic.tryAbortStartRequest(l),e(l).triggerHandler(f.onDisconnect),delete l._deferral,delete l.messageId,delete l.groupsToken,delete l.id,delete l._.pingIntervalId,delete l._.lastMessageAt,delete l._.lastActiveAt,l._.connectingMessageBuffer.clear(),l},log:function(e){c(e,this.logging)}},i.fn.init.prototype=i.fn,i.noConflict=function(){return e.connection===i&&(e.connection=s),i},e.connection&&(s=e.connection),e.connection=e.signalR=i}(window.jQuery,window),function(e,t,n){function a(e){e._.keepAliveData.monitoring&&f(e),u.markActive(e)&&(e._.beatHandle=t.setTimeout(function(){a(e)},e._.beatInterval))}function f(t){var n=t._.keepAliveData,s;t.state===r.connectionState.connected&&(s=(new Date).getTime()-t._.lastMessageAt,s>=n.timeout?(t.log("Keep alive timed out.  Notifying transport that connection has been lost."),t.transport.lostConnection(t)):s>=n.timeoutWarning?n.userNotified||(t.log("Keep alive has been missed, connection may be dead/slow."),e(t).triggerHandler(i.onConnectionSlow),n.userNotified=!0):n.userNotified=!1)}function l(e,t){var n=e.url+t;return e.transport&&(n+="?transport="+e.transport.name),u.prepareQueryString(e,n)}var r=e.signalR,i=e.signalR.events,s=e.signalR.changeState,o="__Start Aborted__",u;r.transports={},u=r.transports._logic={ajax:function(t,n){return e.ajax(e.extend(!0,{},e.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:t.withCredentials},contentType:t.contentType,dataType:t.ajaxDataType},n))},pingServer:function(t){var n,i,s=e.Deferred();return t.transport?(n=t.url+"/ping",n=u.addQs(n,t.qs),i=u.ajax(t,{url:n,success:function(e){var n;try{n=t._parseResponse(e)}catch(o){s.reject(r._.transportError(r.resources.pingServerFailedParse,t.transport,o,i)),t.stop();return}n.Response==="pong"?s.resolve():s.reject(r._.transportError(r._.format(r.resources.pingServerFailedInvalidResponse,e),t.transport,null,i))},error:function(e){e.status===401||e.status===403?(s.reject(r._.transportError(r._.format(r.resources.pingServerFailedStatusCode,e.status),t.transport,e,i)),t.stop()):s.reject(r._.transportError(r.resources.pingServerFailed,t.transport,e,i))}})):s.reject(r._.transportError(r.resources.noConnectionTransport,t.transport)),s.promise()},prepareQueryString:function(e,n){var r;return r=u.addQs(n,"clientProtocol="+e.clientProtocol),r=u.addQs(r,e.qs),e.token&&(r+="&connectionToken="+t.encodeURIComponent(e.token)),e.data&&(r+="&connectionData="+t.encodeURIComponent(e.data)),r},addQs:function(t,n){var r=t.indexOf("?")!==-1?"&":"?",i;if(!n)return t;if(typeof n=="object")return t+r+e.param(n);if(typeof n=="string"){i=n.charAt(0);if(i==="?"||i==="&")r="";return t+r+n}throw new Error("Query string property must be either a string or object.")},getUrl:function(e,n,r,i){var s=n==="webSockets"?"":e.baseUrl,o=s+e.appRelativeUrl,a="transport="+n;return e.groupsToken&&(a+="&groupsToken="+t.encodeURIComponent(e.groupsToken)),r?(i?o+="/poll":o+="/reconnect",e.messageId&&(a+="&messageId="+t.encodeURIComponent(e.messageId))):o+="/connect",o+="?"+a,o=u.prepareQueryString(e,o),o+="&tid="+Math.floor(Math.random()*11),o},maximizePersistentResponse:function(e){return{MessageId:e.C,Messages:e.M,Initialized:typeof e.S!="undefined"?!0:!1,Disconnect:typeof e.D!="undefined"?!0:!1,ShouldReconnect:typeof e.T!="undefined"?!0:!1,LongPollDelay:e.L,GroupsToken:e.G}},updateGroups:function(e,t){t&&(e.groupsToken=t)},stringifySend:function(e,t){return typeof t=="string"||typeof t=="undefined"||t===null?t:e.json.stringify(t)},ajaxSend:function(t,n){var s=u.stringifySend(t,n),o=l(t,"/send"),a,f=function(t,s){e(s).triggerHandler(i.onError,[r._.transportError(r.resources.sendFailed,s.transport,t,a),n])};return a=u.ajax(t,{url:o,type:t.ajaxDataType==="jsonp"?"GET":"POST",contentType:r._.defaultContentType,data:{data:s},success:function(e){var n;if(e){try{n=t._parseResponse(e)}catch(r){f(r,t),t.stop();return}u.triggerReceived(t,n)}},error:function(e,n){if(n==="abort"||n==="parsererror")return;f(e,t)}}),a},ajaxAbort:function(e,t){if(typeof e.transport=="undefined")return;t=typeof t=="undefined"?!0:t;var n=l(e,"/abort");u.ajax(e,{url:n,async:t,timeout:1e3,type:"POST"}),e.log("Fired ajax abort async = "+t+".")},ajaxStart:function(t,n){var s=function(e){var n=t._deferral;n&&n.reject(e)},a=function(n){t.log("The start request failed. Stopping the connection."),e(t).triggerHandler(i.onError,[n]),s(n),t.stop()};t._.startRequest=u.ajax(t,{url:l(t,"/start"),success:function(e,i,s){var o;try{o=t._parseResponse(e)}catch(u){a(r._.error(r._.format(r.resources.errorParsingStartResponse,e),u,s));return}o.Response==="started"?n():a(r._.error(r._.format(r.resources.invalidStartResponse,e),null,s))},error:function(e,n,i){n!==o?a(r._.error(r.resources.errorDuringStartRequest,i,e)):(t.log("The start request aborted because connection.stop() was called."),s(r._.error(r.resources.stoppedDuringStartRequest,null,e)))}})},tryAbortStartRequest:function(e){e._.startRequest&&(e._.startRequest.abort(o),delete e._.startRequest)},tryInitialize:function(e,t){e.Initialized&&t()},triggerReceived:function(t,n){t._.connectingMessageBuffer.tryBuffer(n)||e(t).triggerHandler(i.onReceived,[n])},processMessages:function(t,n,r){var i;u.markLastMessage(t),n&&(i=u.maximizePersistentResponse(n),u.updateGroups(t,i.GroupsToken),i.MessageId&&(t.messageId=i.MessageId),i.Messages&&(e.each(i.Messages,function(e,n){u.triggerReceived(t,n)}),u.tryInitialize(i,r)))},monitorKeepAlive:function(t){var n=t._.keepAliveData;n.monitoring?t.log("Tried to monitor keep alive but it's already being monitored."):(n.monitoring=!0,u.markLastMessage(t),t._.keepAliveData.reconnectKeepAliveUpdate=function(){u.markLastMessage(t)},e(t).bind(i.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t.log("Now monitoring keep alive with a warning timeout of "+n.timeoutWarning+" and a connection lost timeout of "+n.timeout+"."))},stopMonitoringKeepAlive:function(t){var n=t._.keepAliveData;n.monitoring&&(n.monitoring=!1,e(t).unbind(i.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t._.keepAliveData={},t.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(e){e._.lastActiveAt=(new Date).getTime(),a(e)},markLastMessage:function(e){e._.lastMessageAt=(new Date).getTime()},markActive:function(e){return u.verifyLastActive(e)?(e._.lastActiveAt=(new Date).getTime(),!0):!1},isConnectedOrReconnecting:function(e){return e.state===r.connectionState.connected||e.state===r.connectionState.reconnecting},ensureReconnectingState:function(t){return s(t,r.connectionState.connected,r.connectionState.reconnecting)===!0&&e(t).triggerHandler(i.onReconnecting),t.state===r.connectionState.reconnecting},clearReconnectTimeout:function(e){e&&e._.reconnectTimeout&&(t.clearTimeout(e._.reconnectTimeout),delete e._.reconnectTimeout)},verifyLastActive:function(t){if((new Date).getTime()-t._.lastActiveAt>=t.reconnectWindow){var n=r._.format(r.resources.reconnectWindowTimeout,new Date(t._.lastActiveAt),t.reconnectWindow);return t.log(n),e(t).triggerHandler(i.onError,[r._.error(n,"TimeoutException")]),t.stop(!1,!1),!1}return!0},reconnect:function(e,n){var i=r.transports[n];if(u.isConnectedOrReconnecting(e)&&!e._.reconnectTimeout){if(!u.verifyLastActive(e))return;e._.reconnectTimeout=t.setTimeout(function(){if(!u.verifyLastActive(e))return;i.stop(e),u.ensureReconnectingState(e)&&(e.log(n+" reconnecting."),i.start(e))},e.reconnectDelay)}},handleParseFailure:function(t,n,s,o,u){t.state===r.connectionState.connecting?(t.log("Failed to parse server response while attempting to connect."),o()):(e(t).triggerHandler(i.onError,[r._.transportError(r._.format(r.resources.parseFailed,n),t.transport,s,u)]),t.stop())},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(e,t,n){var r=e.signalR,i=e.signalR.events,s=e.signalR.changeState,o=r.transports._logic;r.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(t,n){var s=o.stringifySend(t,n);try{t.socket.send(s)}catch(u){e(t).triggerHandler(i.onError,[r._.transportError(r.resources.webSocketsInvalidState,t.transport,u,t.socket),n])}},start:function(n,u,a){var f,l=!1,c=this,h=!u,p=e(n);if(!t.WebSocket){a();return}n.socket||(n.webSocketServerUrl?f=n.webSocketServerUrl:f=n.wsProtocol+n.host,f+=o.getUrl(n,this.name,h),n.log("Connecting to websocket endpoint '"+f+"'."),n.socket=new t.WebSocket(f),n.socket.onopen=function(){l=!0,n.log("Websocket opened."),o.clearReconnectTimeout(n),s(n,r.connectionState.reconnecting,r.connectionState.connected)===!0&&p.triggerHandler(i.onReconnect)},n.socket.onclose=function(t){if(this===n.socket){if(!l){a?a():h&&c.reconnect(n);return}typeof t.wasClean!="undefined"&&t.wasClean===!1?(e(n).triggerHandler(i.onError,[r._.transportError(r.resources.webSocketClosed,n.transport,t)]),n.log("Unclean disconnect from websocket: "+t.reason||"[no reason given].")):n.log("Websocket closed."),c.reconnect(n)}},n.socket.onmessage=function(t){var r;try{r=n._parseResponse(t.data)}catch(i){o.handleParseFailure(n,t.data,i,a,t);return}r&&(e.isEmptyObject(r)||r.M?o.processMessages(n,r,u):o.triggerReceived(n,r))})},reconnect:function(e){o.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},stop:function(e){o.clearReconnectTimeout(e),e.socket&&(e.log("Closing the Websocket."),e.socket.close(),e.socket=null)},abort:function(e,t){o.ajaxAbort(e,t)}}}(window.jQuery,window),function(e,t,n){var r=e.signalR,i=e.signalR.events,s=e.signalR.changeState,o=r.transports._logic,u=function(e){t.clearTimeout(e._.reconnectAttemptTimeoutHandle),delete e._.reconnectAttemptTimeoutHandle};r.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(n,a,f){var l=this,c=!1,h=e(n),p=!a,d;n.eventSource&&(n.log("The connection already has an event source. Stopping it."),n.stop());if(!t.EventSource){f&&(n.log("This browser doesn't support SSE."),f());return}d=o.getUrl(n,this.name,p);try{n.log("Attempting to connect to SSE endpoint '"+d+"'."),n.eventSource=new t.EventSource(d,{withCredentials:n.withCredentials})}catch(v){n.log("EventSource failed trying to connect with error "+v.Message+"."),f?f():(h.triggerHandler(i.onError,[r._.transportError(r.resources.eventSourceFailedToConnect,n.transport,v)]),p&&l.reconnect(n));return}p&&(n._.reconnectAttemptTimeoutHandle=t.setTimeout(function(){c===!1&&n.eventSource.readyState!==t.EventSource.OPEN&&l.reconnect(n)},l.timeOut)),n.eventSource.addEventListener("open",function(e){n.log("EventSource connected."),u(n),o.clearReconnectTimeout(n),c===!1&&(c=!0,s(n,r.connectionState.reconnecting,r.connectionState.connected)===!0&&h.triggerHandler(i.onReconnect))},!1),n.eventSource.addEventListener("message",function(e){var t;if(e.data==="initialized")return;try{t=n._parseResponse(e.data)}catch(r){o.handleParseFailure(n,e.data,r,f,e);return}o.processMessages(n,t,a)},!1),n.eventSource.addEventListener("error",function(e){if(this!==n.eventSource)return;if(!c){f&&f();return}n.log("EventSource readyState: "+n.eventSource.readyState+"."),e.eventPhase===t.EventSource.CLOSED?(n.log("EventSource reconnecting due to the server connection ending."),l.reconnect(n)):(n.log("EventSource error."),h.triggerHandler(i.onError,[r._.transportError(r.resources.eventSourceError,n.transport,e)]))},!1)},reconnect:function(e){o.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},send:function(e,t){o.ajaxSend(e,t)},stop:function(e){u(e),o.clearReconnectTimeout(e),e&&e.eventSource&&(e.log("EventSource calling close()."),e.eventSource.close(),e.eventSource=null,delete e.eventSource)},abort:function(e,t){o.ajaxAbort(e,t)}}}(window.jQuery,window),function(e,t,n){var r=e.signalR,i=e.signalR.events,s=e.signalR.changeState,o=r.transports._logic,u=function(){var e=t.document.createElement("iframe");return e.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),e},a=function(){var e=null,n=1e3,i=0;return{prevent:function(){r._.ieVersion<=8&&(i===0&&(e=t.setInterval(function(){var e=u();t.document.body.appendChild(e),t.document.body.removeChild(e),e=null},n)),i++)},cancel:function(){i===1&&t.clearInterval(e),i>0&&i--}}}();r.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(e,n,r){var i=this,s=o.foreverFrame.count+=1,f,l=u(),c=function(){e.log("Forever frame iframe finished loading and is no longer receiving messages."),i.reconnect(e)};if(t.EventSource){r&&(e.log("This browser supports SSE, skipping Forever Frame."),r());return}l.setAttribute("data-signalr-connection-id",e.id),a.prevent(),f=o.getUrl(e,this.name),f+="&frameId="+s,t.document.body.appendChild(l),e.log("Binding to iframe's load event."),l.addEventListener?l.addEventListener("load",c,!1):l.attachEvent&&l.attachEvent("onload",c),l.src=f,o.foreverFrame.connections[s]=e,e.frame=l,e.frameId=s,n&&(e.onSuccess=function(){e.log("Iframe transport started."),n()})},reconnect:function(e){var n=this;o.isConnectedOrReconnecting(e)&&o.verifyLastActive(e)&&t.setTimeout(function(){if(!o.verifyLastActive(e))return;if(e.frame&&o.ensureReconnectingState(e)){var t=e.frame,r=o.getUrl(e,n.name,!0)+"&frameId="+e.frameId;e.log("Updating iframe src to '"+r+"'."),t.src=r}},e.reconnectDelay)},lostConnection:function(e){this.reconnect(e)},send:function(e,t){o.ajaxSend(e,t)},receive:function(t,n){var i,s,u;t.json!==t._originalJson&&(n=t._originalJson.stringify(n)),u=t._parseResponse(n),o.processMessages(t,u,t.onSuccess);if(t.state===e.signalR.connectionState.connected){t.frameMessageCount=(t.frameMessageCount||0)+1;if(t.frameMessageCount>r.transports.foreverFrame.iframeClearThreshold){t.frameMessageCount=0,i=t.frame.contentWindow||t.frame.contentDocument;if(i&&i.document&&i.document.body){s=i.document.body;while(s.firstChild)s.removeChild(s.firstChild)}}}},stop:function(e){var n=null;a.cancel();if(e.frame){if(e.frame.stop)e.frame.stop();else try{n=e.frame.contentWindow||e.frame.contentDocument,n.document&&n.document.execCommand&&n.document.execCommand("Stop")}catch(r){e.log("Error occured when stopping foreverFrame transport. Message = "+r.message+".")}e.frame.parentNode===t.document.body&&t.document.body.removeChild(e.frame),delete o.foreverFrame.connections[e.frameId],e.frame=null,e.frameId=null,delete e.frame,delete e.frameId,delete e.onSuccess,delete e.frameMessageCount,e.log("Stopping forever frame.")}},abort:function(e,t){o.ajaxAbort(e,t)},getConnection:function(e){return o.foreverFrame.connections[e]},started:function(t){s(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&e(t).triggerHandler(i.onReconnect)}}}(window.jQuery,window),function(e,t,n){var r=e.signalR,i=e.signalR.events,s=e.signalR.changeState,o=e.signalR.isDisconnecting,u=r.transports._logic;r.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(n,a,f){var l=this,c=function(){c=e.noop,f=null,n.log("LongPolling connected."),a()},h=function(){return f?(f(),f=null,n.log("LongPolling failed to connect."),!0):!1},p=n._,d=0,v=function(n){t.clearTimeout(p.reconnectTimeoutId),p.reconnectTimeoutId=null,s(n,r.connectionState.reconnecting,r.connectionState.connected)===!0&&(n.log("Raising the reconnect event"),e(n).triggerHandler(i.onReconnect))},m=36e5;n.pollXhr&&(n.log("Polling xhr requests already exists, aborting."),n.stop()),n.messageId=null,p.reconnectTimeoutId=null,p.pollTimeoutId=t.setTimeout(function(){(function s(a,f){var g=a.messageId,y=g===null,b=!y,w=!f,E=u.getUrl(a,l.name,b,w);if(o(a)===!0)return;n.log("Opening long polling request to '"+E+"'."),a.pollXhr=u.ajax(n,{xhrFields:{onprogress:function(){u.markLastMessage(n)}},url:E,timeout:n._.pollTimeout,success:function(r){var i,f=0,l,m;n.log("Long poll complete."),d=0;try{i=n._parseResponse(r)}catch(g){u.handleParseFailure(a,r,g,h,a.pollXhr);return}p.reconnectTimeoutId!==null&&v(a),i&&(l=u.maximizePersistentResponse(i)),u.processMessages(a,i,c),l&&e.type(l.LongPollDelay)==="number"&&(f=l.LongPollDelay);if(l&&l.Disconnect)return;if(o(a)===!0)return;m=l&&l.ShouldReconnect;if(m&&!u.ensureReconnectingState(a))return;f>0?p.pollTimeoutId=t.setTimeout(function(){s(a,m)},f):s(a,m)},error:function(o,f){t.clearTimeout(p.reconnectTimeoutId),p.reconnectTimeoutId=null;if(f==="abort"){n.log("Aborted xhr request.");return}if(!h()){d++,n.state!==r.connectionState.reconnecting&&(n.log("An error occurred using longPolling. Status = "+f+".  Response = "+o.responseText+"."),e(a).triggerHandler(i.onError,[r._.transportError(r.resources.longPollFailed,n.transport,o,a.pollXhr)]));if((n.state===r.connectionState.connected||n.state===r.connectionState.reconnecting)&&!u.verifyLastActive(n))return;if(!u.ensureReconnectingState(a))return;p.pollTimeoutId=t.setTimeout(function(){s(a,!0)},l.reconnectDelay)}}}),b&&f===!0&&(p.reconnectTimeoutId=t.setTimeout(function(){v(a)},Math.min(1e3*(Math.pow(2,d)-1),m)))})(n)},250)},lostConnection:function(e){e.pollXhr&&e.pollXhr.abort("lostConnection")},send:function(e,t){u.ajaxSend(e,t)},stop:function(e){t.clearTimeout(e._.pollTimeoutId),t.clearTimeout(e._.reconnectTimeoutId),delete e._.pollTimeoutId,delete e._.reconnectTimeoutId,e.pollXhr&&(e.pollXhr.abort(),e.pollXhr=null,delete e.pollXhr)},abort:function(e,t){u.ajaxAbort(e,t)}}}(window.jQuery,window),function(e,t,n){function s(e){return e+r}function o(e,t,n){var r,i=e.length,s=[];for(r=0;r<i;r+=1)e.hasOwnProperty(r)&&(s[r]=t.call(n,e[r],r,e));return s}function u(t){return e.isFunction(t)?null:e.type(t)==="undefined"?null:t}function a(e){for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}function f(e,t){var n=e._.invocationCallbacks,r;a(n)&&e.log("Clearing hub invocation callbacks with error: "+t+"."),e._.invocationCallbackId=0,delete e._.invocationCallbacks,e._.invocationCallbacks={};for(var i in n)r=n[i],r.method.call(r.scope,{E:t})}function l(e,t){return new l.fn.init(e,t)}function c(t,n){var r={qs:null,logging:!1,useDefaultPath:!0};e.extend(r,n);if(!t||r.useDefaultPath)t=(t||"")+"/signalr";return new c.fn.init(t,r)}var r=".hubProxy",i=e.signalR;l.fn=l.prototype={init:function(e,t){this.state={},this.connection=e,this.hubName=t,this._={callbackMap:{}}},constructor:l,hasSubscriptions:function(){return a(this._.callbackMap)},on:function(t,n){var r=this,i=r._.callbackMap;return t=t.toLowerCase(),i[t]||(i[t]={}),i[t][n]=function(e,t){n.apply(r,t)},e(r).bind(s(t),i[t][n]),r},off:function(t,n){var r=this,i=r._.callbackMap,o;return t=t.toLowerCase(),o=i[t],o&&(o[n]?(e(r).unbind(s(t),o[n]),delete o[n],a(o)||delete i[t]):n||(e(r).unbind(s(t)),delete i[t])),r},invoke:function(t){var n=this,r=n.connection,s=e.makeArray(arguments).slice(1),a=o(s,u),f={H:n.hubName,M:t,A:a,I:r._.invocationCallbackId},l=e.Deferred(),c=function(s){var o=n._maximizeHubResponse(s),u,a;e.extend(n.state,o.State),o.Progress?l.notifyWith?l.notifyWith(n,[o.Progress.Data]):r._.progressjQueryVersionLogged||(r.log("A hub method invocation progress update was received but the version of jQuery in use ("+e.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),r._.progressjQueryVersionLogged=!0):o.Error?(o.StackTrace&&r.log(o.Error+"\n"+o.StackTrace+"."),u=o.IsHubException?"HubException":"Exception",a=i._.error(o.Error,u),a.data=o.ErrorData,r.log(n.hubName+"."+t+" failed to execute. Error: "+a.message),l.rejectWith(n,[a])):(r.log("Invoked "+n.hubName+"."+t),l.resolveWith(n,[o.Result]))};return r._.invocationCallbacks[r._.invocationCallbackId.toString()]={scope:n,method:c},r._.invocationCallbackId+=1,e.isEmptyObject(n.state)||(f.S=n.state),r.log("Invoking "+n.hubName+"."+t),r.send(f),l.promise()},_maximizeHubResponse:function(e){return{State:e.S,Result:e.R,Progress:e.P?{Id:e.P.I,Data:e.P.D}:null,Id:e.I,IsHubException:e.H,Error:e.E,StackTrace:e.T,ErrorData:e.D}}},l.fn.init.prototype=l.fn,c.fn=c.prototype=e.connection(),c.fn.init=function(t,n){var r={qs:null,logging:!1,useDefaultPath:!0},i=this;e.extend(r,n),e.signalR.fn.init.call(i,t,r.qs,r.logging),i.proxies={},i._.invocationCallbackId=0,i._.invocationCallbacks={},i.received(function(t){var n,r,o,u,a,f;if(!t)return;typeof t.P!="undefined"?(o=t.P.I.toString(),u=i._.invocationCallbacks[o],u&&u.method.call(u.scope,t)):typeof t.I!="undefined"?(o=t.I.toString(),u=i._.invocationCallbacks[o],u&&(i._.invocationCallbacks[o]=null,delete i._.invocationCallbacks[o],u.method.call(u.scope,t))):(n=this._maximizeClientHubInvocation(t),i.log("Triggering client hub event '"+n.Method+"' on hub '"+n.Hub+"'."),a=n.Hub.toLowerCase(),f=n.Method.toLowerCase(),r=this.proxies[a],e.extend(r.state,n.State),e(r).triggerHandler(s(f),[n.Args]))}),i.error(function(e,t){var n,r;if(!t)return;n=t.I,r=i._.invocationCallbacks[n],r&&(i._.invocationCallbacks[n]=null,delete i._.invocationCallbacks[n],r.method.call(r.scope,{E:e}))}),i.reconnecting(function(){i.transport&&i.transport.name==="webSockets"&&f(i,"Connection started reconnecting before invocation result was received.")}),i.disconnected(function(){f(i,"Connection was disconnected before invocation result was received.")})},c.fn._maximizeClientHubInvocation=function(e){return{Hub:e.H,Method:e.M,Args:e.A,State:e.S}},c.fn._registerSubscribedHubs=function(){var t=this;t._subscribedToHubs||(t._subscribedToHubs=!0,t.starting(function(){var n=[];e.each(t.proxies,function(e){this.hasSubscriptions()&&(n.push({name:e}),t.log("Client subscribed to hub '"+e+"'."))}),n.length===0&&t.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to."),t.data=t.json.stringify(n)}))},c.fn.createHubProxy=function(e){e=e.toLowerCase();var t=this.proxies[e];return t||(t=l(this,e),this.proxies[e]=t),this._registerSubscribedHubs(),t},c.fn.init.prototype=c.fn,e.hubConnection=c}(window.jQuery,window),function(e,t){e.signalR.version="2.1.2"}(window.jQuery),e.$=$}.apply(e,arguments)})}(this),function(e){define("signalr.hubs",["signalr"],function(){return function(){(function(e,t,n){"use strict";function i(t,n){return function(){n.apply(t,e.makeArray(arguments))}}function s(t,n){var r,s,o,u,a;for(r in t)if(t.hasOwnProperty(r)){s=t[r];if(!s.hubName)continue;n?a=s.on:a=s.off;for(o in s.client)if(s.client.hasOwnProperty(o)){u=s.client[o];if(!e.isFunction(u))continue;a.call(s,o,i(s,u))}}}if(typeof e.signalR!="function")throw new Error("SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/js.");var r=e.signalR;e.hubConnection.prototype.createHubProxies=function(){var e={};return this.starting(function(){s(e,!0),this._registerSubscribedHubs()}).disconnected(function(){s(e,!1)}),e.auditHub=this.createHubProxy("auditHub"),e.auditHub.client={},e.auditHub.server={},e.errorHub=this.createHubProxy("errorHub"),e.errorHub.client={},e.errorHub.server={},e.heartbeatHub=this.createHubProxy("heartbeatHub"),e.heartbeatHub.client={},e.heartbeatHub.server={},e},r.hub=e.hubConnection("/signalr",{useDefaultPath:!1}),e.extend(r,r.hub.createHubProxies())})(window.jQuery,window)}.apply(e,arguments)})}(this),function(e){define("highcharts-histogram",["highcharts"],function(){return function(){(function(e){function i(e){return n.pow(10,r(n.log(e)/n.LN10))}function s(){var e=arguments,n,r,i=e.length;for(n=0;n<i;n++){r=e[n];if(r!==t&&r!==null)return r}}function o(e,t,n,r){var i,o;n=s(n,1),i=e/n,t||(t=[1,2,2.5,5,10],r&&r.allowDecimals===!1&&(n===1?t=[1,2,5,10]:n<=.1&&(t=[1/n])));for(o=0;o<t.length;o++){e=t[o];if(i<=(t[o]+(t[o+1]||t[o]))/2)break}return e*=n,e}e.wrap(e.Chart.prototype,"init",function(t,n,r){if(n.chart.type===undefined||n.chart.type===null||n.chart.type.toLowerCase()!=="histogram")return t.apply(this,[n,r]);var s=n.series[0].data,u=s.length,a=Math.ceil(Math.log(u)/Math.LN2+1),f=Number.MAX_VALUE,l=Number.MIN_VALUE;for(var c=0;c<u;c++)f=Math.min(f,s[c]),l=Math.max(l,s[c]);var h=(l-f)/a,p=o(h,null,i(h)),d=Highcharts.Axis.prototype.getLinearTickPositions(p,f,l),v=d.length-1;v<0&&(v=0);var m=d[0],g=d[v],y=new Array(v);for(var b=0;b<v;b++)y[b]=0;var w=v/(g-m),E=m*v/(g-m);for(var c=0;c<u;c++){var b=Math.min(Math.floor(w*s[c]-E),v-1);y[b]++}var S=e.merge({yAxis:{title:{text:""}},plotOptions:{column:{pointPadding:0,groupPadding:0,borderWidth:1,pointInterval:p,pointStart:m+p/2,stacking:"normal"}}},n,{chart:{type:"column",animation:!1},xAxis:{startOnTick:!0,endOnTick:!0},series:[{data:y}],loading:{showDuration:0,hideDuration:0}});t.apply(this,[S,r]),this.series[0].data.forEach(function(e,t){e.histBin=t,e.histFrom=moment.utc(Number((e.x-p/2).toFixed(12))).format("DD/MM/YYYY HH:mm:ss"),e.histTo=moment.utc(Number((e.x+p/2).toFixed(12))).format("DD/MM/YYYY HH:mm:ss")})});var t,n=Math,r=n.floor})(Highcharts)}.apply(e,arguments)})}(this),function(e){define("slick.checkboxselectcolumn",["jquery","slickgrid"],function(){return function(){(function(e){function t(t){function a(e){n=e,i.subscribe(n.onSelectedRowsChanged,l).subscribe(n.onClick,h).subscribe(n.onHeaderClick,d).subscribe(n.onKeyDown,c)}function f(){i.unsubscribeAll()}function l(e,t){var r=n.getSelectedRows(),i={},o,a;for(a=0;a<r.length;a++)o=r[a],i[o]=!0,i[o]!==s[o]&&(n.invalidateRow(o),delete s[o]);for(a in s)n.invalidateRow(a);s=i,n.render(),r.length&&r.length==n.getDataLength()?n.updateColumnHeader(u.columnId,"<input type='checkbox' checked='checked'>",u.toolTip):n.updateColumnHeader(u.columnId,"<input type='checkbox'>",u.toolTip)}function c(e,t){e.which==32&&n.getColumns()[t.cell].id===u.columnId&&((!n.getEditorLock().isActive()||n.getEditorLock().commitCurrentEdit())&&p(t.row),e.preventDefault(),e.stopImmediatePropagation())}function h(t,r){if(n.getColumns()[r.cell].id===u.columnId&&e(t.target).is(":checkbox")){if(n.getEditorLock().isActive()&&!n.getEditorLock().commitCurrentEdit()){t.preventDefault(),t.stopImmediatePropagation();return}p(r.row),t.stopPropagation(),t.stopImmediatePropagation()}}function p(t){s[t]?n.setSelectedRows(e.grep(n.getSelectedRows(),function(e){return e!=t})):n.setSelectedRows(n.getSelectedRows().concat(t))}function d(t,r){if(r.column.id==u.columnId&&e(t.target).is(":checkbox")){if(n.getEditorLock().isActive()&&!n.getEditorLock().commitCurrentEdit()){t.preventDefault(),t.stopImmediatePropagation();return}if(e(t.target).is(":checked")){var i=[];for(var s=0;s<n.getDataLength();s++)i.push(s);n.setSelectedRows(i)}else n.setSelectedRows([]);t.stopPropagation(),t.stopImmediatePropagation()}}function v(){return{id:u.columnId,name:"<input type='checkbox'>",toolTip:u.toolTip,field:"sel",width:u.width,resizable:!1,sortable:!1,cssClass:u.cssClass,formatter:m}}function m(e,t,n,r,i){return i?s[e]?"<input type='checkbox' checked='checked'>":"<input type='checkbox'>":null}var n,r=this,i=new Slick.EventHandler,s={},o={columnId:"_checkbox_selector",cssClass:null,toolTip:"Select/Deselect All",width:30},u=e.extend(!0,{},o,t);e.extend(this,{init:a,destroy:f,getColumnDefinition:v})}e.extend(!0,window,{Slick:{CheckboxSelectColumn:t}})})(jQuery)}.apply(e,arguments)})}(this),function(e){define("slick.rowselectionmodel",["jquery","slickgrid"],function(){return function(){(function(e){function t(t){function f(r){u=e.extend(!0,{},a,t),n=r,s.subscribe(n.onActiveCellChanged,c(b)),s.subscribe(n.onKeyDown,c(w)),s.subscribe(n.onClick,c(E))}function l(){s.unsubscribeAll()}function c(e){return function(){o||(o=!0,e.apply(this,arguments),o=!1)}}function h(e){var t=[];for(var n=0;n<e.length;n++)for(var r=e[n].fromRow;r<=e[n].toRow;r++)t.push(r);return t}function p(e){var t=[],r=n.getColumns().length-1;for(var i=0;i<e.length;i++)t.push(new Slick.Range(e[i],0,e[i],r));return t}function d(e,t){var n,r=[];for(n=e;n<=t;n++)r.push(n);for(n=t;n<e;n++)r.push(n);return r}function v(){return h(r)}function m(e){g(p(e))}function g(e){r=e,i.onSelectedRangesChanged.notify(r)}function y(){return r}function b(e,t){u.selectActiveRow&&t.row!=null&&g([new Slick.Range(t.row,0,t.row,n.getColumns().length-1)])}function w(e){var t=n.getActiveCell();if(t&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.which==38||e.which==40)){var i=v();i.sort(function(e,t){return e-t}),i.length||(i=[t.row]);var s=i[0],o=i[i.length-1],u;e.which==40?u=t.row<o||s==o?++o:++s:u=t.row<o?--o:--s,u>=0&&u<n.getDataLength()&&(n.scrollRowIntoView(u),r=p(d(s,o)),g(r)),e.preventDefault(),e.stopPropagation()}}function E(t){var i=n.getCellFromEvent(t);if(!i||!n.canCellBeActive(i.row,i.cell))return!1;var s=h(r),o=e.inArray(i.row,s);if(!t.ctrlKey&&!t.shiftKey&&!t.metaKey)return!1;if(n.getOptions().multiSelect)if(o===-1&&(t.ctrlKey||t.metaKey))s.push(i.row),n.setActiveCell(i.row,i.cell);else if(o!==-1&&(t.ctrlKey||t.metaKey))s=e.grep(s,function(e,t){return e!==i.row}),n.setActiveCell(i.row,i.cell);else if(s.length&&t.shiftKey){var u=s.pop(),a=Math.min(i.row,u),f=Math.max(i.row,u);s=[];for(var l=a;l<=f;l++)l!==u&&s.push(l);s.push(u),n.setActiveCell(i.row,i.cell)}return r=p(s),g(r),t.stopImmediatePropagation(),!0}var n,r=[],i=this,s=new Slick.EventHandler,o,u,a={selectActiveRow:!0};e.extend(this,{getSelectedRows:v,setSelectedRows:m,getSelectedRanges:y,setSelectedRanges:g,init:f,destroy:l,onSelectedRangesChanged:new Slick.Event})}e.extend(!0,window,{Slick:{RowSelectionModel:t}})})(jQuery)}.apply(e,arguments)})}(this),require.config({urlArgs:"version=0.0.1",paths:{jquery:"bower_components/jquery/dist/jquery",underscore:"bower_components/underscore/underscore",backbone:"bower_components/backbone/backbone",bootstrap:"bower_components/bootstrap/dist/js/bootstrap",toastr:"bower_components/toastr/toastr","backbone.stickit":"bower_components/backbone.stickit/backbone.stickit",backgrid:"bower_components/backgrid/lib/backgrid",select2:"bower_components/select2/select2","backbone-pageable":"bower_components/backbone-pageable/lib/backbone-pageable","backbone.paginator":"bower_components/backbone.paginator/lib/backbone.paginator","backgrid-filter":"bower_components/backgrid-filter/backgrid-filter","backgrid-paginator":"bower_components/backgrid-paginator/backgrid-paginator",moment:"bower_components/moment/moment",vis:"bower_components/vis/dist/vis",datetimepicker:"app/lib/bootstrap-datetimepicker",highchartsMain:"bower_components/highcharts/highcharts",highcharts:"bower_components/highcharts/themes/grid-light","signalr.hubs":"app/lib/signalr.hubs",signalr:"bower_components/signalr/jquery.signalR",slickgrid:"bower_components/slickgrid/slick.grid","jquery.event.drag":"app/lib/jquery.event.drag-2.2","slick.core":"bower_components/slickgrid/slick.core","highcharts-histogram":"app/lib/highcharts-histogram","slick.checkboxselectcolumn":"bower_components/slickgrid/plugins/slick.checkboxselectcolumn","slick.rowselectionmodel":"bower_components/slickgrid/plugins/slick.rowselectionmodel"},shim:{"highcharts-histogram":{deps:["highcharts"]},"slick.core":{deps:["jquery"]},"jquery.event.drag":{deps:["jquery"]},slickgrid:{deps:["jquery","jquery.event.drag","slick.core"],exports:"Slick"},"slick.checkboxselectcolumn":{deps:["jquery","slickgrid"]},"slick.rowselectionmodel":{deps:["jquery","slickgrid"]},highchartsMain:{exports:"Highcharts",deps:["jquery"]},highcharts:{exports:"Highcharts",deps:["jquery","highchartsMain"]},"backbone-pageable":{deps:["backbone","underscore","jquery"]},"backgrid-filter":{deps:["backbone","underscore","jquery","backgrid"]},"backgrid-paginator":{deps:["backbone","underscore","jquery","backgrid"]},select2:{deps:["jquery"]},backgrid:{deps:["jquery","backbone","underscore"],exports:"Backgrid"},bootstrap:{deps:["jquery"]},jquery:{deps:[],exports:"$"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},underscore:{exports:"_"},"backbone.stickit":{deps:["backbone","underscore","jquery"]},signalr:{deps:["jquery"],exports:"$"},"signalr.hubs":{deps:["signalr"]}},wrapShim:!0,waitSeconds:200}),require(["backbone","jquery","toastr","app/routers/main","highcharts","bootstrap","backgrid-paginator","app/helpers/backbone.extensions","app/helpers/underscore.extensions","app/helpers/backgrid.extensions","vis","datetimepicker","backbone.stickit","signalr","signalr.hubs","slickgrid","highcharts-histogram","slick.checkboxselectcolumn","slick.rowselectionmodel"],function(e,t,n,r,i){e.Application={},e.Application.Router=new r,e.Hubs={AuditHub:t.connection.auditHub,ErrorHub:t.connection.errorHub,HeartbeatHub:t.connection.heartbeatHub},e.Hubs.AuditHub.client.init=function(){},e.Hubs.ErrorHub.client.init=function(){},e.Hubs.HeartbeatHub.client.init=function(){},i.setOptions({plotOptions:{series:{animation:!1}},credits:{enabled:!1}}),n.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-right",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},t.connection.hub.start().done(function(){e.history.start()})}),define("main",function(){})})();